(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[7517],{73905:function(t,e,n){"use strict";n.d(e,{m:function(){return i},y:function(){return m}});var i,o=n(97530),s=n(68420),r=n(27344),a=n(90306),u=n(50596),c=n(2991),l=n.n(c),d=n(86359),h=n(71370),f=n(67294),v=n(65927),g=n(80967),p=n(40753),y=n(85893);!function(t){t[t.NEGATIVE=0]="NEGATIVE",t[t.NEUTRAL=1]="NEUTRAL",t[t.POSITIVE=2]="POSITIVE"}(i||(i={}));var m=function(t){(0,a.Z)(n,t);var e=(0,u.Z)(n);function n(){return(0,s.Z)(this,n),e.apply(this,arguments)}return(0,r.Z)(n,[{key:"render",value:function(){var t,e,i=this.props,s=i.targets,r=i.notes,a=i.data,u=i.onGoto,c=i.headerTitle;return(0,y.jsxs)(v.Z,{compact:!0,unstackable:!0,celled:!0,children:[(0,y.jsx)(v.Z.Header,{children:(0,y.jsxs)(v.Z.Row,{children:[(0,y.jsx)(v.Z.HeaderCell,{collapsing:!0,children:(0,y.jsx)("strong",{children:(0,y.jsx)(d.Trans,{id:"core.ui.rotation-table.header.time",defaults:"Time"})})}),l()(t=s||[]).call(t,(function(t,e){return(0,y.jsx)(v.Z.HeaderCell,{textAlign:"center",collapsing:!0,children:(0,y.jsx)("strong",{children:t.header})},"target_header_".concat(e))})),(0,y.jsx)(v.Z.HeaderCell,{children:(0,y.jsx)("strong",{children:c||(0,y.jsx)(d.Trans,{id:"core.ui.rotation-table.header.rotation",defaults:"Rotation"})})}),l()(e=r||[]).call(e,(function(t,e){return(0,y.jsx)(v.Z.HeaderCell,{textAlign:"center",collapsing:!0,children:(0,y.jsx)("strong",{children:t.header})},"note_header_".concat(e))}))]})}),(0,y.jsx)(v.Z.Body,{children:l()(a).call(a,(function(t){return(0,y.jsx)(n.Row,(0,o.Z)({onGoto:u,targets:s||[],notes:r||[]},t),t.start)}))})]})}}],[{key:"defaultTargetComparator",value:function(t,e){return(0,p.$K)(e)?t>=e?i.POSITIVE:i.NEGATIVE:i.NEUTRAL}}]),n}(f.Component);m.targetAccessorResolver=function(t,e){return"string"==typeof e.accessor&&null!=t.targetsData?t.targetsData[e.accessor]:"function"==typeof e.accessor?e.accessor(t):{actual:0,expected:0}},m.notesAccessorResolver=function(t,e){return"string"==typeof e.accessor&&null!=t.notesMap?t.notesMap[e.accessor]:"function"==typeof e.accessor?e.accessor(t):null},m.TargetCell=function(t){var e=t.actual,n=t.expected,o=t.targetComparator;void 0===o&&(o=m.defaultTargetComparator);var s=o(e,n);return(0,y.jsxs)(v.Z.Cell,{textAlign:"center",positive:s===i.POSITIVE,negative:s===i.NEGATIVE,children:[e,"/",void 0===n?"-":n]})},m.Row=function(t){var e,n,i=t.onGoto,s=t.targets,r=t.notes,a=t.notesMap,u=t.start,c=t.end,d=t.targetsData,f=t.rotation;return(0,y.jsxs)(v.Z.Row,{children:[(0,y.jsxs)(v.Z.Cell,{textAlign:"center",children:[(0,y.jsx)("span",{style:{marginRight:5},children:(0,p.LU)(u,{secondPrecision:0})}),"function"==typeof i&&(0,y.jsx)(g.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return i(u,c)}})]}),l()(e=l()(s).call(s,(function(t){return m.targetAccessorResolver({start:u,end:c,targetsData:d,rotation:f},t)}))).call(e,(function(t,e){return(0,y.jsx)(m.TargetCell,(0,o.Z)({},t),"target_".concat(e))})),(0,y.jsx)(v.Z.Cell,{children:(0,y.jsx)(h.Z,{events:f})}),l()(n=l()(r).call(r,(function(t){return m.notesAccessorResolver({start:u,end:c,targetsData:d,notesMap:a,rotation:f},t)}))).call(n,(function(t,e){return(0,y.jsx)(v.Z.Cell,{textAlign:"center",children:t},"notes_".concat(e))}))]})}},19914:function(t,e,n){"use strict";n.d(e,{A:function(){return c}});var i=n(68420),o=n(27344),s=n(10928),r=n.n(s),a=n(72119),u=n.n(a),c=function(){function t(e){(0,i.Z)(this,t),this.entries=[],this.dataInitializer=void 0,this.dataInitializer=e}return(0,o.Z)(t,[{key:"getCurrent",value:function(){var t=r()(u()(this));if(null!=t&&null==t.end)return t}},{key:"doIfOpen",value:function(t){var e=this.getCurrent();null!=e&&t(e.data)}},{key:"openNew",value:function(t){return this.closeCurrent(t),this.open(t)}},{key:"getCurrentOrOpenNew",value:function(t){var e;return null!==(e=this.getCurrent())&&void 0!==e?e:this.open(t)}},{key:"closeCurrent",value:function(t){var e=this.getCurrent();null!=e&&(e.end=t)}},{key:"reopenLastEntry",value:function(){var t=r()(u()(this));return null!=t&&(t.end=void 0),t}},{key:"endOfLastEntry",value:function(){var t=r()(u()(this));if(null!=t)return t.end}},{key:"open",value:function(t){var e={start:t,data:this.dataInitializer()};return u()(this).push(e),e}}]),t}()},37517:function(t,e,n){"use strict";n.d(e,{jd:function(){return m},xl:function(){return E.x},Np:function(){return b},np:function(){return C},nZ:function(){return y},a_:function(){return T},qt:function(){return W},Yy:function(){return G},ug:function(){return S},Kb:function(){return p}});var i=n(68420),o=n(27344),s=n(32366),r=n.n(s),a=n(2991),u=n.n(a),c=n(20116),l=n.n(c),d=n(78580),h=n.n(d),f=n(86359),v=(n(67294),n(57746)),g=n(85893);function p(t,e,n,i){return Math.min(t,Math.ceil(((null!=i?i:n)-n)/e))}var y=function(){function t(e){var n;(0,i.Z)(this,t),this.expectedGcds=void 0,this.globalCooldown=void 0,this.hasStacks=void 0,this.suggestionIcon=void 0,this.suggestionContent=void 0,this.suggestionWindowName=void 0,this.severityTiers=void 0,this.adjustCount=void 0,this.expectedGcds=e.expectedGcds,this.globalCooldown=e.globalCooldown,this.hasStacks=e.hasStacks,this.suggestionIcon=e.suggestionIcon,this.suggestionContent=e.suggestionContent,this.suggestionWindowName=e.suggestionWindowName,this.severityTiers=e.severityTiers,this.adjustCount=null!==(n=e.adjustCount)&&void 0!==n?n:function(){return 0}}return(0,o.Z)(t,[{key:"suggest",value:function(t){var e=this,n=r()(t).call(t,(function(t,n){return t+e.calculateMissingGcdsForWindow(n)}),0);return new v.eg({icon:this.suggestionIcon,content:this.suggestionContent,tiers:this.severityTiers,value:n,why:(0,g.jsx)(f.Trans,{id:"core.buffwindow.suggestions.missedgcd.why",defaults:"{missedGCDs, plural, one {# GCD was} other {# GCDs were}} missed during {0} windows.",values:{0:this.suggestionWindowName,missedGCDs:n}})})}},{key:"output",value:function(t){var e=this;return{format:"table",header:{header:(0,g.jsx)(f.Trans,{id:"core.buffwindow.table.header.gcds",defaults:"GCDs"}),accessor:"missedgcd"},rows:u()(t).call(t,(function(t){return{actual:e.countGcdsInWindow(t),expected:e.calculateExpectedGcdsForWindow(t)}}))}}},{key:"calculateMissingGcdsForWindow",value:function(t){var e=this.calculateExpectedGcdsForWindow(t),n=this.countGcdsInWindow(t);return Math.max(0,e-n)}},{key:"calculateExpectedGcdsForWindow",value:function(t){var e=t.start;return this.hasStacks||(e+=250),p(this.expectedGcds,this.globalCooldown.getDuration(),e,t.end)+this.adjustCount(t)}},{key:"countGcdsInWindow",value:function(t){var e;return l()(e=t.data).call(e,(function(t){return t.action.onGcd})).length}}]),t}(),m=function(){function t(e){var n;(0,i.Z)(this,t),this.expectedGcdCount=void 0,this.allowedGcds=void 0,this.globalCooldown=void 0,this.suggestionIcon=void 0,this.suggestionContent=void 0,this.suggestionWindowName=void 0,this.severityTiers=void 0,this.adjustCount=void 0,this.expectedGcdCount=e.expectedGcdCount,this.allowedGcds=e.allowedGcds,this.globalCooldown=e.globalCooldown,this.suggestionIcon=e.suggestionIcon,this.suggestionContent=e.suggestionContent,this.suggestionWindowName=e.suggestionWindowName,this.severityTiers=e.severityTiers,this.adjustCount=null!==(n=e.adjustCount)&&void 0!==n?n:function(){return 0}}return(0,o.Z)(t,[{key:"suggest",value:function(t){var e=this,n=r()(t).call(t,(function(t,n){return t+e.calculateBadGcdsForWindow(n)}),0);return new v.eg({icon:this.suggestionIcon,content:this.suggestionContent,tiers:this.severityTiers,value:n,why:(0,g.jsx)(f.Trans,{id:"core.buffwindow.suggestions.badgcd.why",defaults:"{invalidGCDs, plural, one {# incorrect GCD was} other {# incorrect GCDs were}} used during {0} windows.",values:{0:this.suggestionWindowName,invalidGCDs:n}})})}},{key:"output",value:function(t){var e=this;return{format:"table",header:{header:(0,g.jsx)("img",{src:this.suggestionIcon,alt:"",style:{height:"20px"}}),accessor:"badgcd"},rows:u()(t).call(t,(function(t){return{actual:e.countAllowedGcdsInWindow(t),expected:e.calculateExpectedGcdsForWindow(t)}}))}}},{key:"calculateBadGcdsForWindow",value:function(t){var e,n=this;return l()(e=t.data).call(e,(function(t){var e;return t.action.onGcd&&!h()(e=n.allowedGcds).call(e,t.action.id)})).length}},{key:"calculateExpectedGcdsForWindow",value:function(t){return p(this.expectedGcdCount,this.globalCooldown.getDuration(),t.start,t.end)+this.adjustCount(t)}},{key:"countAllowedGcdsInWindow",value:function(t){var e,n=this;return l()(e=t.data).call(e,(function(t){var e;return t.action.onGcd&&h()(e=n.allowedGcds).call(e,t.action.id)})).length}}]),t}(),w=n(97530),x=n(9263),k=n(73905),C=function(){function t(e){var n,o;(0,i.Z)(this,t),this.expectedActions=void 0,this.suggestionIcon=void 0,this.suggestionContent=void 0,this.suggestionWindowName=void 0,this.severityTiers=void 0,this.adjustCount=void 0,this.adjustOutcome=void 0,this.expectedActions=e.expectedActions,this.suggestionIcon=e.suggestionIcon,this.suggestionContent=e.suggestionContent,this.suggestionWindowName=e.suggestionWindowName,this.severityTiers=e.severityTiers,this.adjustCount=null!==(n=e.adjustCount)&&void 0!==n?n:function(){return 0},this.adjustOutcome=null!==(o=e.adjustOutcome)&&void 0!==o?o:function(){}}return(0,o.Z)(t,[{key:"suggest",value:function(t){var e=this,n=r()(t).call(t,(function(t,n){var i;return t+r()(i=e.expectedActions).call(i,(function(t,i){var o=e.countUsed(n,i),s=e.determineExpected(n,i),r=e.adjustOutcome(n,i);return t+(null!=r&&r(o,s)!==k.m.NEGATIVE?0:Math.max(0,s-o))}),0)}),0);return new v.eg({icon:this.suggestionIcon,content:this.suggestionContent,tiers:this.severityTiers,value:n,why:(0,g.jsx)(f.Trans,{id:"core.buffwindow.suggestions.trackedaction.why",defaults:"{missedActions, plural, one {# use of a recommended action was} other {# uses of recommended actions were}} missed during {0} windows.",values:{0:this.suggestionWindowName,missedActions:n}})})}},{key:"actionHeader",value:function(t){return(0,g.jsx)(x.vm,(0,w.Z)({showName:!1},t.action))}},{key:"output",value:function(t){var e,n=this;return u()(e=this.expectedActions).call(e,(function(e){return{format:"table",header:{header:n.actionHeader(e),accessor:e.action.name},rows:u()(t).call(t,(function(t){return{actual:n.countUsed(t,e),expected:n.determineExpected(t,e),targetComparator:n.adjustOutcome(t,e)}}))}}))}},{key:"countUsed",value:function(t,e){var n;return l()(n=t.data).call(n,(function(t){return t.action.id===e.action.id})).length}},{key:"determineExpected",value:function(t,e){return e.expectedPerWindow+this.adjustCount(t,e)}}]),t}(),j=n(99021),Z=n(8804),A=n.n(Z),b=function(){function t(e){var n,o;(0,i.Z)(this,t),this.expectedActionGroups=void 0,this.suggestionIcon=void 0,this.suggestionContent=void 0,this.suggestionWindowName=void 0,this.severityTiers=void 0,this.adjustCount=void 0,this.adjustOutcome=void 0,this.expectedActionGroups=e.expectedActionGroups,this.suggestionIcon=e.suggestionIcon,this.suggestionContent=e.suggestionContent,this.suggestionWindowName=e.suggestionWindowName,this.severityTiers=e.severityTiers,this.adjustCount=null!==(n=e.adjustCount)&&void 0!==n?n:function(){return 0},this.adjustOutcome=null!==(o=e.adjustOutcome)&&void 0!==o?o:function(){}}return(0,o.Z)(t,[{key:"suggest",value:function(t){var e=this,n=r()(t).call(t,(function(t,n){var i;return t+r()(i=e.expectedActionGroups).call(i,(function(t,i){var o=e.countUsed(n,i),s=e.determineExpected(n,i),r=e.adjustOutcome(n,i);return t+(null!=r&&r(o,s)!==k.m.NEGATIVE?0:Math.max(0,s-o))}),0)}),0);return new v.eg({icon:this.suggestionIcon,content:this.suggestionContent,tiers:this.severityTiers,value:n,why:(0,g.jsx)(f.Trans,{id:"core.buffwindow.suggestions.trackedaction.why",defaults:"{missedActions, plural, one {# use of a recommended action was} other {# uses of recommended actions were}} missed during {0} windows.",values:{0:this.suggestionWindowName,missedActions:n}})})}},{key:"output",value:function(t){var e,n=this;return u()(e=this.expectedActionGroups).call(e,(function(e){var i,o,s,r=u()(i=e.actions).call(i,(function(t,e){return(0,g.jsxs)(g.Fragment,{children:[e>0&&(0,g.jsx)(g.Fragment,{children:" / "}),(0,g.jsx)(x.vm,(0,w.Z)({showName:!1},t),e)]})}));return{format:"table",header:{header:(0,g.jsx)(g.Fragment,{children:r}),accessor:null!==(o=null===(s=A()(e.actions))||void 0===s?void 0:s.name)&&void 0!==o?o:""},rows:u()(t).call(t,(function(t){return{actual:n.countUsed(t,e),expected:n.determineExpected(t,e),targetComparator:n.adjustOutcome(t,e)}}))}}))}},{key:"countUsed",value:function(t,e){var n;return l()(n=t.data).call(n,(function(t){var n,i=(0,j.Z)(e.actions);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(t.action.id===o.id)return!0}}catch(t){i.e(t)}finally{i.f()}return!1})).length}},{key:"determineExpected",value:function(t,e){return e.expectedPerWindow+this.adjustCount(t,e)}}]),t}(),T=function(){function t(e){var n;(0,i.Z)(this,t),this.expectedActions=void 0,this.suggestionIcon=void 0,this.suggestionContent=void 0,this.suggestionWindowName=void 0,this.severityTiers=void 0,this.adjustCount=void 0,this.expectedActions=e.expectedActions,this.suggestionIcon=e.suggestionIcon,this.suggestionContent=e.suggestionContent,this.suggestionWindowName=e.suggestionWindowName,this.severityTiers=e.severityTiers,this.adjustCount=null!==(n=e.adjustCount)&&void 0!==n?n:function(){return 0}}return(0,o.Z)(t,[{key:"suggest",value:function(t){var e=this,n=r()(t).call(t,(function(t,n){var i;return t+r()(i=e.expectedActions).call(i,(function(t,i){return t+Math.max(0,e.countUsed(n,i)-(i.expectedPerWindow+e.adjustCount(n,i)))}),0)}),0);return new v.eg({icon:this.suggestionIcon,content:this.suggestionContent,tiers:this.severityTiers,value:n,why:(0,g.jsx)(f.Trans,{id:"core.buffwindow.suggestions.trackedbadaction.why",defaults:"{badActions, plural, one {# use of} other {# uses of}} actions that should be avoided during {0} windows.",values:{0:this.suggestionWindowName,badActions:n}})})}},{key:"output",value:function(){}},{key:"countUsed",value:function(t,e){var n;return l()(n=t.data).call(n,(function(t){return t.action.id===e.action.id})).length}}]),t}(),G=function(){function t(e){(0,i.Z)(this,t),this.affectedPlayers=void 0,this.expectedCount=void 0,this.affectedPlayers=e.affectedPlayers,this.expectedCount=e.expectedCount}return(0,o.Z)(t,[{key:"suggest",value:function(){}},{key:"output",value:function(t){var e=this,n=u()(t).call(t,(function(t){return e.affectedPlayers(t)}));return{format:"table",header:{header:(0,g.jsx)(f.Trans,{id:"core.raidbuffwindow.table.header.players",defaults:"Players Buffed"}),accessor:"buffed"},rows:u()(n).call(n,(function(t){return{actual:t,expected:e.expectedCount}}))}}}]),t}(),W=function(){function t(){(0,i.Z)(this,t),this.header=void 0}return(0,o.Z)(t,[{key:"suggest",value:function(t){}},{key:"output",value:function(t){var e=this;return{format:"notes",header:this.header,rows:u()(t).call(t,(function(t){return e.generateNotes(t)}))}}}]),t}(),E=(n(49933),n(27596)),I=n(18527),H=n(3362),N=n(90306),O=n(50596),R=n(77766),D=n.n(R),P=n(40753),F=n(74489),S=function(t){(0,N.Z)(n,t);var e=(0,O.Z)(n);function n(){var t,o;(0,i.Z)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(o=e.call.apply(e,D()(t=[this]).call(t,r))).raidBuffApplications=new Array,o.expectedCount=0,o}return(0,o.Z)(n,[{key:"initialise",value:function(){var t,e,i,o,s,r=this;(0,I.Z)((0,H.Z)(n.prototype),"initialise",this).call(this);var a=u()(t=l()(e=this.parser.pull.actors).call(e,(function(t){return t.playerControlled}))).call(t,(function(t){return t.id}));this.expectedCount=a.length;var c=u()(i=l()(o=this.parser.pull.actors).call(o,(function(t){return t.owner===r.parser.actor||t===r.parser.actor}))).call(i,(function(t){return t.id})),d=(0,F.hX)().type("statusApply").status((0,F.kw)(u()(s=(0,P.rY)(this.buffStatus)).call(s,(function(t){return t.id}))));this.addEventHook(d.source((0,F.kw)(c)).target((0,F.kw)(a)),this.onRaidBuffApply),this.addEventHook(d.source((0,F.jg)(c)).target(this.parser.actor.id),this.maybeReOpenPreviousWindow),this.addEvaluator(new G({expectedCount:this.expectedCount,affectedPlayers:this.affectedPlayers.bind(this)}))}},{key:"onRaidBuffApply",value:function(t){this.raidBuffApplications.push(t)}},{key:"affectedPlayers",value:function(t){var e,n,i=null!==(e=null==t?void 0:t.end)&&void 0!==e?e:t.start;return l()(n=this.raidBuffApplications).call(n,(function(e){return t.start<=e.timestamp&&e.timestamp<=i})).length}},{key:"maybeReOpenPreviousWindow",value:function(t){if(this.history.endOfLastEntry()===t.timestamp){var e=this.history.reopenLastEntry();null!=e&&this.startWindowAndTimeout(e.start)}}}]),n}(E.x)},49933:function(t,e,n){"use strict";n.d(e,{l:function(){return P}});var i,o,s,r,a,u,c,l=n(97530),d=n(99021),h=n(23257),f=n(68420),v=n(27344),g=n(5281),p=n(90306),y=n(50596),m=n(300),w=n(77766),x=n.n(w),k=n(72119),C=n.n(k),j=n(2991),Z=n.n(j),A=n(20116),b=n.n(A),T=n(73905),G=n(76704),W=n(56611),E=(n(67294),n(40753)),I=n(28683),H=n(74489),N=n(73947),O=n(52250),R=n(19914),D=n(85893),P=(i=Reflect.metadata("design:type",N.V),o=Reflect.metadata("design:type",O.ZP),s=Reflect.metadata("design:type",W.TY),r=function(t){(0,p.Z)(n,t);var e=(0,y.Z)(n);function n(){var t,i;(0,f.Z)(this,n);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=e.call.apply(e,x()(t=[this]).call(t,s)),(0,h.Z)(i,"data",a,(0,g.Z)(i)),(0,h.Z)(i,"suggestions",u,(0,g.Z)(i)),(0,h.Z)(i,"timeline",c,(0,g.Z)(i)),i.history=new R.A((function(){return[]})),i.eventFilter=(0,H.hX)().source(i.parser.actor.id).type("action"),i.eventHook=void 0,i.evaluators=[],i.rotationTableHeader=void 0,i.prependMessages=void 0,i}return(0,v.Z)(n,[{key:"addEvaluator",value:function(t){this.evaluators.push(t)}},{key:"onWindowStart",value:function(t){null==this.eventHook&&(this.eventHook=this.addEventHook(this.eventFilter,this.onWindowAction)),this.history.getCurrentOrOpenNew(t)}},{key:"onWindowEnd",value:function(t){null!=this.eventHook&&(this.removeEventHook(this.eventHook),this.eventHook=void 0),this.history.closeCurrent(t)}},{key:"onWindowAction",value:function(t){this.history.doIfOpen((function(e){return e.push(t)}))}},{key:"ignoreActions",value:function(t){this.eventFilter=(0,H.hX)().source(this.parser.actor.id).action((0,H.jg)(t)).type("action")}},{key:"trackOnlyActions",value:function(t){this.eventFilter=(0,H.hX)().source(this.parser.actor.id).action((0,H.kw)(t)).type("action")}},{key:"setEventFilter",value:function(t){this.eventFilter=t}},{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t=this;this.onWindowEnd(this.parser.pull.timestamp+this.parser.pull.duration);var e=this.mapHistoryActions();this.evaluators.forEach((function(n){var i=n.suggest(e);null!=i&&t.suggestions.add(i)}))}},{key:"output",value:function(){var t,e,n,i=this;if(0!==C()(this.history).length){var o,s=this.mapHistoryActions(),r=[],a=(0,d.Z)(this.evaluators);try{for(a.s();!(o=a.n()).done;){var u=o.value.output(s);if(null!=u){var c,l=(0,d.Z)((0,E.rY)(u));try{for(l.s();!(c=l.n()).done;){var h=c.value;r.push(h)}}catch(t){l.e(t)}finally{l.f()}}}}catch(t){a.e(t)}finally{a.f()}var f=Z()(t=b()(r).call(r,(function(t){return"table"===t.format}))).call(t,(function(t){return t.header})),v=Z()(e=b()(r).call(r,(function(t){return"notes"===t.format}))).call(e,(function(t){return t.header})),g=Z()(n=C()(this.history)).call(n,(function(t,e){var n,o,s={},a={};return r.forEach((function(t){if("string"==typeof t.header.accessor){var n=t.header.accessor;"table"===t.format?s[n]=t.rows[e]:a[n]=t.rows[e]}})),{start:t.start-i.parser.pull.timestamp,end:(null!==(n=t.end)&&void 0!==n?n:t.start)-i.parser.pull.timestamp,targetsData:s,rotation:Z()(o=t.data).call(o,(function(t){return{action:t.action}})),notesMap:a}}));return(0,D.jsxs)(D.Fragment,{children:[this.prependMessages,(0,D.jsx)(T.y,{targets:f,data:g,notes:v,onGoto:this.timeline.show,headerTitle:this.rotationTableHeader})]})}}},{key:"mapHistoryActions",value:function(){var t,e=this;return Z()(t=C()(this.history)).call(t,(function(t){var n,i;return{start:t.start,end:t.end,data:b()(n=Z()(i=t.data).call(i,(function(t){var n=e.data.getAction(t.action);if(null!=n)return(0,l.Z)((0,l.Z)({},t),{},{action:n})}))).call(n,E.$K)}}))}}]),n}(I.qk),a=(0,m.Z)(r.prototype,"data",[G.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,m.Z)(r.prototype,"suggestions",[G.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),c=(0,m.Z)(r.prototype,"timeline",[G.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r)},27596:function(t,e,n){"use strict";n.d(e,{x:function(){return x}});var i=n(41420),o=n(68420),s=n(27344),r=n(18527),a=n(3362),u=n(90306),c=n(50596),l=n(6162),d=n.n(l),h=n(77766),f=n.n(h),v=n(2991),g=n.n(v),p=n(20116),y=n.n(p),m=n(40753),w=n(74489),x=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(){var t,i;(0,o.Z)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(i=e.call.apply(e,f()(t=[this]).call(t,r))).buffStatus=void 0,i.buffDuration=void 0,i.durationHook=void 0,i}return(0,s.Z)(n,[{key:"isRushedEndOfPullWindow",value:function(t){var e;return(null!==(e=this.buffDuration)&&void 0!==e?e:0)>=this.parser.pull.timestamp+this.parser.pull.duration-t.start}},{key:"initialise",value:function(){var t,e,o,s,u,c,l,h=this;(0,r.Z)((0,a.Z)(n.prototype),"initialise",this).call(this);var v=g()(t=y()(e=this.parser.pull.actors).call(e,(function(t){return t.team!==h.parser.actor.team}))).call(t,(function(t){return t.id})),p=f()(o=[this.parser.actor.id]).call(o,(0,i.Z)(v)),x=g()(s=y()(u=this.parser.pull.actors).call(u,(function(t){return t.owner===h.parser.actor||t===h.parser.actor}))).call(s,(function(t){return t.id})),k=(0,w.hX)().source((0,w.kw)(x)).target((0,w.kw)(p)).status((0,w.kw)(g()(c=(0,m.rY)(this.buffStatus)).call(c,(function(t){return t.id}))));this.addEventHook(k.type("statusApply"),this.onStatusApply),this.addEventHook(k.type("statusRemove"),this.onStatusRemove),this.buffDuration=d()(g()(l=(0,m.rY)(this.buffStatus)).call(l,(function(t){return t.duration})))}},{key:"onStatusApply",value:function(t){this.startWindowAndTimeout(t.timestamp)}},{key:"startWindowAndTimeout",value:function(t){this.onWindowStart(t),null!=this.buffDuration&&(null!=this.durationHook&&this.removeTimestampHook(this.durationHook),this.durationHook=this.addTimestampHook(t+this.buffDuration+1e3,this.endWindowByTime))}},{key:"onStatusRemove",value:function(t){this.onWindowEnd(t.timestamp),null!=this.durationHook&&(this.removeTimestampHook(this.durationHook),this.durationHook=void 0)}},{key:"endWindowByTime",value:function(t){this.onWindowEnd(t.timestamp),this.durationHook=void 0}}]),n}(n(49933).l)},8804:function(t,e,n){t.exports=n(91175)},91175:function(t){t.exports=function(t){return t&&t.length?t[0]:void 0}},6162:function(t,e,n){var i=n(56029),o=n(53325),s=n(6557);t.exports=function(t){return t&&t.length?i(t,s,o):void 0}}}]);
//# sourceMappingURL=7517.02ea5696.js.map
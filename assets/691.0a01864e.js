(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[691],{71370:function(t,e,n){"use strict";n.d(e,{Z:function(){return w}});var r=n(97530),i=n(44845),a=n(68420),s=n(27344),o=n(90306),l=n(50596),u=n(2991),c=n.n(u),d=n(94184),h=n.n(d),f=n(9263),m=n(43199),v=n(95859),p=n(67294),g=n(37487),y=n(85893),w=function(t){(0,o.Z)(n,t);var e=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"getActionId",value:function(t){return null!=t.action?t.action:null!=t.cause&&"action"===t.cause.type?t.cause.action:void 0}},{key:"render",value:function(){var t=this,e=this.props.events;return(0,y.jsx)("div",{className:"Rotation-module_container__2xmai",children:c()(e).call(e,(function(e,n){var a=t.getActionId(e),s=(0,m.l)(v.ZP,"id",a);if(s&&!s.autoAttack){if(!s.icon)return console.error(e,"event ability has no icon"),!1;var o=["Rotation-module_link__G20wf",(0,i.Z)({},"Rotation-module_ogcd__qqqbl",!s.onGcd),e.isProc?g.Z.procOverlay:""],l=s.onGcd?"40px":"30px",u=s.id>=v.kQ?f.FB:f.vm;return(0,y.jsx)("div",{className:h().apply(void 0,o),children:(0,y.jsx)(u,(0,r.Z)({showName:!1,iconSize:l},s))},n)}}))})}}]),n}(p.Component)},74489:function(t,e,n){"use strict";n.d(e,{Gg:function(){return p},hX:function(){return f},jg:function(){return v},kw:function(){return m}});var r=n(8333),i=n(44845),a=n(97530),s=n(10696),o=n.n(s),l=n(36384),u=n.n(l),c=function(){},d=function(t,e){if("function"==typeof e)return e(t)},h=function t(e){return new Proxy(c,{get:function(n,r){return function(n){return t((0,a.Z)((0,a.Z)({},e),{},(0,i.Z)({},r,n)))}},apply:function(t,n,i){var a=(0,r.Z)(i,1)[0];return o()(a,e,d)}})},f=function(){return h({})};function m(t){var e=Array.isArray(t)?new(u())(t):t;return function(t){return e.has(t)}}function v(t){var e=Array.isArray(t)?new(u())(t):t;return function(t){return!e.has(t)}}var p=function(t){return null!=t}},70273:function(t,e,n){"use strict";n.d(e,{e:function(){return L}});var r,i,a,s,o,l=n(90306),u=n(50596),c=n(79395),d=n(99021),h=n(68420),f=n(27344),m=n(30988),v=n.n(m),p=n(39392),g=n.n(p),y=n(89400),w=n.n(y),k=n(94473),Z=n.n(k),b=n(52098),j=n(73540),E=function(){function t(e){var n,r;(0,h.Z)(this,t),this.hp=void 0,this.mp=void 0,this.position=void 0,this.attributes=void 0,this._updateHistory=void 0,this._statusHistory=void 0,this.time=void 0,this._updateHistory=null!==(n=e.updateHistory)&&void 0!==n?n:[],this._statusHistory=null!==(r=e.statusHistory)&&void 0!==r?r:new(g()),this.time=e.time,this.hp=this.buildResource("hp"),this.mp=this.buildResource("mp"),this.position=this.buildPosition(),this.attributes=this.buildAttributes()}return(0,f.Z)(t,[{key:"targetable",get:function(){return this.getHistoricalValue((function(t){return t.targetable}),!0)}},{key:"hasStatus",value:function(t,e){return null!=this.getStatusApplication(t,e)}},{key:"getStatusData",value:function(t,e){var n;return null===(n=this.getStatusApplication(t,e))||void 0===n?void 0:n.data}},{key:"getStatusApplication",value:function(t,e){var n,r,i=this._statusHistory.get(t);if(null!=i){var a,s=null!=e?[null!==(n=i.get(e))&&void 0!==n?n:[]]:w()(i).call(i),o=null!==(r=this.time)&&void 0!==r?r:1/0,l=(0,d.Z)(s);try{for(l.s();!(a=l.n()).done;){var u=a.value,c=v()(u,(function(t){return t.timestamp<=o}));if("statusApply"===(null==c?void 0:c.type))return c}}catch(t){l.e(t)}finally{l.f()}}}},{key:"buildResource",value:function(t){var e=this;return{get maximum(){return e.getHistoricalValue((function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.maximum}),0)},get current(){return e.getHistoricalValue((function(e){var n;return null===(n=e[t])||void 0===n?void 0:n.current}),0)}}}},{key:"buildPosition",value:function(){var t=this;return{get x(){return t.getHistoricalValue((function(t){var e;return null===(e=t.position)||void 0===e?void 0:e.x}),0)},get y(){return t.getHistoricalValue((function(t){var e;return null===(e=t.position)||void 0===e?void 0:e.y}),0)},get bearing(){return t.getHistoricalValue((function(t){var e;return null===(e=t.position)||void 0===e?void 0:e.bearing}),0)}}}},{key:"buildAttributes",value:function(){var t,e,n,r,i=this,a=function(t){return i.getHistoricalValue((function(e){var n;return null===(n=e.attributes)||void 0===n?void 0:Z()(n).call(n,(function(e){return e.attribute===t}))}),{attribute:t,value:j.KB,estimated:!0})};return n={},(r={})[t=b.ah.SKILL_SPEED]=r[t]||{},r[t].get=function(){return a(b.ah.SKILL_SPEED)},r[e=b.ah.SPELL_SPEED]=r[e]||{},r[e].get=function(){return a(b.ah.SPELL_SPEED)},(0,c.Z)(n,r),n}},{key:"getHistoricalValue",value:function(t,e){for(var n,r=null!==(n=this.time)&&void 0!==n?n:1/0,i=this._updateHistory.length-1;i>=0;i--){var a=this._updateHistory[i];if(!(a.timestamp>r)){var s=t(a);if(null!=s)return s}}return e}}]),t}(),x=function(t){(0,l.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r,i=t.actor;return(0,h.Z)(this,n),(r=e.call(this,{})).id=void 0,r.kind=void 0,r.name=void 0,r.team=void 0,r.playerControlled=void 0,r.owner=void 0,r.job=void 0,r.id=i.id,r.kind=i.kind,r.name=i.name,r.team=i.team,r.playerControlled=i.playerControlled,r.owner=i.owner,r.job=i.job,r}return(0,f.Z)(n,[{key:"updateHistory",get:function(){return this._updateHistory}},{key:"statusHistory",get:function(){return this._statusHistory}},{key:"at",value:function(t){return new E({updateHistory:this._updateHistory,statusHistory:this._statusHistory,time:t})}},{key:"addUpdateEntry",value:function(t){this._updateHistory.push(t)}},{key:"addStatusEntry",value:function(t){var e=this._statusHistory.get(t.status);null==e&&(e=new(g()),this._statusHistory.set(t.status,e));var n=e.get(t.source);null==n&&(n=[],e.set(t.source,n)),n.push(t)}}]),n}(E),T=n(97530),C=n(23257),_=n(5281),A=n(300),R=n(77766),S=n.n(R),D=n(86359),I=n(28683),N=n(74489),H=n(76704),O=(n(67294),n(40822)),G=n(36356),M=n(85893),L=(r=Reflect.metadata("design:type",G.$),o=s=function(t){(0,l.Z)(n,t);var e=(0,u.Z)(n);function n(){var t,r;(0,h.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,S()(t=[this]).call(t,s)),(0,C.Z)(r,"resourceGraphs",a,(0,_.Z)(r)),r.actors=new(g()),r}return(0,f.Z)(n,[{key:"current",get:function(){return this.get(this.parser.actor.id)}},{key:"friends",get:function(){return this.getTeam(O.S.FRIEND)}},{key:"foes",get:function(){return this.getTeam(O.S.FOE)}},{key:"getTeam",value:function(t){var e,n=[],r=(0,d.Z)(this.parser.pull.actors);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.team===t&&n.push(this.get(i))}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"get",value:function(t){var e,n="string"==typeof t?t:t.id,r=this.actors.get(n);if(null!=r)return r;var i,a="string"==typeof t?Z()(e=this.parser.pull.actors).call(e,(function(t){return t.id===n})):t;if(null==a)throw new Error(S()(i="Actor ".concat(n," does not exist within pull ")).call(i,this.parser.pull.id));return r=new x({actor:a}),this.actors.set(n,r),r}},{key:"initialise",value:function(){this.addEventHook("actorUpdate",this.onUpdate),this.addEventHook((0,N.hX)().type((0,N.kw)(["statusApply","statusRemove"])),this.onStatus),this.addEventHook("complete",this.onComplete)}},{key:"onUpdate",value:function(t){this.get(t.actor).addUpdateEntry(t)}},{key:"onStatus",value:function(t){this.get(t.target).addStatusEntry(t)}},{key:"onComplete",value:function(){var t,e=[],n=[],r=(0,d.Z)(this.current.updateHistory);try{for(r.s();!(t=r.n()).done;){var i=t.value;null!=i.hp&&e.push((0,T.Z)((0,T.Z)((0,T.Z)({},e[e.length-1]),i.hp),{},{time:i.timestamp})),null!=i.mp&&n.push((0,T.Z)((0,T.Z)((0,T.Z)({},n[n.length-1]),i.mp),{},{time:i.timestamp}))}}catch(t){r.e(t)}finally{r.f()}this.resourceGraphs.addResource({label:(0,M.jsx)(D.Trans,{id:"core.actors.resource.hp",defaults:"HP"}),colour:"rgba(59, 133, 4, 0.5)",data:e}),n.length>1&&this.resourceGraphs.addResource({label:(0,M.jsx)(D.Trans,{id:"core.actors.resource.mp",defaults:"MP"}),colour:"rgba(188, 55, 147, 0.5)",data:n})}}]),n}(I.qk),s.handle="actors",i=o,a=(0,A.Z)(i.prototype,"resourceGraphs",[H.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.resourceGraphs}}),i)},32690:function(t,e,n){"use strict";n.d(e,{Z:function(){return O}});var r,i,a,s,o,l=n(23257),u=n(68420),c=n(27344),d=n(5281),h=n(90306),f=n(50596),m=n(300),v=n(77766),p=n.n(v),g=n(39392),y=n.n(g),w=n(2991),k=n.n(w),Z=n(66419),b=n.n(Z),j=n(89400),E=n.n(j),x=n(86359),T=n(40802),C=n(44178),_=n(40090),A=n(15964),R=(n(67294),n(65927)),S=n(28683),D=n(76704),I=n(73947),N=n(8437),H=n(85893),O=(r=Reflect.metadata("design:type",I.V),o=s=function(t){(0,h.Z)(n,t);var e=(0,f.Z)(n);function n(){var t,r;(0,u.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,p()(t=[this]).call(t,s)),(0,l.Z)(r,"data",a,(0,d.Z)(r)),r.triggers=new(y()),r}return(0,c.Z)(n,[{key:"trigger",value:function(t,e,n){var r,i=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=t.constructor,o=s.handle,l=p()(r="".concat(o,".")).call(r,e);if(a&&!this.triggers.has(l)&&!(0,A.Vk)(this.parser.report).branch){var u=this.parser.actor.job;T.$e((function(t){var e;t.setTags({job:u,module:o}),t.setExtras({source:i.parser.report.meta.source,pull:i.parser.pull.id,actor:i.parser.actor.id}),T.uT(p()(e="".concat(u,".")).call(e,l))}))}this.triggers.set(l,{source:s,reason:n})}},{key:"initialise",value:function(){var t=this.data.actions.UNKNOWN.id;this.addEventHook({cause:{type:"action",action:t}},this.triggerUnknownCause),this.addEventHook({action:t},this.triggerUnknownCause);var e=this.data.statuses.UNKNOWN.id;this.addEventHook({cause:{type:"status",status:e}},this.triggerUnknownCause),this.addEventHook({status:e},this.triggerUnknownCause)}},{key:"triggerUnknownCause",value:function(){this.trigger(this,"unknown action",(0,H.jsx)(x.Trans,{id:"core.broken-log.trigger.unknown-action",defaults:"One or more actions were recorded incorrectly, and could not be parsed."}))}},{key:"output",value:function(){var t,e;return 0!==this.triggers.size&&(0,H.jsxs)(C.XX,{children:[(0,H.jsxs)(C.v0,{error:!0,icon:"times circle outline",children:[(0,H.jsx)(x.Trans,{id:"core.broken-log.broken-log.title",render:(0,H.jsx)(C.v0.Header,{}),defaults:"This log is broken."}),(0,H.jsx)(x.Trans,{id:"core.broken-log.broken-log.description",defaults:"One or more modules have reported that this log contains inconsistencies that would suggest data is missing or incorrect. While the system does try to maintain sane results in this situation, some statistics may be inaccurate."})]}),(0,H.jsxs)(R.Z,{basic:"very",compact:"very",children:[(0,H.jsx)(R.Z.Header,{children:(0,H.jsxs)(R.Z.Row,{children:[(0,H.jsx)(x.Trans,{id:"core.broken-log.list.module",render:(0,H.jsx)(R.Z.HeaderCell,{}),defaults:"Module"}),(0,H.jsx)(x.Trans,{id:"core.broken-log.list.reason",render:(0,H.jsx)(R.Z.HeaderCell,{}),defaults:"Reason"})]})}),(0,H.jsx)(R.Z.Body,{children:k()(t=b()(E()(e=this.triggers).call(e))).call(t,(function(t,e){var n=t.source,r=t.reason;return(0,H.jsxs)(R.Z.Row,{children:[(0,H.jsx)(R.Z.Cell,{children:(0,H.jsx)(_.Z,{message:n.title})}),(0,H.jsx)(R.Z.Cell,{children:r})]},e)}))})]})]})}}]),n}(S.qk),s.handle="brokenLog",s.title={id:"core.broken-log.title",defaults:"Broken Log"},s.displayOrder=N.Z.BROKEN_LOG,s.displayMode=S.d1.RAW,i=o,a=(0,m.Z)(i.prototype,"data",[D.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),i)},52102:function(t,e,n){"use strict";n.d(e,{nb:function(){return O},$9:function(){return T},hI:function(){return x},dV:function(){return C},ZP:function(){return H}});var r,i=n(41420),a=n(68420),s=n(27344),o=n(90306),l=n(50596),u=n(77766),c=n.n(u),d=n(47302),h=n.n(d),f=n(28683),m=n(67294),v=n(8437),p=n(44845),g=n(2991),y=n.n(g),w=n(97530),k=n(86902),Z=n.n(k),b=n(32366),j=n.n(b),E=n(40753),x={SUCCESS:2,WARN:1,FAIL:void 0},T=function(){function t(e){var n=this;(0,a.Z)(this,t),this.name="",this.description=null,this.requirements=[],this.target=95,this.displayOrder=f.Gx.DEFAULT,Z()(e||{}).forEach((function(t){n[t]=e[t]}))}return(0,s.Z)(t,[{key:"tier",get:function(){return(0,E.CL)((0,p.Z)({},this.target,x.SUCCESS),this.percent)}},{key:"percent",get:function(){var t,e,n=j()(t=this.requirements).call(t,(function(t,e){return t+e.percent*e.weight}),0),r=j()(e=this.requirements).call(e,(function(t,e){return t+e.weight}),0);return 0!==r?n/r:0}}]),t}(),C=function(t){(0,o.Z)(n,t);var e=(0,l.Z)(n);function n(t){return(0,a.Z)(this,n),e.call(this,(0,w.Z)({tiers:{},matcher:E.CL},t))}return(0,s.Z)(n,[{key:"tier",get:function(){return this.matcher(this.tiers,this.percent)}}]),n}(T),_=n(45150),A=n(11983),R=n(30919),S=n(85893),D=(r={},(0,p.Z)(r,x.SUCCESS,{text:"text-success",color:"green",icon:"checkmark",autoExpand:!1}),(0,p.Z)(r,x.WARN,{text:"text-warning",color:"yellow",icon:"warning sign",autoExpand:!0}),(0,p.Z)(r,x.FAIL,{text:"text-error",color:"red",icon:"remove",autoExpand:!0}),r),I=function(t){(0,o.Z)(n,t);var e=(0,l.Z)(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props.rules;if(!t.length)return!1;var e=[],n=y()(t).call(t,(function(t,n){var r,i=D[t.tier],a=t.percent;return i.autoExpand&&e.push(n),{key:n,title:{className:"Checklist-module_title__2R2KC",content:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(_.Z,{name:i.icon,className:i.text}),t.name,(0,S.jsxs)("div",{className:"Checklist-module_percent__EuGu0 "+i.text,children:[a.toFixed(1),"%",(0,S.jsx)(A.Z,{percent:a,className:"Checklist-module_progress__Y1Fy8",size:"small",color:i.color})]})]})},content:{content:(0,S.jsxs)(S.Fragment,{children:[t.description&&(0,S.jsxs)("div",{className:"Checklist-module_description__1hNf9",children:[(0,S.jsx)(_.Z,{name:"info",size:"large"}),(0,S.jsx)("p",{children:t.description})]}),(0,S.jsx)("ul",{children:y()(r=t.requirements).call(r,(function(t,e){return(0,S.jsxs)("li",{children:[t.name,": ",t.content]},e)}))})]})}}}));return(0,S.jsx)(R.Z,{exclusive:!1,panels:n,defaultActiveIndex:e,styled:!0,fluid:!0})}}]),n}(m.Component),N=I,H=function(t){(0,o.Z)(n,t);var e=(0,l.Z)(n);function n(){var t,r;(0,a.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(r=e.call.apply(e,c()(t=[this]).call(t,s)))._rules=[],r}return(0,s.Z)(n,[{key:"add",value:function(t){if(!(t instanceof T))throw new Error("Invalid rule provided to checklist.");this._rules.push(t)}},{key:"output",value:function(){var t=(0,i.Z)(this._rules);return h()(t).call(t,(function(t,e){return t.displayOrder-e.displayOrder})),(0,S.jsx)(N,{rules:t})}}]),n}(f.qk);H.handle="checklist",H.title={id:"core.checklist.title",defaults:"Checklist"},H.displayOrder=v.Z.CHECKLIST,H.displayMode=f.d1.FULL;var O=function(){function t(e){var n=this;(0,a.Z)(this,t),this.name="",this._percent=null,this.value=null,this.target=100,this._weight=1,this.overrideDisplay=null,Z()(e||{}).forEach((function(t){n[t]=e[t]}))}return(0,s.Z)(t,[{key:"content",get:function(){var t;return null!==this.overrideDisplay?this.overrideDisplay:null!==this._percent||null===this.value?"".concat(this.percent.toFixed(2),"%"):c()(t="".concat(this.value.toFixed(0),"/")).call(t,this.target.toFixed(0))}},{key:"percent",get:function(){return null===this._percent?null===this.value?0:100*(("function"==typeof this.value?this.value():this.value)||0)/this.target:("function"==typeof this._percent?this._percent():this._percent)||0},set:function(t){this._percent=t}},{key:"weight",get:function(){return this._weight},set:function(t){this._weight=t}}]),t}()},48945:function(t,e,n){"use strict";n.d(e,{u:function(){return B}});var r,i,a,s,o,l,u,c,d,h=n(97530),f=n(99021),m=n(23257),v=n(68420),p=n(27344),g=n(5281),y=n(90306),w=n(50596),k=n(300),Z=n(77766),b=n.n(Z),j=n(39392),E=n.n(j),x=n(2991),T=n.n(x),C=n(32366),_=n.n(C),A=n(94473),R=n.n(A),S=n(59340),D=n.n(S),I=n(20116),N=n.n(I),H=n(92762),O=n.n(H),G=n(81643),M=n.n(G),L=n(86359),U=n(9263),P=n(76704),z=n(52102),F=(n(67294),n(28683)),W=n(74489),V=n(73947),X=n(51691),q=n(85893),B=(r=Reflect.metadata("design:type",V.V),i=Reflect.metadata("design:type",X.Z),a=Reflect.metadata("design:type",z.ZP),d=c=function(t){(0,y.Z)(n,t);var e=(0,w.Z)(n);function n(){var t,r;(0,v.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,b()(t=[this]).call(t,a)),(0,m.Z)(r,"data",o,(0,g.Z)(r)),(0,m.Z)(r,"downtime",l,(0,g.Z)(r)),(0,m.Z)(r,"checklist",u,(0,g.Z)(r)),r.trackedCds=void 0,r.suggestionOnlyCooldowns=[],r.usages=new(E()),r.resets=new(E()),r.checklistName=(0,q.jsx)(L.Trans,{id:"core.cooldownDowntime.use-ogcd-cds",defaults:"Use your cooldowns"}),r.checklistDescription=(0,q.jsx)(L.Trans,{id:"core.cooldownDowntime.ogcd-cd-metric",defaults:"Always make sure to use your actions when they are available, but do not clip your GCD to use them."}),r.checklistTarget=95,r.defaultAllowedAverageDowntime=1250,r.defaultFirstUseOffset=0,r}return(0,p.Z)(n,[{key:"allCooldowns",get:function(){var t;return b()(t=this.trackedCds).call(t,this.suggestionOnlyCooldowns)}},{key:"countUsage",value:function(t){return!0}},{key:"initialise",value:function(){var t,e,n,r,i,a,s=this,o=T()(t=_()(e=T()(n=this.allCooldowns).call(n,(function(t){return t.cooldowns}))).call(e,(function(t,e){return b()(t).call(t,e)}))).call(t,(function(t){return t.id})),l=T()(r=_()(i=T()(a=this.allCooldowns).call(a,(function(t){var e,n;return null!==(e=null===(n=t.resetBy)||void 0===n?void 0:n.actions)&&void 0!==e?e:[]}))).call(i,(function(t,e){return b()(t).call(t,e)}))).call(r,(function(t){return t.id})),u=(0,W.hX)().type("action").source(this.parser.actor.id);this.addEventHook(u.action((0,W.kw)(o)),this.onTrackedCast),this.addEventHook(u.action((0,W.kw)(l)),this.onResetCast),this.addEventHook("complete",this.onComplete),this.allCooldowns.forEach((function(t){s.usages.set(t,[]),s.resets.set(t,[])}))}},{key:"onTrackedCast",value:function(t){if(this.countUsage(t)){var e=this.getTrackedGroup(t.action);void 0!==e&&(this.usages.get(e)||[]).push(t)}}},{key:"getTrackedGroup",value:function(t){var e;return R()(e=this.allCooldowns).call(e,(function(e){var n;return void 0!==R()(n=e.cooldowns).call(n,(function(e){return e.id===t}))}))}},{key:"onResetCast",value:function(t){var e=this;this.allCooldowns.forEach((function(n){var r,i,a;null!==(r=n.resetBy)&&void 0!==r&&R()(i=r.actions).call(i,(function(e){return e.id===t.action}))&&(null!==(a=e.resets.get(n))&&void 0!==a?a:[]).push(t)}))}},{key:"onComplete",value:function(){var t,e=[],n=(0,f.Z)(this.trackedCds);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(this.createRequirement(r))}}catch(t){n.e(t)}finally{n.f()}this.checklist.add(new K({name:this.checklistName,description:this.checklistDescription,requirements:e,target:this.checklistTarget})),this.addJobSuggestions()}},{key:"createRequirement",value:function(t){var e,n,r,i,a=this,s=this.calculateMaxUsages(t),o=this.calculateUsageCount(t),l=o/s*100,u=T()(e=t.cooldowns).call(e,(function(t,e){return(0,q.jsxs)(q.Fragment,{children:[e>0?", ":"",(0,q.jsx)(U.vm,(0,h.Z)({},a.data.getAction(t.id)))]})}));return this.debug(D()(u)),new z.nb({name:u,percent:l,overrideDisplay:b()(n=b()(r="".concat(o," / ")).call(r,s," (")).call(n,l.toFixed(2),"%)"),weight:null!==(i=t.weight)&&void 0!==i?i:1})}},{key:"addJobSuggestions",value:function(){}},{key:"calculateUsageCount",value:function(t){var e;return(null!==(e=this.usages.get(t))&&void 0!==e?e:[]).length}},{key:"calculateMaxUsages",value:function(t){var e,n,r,i,a,s,o,l,u,c,d,h=this,f=t.cooldowns[0];if(void 0===f.cooldown)return 0;var m=f.charges||1,v=f.cooldown+(m>1?0:null!==(e=t.allowedAverageDowntime)&&void 0!==e?e:this.defaultAllowedAverageDowntime),p=null!==(n=this.resets.get(t))&&void 0!==n?n:[],g=null!==(r=this.usages.get(t))&&void 0!==r?r:[],y=T()(i=N()(g).call(g,(function(t){return h.downtime.isDowntime(t.timestamp)}))).call(i,(function(t){return h.downtime.getDowntimeWindows(t.timestamp)[0]})),w=t.resetBy&&t.resetBy.refundAmount?t.resetBy.refundAmount:0,k=0;this.debug(b()(a=b()(s=b()(o="Checking downtime for group ".concat(f.name," with default first use ")).call(o,t.firstUseOffset," and step ")).call(s,v," and ")).call(a,m," charges"));var Z=m,j=0,E=this.parser.pull.timestamp+(null!==(l=t.firstUseOffset)&&void 0!==l?l:this.defaultFirstUseOffset),x=g[0],C=this.parser.pull.timestamp+this.parser.pull.duration,_=E;if((null!==(u=t.firstUseOffset)&&void 0!==u?u:0)<0&&1===m){var A,S,D=g[1];if(D&&D.timestamp-x.timestamp<f.cooldown)this.debug(b()(A="Assumed first use of skill ".concat(f.name," at ")).call(A,this.parser.formatEpochTimestamp(D.timestamp-f.cooldown))),this.debug(b()(S="Actual second use of skill ".concat(f.name," at ")).call(S,this.parser.formatEpochTimestamp(D.timestamp))),j+=1,_=D.timestamp;else if(x){var I;this.debug(b()(I="Actual first use of skill ".concat(f.name," at ")).call(I,this.parser.formatEpochTimestamp(x.timestamp))),_=Math.min(x.timestamp,E)}}else if(x){var H;this.debug(b()(H="Actual first use of skill ".concat(f.name," at ")).call(H,this.parser.formatEpochTimestamp(x.timestamp))),_=Math.min(x.timestamp,E)}for(;_<C;){var G,L;for(j+=Z,this.debug(b()(G=b()(L="Expected ".concat(Z," usages at ")).call(L,this.parser.formatEpochTimestamp(_),". Count: ")).call(G,j)),Z=0,_+=v,Z+=1;p.length>0&&p[0].timestamp<_;){var U,P,z,F,W=p[0],V=_;_-w<W.timestamp?Z<m?_-=w:(k+=W.timestamp-(_-w),_=W.timestamp):_-=w,this.debug(b()(U=b()(P=b()(z="Reset (".concat(null===(F=this.data.getAction(W.action))||void 0===F?void 0:F.name,") used at ")).call(z,this.parser.formatEpochTimestamp(W.timestamp),". Changing next charge time from ")).call(P,this.parser.formatEpochTimestamp(V)," to ")).call(U,this.parser.formatEpochTimestamp(_))),p.shift()}for(;_<C&&Z<m&&this.downtime.isDowntime(_);){var X;this.debug(b()(X="Saving charge during downtime at ".concat(this.parser.formatEpochTimestamp(_),". ")).call(X,Z," charges stored"));var q,B,K=this.downtime.getDowntimeWindows(_)[0];K.end<_+v&&(j+=Z,this.debug(b()(q=b()(B="Delayed charge spend at ".concat(this.parser.formatEpochTimestamp(K.end),". ")).call(B,Z," charges spent. No charge time lost. Count: ")).call(q,j)),Z=0),_+=v,Z+=1}_<C&&this.downtime.isDowntime(_)&&function(){var t,e,n=h.downtime.getDowntimeWindows(_)[0];h.debug(b()(t=b()(e="Downtime detected at ".concat(h.parser.formatEpochTimestamp(_)," in window from ")).call(e,h.parser.formatEpochTimestamp(n.start)," to ")).call(t,h.parser.formatEpochTimestamp(n.end)));var r=R()(y).call(y,(function(t){return t.end===n.end}));void 0===r?_=n.end:(O()(y).call(y,M()(y).call(y,r),1),h.debug("Usage detected during downtime at ".concat(h.parser.formatEpochTimestamp(r.start),".")),_=r.start)}()}return this.debug(b()(c=b()(d="Total count for group ".concat(f.name," is ")).call(d,j,". Total reset time lost is ")).call(c,this.parser.formatDuration(k),".")),j}}]),n}(F.qk),c.handle="cooldownDowntime",c.title={id:"core.cooldownDowntime.title",defaults:"Cooldown Downtime"},c.debug=!1,s=d,o=(0,k.Z)(s.prototype,"data",[P.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,k.Z)(s.prototype,"downtime",[P.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),u=(0,k.Z)(s.prototype,"checklist",[P.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),s),K=function(t){(0,y.Z)(n,t);var e=(0,w.Z)(n);function n(t){var r,i,a;(0,v.Z)(this,n),a=e.call(this,(0,h.Z)({},t));var s=_()(r=a.requirements).call(r,(function(t,e){return t+e.weight}),0);return T()(i=a.requirements).call(i,(function(t){return t.weight=t.weight/s})),a}return(0,p.Z)(n,[{key:"percent",get:function(){var t;return _()(t=this.requirements).call(t,(function(t,e){return t+e.percent*e.weight}),0)}}]),n}(z.$9)},81336:function(t,e,n){"use strict";n.d(e,{g:function(){return c},w:function(){return F}});var r,i,a,s,o,l,u,c,d=n(8333),h=n(97530),f=n(41420),m=n(99021),v=n(23257),p=n(68420),g=n(27344),y=n(5281),w=n(90306),k=n(50596),Z=n(300),b=n(63109),j=n.n(b),E=n(77766),x=n.n(E),T=n(52424),C=n.n(T),_=n(39392),A=n.n(_),R=n(66419),S=n.n(R),D=n(69301),I=n.n(D),N=n(47302),H=n.n(N),O=n(72119),G=n.n(O),M=n(28683),L=n(76704),U=n(73947),P=n(48453);!function(t){t[t.EXPIRED=0]="EXPIRED",t[t.INTERRUPTED=1]="INTERRUPTED",t[t.REDUCED=2]="REDUCED",t[t.PULL_ENDED=3]="PULL_ENDED",t[t.OVERLAPPED=4]="OVERLAPPED"}(c||(c={}));var z={primary:!0},F=(r=Reflect.metadata("design:type",U.V),i=Reflect.metadata("design:type",P.a),u=l=function(t){(0,w.Z)(n,t);var e=(0,k.Z)(n);function n(){var t,r;(0,p.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=e.call.apply(e,x()(t=[this]).call(t,a)),(0,v.Z)(r,"data",s,(0,y.Z)(r)),(0,v.Z)(r,"speedAdjustments",o,(0,y.Z)(r)),r.actionConfigCache=new(C()),r.currentCast=void 0,r.groupStates=new(A()),r}return(0,g.Z)(n,[{key:"groups",value:function(t,e){return S()(this.iterateStates(t,e),(function(t){return t.config.group}))}},{key:"allGroups",value:function(){var t;return S()(I()(t=this.groupStates).call(t))}},{key:"remaining",value:function(t,e){var n,r=0,i=(0,m.Z)(this.iterateStates(t,e));try{for(i.s();!(n=i.n()).done;){var a=n.value.state.cooldown;null!=a&&(r=Math.max(r,a.end-this.parser.currentEpochTimestamp))}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"charges",value:function(t,e){var n,r=[],i=(0,m.Z)(this.iterateStates(t,e));try{for(i.s();!(n=i.n()).done;){var a=n.value.state.charges;r.push(a.current)}}catch(t){i.e(t)}finally{i.f()}return r.length>0?Math.min.apply(Math,r):0}},{key:"reduce",value:function(t,e,n){var r,i=this,a=(0,m.Z)(this.iterateStates(t,n));try{var s=function(){var t=r.value,n=t.config,a=t.state.cooldown;if(null==a)return"continue";var s=a.end-e;if(s<=i.parser.currentEpochTimestamp)return i.endCooldown(n,c.REDUCED),"continue";a.end=s,i.removeTimestampHook(a.hook),a.hook=i.addTimestampHook(s,(function(){i.endCooldown(n,c.EXPIRED)}))};for(a.s();!(r=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}}},{key:"reset",value:function(t,e){var n,r=(0,m.Z)(this.iterateStates(t,e));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=i.config;null!=i.state.cooldown&&this.endCooldown(a,c.REDUCED)}}catch(t){r.e(t)}finally{r.f()}}},{key:"cooldownHistory",value:function(t,e){var n,r=[],i=(0,m.Z)(this.iterateStates(t,e));try{for(i.s();!(n=i.n()).done;){var a=n.value.state.cooldownHistory;r.push.apply(r,(0,f.Z)(a))}}catch(t){i.e(t)}finally{i.f()}return H()(r).call(r,(function(t,e){return t.start-e.start})),r}},{key:"chargeHistory",value:function(t,e){var n,r=[],i=(0,m.Z)(this.iterateStates(t,e));try{for(i.s();!(n=i.n()).done;){var a=n.value.state.chargeHistory;r.push.apply(r,(0,f.Z)(a))}}catch(t){i.e(t)}finally{i.f()}return H()(r).call(r,(function(t,e){return t.timestamp-e.timestamp})),r}},{key:"iterateStates",value:j().mark((function t(e,n){var r,i,a,s,o;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"GCD"===(r=e)?r=(0,h.Z)((0,h.Z)({},this.data.actions.UNKNOWN),{},{onGcd:!0}):"number"==typeof r?r=(0,h.Z)((0,h.Z)({},this.data.actions.UNKNOWN),{},{cooldownGroup:r}):"string"==typeof r&&(r=this.data.actions[r]),i=(0,h.Z)((0,h.Z)({},z),n),a=(0,m.Z)(this.getActionConfigs(r)),t.prev=4,a.s();case 6:if((s=a.n()).done){t.next=14;break}if(o=s.value,!i.primary||o.primary){t.next=10;break}return t.abrupt("continue",12);case 10:return t.next=12,{config:o,state:this.getGroupState(o)};case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),a.e(t.t0);case 19:return t.prev=19,a.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[4,16,19,22]])}))},{key:"initialise",value:function(){this.addEventHook({type:"prepare",source:this.parser.actor.id},this.onPrepare),this.addEventHook({type:"interrupt",target:this.parser.actor.id},this.onInterrupt),this.addEventHook({type:"action",source:this.parser.actor.id},this.onAction),this.addEventHook("complete",this.onComplete)}},{key:"onPrepare",value:function(t){this.currentCast=t.action;var e=this.data.getAction(t.action);null!=e&&this.useAction(e)}},{key:"onInterrupt",value:function(t){if(this.currentCast!==t.action)throw new Error("Interrupted action does not match expected current cast.");this.currentCast=void 0;var e=this.data.getAction(t.action);if(null!=e){var n,r=(0,m.Z)(this.getActionConfigs(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=this.getGroupState(i).cooldown&&this.endCooldown(i,c.INTERRUPTED)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"onAction",value:function(t){var e=this.currentCast;if(this.currentCast=void 0,e!==t.action){var n=this.data.getAction(t.action);null!=n&&this.useAction(n)}}},{key:"onComplete",value:function(){var t,e,n={action:this.data.actions.UNKNOWN,primary:!1,duration:0,maximumCharges:1},r=(0,m.Z)(G()(t=this.groupStates).call(t));try{for(r.s();!(e=r.n()).done;){var i=(0,d.Z)(e.value,2),a=i[0];null!=i[1].cooldown&&this.resolveCooldown((0,h.Z)({group:a},n),c.PULL_ENDED)}}catch(t){r.e(t)}finally{r.f()}}},{key:"useAction",value:function(t){var e,n=(0,m.Z)(this.getActionConfigs(t));try{for(n.s();!(e=n.n()).done;){var r=e.value;this.consumeCharge(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"consumeCharge",value:function(t){var e=this,n=this.getGroupState(t),r=n.charges,i=this.parser.currentEpochTimestamp;if(r.current<=0){var a,s=n.cooldown;if(null==s)throw new Error(x()(a="Attempted to consume charge of group ".concat(t.group," at ")).call(a,this.parser.formatEpochTimestamp(i)," with no charges remaining, and no active cooldown to fudge."));this.debug((function(n){var a,o,l,u,c,d=n.log,h=s.end-i;h<=50||d(x()(a=x()(o=x()(l=x()(u=x()(c="Use of ".concat(t.action.name," at ")).call(c,e.parser.formatEpochTimestamp(i)," consumes a charge of group ")).call(u,t.group," with ")).call(l,r.current," charges. Expected charge gain at ")).call(o,e.parser.formatEpochTimestamp(s.end)," (delta ")).call(a,h,"), fudging."))})),this.endCooldown(t,c.OVERLAPPED)}r.current===r.maximum&&this.startCooldown(t),r.current--,r.action=t.action,n.chargeHistory.push((0,h.Z)((0,h.Z)({},r),{},{timestamp:i,delta:-1}))}},{key:"gainCharge",value:function(t){var e=this.getGroupState(t),n=e.charges,r=e.chargeHistory;null!=n&&n.current!==n.maximum&&(n.current++,r.push((0,h.Z)((0,h.Z)({},n),{},{timestamp:this.parser.currentEpochTimestamp,delta:1})),n.current<n.maximum&&this.startCooldown(t))}},{key:"startCooldown",value:function(t){var e,n=this,r=this.getGroupState(t);if(null!=r.cooldown)throw new Error(x()(e="Cannot start cooldown for already-active group ".concat(t.group," at ")).call(e,this.parser.formatEpochTimestamp(this.parser.currentEpochTimestamp),"."));var i=t.duration;null!=t.action.speedAttribute&&(i=this.speedAdjustments.getAdjustedDuration({duration:i,attribute:t.action.speedAttribute}));var a=this.parser.currentEpochTimestamp,s=a+i;r.cooldown={action:t.action,start:a,end:s,hook:this.addTimestampHook(s,(function(){n.endCooldown(t,c.EXPIRED)}))}}},{key:"endCooldown",value:function(t,e){this.resolveCooldown(t,e),this.gainCharge(t)}},{key:"resolveCooldown",value:function(t,e){var n=this.getGroupState(t),r=n.cooldown;if(null==r)throw new Error("Trying to end cooldown for group ".concat(t.group," which has no current state."));n.cooldown=void 0,this.removeTimestampHook(r.hook),r.end=this.parser.currentEpochTimestamp,n.cooldownHistory.push({action:r.action,start:r.start,end:r.end,endReason:e})}},{key:"getGroupState",value:function(t){var e=this.groupStates.get(t.group);if(null==e){var n=t.maximumCharges;e={cooldownHistory:[],charges:{action:this.data.actions.UNKNOWN,current:n,maximum:n},chargeHistory:[]},this.groupStates.set(t.group,e)}return e}},{key:"getActionConfigs",value:function(t){var e,n,r,i=this.actionConfigCache.get(t);return null!=i?i:(i=[],this.actionConfigCache.set(t,i),null==t.cooldown?i:t.onGcd&&(i.push({action:t,primary:!1,group:58,duration:null!==(r=t.gcdRecast)&&void 0!==r?r:t.cooldown,maximumCharges:1}),null==t.gcdRecast)?(i[i.length-1].primary=!0,i):(i.push({action:t,primary:!0,group:null!==(e=t.cooldownGroup)&&void 0!==e?e:-t.id,duration:t.cooldown,maximumCharges:null!==(n=t.charges)&&void 0!==n?n:1}),i))}}]),n}(M.qk),l.handle="cooldowns",l.debug=!1,a=u,s=(0,Z.Z)(a.prototype,"data",[L.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),o=(0,Z.Z)(a.prototype,"speedAdjustments",[L.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),a)},8437:function(t,e){"use strict";var n;!function(t){t[t.ABOUT=-50]="ABOUT",t[t.BROKEN_LOG=-40]="BROKEN_LOG",t[t.CHECKLIST=-30]="CHECKLIST",t[t.SUGGESTIONS=-20]="SUGGESTIONS",t[t.STATISTICS=-10]="STATISTICS",t[t.COMBOS=110]="COMBOS",t[t.POSITIONALS=120]="POSITIONALS",t[t.DEFENSIVES=125]="DEFENSIVES",t[t.TIMELINE=130]="TIMELINE",t[t.EVENTS_VIEW=140]="EVENTS_VIEW",t[t.CHANGELOG=150]="CHANGELOG"}(n||(n={})),e.Z=n},73947:function(t,e,n){"use strict";n.d(e,{V:function(){return v}});var r=n(68420),i=n(27344),a=n(90306),s=n(50596),o=n(2991),l=n.n(o),u=n(43199),c=n(95859),d=n(83927),h=n(74407),f=n(28683),m=n(74489),v=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"actions",get:function(){return this.getAppliedData(c.Jz,c.ug)}},{key:"statuses",get:function(){return this.getAppliedData(h.Jz,h.ug)}},{key:"getAction",value:function(t){return(0,u.l)(this.actions,"id",t)}},{key:"getStatus",value:function(t){return(0,u.l)(this.statuses,"id",t)}},{key:"matchActionId",value:function(t){var e=this;return(0,m.kw)(l()(t).call(t,(function(t){return e.actions[t].id})))}},{key:"matchCauseAction",value:function(t){return(0,m.hX)().type("action").action(this.matchActionId(t))}},{key:"matchCauseActionId",value:function(t){return(0,m.hX)().type("action").action((0,m.kw)(t))}},{key:"matchStatusId",value:function(t){var e=this;return(0,m.kw)(l()(t).call(t,(function(t){return e.statuses[t].id})))}},{key:"matchCauseStatus",value:function(t){return(0,m.hX)().type("status").status(this.matchStatusId(t))}},{key:"matchCauseStatusId",value:function(t){return(0,m.hX)().type("status").status((0,m.kw)(t))}},{key:"getAppliedData",value:function(t,e){return(0,d.t)({root:t,layers:e,state:{patch:this.parser.patch}})}}]),n}(f.qk);v.handle="data"},51691:function(t,e,n){"use strict";n.d(e,{Z:function(){return D}});var r,i,a,s,o,l,u,c,d,h=n(41420),f=n(23257),m=n(68420),v=n(27344),p=n(5281),g=n(90306),y=n(50596),w=n(300),k=n(77766),Z=n.n(k),b=n(32366),j=n.n(b),E=n(47302),x=n.n(E),T=(n(67294),n(28683)),C=n(76704),_=n(90577),A=n(56611),R=n(3085),S=n(85893),D=(r=Reflect.metadata("design:type",R.b),i=Reflect.metadata("design:type",_.I),a=Reflect.metadata("design:type",A.TY),d=c=function(t){(0,g.Z)(n,t);var e=(0,y.Z)(n);function n(){var t,r;(0,m.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,Z()(t=[this]).call(t,a)),(0,f.Z)(r,"unableToAct",o,(0,p.Z)(r)),(0,f.Z)(r,"invulnerability",l,(0,p.Z)(r)),(0,f.Z)(r,"timeline",u,(0,p.Z)(r)),r.getDowntimeWindows=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.parser.pull.timestamp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.parser.currentEpochTimestamp;return j()(t=r.internalDowntime(e,n)).call(t,(function(t,r){return t.push({start:Math.max(r.start,e),end:Math.min(r.end,n)}),t}),[])},r}return(0,v.Z)(n,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"internalDowntime",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.pull.timestamp,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,i=x()(t=Z()(e=[]).call(e,(0,h.Z)(this.unableToAct.getWindows({start:n,end:r})),(0,h.Z)(this.invulnerability.getWindows({start:n,end:r,types:["untargetable"]})))).call(t,(function(t,e){return t.start-e.start})),a=i.shift();if(null==a)return[];var s=[a];return i.forEach((function(t){var e=s[s.length-1];t.start<=e.end?t.end>e.end&&(e.end=t.end):s.push(t)})),s}},{key:"isDowntime",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.currentEpochTimestamp;return this.internalDowntime(t,t).length>0}},{key:"getDowntime",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.pull.timestamp,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return j()(t=this.internalDowntime(e,n)).call(t,(function(t,r){return t+Math.min(r.end,n)-Math.max(r.start,e)}),0)}},{key:"onComplete",value:function(){var t=this,e=this.parser.pull.timestamp;this.getDowntimeWindows().forEach((function(n){t.timeline.addItem(new A.ct({start:n.start-e,end:n.end-e,content:(0,S.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#d5ddf666"}})}))}))}}]),n}(T.qk),c.handle="downtime",s=d,o=(0,w.Z)(s.prototype,"unableToAct",[C.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.unableToAct}}),l=(0,w.Z)(s.prototype,"invulnerability",[C.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),u=(0,w.Z)(s.prototype,"timeline",[C.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),s)},90577:function(t,e,n){"use strict";n.d(e,{I:function(){return B}});var r,i,a,s,o,l,u=n(8333),c=n(44845),d=n(41420),h=n(97530),f=n(22327),m=n(99021),v=n(23257),p=n(68420),g=n(27344),y=n(5281),w=n(90306),k=n(50596),Z=n(300),b=n(77766),j=n.n(b),E=n(36384),x=n.n(E),T=n(39392),C=n.n(T),_=n(78580),A=n.n(_),R=n(32366),S=n.n(R),D=n(47302),I=n.n(D),N=n(2991),H=n.n(N),O=(n(67294),n(40822)),G=n(28683),M=n(74489),L=n(76704),U=n(56611),P=n(85893),z=["timestamp"];!function(t){t[t.FIRST_TARGETED=0]="FIRST_TARGETED",t[t.TARGETABLE=1]="TARGETABLE",t[t.DEATH=2]="DEATH",t[t.OVERKILL=3]="OVERKILL"}(l||(l={}));var F,W=[l.FIRST_TARGETED,l.TARGETABLE,l.DEATH],V=[{kind:{legacyFflogs:"unknown"},exclude:!0}],X=["invulnerable","untargetable"];!function(t){t[t.START=1]="START",t[t.END=-1]="END"}(F||(F={}));var q=(0,M.hX)().team(O.S.FOE),B=(r=Reflect.metadata("design:type",U.TY),o=s=function(t){(0,w.Z)(n,t);var e=(0,k.Z)(n);function n(){var t,r;(0,p.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,j()(t=[this]).call(t,s)),(0,v.Z)(r,"timeline",a,(0,y.Z)(r)),r.actorConfig=[],r.watchedActors=new(x()),r.skipMirroring=new(x()),r.seenActors=new(x()),r.edges=new(C()),r.nextEdgeId=0,r.getNextEdgeId=function(){return r.nextEdgeId++},r.isPlayerDerived=function(t){return t.playerControlled||null!=t.owner&&r.isPlayerDerived(t.owner)},r.addTargetableHooks=function(t){var e,n=(0,m.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;r.addStartEdge(i,-1)}}catch(t){n.e(t)}finally{n.f()}r.addEventHook((0,M.hX)().type("actorUpdate").actor((0,M.kw)(t)).targetable(M.Gg),(function(t){null!=t.targetable&&(t.targetable?r.addEndEdge(t.actor,t.timestamp):r.addStartEdge(t.actor,t.timestamp))}))},r.addDeathHooks=function(t){r.addEventHook((0,M.hX)().type("death").actor((0,M.kw)(t)),(function(t){return r.addStartEdge(t.actor,t.timestamp)})),r.addEventHook((0,M.hX)().type("raise").actor((0,M.kw)(t)),(function(t){return r.addEndEdge(t.actor,t.timestamp)}))},r.addOverkillHooks=function(t){r.addEventHook((0,M.hX)().type("damage").targets((function(e){return e.some((function(e){return A()(t).call(t,e.target)&&e.overkill>0}))})),(function(e){e.targets.forEach((function(n){A()(t).call(t,n.target)&&n.overkill>0&&r.addStartEdge(n.target,e.timestamp)}))})),r.addEventHook((0,M.hX)().type("actorUpdate").actor((0,M.kw)(t)).hp((0,M.hX)().current(1)),(function(t){return r.addStartEdge(t.actor,t.timestamp)}))},r.addFirstTargetedHooks=function(t){var e,n=(0,m.Z)(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;r.addStartEdge(i,-1)}}catch(t){n.e(t)}finally{n.f()}r.addEventHook((0,M.hX)().type((0,M.kw)(["damage","heal"])).targets((function(e){return e.some((function(e){return A()(t).call(t,e.target)}))})),(function(e){e.targets.forEach((function(n){A()(t).call(t,n.target)&&r.trackIfFirstTarget(e.source,n.target,e.timestamp)}))}));var a=new(x())(["statusApply","statusRemove","damage","heal"]);r.addEventHook((0,M.hX)().type((function(t){return!a.has(t)})).target((0,M.kw)(t)),(function(t){return r.trackIfFirstTarget(t.source,t.target,t.timestamp)}))},r.addStartEdge=function(t,e){return r.mirrorTypeEdge(r.addTypeStartEdge,t,e)},r.addTypeStartEdge=function(t,e,n){var i=r.getActorEdges(e)[t],a=i[i.length-1];null!=a&&a.side===F.START||i.push({id:r.getNextEdgeId(),side:F.START,timestamp:n})},r.addTypeEndEdge=function(t,e,n){var i,a=r.getActorEdges(e)[t],s=a[a.length-1];(null==s?void 0:s.side)===F.START?a.push({id:s.id,side:F.END,timestamp:n}):r.debug(j()(i="Actor ".concat(e," has no ")).call(i,t," window to end."))},r}return(0,g.Z)(n,[{key:"isActive",value:function(t){var e=t.timestamp,n=void 0===e?this.parser.currentEpochTimestamp:e,r=(0,f.Z)(t,z);return this.getWindows((0,h.Z)((0,h.Z)({},r),{},{start:n,end:n})).length>0}},{key:"getDuration",value:function(t){var e=this.getWindows(t);return S()(e).call(e,(function(t,e){return t+(e.end-e.start)}),0)}},{key:"getWindows",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.start,r=void 0===n?this.parser.pull.timestamp:n,i=e.end,a=void 0===i?this.parser.currentEpochTimestamp:i,s=e.types,o=void 0===s?X:s,l=e.actorFilter,u=void 0===l?q:l,c=Math.max(r,this.parser.pull.timestamp-1),h=Math.max(a,r+1),f=0,v=[],p=(0,m.Z)(this.watchedActors);try{for(p.s();!(t=p.n()).done;){var g=t.value;if(u(g)){f+=o.length;var y,w=(0,m.Z)(o);try{for(w.s();!(y=w.n()).done;){var k,Z=y.value,b=null===(k=this.edges.get(g.id))||void 0===k?void 0:k[Z];if(null==b||0===b.length)return[];var j=this.getEdgesInRange(b,c,h);if(0===j.length)return[];v.push.apply(v,(0,d.Z)(j))}}catch(t){w.e(t)}finally{w.f()}}}}catch(t){p.e(t)}finally{p.f()}I()(v).call(v,(function(t,e){var n=t.timestamp-e.timestamp;return 0!==n?n:t.side-e.side*(t.id===e.id?-1:1)}));for(var E=0,x=[],T=0;T<v.length;T++){var C=v[T];(E+=C.side)===f&&x.push({start:C.timestamp,end:v[T+1].timestamp})}return x}},{key:"getEdgesInRange",value:function(t,e,n){var r,i=F.END,a=[],s=(0,m.Z)(t);try{for(s.s();!(r=s.n()).done;){var o=r.value;if(o.timestamp>n)break;i=o.side,o.timestamp<e||a.push(o)}}catch(t){s.e(t)}finally{s.f()}if(0===a.length){if(i===F.END)return[];var l=this.getNextEdgeId();return[{id:l,side:F.START,timestamp:e},{id:l,side:F.END,timestamp:n}]}a[0].side===F.END&&a.unshift({id:a[0].id,side:F.START,timestamp:e});var u=a[a.length-1];return u.side===F.START&&a.push({id:u.id,side:F.END,timestamp:n}),a}},{key:"initialise",value:function(){var t,e,n,r,i=this,a=this.parser.report.meta.source,s=new(C())(H()(t=j()(e=[]).call(e,V,(0,d.Z)(this.actorConfig))).call(t,(function(t){return[t.kind[a],t]}))),o=new(C()),h=(0,m.Z)(this.parser.pull.actors);try{for(h.s();!(r=h.n()).done;){var f,v=r.value;if(!this.isPlayerDerived(v)){var p=s.get(v.kind);if(null==p||!p.exclude){this.watchedActors.add(v),!1===(null==p?void 0:p.mirrorToInvuln)&&this.skipMirroring.add(v.id);var g,y=null!==(f=null==p?void 0:p.checks)&&void 0!==f?f:W,w=(0,m.Z)(y);try{for(w.s();!(g=w.n()).done;){var k=g.value,Z=o.get(k);null==Z&&(Z=[],o.set(k,Z)),Z.push(v.id)}}catch(t){w.e(t)}finally{w.f()}}}}}catch(t){h.e(t)}finally{h.f()}var b,E=(n={},(0,c.Z)(n,l.TARGETABLE,this.addTargetableHooks),(0,c.Z)(n,l.DEATH,this.addDeathHooks),(0,c.Z)(n,l.OVERKILL,this.addOverkillHooks),(0,c.Z)(n,l.FIRST_TARGETED,this.addFirstTargetedHooks),n),x=(0,m.Z)(o);try{for(x.s();!(b=x.n()).done;){var T=(0,u.Z)(b.value,2),_=T[0],A=T[1];E[_](A)}}catch(t){x.e(t)}finally{x.f()}this.debug((function(){return i.addEventHook("complete",i.renderDebugTimelineData)}))}},{key:"trackIfFirstTarget",value:function(t,e,n){this.seenActors.has(e)||t===e||this.addEndEdge(e,n)}},{key:"addEndEdge",value:function(t,e){this.mirrorTypeEdge(this.addTypeEndEdge,t,e),this.seenActors.add(t)}},{key:"mirrorTypeEdge",value:function(t,e,n){t("untargetable",e,n),this.skipMirroring.has(e)||t("invulnerable",e,n)}},{key:"getActorEdges",value:function(t){var e=this.edges.get(t);return null==e&&(e={invulnerable:[],untargetable:[]},this.edges.set(t,e)),e}},{key:"renderDebugTimelineData",value:function(){var t,e=this,n=this.timeline.addRow(new U.e2({label:"Invuln2 Debug",order:-1/0})),r=new(C()),i=(0,m.Z)(this.watchedActors);try{var a=function(){var i,a=t.value,s=r.get(a.kind);if(null==s){var o,l=e.parser.pull.actors.some((function(t){return t.kind===a.kind&&t.name!==a.name}));s=n.addRow(new U.e2({label:j()(o="".concat(l?"[various]":a.name," (")).call(o,a.kind,")"),collapse:!0})),r.set(a.kind,s);var u=s.addRow(new U.e2({label:"all",collapse:!0}));e.buildDebugTypeRows(u,(function(t){return t.kind===a.kind}))}var c=s.addRow(new U.e2({label:j()(i="".concat(a.name," (")).call(i,a.id,")"),collapse:!0,hideCollapsed:!0}));e.buildDebugTypeRows(c,(function(t){return t.id===a.id}))};for(i.s();!(t=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}},{key:"buildDebugTypeRows",value:function(t,e){var n,r=this.parser.pull.timestamp,i=r+this.parser.pull.duration,a=(0,m.Z)(X);try{for(a.s();!(n=a.n()).done;){var s,o=n.value,l=t.addRow(new U.e2({label:o})),u=this.getWindows({types:[o],actorFilter:e}),c=(0,m.Z)(u);try{for(c.s();!(s=c.n()).done;){var d=s.value;d.start<=r&&d.end>=i||l.addItem(new U.ct({start:d.start-r,end:d.end-r,content:(0,P.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#faa8"}})}))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}}}]),n}(G.qk),s.handle="invulnerability",s.debug=!1,i=o,a=(0,Z.Z)(i.prototype,"timeline",[L.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),i)},60402:function(t,e,n){"use strict";n.d(e,{p1:function(){return tt},$B:function(){return et}});var r=n(97530),i=n(23257),a=n(68420),s=n(27344),o=n(5281),l=n(90306),u=n(50596),c=n(300),d=n(13311),h=n.n(d),f=n(30988),m=n.n(f),v=n(77766),p=n.n(v),g=n(39392),y=n.n(g),w=n(2991),k=n.n(w),Z=n(86359),b=n(49524),j=n(28683),E=n(76704),x=n(56611),T=n(67294),C=n(41420),_=n(8333),A=n(22762),R=n.n(A),S=n(84753),D=n.n(S),I=n(44494),N=n.n(I),H=n(65753),O=n(30593),G=n(80505),M=n(88546),L=n(18143),U=n(77059),P=n(85893);function z(t){var e,n,i,a,s=t.resource,o=t.scaleX,l=(0,H.M)(),u=s.data;if(u.length>0){var c,d=o.domain(),h=(0,_.Z)(d,2)[1].getTime(),f=u[u.length-1];f.time<h&&(u=p()(c=[]).call(c,(0,C.Z)(u),[(0,r.Z)((0,r.Z)({},f),{},{time:h})]))}var m,v,g=null!==(e=null===(n=D()(s.data,(function(t){return t.maximum})))||void 0===n?void 0:n.maximum)&&void 0!==e?e:1,y=(0,M.Z)().domain([0,null!=g?g:1]).range([1,0]),w=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(F,{id:"".concat(l,"-current-path"),children:(0,P.jsx)(G.Z,{data:u,curve:null!==(i=s.linear)&&void 0!==i&&i?L.Z:U.cD,x:function(t){return o(t.time)},y0:y(0),y1:function(t){return y(t.current)}})}),(0,P.jsx)(W,{fill:"currentColor",clipPath:"url(#".concat(l,"-current-path)")})]});return(null===(a=R()(s.data,(function(t){return t.maximum})))||void 0===a?void 0:a.maximum)!==g&&(m=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(O.Z,{id:"".concat(l,"-maximum-fill"),height:5,width:5,stroke:"currentColor",strokeWidth:1,orientation:["diagonal"]}),(0,P.jsx)(F,{id:"".concat(l,"-maximum-path"),children:(0,P.jsx)(G.Z,{data:u,curve:null!==(v=s.linear)&&void 0!==v&&v?L.Z:U.cD,x:function(t){return o(t.time)},y0:y(g),y1:function(t){return y(t.maximum)}})}),(0,P.jsx)(W,{fill:"url(#".concat(l,"-maximum-fill)"),clipPath:"url(#".concat(l,"-maximum-path)")})]})),(0,P.jsxs)("svg",{className:"ResourceGraphs-module_graph__3x3kb",style:{color:s.colour.toString()},children:[w,m]})}var F=function(t){var e=t.id,n=t.children;return(0,P.jsx)("defs",{children:(0,P.jsx)("clipPath",{id:e,clipPathUnits:"objectBoundingBox",children:n})})},W=function(t){var e=N()(t),n=t.clipPath;return(0,P.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:e,clipPath:n})},V=n(73935);function X(t){var e,n=t.handle,i=t.getData,a=(0,T.useState)(),s=(0,_.Z)(a,2),o=s[0],l=s[1],u=(0,T.useCallback)((function(t){var e=t.currentTarget.getBoundingClientRect(),r=(t.clientX-e.left)/e.width,a=i(r,n);l({cursorLeft:t.clientX,itemTop:e.top,itemLeft:e.left,resources:a})}),[n,i]),c=(0,T.useCallback)((function(){l(void 0)}),[]);return(0,P.jsx)("div",{className:"ResourceGraphs-module_markerContainer__2qW1- ResourceGraphs-module_graph__3x3kb",onMouseMove:u,onMouseLeave:c,children:null!=o&&(0,P.jsx)(Y,(0,r.Z)((0,r.Z)({},o),{},{children:(0,P.jsx)("ul",{className:"ResourceGraphs-module_resourceList__2xOkm",children:k()(e=o.resources).call(e,(function(t,e){var n=t.label,r=t.current,i=void 0===r?0:r,a=t.maximum,s=void 0===a?0:a,o=t.colour;return(0,P.jsxs)("li",{className:"ResourceGraphs-module_resourceItem__1fdAM",children:[(0,P.jsx)("span",{className:"ResourceGraphs-module_resourceSwatch__2gkVy",style:{background:o.toString()}}),(0,P.jsx)(Z.Trans,{id:"core.resource-graphs.resource-value",defaults:"{label}: {current,number} / {maximum,number}",values:{label:n,current:i,maximum:s}})]},e)}))})}))})}var q,B,K,J,$,Y=function(t){var e=t.children,n=t.cursorLeft,r=t.itemTop,i=t.itemLeft;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("div",{className:"ResourceGraphs-module_markerLine__3WokG",style:{left:n-i}}),(0,V.createPortal)((0,P.jsx)("div",{className:"ResourceGraphs-module_markerTooltip__S7KRZ",style:{top:r,left:n},children:e}),document.body)]})},Q="resources",tt="gauges",et=(q=Reflect.metadata("design:type",x.TY),$=J=function(t){(0,l.Z)(n,t);var e=(0,u.Z)(n);function n(){var t,s;(0,a.Z)(this,n);for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];s=e.call.apply(e,p()(t=[this]).call(t,u)),(0,i.Z)(s,"timeline",K,(0,o.Z)(s)),s.scaleX=void 0,s.dataGroups=new(y()),s.getDataByHandle=function(t,e){var n,i=s.dataGroups.get(e);if(!i)return[];var a=s.parser.pull,o=a.duration,l=a.timestamp,u=l+o*t;return k()(n=i.data).call(n,(function(t){var e=(0,r.Z)({},m()(t.data,(function(t){return t.time<=u})));if(t.linear&&null!=e){var n,i,a,s=null!==(n=e.time)&&void 0!==n?n:l,c=h()(t.data,(function(t){return t.time>u}))||{current:0,time:l+o},d=c.current,f=c.time,v=d-(null!==(i=e.current)&&void 0!==i?i:0),p=(u-s)/(f-s);e.current=(null!==(a=e.current)&&void 0!==a?a:0)+v*p}return(0,r.Z)({label:t.label,colour:t.colour},e)}))},s.addDataGroup({handle:Q,label:(0,P.jsx)(Z.Trans,{id:"core.resource-graphs.row-label",defaults:"Resources"})});var d=s.parser.pull,f=d.timestamp,v=d.duration;return s.scaleX=(0,b.Z)().domain([f,f+v]).range([0,1]),s}return(0,s.Z)(n,[{key:"addResource",value:function(t){this.addResources(t.label,[t])}},{key:"addResources",value:function(t,e){this.addDatas(Q,e,t)}},{key:"addGauge",value:function(t,e){this.addGauges(t.label,[t],e)}},{key:"addGauges",value:function(t,e,n){var i=this.dataGroups.get(tt);null==i&&(i=this.addDataGroup((0,r.Z)((0,r.Z)({},n),{},{handle:tt,label:(0,P.jsx)(Z.Trans,{id:"core.resource-graphs.gauge-label",defaults:"Gauges"})}))),this.addDatas(tt,e,t)}},{key:"addDataGroup",value:function(t){var e=t.handle,n=t.label,r=t.collapse,i=t.forceCollapsed,a=t.height,s=this.dataGroups.get(e);if(null==s){var o=new x.e2({label:n,order:-200,height:null!=a?a:64,collapse:null==r||r,forceCollapsed:null!=i&&i,items:[new x.ct({content:(0,P.jsx)(X,{handle:e,getData:this.getDataByHandle}),start:0,end:this.parser.pull.duration,depth:1})]});this.timeline.addRow(o),s={data:[],row:o},this.dataGroups.set(e,s)}else s.row.collapse=null!=r?r:s.row.collapse,s.row.height=null!=a?a:s.row.height,s.row.forceCollapsed=null!=i?i:s.row.forceCollapsed;return s}},{key:"addData",value:function(t,e){this.addDatas(t,[e],e.label)}},{key:"addDatas",value:function(t,e,n){var r,i=this,a=this.dataGroups.get(t);null!=a&&(e.forEach((function(t){return null==a?void 0:a.data.push(t)})),a.row.addRow(new x.e2({label:n,height:null!==(r=a.row.height)&&void 0!==r?r:64,items:k()(e).call(e,(function(t){return new x.ct({content:(0,P.jsx)(z,{resource:t,scaleX:i.scaleX}),start:0,end:i.parser.pull.duration})}))})))}}]),n}(j.qk),J.handle="resourceGraphs",B=$,K=(0,c.Z)(B.prototype,"timeline",[E.I,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),B)},36356:function(t,e,n){"use strict";n.d(e,{$:function(){return r.$B}});var r=n(60402)},48453:function(t,e,n){"use strict";n.d(e,{a:function(){return b}});var r,i,a,s,o,l=n(23257),u=n(68420),c=n(27344),d=n(5281),h=n(90306),f=n(50596),m=n(300),v=n(77766),p=n.n(v),g=n(43719),y=n(73540),w=n(28683),k=n(76704),Z=n(70273),b=(r=Reflect.metadata("design:type",Z.e),o=s=function(t){(0,h.Z)(n,t);var e=(0,f.Z)(n);function n(){var t,r;(0,u.Z)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=e.call.apply(e,p()(t=[this]).call(t,s)),(0,l.Z)(r,"actors",a,(0,d.Z)(r)),r}return(0,c.Z)(n,[{key:"getAdjustedDuration",value:function(t){var e=t.duration,n=t.attribute,r=t.actor,i=void 0===r?this.parser.actor.id:r,a=this.actors.get(i),s=a.attributes[null!=n?n:g.W[a.job].speedStat];return(0,y.y0)(s.value,e)}},{key:"isAdjustmentEstimated",value:function(t){return this.getActorAttribute(t).estimated}},{key:"getActorAttribute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.attribute,n=t.actor,r=void 0===n?this.parser.actor.id:n,i=this.actors.get(r);return i.attributes[null!=e?e:g.W[i.job].speedStat]}}]),n}(w.qk),s.handle="speedAdjustments",i=o,a=(0,m.Z)(i.prototype,"actors",[k.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),i)},57746:function(t,e,n){"use strict";n.d(e,{ZP:function(){return c},bI:function(){return u},eg:function(){return d}});var r=n(97530),i=n(90306),a=n(50596),s=n(68420),o=n(27344),l=n(40753),u={MORBID:0,MAJOR:1,MEDIUM:2,MINOR:3,IGNORE:void 0},c=function(){function t(e){(0,s.Z)(this,t),this.icon=void 0,this.content=void 0,this.why=void 0,this.severityValue=void 0,this.icon=e.icon,this.content=e.content,this.why=e.why,this.severityValue=e.severity}return(0,o.Z)(t,[{key:"severity",get:function(){return this.severityValue},set:function(t){this.severityValue=null!=t?t:u.MEDIUM}}]),t}(),d=function(t){(0,i.Z)(n,t);var e=(0,a.Z)(n);function n(t){var i,a;return(0,s.Z)(this,n),(a=e.call(this,(0,r.Z)((0,r.Z)({},t),{},{severity:u.MINOR}))).tiers=void 0,a.value=void 0,a.matcher=void 0,a.tiers=t.tiers,a.value=t.value,a.matcher=null!==(i=t.matcher)&&void 0!==i?i:l.CL,a}return(0,o.Z)(n,[{key:"severity",get:function(){return this.matcher(this.tiers,this.value)},set:function(t){}}]),n}(c)},52250:function(t,e,n){"use strict";n.d(e,{bI:function(){return T.bI},q$:function(){return T.ZP},eg:function(){return T.eg},ZP:function(){return O}});var r,i,a,s,o=n(68420),l=n(27344),u=n(90306),c=n(50596),d=n(77766),h=n.n(d),f=n(47302),m=n.n(f),v=n(20116),p=n.n(v),g=n(28683),y=n(67294),w=n(8437),k=n(97530),Z=n(44845),b=n(2991),j=n.n(b),E=n(86359),x=n(29323),T=n(57746),C=n(70636),_=n(25142),A=n(91926),R=(n(65002),"Suggestions-module_checkbox__2r5WZ"),S="Suggestions-module_item__3XrzH",D=n(85893),I=(r={},(0,Z.Z)(r,T.bI.MORBID,{content:(0,D.jsx)(E.Trans,{id:"core.suggestions.severity.morbid",defaults:"Morbid"}),color:"black",icon:"times"}),(0,Z.Z)(r,T.bI.MAJOR,{content:(0,D.jsx)(E.Trans,{id:"core.suggestions.severity.major",defaults:"Major"}),color:"red",icon:"arrow up"}),(0,Z.Z)(r,T.bI.MEDIUM,{content:(0,D.jsx)(E.Trans,{id:"core.suggestions.severity.medium",defaults:"Medium"}),color:"orange"}),(0,Z.Z)(r,T.bI.MINOR,{content:(0,D.jsx)(E.Trans,{id:"core.suggestions.severity.minor",defaults:"Minor"}),color:"blue",icon:"arrow down"}),r),N=(0,x.Pi)((s=a=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(){var t,r;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(r=e.call.apply(e,h()(t=[this]).call(t,a))).onToggleShowMinor=function(t,e){r.context.settingsStore.setShowMinorSuggestions(e.checked)},r}return(0,l.Z)(n,[{key:"render",value:function(){var t,e=this.context.settingsStore.showMinorSuggestions,n=p()(t=this.props.suggestions).call(t,(function(t){return e||t.severity!==T.bI.MINOR})),r=this.props.suggestions.some((function(t){return t.severity===T.bI.MINOR}));return(0,D.jsxs)(D.Fragment,{children:[r&&(0,D.jsx)(C.Z,{toggle:!0,label:(0,D.jsx)("label",{children:(0,D.jsx)(E.Trans,{id:"core.suggestion.show-minor",defaults:"Show minor"})}),defaultChecked:e,onChange:this.onToggleShowMinor,className:R}),(0,D.jsxs)("div",{className:"Suggestions-module_items__1HGs-",children:[j()(n).call(n,(function(t,e){return(0,D.jsxs)("div",{className:S,children:[(0,D.jsx)("img",{src:t.icon,alt:""}),(0,D.jsxs)("div",{children:[t.content,(0,D.jsxs)("div",{className:"Suggestions-module_extra__3kAoW",children:[(0,D.jsx)(_.Z,(0,k.Z)({horizontal:!0},I[t.severity])),t.why]})]})]},e)})),0===n.length&&(0,D.jsx)("div",{className:S,children:(0,D.jsxs)("div",{children:[(0,D.jsx)("strong",{children:(0,D.jsx)(E.Trans,{id:"core.suggestion.nothing",defaults:"There's nothing here!"})}),(0,D.jsx)("br",{}),r&&(0,D.jsx)(E.Trans,{id:"core.suggestion.nothing-but-minor",defaults:'You can check over the minor suggestions by flicking the "Show minor" switch in the top right.'})]})})]})]})}}]),n}(y.Component),a.contextType=A.xf,i=s))||i,H=N,O=function(t){(0,u.Z)(n,t);var e=(0,c.Z)(n);function n(){var t,r;(0,o.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(r=e.call.apply(e,h()(t=[this]).call(t,a)))._suggestions=[],r}return(0,l.Z)(n,[{key:"add",value:function(t){t instanceof T.ZP?this._suggestions.push(t):console.error("TODO: Proper error message for passing a non-suggestion to the suggestion add handler")}},{key:"output",value:function(){var t,e;if(0===this._suggestions.length)return!1;var n=m()(t=p()(e=this._suggestions).call(e,(function(t){return t.severity!==T.bI.IGNORE}))).call(t,(function(t,e){return t.severity-e.severity}));return(0,D.jsx)(H,{suggestions:n})}}]),n}(g.qk);O.handle="suggestions",O.displayOrder=w.Z.SUGGESTIONS,O.displayMode=g.d1.FULL,O.title={id:"core.suggestions.title",defaults:"Suggestions"}},56611:function(t,e,n){"use strict";n.d(e,{tC:function(){return jt},Pp:function(){return kt},vo:function(){return Rt},ct:function(){return Zt},e2:function(){return At},hg:function(){return Et},TY:function(){return vt}});var r=n(68420),i=n(27344),a=n(90306),s=n(50596),o=n(77766),l=n.n(o),u=n(86359),c=n(28683),d=n(67294),h=n(8437),f=n(97530),m=n(22327),v=n(20116),p=n.n(v),g=n(2991),y=n.n(g),w=n(94184),k=n.n(w),Z=n(7197),b=n(41151),j=n(40753),E=n(99021),x=n(8333),T=n(72119),C=n.n(T),_=n(74691),A=n.n(_),R=n(39392),S=n.n(R),D=n(78580),I=n.n(D),N=n(49524),H=n(52892),O=n(87582),G=n(85893),M=(0,N.Z)(),L=(0,d.createContext)({primary:M,extended:M}),U=function(){return(0,d.useContext)(L)},P=new(S())([[WheelEvent.DOM_DELTA_LINE,40],[WheelEvent.DOM_DELTA_PAGE,800]]);function z(t){var e;null==t||I()(e=t.type).call(e,"touch")||t.preventDefault()}function F(t){var e=t.children,n=t.min,r=t.max,i=t.start,a=t.end,s=t.zoomMin,o=void 0===s?1:s,l=t.panFactor,u=void 0===l?.05:l,c=t.zoomFactor,h=void 0===c?.2:c,f=t.exposeSetView,m=(0,d.useState)([null!=i?i:n,null!=a?a:r]),v=(0,x.Z)(m,2),p=v[0],g=v[1],y=(0,d.useState)([0,100]),w=(0,x.Z)(y,2),k=w[0],Z=w[1],b=p[1]-p[0],j=(0,d.useCallback)((function(t){var e=(0,x.Z)(t,2),i=e[0],a=e[1];a=Math.max(i,a);var s=o-(a-i);s>0&&(i=Math.max(i-s/2,n),a=Math.min(i+o,r)),g([i,a])}),[n,r,o]);(0,d.useEffect)((function(){return null==f?void 0:f(j)}),[j,f]);var E=(0,d.useMemo)((function(){return(0,N.Z)().range(k).domain([0,b])}),[k,b]),T=(0,d.useRef)(null),C=(0,d.useRef)(),_=(0,d.useCallback)((function(t){var e=t.bounds;C.current=e,null!=(null==e?void 0:e.width)&&Z([0,e.width])}),[]),R=(0,d.useCallback)((function(t){var e=t.delta;g((function(t){var i=(0,x.Z)(t,2),a=i[0],s=i[1],o=s-a;return[A()(a+e,n,r-o),A()(s+e,n+o,r)]}))}),[n,r]),S=(0,d.useCallback)((function(t){var e=t.delta,i=t.centre;g((function(t){var a=(0,x.Z)(t,2),s=a[0],l=a[1],u=A()(s-e*i,n,l-o);return[u,A()(l+e*(1-i),u+o,r)]}))}),[n,r,o]),D={domTarget:T,eventOptions:{passive:!1},drag:{axis:"x"}},I=(0,O.T2)({onWheel:function(t){var e=(0,x.Z)(t.delta,2),n=e[0],r=e[1],i=t.event;z(i);var a=Math.abs(n)>Math.abs(r)?n:r;if(0!==a){var s,o,l=null!=i&&function(t){return"wheel"===t.type}(i)?(s=i.deltaMode,a*(null!==(o=P.get(s))&&void 0!==o?o:1)/120):a;R({delta:l*b*u})}},onPinch:function(t){var e,n=(0,x.Z)(t.delta,2),r=n[0],i=n[1],a=t.touches,s=t.origin,o=t.event;if((0!==r||0!==i)&&null!=s){null==o||o.preventDefault();var l=(0,x.Z)(s,1)[0],u=null!==(e=C.current)&&void 0!==e?e:{},c=u.left,d=void 0===c?0:c,f=u.width,m=void 0===f?1:f,v=A()((l-d)/m,0,1);if(a>0)S({delta:-2*E.invert(r).getTime(),centre:v});else{var p=i/Math.abs(i)*h,g=p>0?p:p/(Math.abs(p)+1);S({delta:b*g,centre:v})}}},onDrag:function(t){var e=(0,x.Z)(t.delta,1)[0];z(t.event),R({delta:-E.invert(e).getTime()})}},D);(0,d.useEffect)(I,[I]);var M=(0,d.useMemo)((function(){var t=.05*b,e=(0,N.Z)().range(k).domain(p),n=e.copy().domain([p[0]-t,p[1]]);return{primary:e,extended:n}}),[b,k,p]);return(0,G.jsx)("div",{ref:T,children:(0,G.jsx)(L.Provider,{value:M,children:(0,G.jsx)(H.Z,{bounds:!0,onResize:_,children:e})})})}var W="Timeline-module_track__pDSTM",V="Timeline-module_major__34pof",X="Timeline-module_axisTick__NL0Uz",q=(0,d.memo)((function(t){var e,n,r=t.items,i=U(),a=y()(e=i.extended.domain()).call(e,(function(t){return t.getTime()})),s=(0,x.Z)(a,2),o=s[0],l=s[1],u=[],c=(0,E.Z)(C()(r).call(r));try{for(c.s();!(n=c.n()).done;){var d,h,f=(0,x.Z)(n.value,2),m=f[0],v=f[1];v.start>l||(null!==(d=v.end)&&void 0!==d?d:v.start)<o||u.push({index:m,left:null!==(h=i.primary(v.start))&&void 0!==h?h:0,right:v.end&&i.primary(v.end),depth:v.depth})}}catch(t){c.e(t)}finally{c.f()}return(0,G.jsx)(G.Fragment,{children:y()(u).call(u,(function(t){var e=r[t.index].Content;return(0,G.jsx)(B,{left:t.left,right:t.right,depth:t.depth,children:(0,G.jsx)(e,{})},t.index)}))})})),B=(0,d.memo)((function(t){var e=t.children,n=t.left,r=t.right,i=t.depth;return(0,G.jsx)("div",{className:"Timeline-module_item__3CJXb",style:{transform:"translateX(".concat(n,"px)"),width:null!=r?r-n:void 0,zIndex:i},children:e})})),K=(0,d.memo)((function(t){var e,n,r=t.height,i=U(),a=i.extended.ticks(),s=i.primary.domain()[0],o=(0,Z.Z)(s),l=Z.Z.offset(o,1),u=p()(e=y()(a).call(a,(function(t){return i.primary(t)}))).call(e,j.$K);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("div",{className:W,style:{gridRowStart:1,gridRowEnd:"span ".concat(r+1)},children:y()(a).call(a,(function(t,e){return(0,G.jsx)(B,{left:u[e],children:(0,G.jsx)("div",{className:k()("Timeline-module_gridLine__1Jkpc",J(t)&&V)})},t.getTime())}))}),(0,G.jsxs)("div",{className:W,style:{gridRowStart:r+1,gridRowEnd:"span 1",height:50},children:[y()(a).call(a,(function(t,e){return(0,G.jsx)(d.Fragment,{children:(0,G.jsxs)(B,{left:u[e],children:[(0,G.jsx)("div",{className:X,children:$(t)}),J(t)&&t>=l&&(0,G.jsx)("div",{className:k()(X,V),children:Y(t)})]})},t.getTime())})),(0,G.jsx)(B,{left:null!==(n=i.primary(s))&&void 0!==n?n:0,right:i.primary(l),children:(0,G.jsx)("div",{className:k()(X,V,"Timeline-module_first__2yJov"),children:Y(o)})})]})]})})),J=function(t){return Number((0,Z.Z)(t))===Number(t)},$=(0,b.g0)("%-S"),Y=(0,b.g0)("%-Mm"),Q=n(47302),tt=n.n(Q),et=n(52424),nt=n.n(et),rt=n(32366),it=n.n(rt);function at(t){var e=new(nt());return function(n){var r=e.get(n);return null==r&&(r=t(n),e.set(n,r)),r}}var st=at((function(t){var e;return Math.max(lt(t)&&1,it()(e=t.rows).call(e,(function(t,e){return t+st(e)}),0))})),ot=function t(e){return it()(e).call(e,(function(e,n){return Math.max(e,t(n.rows)+1)}),0)},lt=at((function(t){var e;return t.items.length+it()(e=t.rows).call(e,(function(t,e){return t+lt(e)}),0)})),ut=["rows","top","height","parentCollapsed"],ct=(0,d.memo)((function(t){var e=t.rows,n=t.top,r=t.height,i=t.parentCollapsed,a=(0,m.Z)(t,ut),s=(0,d.useMemo)((function(){var t;return tt()(t=p()(e).call(e,(function(t){return lt(t)>0}))).call(t,(function(t,e){var n,r;return(null!==(n=t.order)&&void 0!==n?n:0)-(null!==(r=e.order)&&void 0!==r?r:0)}))}),[e]),o=n,l=y()(s).call(s,(function(t){if(i)return{top:o,height:r};var e=st(t),n=o;return o+=e,{top:n,height:e}}));return(0,G.jsx)(G.Fragment,{children:y()(s).call(s,(function(t,e){return(0,G.jsx)(dt,(0,f.Z)({row:t,top:l[e].top,height:l[e].height,parentCollapsed:i},a),e)}))})})),dt=(0,d.memo)((function(t){var e,n=t.row,r=t.depth,i=t.maxDepth,a=t.top,s=t.height,o=t.parentCollapsed,l=(0,d.useState)(null!==(e=n.collapse)&&void 0!==e&&e),u=(0,x.Z)(l,2),c=u[0],h=u[1],m=(0,d.useCallback)((function(){return h((function(t){return!t}))}),[]);if(n.hideCollapsed&&o)return null;var v=n.rows.length>0,p=v&&(c||o),g={gridRowStart:a,gridRowEnd:"span ".concat(s),minHeight:o?void 0:n.height};return(0,G.jsxs)(G.Fragment,{children:[!o&&null!=n.label&&(0,G.jsx)(ht,{minimised:v&&!c,collapsed:p,onClick:!v||p&&n.forceCollapsed?void 0:m,gridStyle:(0,f.Z)({gridColumnStart:-2-i+r},g),children:n.label}),n.items.length>0&&(0,G.jsx)("div",{className:W,style:g,children:(0,G.jsx)(q,{items:n.items})}),v&&(0,G.jsx)(ct,{rows:n.rows,depth:r+1,maxDepth:i,top:a,height:s,parentCollapsed:p})]})})),ht=(0,d.memo)((function(t){var e=t.minimised,n=t.collapsed,r=t.onClick,i=t.gridStyle,a=t.children;return(0,G.jsx)(H.Z,{bounds:!0,children:function(t){var s,o=t.measureRef,l=t.contentRect;return(0,G.jsx)("div",{ref:o,className:k()("Timeline-module_label__LEpvi",e&&"Timeline-module_minimised__3_5Iv",n&&"Timeline-module_collapsed__cdqyL"),style:i,onClick:r,children:(0,G.jsx)("div",{className:"Timeline-module_content__3hZxy",style:{maxWidth:e?null===(s=l.bounds)||void 0===s?void 0:s.height:void 0},children:a})})}})})),ft=["rows","items"];function mt(t){var e=t.rows,n=void 0===e?[]:e,r=t.items,i=void 0===r?[]:r,a=(0,m.Z)(t,ft),s=ot(n),o=st({rows:n,items:i});return(0,G.jsx)(F,(0,f.Z)((0,f.Z)({},a),{},{children:function(t){var e=t.measureRef;return(0,G.jsxs)("div",{className:"Timeline-module_timeline__39UjP",children:[(0,G.jsx)("div",{ref:e,style:{gridColumnStart:2,gridColumnEnd:"span 1"}}),(0,G.jsx)(K,{height:o}),(0,G.jsx)(ct,{rows:n,depth:0,maxDepth:s,top:1,height:o,parentCollapsed:!1}),i.length>0&&(0,G.jsx)("div",{className:W,style:{gridRowStart:1,gridRowEnd:"span ".concat(o)},children:(0,G.jsx)(q,{items:i})})]})}}))}var vt=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(){var t,i;(0,r.Z)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(i=e.call.apply(e,l()(t=[this]).call(t,s))).setView=void 0,i.rows=[],i.items=[],i.show=function(t,e){var r,a,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null===(r=(a=i).setView)||void 0===r||r.call(a,[t,e]),s&&i.parser.scrollTo(n.handle)},i.exposeSetView=function(t){i.setView=t},i}return(0,i.Z)(n,[{key:"addRow",value:function(t){return this.rows.push(t),t}},{key:"addItem",value:function(t){return this.items.push(t),t}},{key:"output",value:function(){return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(u.Trans,{id:"core.timeline.help-text",render:"span",className:"Timeline-module_helpText__1zj7F",defaults:"Scroll or click+drag to pan, ctrl+scroll or pinch to zoom."}),(0,G.jsx)(mt,{rows:this.rows,items:this.items,min:0,max:this.parser.currentDuration,end:Math.min(this.parser.currentDuration,6e4),zoomMin:1e4,exposeSetView:this.exposeSetView})]})}}]),n}(c.qk);vt.handle="timeline",vt.displayOrder=h.Z.TIMELINE,vt.displayMode=c.d1.FULL,vt.title={id:"core.timeline.title",defaults:"Timeline"};var pt=["content"],gt=["ability"],yt=["action"],wt=["status"],kt=function t(e){(0,r.Z)(this,t),this.start=void 0,this.end=void 0,this.depth=void 0,this.Content=void 0,this.start=e.start,this.end=e.end,this.depth=e.depth},Zt=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i,a=t.content,s=(0,m.Z)(t,pt);return(0,r.Z)(this,n),(i=e.call(this,s)).content=void 0,i.Content=function(){return(0,G.jsx)(G.Fragment,{children:i.content})},i.content=a,i}return n}(kt),bt=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i,a=t.ability,s=(0,m.Z)(t,gt);return(0,r.Z)(this,n),(i=e.call(this,s)).ability=void 0,i.Content=function(){return(0,G.jsx)("div",{className:k()("Item-module_abilityItem__6fNH1",i.start===i.end&&"Item-module_zeroWidthAbility__2O0g6"),children:(0,G.jsx)("img",{src:i.ability.icon,alt:i.ability.name,title:i.ability.name})})},i.ability=a,i}return n}(kt),jt=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i=t.action,a=(0,m.Z)(t,yt);return(0,r.Z)(this,n),e.call(this,(0,f.Z)((0,f.Z)({},a),{},{ability:i}))}return n}(bt),Et=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i=t.status,a=(0,m.Z)(t,wt);return(0,r.Z)(this,n),e.call(this,(0,f.Z)((0,f.Z)({},a),{},{ability:i}))}return n}(bt),xt=n(18527),Tt=n(3362),Ct=n(3649),_t=n.n(Ct),At=function(){function t(){var e,n,i,a,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.Z)(this,t),this.label=void 0,this.height=void 0,this.order=void 0,this.collapse=void 0,this.forceCollapsed=void 0,this.hideCollapsed=void 0,this.rows=void 0,this.items=void 0,this.label=s.label,this.height=s.height,this.order=s.order,this.collapse=s.collapse,this.forceCollapsed=s.forceCollapsed,this.hideCollapsed=s.hideCollapsed,this.rows=null!==(e=null===(n=s.rows)||void 0===n?void 0:_t()(n).call(n))&&void 0!==e?e:[],this.items=null!==(i=null===(a=s.items)||void 0===a?void 0:_t()(a).call(a))&&void 0!==i?i:[]}return(0,i.Z)(t,[{key:"addRow",value:function(t){return this.rows.push(t),t}},{key:"addItem",value:function(t){return this.items.push(t),t}}]),t}(),Rt=function(t){(0,a.Z)(n,t);var e=(0,s.Z)(n);function n(){var t,i;(0,r.Z)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(i=e.call.apply(e,l()(t=[this]).call(t,s))).containerRow=void 0,i}return(0,i.Z)(n,[{key:"addRow",value:function(t){return this.items.length>0&&this.buildContainer(),(0,xt.Z)((0,Tt.Z)(n.prototype),"addRow",this).call(this,t)}},{key:"addItem",value:function(t){return null==this.containerRow&&this.rows.length>0&&this.buildContainer(),null==this.containerRow?(0,xt.Z)((0,Tt.Z)(n.prototype),"addItem",this).call(this,t):this.containerRow.addItem(t)}},{key:"buildContainer",value:function(){this.containerRow=(0,xt.Z)((0,Tt.Z)(n.prototype),"addRow",this).call(this,new At({order:-1/0,items:this.items})),this.items=[]}}]),n}(At)},3085:function(t,e,n){"use strict";n.d(e,{b:function(){return V}});var r,i,a,s,o,l,u,c=n(8333),d=n(99021),h=n(23257),f=n(68420),m=n(27344),v=n(5281),p=n(90306),g=n(50596),y=n(300),w=n(77766),k=n.n(w),Z=n(39392),b=n.n(Z),j=n(20116),E=n.n(j),x=n(32366),T=n.n(x),C=n(89400),_=n.n(C),A=n(72119),R=n.n(A),S=n(94473),D=n.n(S),I=n(86359),N=n(28683),H=n(74489),O=n(76704),G=(n(67294),n(32690)),M=n(56611),L=n(2991),U=n.n(L),P=n(74407),z=[1,2,3,4,11,66,142,149,201,213,227,292,296,371,378,387,401,402,421,423,434,435,437,467,468,486,487,504,506,510,516,603,609,610,625,626,663,667,668,711,713,715,770,774,778,779,783,800,822,823,896,900,901,926,930,937,939,961,990,991,996,997,1010,1047,1055,1069,1098,1105,1118,1119,1150,1222,1254,1257,1267,1268,1271,1283,1287,1343,1347,1348,1363,1389,1391,1399,1400,1417,1421,1423,1438,1459,1460,1477,1479,1497,1510,1511,1513,1520,1522,1533,1576,1596,1614,1619,1626,1681,1696,1722,1726,1731,1757,1758,1768,1785,1849,1900,1907,1908,1929,1937,1943,1950,1953,1963,1990,2109,2148,2149,2150,2151,2159,2165,2206,2249,2252,2285,2286,2305,2310,2350,2407,2408,2416,2486,2505,2523,2529,2542,2573,2651,2656,2658,2737,2738,2781,2810,2821,2824,2825,2851,2910,2933,2953,2955,2961,2973,2974,2975,2983,2999,3007,3023,3024,3055,3056,3057,3058,3080,3121,3165,3174,3190,3219,3249,3283,3287,3316,3318,3324,3362,3363,3408,3421,3461,3465,3466,3467,3501,3513,3519,3549,3552,3570,3571,3697,1727],F=U()(z).call(z,(function(t){return t+P.bG})),W=n(85893),V=(r=Reflect.metadata("design:type",G.Z),i=Reflect.metadata("design:type",M.TY),u=l=function(t){(0,p.Z)(n,t);var e=(0,g.Z)(n);function n(){var t,r;(0,f.Z)(this,n);for(var i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return r=e.call.apply(e,k()(t=[this]).call(t,a)),(0,h.Z)(r,"brokenLog",s,(0,v.Z)(r)),(0,h.Z)(r,"timeline",o,(0,v.Z)(r)),r.actorWindows=new(b()),r}return(0,m.Z)(n,[{key:"getWindows",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.actorId,r=void 0===n?this.parser.actor.id:n,i=e.start,a=void 0===i?this.parser.pull.timestamp:i,s=e.end,o=void 0===s?this.parser.currentEpochTimestamp:s;return E()(t=this.getActorWindows(r)).call(t,(function(t){return t.end>a&&t.start<o}))}},{key:"getDuration",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.actorId,r=void 0===n?this.parser.actor.id:n,i=e.start,a=void 0===i?this.parser.pull.timestamp:i,s=e.end,o=void 0===s?this.parser.currentEpochTimestamp:s;return T()(t=this.getWindows({actorId:r,start:a,end:o})).call(t,(function(t,e){return t+Math.min(e.end,o)-Math.max(e.start,a)}),0)}},{key:"isUnableToAct",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.actorId,n=void 0===e?this.parser.actor.id:e,r=t.timestamp,i=void 0===r?this.parser.currentEpochTimestamp:r;return this.getWindows({actorId:n,start:i,end:i}).length>0}},{key:"initialise",value:function(){var t=(0,H.hX)().status((0,H.kw)(F));this.addEventHook(t.type("statusApply"),this.onApply),this.addEventHook(t.type("statusRemove"),this.onRemove),this.addEventHook("complete",this.onComplete)}},{key:"onApply",value:function(t){var e=this.getActorWindows(t.target),n=e[e.length-1];(null==n||n.depth<=0)&&(n={depth:0,start:t.timestamp,end:1/0,applyEvents:[],removeEvents:[]},e.push(n)),n.depth++,n.applyEvents.push(t)}},{key:"onRemove",value:function(t){var e=this.getActorWindows(t.target),n=e[e.length-1];null==n||n.depth<=0?this.brokenLog.trigger(this,"no valid window to close",(0,W.jsx)(I.Trans,{id:"core.unable-to-act.no-valid-window",defaults:"Actor {0} has no valid window to end.",values:{0:t.target}})):this.decrementWindow(n,t)}},{key:"onComplete",value:function(t){var e,n,r=this,i=(0,d.Z)(_()(e=this.actorWindows).call(e));try{for(i.s();!(n=i.n()).done;){var a=n.value;if(0!==a.length)for(var s=a[a.length-1];s.depth>0;)this.decrementWindow(s,t)}}catch(t){i.e(t)}finally{i.f()}this.debug((function(){return r.renderDebugTimelineData()}))}},{key:"getActorWindows",value:function(t){var e=this.actorWindows.get(t);return null==e&&(e=[],this.actorWindows.set(t,e)),e}},{key:"decrementWindow",value:function(t,e){t.depth--,t.removeEvents.push(e),t.depth<=0&&(t.end=e.timestamp)}},{key:"renderDebugTimelineData",value:function(){var t,e,n=this,r=this.parser.pull.timestamp,i=this.timeline.addRow(new M.e2({label:"UTA2 Debug",order:-1/0})),a=(0,d.Z)(R()(t=this.actorWindows).call(t));try{var s=function(){var t,a,s,o=(0,c.Z)(e.value,2),l=o[0],u=o[1],h=D()(t=n.parser.pull.actors).call(t,(function(t){return t.id===l})),f=i.addRow(new M.e2({label:null!=h?k()(a="".concat(h.name," (")).call(a,l,")"):l})),m=(0,d.Z)(u);try{for(m.s();!(s=m.n()).done;){var v=s.value;f.addItem(new M.ct({start:v.start-r,end:v.end-r,content:(0,W.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#aaf"}})}))}}catch(t){m.e(t)}finally{m.f()}};for(a.s();!(e=a.n()).done;)s()}catch(t){a.e(t)}finally{a.f()}}}]),n}(N.qk),l.handle="unableToAct",l.debug=!1,a=u,s=(0,y.Z)(a.prototype,"brokenLog",[O.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.brokenLog}}),o=(0,y.Z)(a.prototype,"timeline",[O.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),a)},37487:function(t,e){"use strict";e.Z={procOverlay:"ProcOverlay-module_procOverlay__1RGAc",link:"ProcOverlay-module_link__3AZJr"}},46700:function(t,e,n){var r={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":15596,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":15596,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":95606,"./ss.js":95606,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":59172,"./tzm-latn.js":59172,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=a,t.exports=i,i.id=46700}}]);
//# sourceMappingURL=691.0a01864e.js.map
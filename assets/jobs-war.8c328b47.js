"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[4497],{61806:function(t,e,a){a.d(e,{E:function(){return X}});var n,i,s,r,o,c,l,u,d,p,h,f,v=a(97530),m=a(19623),g=a(99021),E=a(23257),y=a(68420),A=a(27344),I=a(5281),w=a(90306),R=a(50596),Z=a(300),b=a(77766),T=a.n(b),C=a(39392),N=a.n(C),k=a(36384),_=a.n(k),L=a(20116),O=a.n(L),S=a(80426),P=a.n(S),j=a(94473),H=a.n(j),x=a(2991),G=a.n(x),M=a(86359),D=a(28683),F=a(76704),U=a(8510),V=a(81336),Y=a(73947),z=a(56611),W=(a(67294),a(45150)),B=a(40753),q="ActionTimeline-module_chargeGain__3-Of9",J="ActionTimeline-module_icon__8OvsF",K=a(85893);!function(t){t[t.CHARGE_GAIN=0]="CHARGE_GAIN",t[t.ACTION=1]="ACTION"}(f||(f={}));var X=(n=Reflect.metadata("design:type",U.Z),i=Reflect.metadata("design:type",V.w),s=Reflect.metadata("design:type",Y.V),r=Reflect.metadata("design:type",z.TY),h=p=function(t){(0,w.Z)(a,t);var e=(0,R.Z)(a);function a(){var t,n;(0,y.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=e.call.apply(e,T()(t=[this]).call(t,s)),(0,E.Z)(n,"castTime",c,(0,I.Z)(n)),(0,E.Z)(n,"cooldowns",l,(0,I.Z)(n)),(0,E.Z)(n,"data",u,(0,I.Z)(n)),(0,E.Z)(n,"timeline",d,(0,I.Z)(n)),n.resolvedRows=[],n.groupRows=new(N()),n}return(0,A.Z)(a,[{key:"getRow",value:function(t){return this.addRow({content:[t]})}},{key:"initialise",value:function(){var t,e=(0,g.Z)(this.constructor.rows);try{for(e.s();!(t=e.n()).done;){var a=t.value,n=this.resolveConfig(a);this.resolvedRows.push(n),this.addRow(n)}}catch(t){e.e(t)}finally{e.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t,e,a=this,n=new(_()),i=(0,g.Z)(this.resolvedRows);try{for(i.s();!(e=i.n()).done;){var s=e.value,r=this.addRow(s);this.populateRow(r,s),s.content.forEach((function(t){return a.cooldowns.groups(t).forEach((function(t){return n.add(t)}))}))}}catch(t){i.e(t)}finally{i.f()}O()(t=this.cooldowns.allGroups()).call(t,(function(t){return!n.has(t)})).forEach((function(t){var e={content:[t]},n=a.addRow(e);a.populateRow(n,e)}))}},{key:"resolveConfig",value:function(t){var e=t;return("object"!==(0,m.Z)(e)||Array.isArray(e))&&(e={content:e}),(0,v.Z)((0,v.Z)({},e),{},{content:(0,B.rY)(e.content)})}},{key:"addRow",value:function(t){var e,a,n=this,i=P()(e=t.content).call(e,(function(t){return n.cooldowns.groups(t)})),s=H()(a=G()(i).call(i,(function(t){return n.groupRows.get(t)}))).call(a,B.$K);if(null!=s)return s;var r,o=t.content[0],c=null!=t.label?t.label:"GCD"===o?(0,K.jsx)(M.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof o?n.data.actions[o].name:"number"==typeof o?null===(r=n.cooldowns.cooldownHistory(o)[0])||void 0===r?void 0:r.action.name:o.name,l=this.timeline.addRow(new z.vo({label:c,order:t.order,collapse:!0}));return i.forEach((function(t){return n.groupRows.set(t,l)})),l}},{key:"populateRow",value:function(t,e){var a=this,n=e.content;this.addCooldownItems(t,P()(n).call(n,(function(t){return a.cooldowns.cooldownHistory(t)}))),this.addChargeItems(t,P()(n).call(n,(function(t){return a.cooldowns.chargeHistory(t)})))}},{key:"addCooldownItems",value:function(t,e){var a,n=(0,g.Z)(e);try{for(n.s();!(a=n.n()).done;){var i=a.value,s=this.getCooldownDuration(i),r=i.start-this.parser.pull.timestamp,o=r+s;t.addItem(new z.ct({start:r,end:o,content:(0,K.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(t){n.e(t)}finally{n.f()}}},{key:"addChargeItems",value:function(t,e){var a,n=(0,g.Z)(e);try{for(n.s();!(a=n.n()).done;){var i=a.value,s=i.delta<0?new z.tC({depth:f.ACTION,start:i.timestamp-this.parser.pull.timestamp,action:i.action}):new Q({depth:f.CHARGE_GAIN,start:i.timestamp-this.parser.pull.timestamp});t.addItem(s)}}catch(t){n.e(t)}finally{n.f()}}},{key:"getCooldownDuration",value:function(t){var e=t.end-t.start;if(t.endReason===V.g.EXPIRED){var a,n=null!==(a=this.castTime.forAction(t.action.id,t.start))&&void 0!==a?a:0;e=Math.max(e,n+100)}return e}}]),a}(D.qk),p.handle="actionTimeline",p.debug=!1,p.rows=[{content:"GCD",order:-97}],o=h,c=(0,Z.Z)(o.prototype,"castTime",[F.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),l=(0,Z.Z)(o.prototype,"cooldowns",[F.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),u=(0,Z.Z)(o.prototype,"data",[F.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,Z.Z)(o.prototype,"timeline",[F.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),o),Q=function(t){(0,w.Z)(a,t);var e=(0,R.Z)(a);function a(){var t,n;(0,y.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=e.call.apply(e,T()(t=[this]).call(t,s))).Content=function(){return(0,K.jsx)("div",{className:q,children:(0,K.jsx)(W.Z,{name:"angle double up",className:J})})},n}return a}(z.Pp)},8510:function(t,e,a){a.d(e,{Z:function(){return k}});var n,i,s,r,o,c,l,u=a(23257),d=a(68420),p=a(27344),h=a(5281),f=a(90306),v=a(50596),m=a(300),g=a(77766),E=a.n(g),y=a(20116),A=a.n(y),I=a(78580),w=a.n(I),R=a(28683),Z=a(74489),b=a(76704),T=a(73947),C=a(48453),N=1500,k=(n=Reflect.metadata("design:type",T.V),i=Reflect.metadata("design:type",C.a),l=c=function(t){(0,f.Z)(a,t);var e=(0,v.Z)(a);function a(){var t,n;(0,d.Z)(this,a);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=e.call.apply(e,E()(t=[this]).call(t,s)),(0,u.Z)(n,"data",r,(0,h.Z)(n)),(0,u.Z)(n,"speedAdjustments",o,(0,h.Z)(n)),n.castTimes=[],n.scIndex=null,n}return(0,p.Z)(a,[{key:"initialise",value:function(){var t=(0,Z.hX)().target(this.parser.actor.id).status(this.data.statuses.SWIFTCAST.id);this.addEventHook(t.type("statusApply"),this.onApplySwiftcast),this.addEventHook(t.type("statusRemove"),this.onRemoveSwiftcast)}},{key:"onApplySwiftcast",value:function(){this.scIndex=this.setInstantCastAdjustment()}},{key:"onRemoveSwiftcast",value:function(){this.reset(this.scIndex),this.scIndex=null}},{key:"setTimeAdjustment",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.currentEpochTimestamp,n=arguments.length>3?arguments[3]:void 0;return this.set({actions:t,adjustment:e,start:a,end:n,type:"time",affectsWhich:"cast"})}},{key:"setInstantCastAdjustment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,a=arguments.length>2?arguments[2]:void 0;return this.setPercentageAdjustment(t,0,"cast",e,a)}},{key:"setPercentageAdjustment",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cast",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.parser.currentEpochTimestamp,i=arguments.length>4?arguments[4]:void 0;return this.set({actions:t,adjustment:e,affectsWhich:a,start:n,end:i,type:"percentage"})}},{key:"set",value:function(t){return this.castTimes.push(t)-1}},{key:"reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;if(null!=t){var a=this.castTimes[t];a&&(a.end=e)}}},{key:"forEvent",value:function(t){return this.forAction(t.action,t.timestamp)}},{key:"recastForEvent",value:function(t){return this.recastForAction(t.action,t.timestamp)}},{key:"forAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return this.getAdjustedTime(t,e)}},{key:"recastForAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return this.getAdjustedTime(t,e,"recast")}},{key:"getAdjustedTime",value:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cast",i=A()(e=this.castTimes).call(e,(function(e){var i;return("all"===e.actions||w()(i=e.actions).call(i,t))&&e.start<=a&&(null==e.end||e.end>=a)&&("both"===e.affectsWhich||e.affectsWhich===n)})),s=this.data.getAction(t);if(null!=s){var r="recast"===n?null!=s.gcdRecast?s.gcdRecast:s.cooldown:s.castTime;if(null==r||"recast"===n&&r<=N)return r;null!=s.speedAttribute&&(r=this.speedAdjustments.getAdjustedDuration({duration:r,attribute:s.speedAttribute}));var o=0,c=0,l=1;i.forEach((function(t){"time"===t.type?(t.adjustment<0&&t.adjustment<o&&(o=t.adjustment),t.adjustment>0&&t.adjustment>c&&(c=t.adjustment)):"percentage"===t.type&&(l*=t.adjustment)}));var u=Math.max(r+c+o,0);if("recast"===n&&u<=N)return N;if(0===l)return 0;var d=u*l;return"recast"===n&&(d=Math.max(d,N)),10*Math.floor(d/10)}}}]),a}(R.qk),c.handle="castTime",s=l,r=(0,m.Z)(s.prototype,"data",[b.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),o=(0,m.Z)(s.prototype,"speedAdjustments",[b.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),s)},32596:function(t,e,a){a.d(e,{t:function(){return L}});var n,i,s,r,o,c,l,u=a(97530),d=a(41420),p=a(99021),h=a(23257),f=a(68420),v=a(27344),m=a(5281),g=a(90306),E=a(50596),y=a(300),A=a(77766),I=a.n(A),w=a(80426),R=a.n(w),Z=a(47302),b=a.n(Z),T=a(40753),C=a(28683),N=a(76704),k=a(73947),_=a(90577),L=(n=Reflect.metadata("design:type",k.V),i=Reflect.metadata("design:type",_.I),l=c=function(t){(0,g.Z)(a,t);var e=(0,E.Z)(a);function a(){var t,n;(0,f.Z)(this,a);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=e.call.apply(e,I()(t=[this]).call(t,s)),(0,h.Z)(n,"data",r,(0,m.Z)(n)),(0,h.Z)(n,"invulnerability",o,(0,m.Z)(n)),n.ft=function(t){return n.parser.formatEpochTimestamp(t,1)},n}return(0,v.Z)(a,[{key:"getUptime",value:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.actor,i="string"==typeof t?this.data.statuses[t]:t,s=(0,T.rY)(e),r=R()(s).call(s,(function(t){var e,s;return a.edgesForActor(t,null!==(e=null===(s=t.statusHistory.get(i.id))||void 0===s?void 0:s.get(n.id))&&void 0!==e?e:[])}));b()(r).call(r,(function(t,e){return t.timestamp-e.timestamp}));var o,c={uptime:0,depth:0,application:0},l=(0,p.Z)(r);try{for(l.s();!(o=l.n()).done;){var u,d,h,f=o.value;"apply"===f.side?(0===c.depth&&(c.application=f.timestamp),c.depth++):(c.depth--,0===c.depth&&(c.uptime+=f.timestamp-c.application)),this.debug(I()(u=I()(d=I()(h="Status ".concat(i.name," ")).call(h,f.side," at ")).call(d,this.ft(f.timestamp),", depth=")).call(u,c.depth))}}catch(t){l.e(t)}finally{l.f()}return c.uptime}},{key:"edgesForActor",value:function(t,e){var a,n,i,s=[],r=(0,p.Z)(e);try{for(r.s();!(i=r.n()).done;){var o,c=i.value;"statusApply"!==c.type?null!=a&&(s.push.apply(s,(0,d.Z)(this.splitRangeForInvulns(t,a.timestamp,c.timestamp))),a=void 0):(null!==(o=a)&&void 0!==o||(a=c),n=c)}}catch(t){r.e(t)}finally{r.f()}if(null!=a){var l,u,h=null===(l=this.data.getStatus(a.status))||void 0===l?void 0:l.duration,f=null==h?this.parser.currentEpochTimestamp:Math.min((null!==(u=n)&&void 0!==u?u:a).timestamp+h,this.parser.currentEpochTimestamp);s.push.apply(s,(0,d.Z)(this.splitRangeForInvulns(t,a.timestamp,f)))}return s}},{key:"splitRangeForInvulns",value:function(t,e,a){var n,i={apply:e,remove:a},s=[i],r=this.invulnerability.getWindows({start:e,end:a,actorFilter:function(e){return e.kind===t.kind},types:["invulnerable"]}),o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var c,l,d,h,f,v,m,g,E,y,A,w=n.value;if(w.start<i.apply&&w.end>=i.apply)this.debug(I()(v=I()(m=I()(g="Start clip, [".concat(this.ft(i.apply),",")).call(g,this.ft(i.remove),"] -> [")).call(m,this.ft(w.end),",")).call(v,this.ft(i.remove),"]")),i.apply=w.end;else if(w.start<=i.remove&&w.end>i.remove)this.debug(I()(E=I()(y=I()(A="End clip, [".concat(this.ft(i.apply),",")).call(A,this.ft(i.remove),"] -> [")).call(y,this.ft(i.apply),",")).call(E,this.ft(w.start),"]")),i.remove=w.start;else if(!(w.start<i.apply||w.end>i.remove)){this.debug(I()(c=I()(l=I()(d=I()(h=I()(f="Split [".concat(this.ft(i.apply),",")).call(f,this.ft(i.remove),"] -> [")).call(h,this.ft(i.apply),",")).call(d,this.ft(w.start),"], [")).call(l,this.ft(w.end),",")).call(c,this.ft(i.remove),"]"));var Z=i;i=(0,u.Z)({},i),s.push(i),Z.remove=w.start,i.apply=w.end}}}catch(t){o.e(t)}finally{o.f()}return R()(s).call(s,(function(t){return[{side:"apply",timestamp:t.apply},{side:"remove",timestamp:t.remove}]}))}}]),a}(C.qk),c.handle="statuses",c.debug=!1,s=l,r=(0,y.Z)(s.prototype,"data",[N.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),o=(0,y.Z)(s.prototype,"invulnerability",[N.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),s)},89802:function(t,e,a){a.r(e),a.d(e,{default:function(){return Yt}});var n,i=a(41420),s=a(68420),r=a(90306),o=a(50596),c=a(77766),l=a.n(c),u=a(61806),d=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){return(0,s.Z)(this,a),e.apply(this,arguments)}return a}(u.E);d.rows=l()(n=[]).call(n,(0,i.Z)(u.E.rows),["INFURIATE","INNER_RELEASE",["UPHEAVAL","OROGENY"],"ONSLAUGHT","VENGEANCE","RAMPART","NASCENT_FLASH","BLOODWHETTING","THRILL_OF_BATTLE","EQUILIBRIUM","HOLMGANG","SHAKE_IT_OFF","REPRISAL","PROVOKE","SHIRK","DEFIANCE","INTERJECT","LOW_BLOW"]);var p,h,f,v,m,g,E,y,A,I,w,R,Z,b,T,C,N,k,_,L,O,S=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=e.call.apply(e,l()(t=[this]).call(t,r))).suggestionIcon=n.data.actions.OVERPOWER.icon,n.trackedActions=[{aoeAction:n.data.actions.CHAOTIC_CYCLONE,stActions:[n.data.actions.INNER_CHAOS],minTargets:3},{aoeAction:n.data.actions.DECIMATE,stActions:[n.data.actions.FELL_CLEAVE],minTargets:3},{aoeAction:n.data.actions.OVERPOWER,stActions:[n.data.actions.HEAVY_SWING],minTargets:2}],n}return a}(a(54106).C),P=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=e.call.apply(e,l()(t=[this]).call(t,r))).suggestionIcon=n.data.actions.MAIM.icon,n}return a}(a(47969).G),j=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=e.call.apply(e,l()(t=[this]).call(t,r))).trackedDefensives=[n.data.actions.HOLMGANG,n.data.actions.VENGEANCE,n.data.actions.BLOODWHETTING,n.data.actions.SHAKE_IT_OFF,n.data.actions.NASCENT_FLASH,n.data.actions.THRILL_OF_BATTLE,n.data.actions.EQUILIBRIUM],n}return a}(a(12541).O),H=a(23257),x=a(27344),G=a(5281),M=a(18527),D=a(3362),F=a(300),U=a(39392),V=a.n(U),Y=a(66419),z=a.n(Y),W=a(69301),B=a.n(W),q=a(36384),J=a.n(q),K=a(86359),X=a(43719),Q=a(74489),$=a(76704),tt=a(70273),et=a(78766),at=a(52250),nt=(a(67294),a(85893)),it={20:at.bI.MINOR,50:at.bI.MAJOR},st=(p=Reflect.metadata("design:type",tt.e),h=Reflect.metadata("design:type",at.ZP),E=g=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=e.call.apply(e,l()(t=[this]).call(t,r)),(0,H.Z)(n,"actors",v,(0,G.Z)(n)),(0,H.Z)(n,"suggestions",m,(0,G.Z)(n)),n.beastGauge=n.add(new et.qT({chart:{label:"Beast Gauge",color:X.W.WARRIOR.colour}})),n.beastGaugeModifiers=new(V())([[n.data.actions.MAIM.id,{combo:10}],[n.data.actions.STORMS_EYE.id,{combo:10}],[n.data.actions.STORMS_PATH.id,{combo:20}],[n.data.actions.MYTHRIL_TEMPEST.id,{combo:20}],[n.data.actions.INFURIATE.id,{action:50}],[n.data.actions.FELL_CLEAVE.id,{action:-50}],[n.data.actions.DECIMATE.id,{action:-50}],[n.data.actions.CHAOTIC_CYCLONE.id,{action:-50}],[n.data.actions.INNER_CHAOS.id,{action:-50}]]),n}return(0,x.Z)(a,[{key:"initialise",value:function(){var t;(0,M.Z)((0,D.Z)(a.prototype),"initialise",this).call(this);var e=z()(B()(t=this.beastGaugeModifiers).call(t));this.addEventHook((0,Q.hX)().source(this.parser.actor.id).type((0,Q.kw)(["action","combo"])).action((0,Q.kw)(e)),this.onGaugeModifier),this.addEventHook("complete",this.onComplete)}},{key:"onGaugeModifier",value:function(t){var e=this.beastGaugeModifiers.get(t.action),a=new(J())([this.data.actions.FELL_CLEAVE.id,this.data.actions.DECIMATE.id]);if(null!=e){var n,i=null!==(n=e[t.type])&&void 0!==n?n:0;this.actors.current.hasStatus(this.data.statuses.INNER_RELEASE.id)&&(this.parser.patch.before("6.1")||a.has(t.action))&&(i=Math.max(i,0)),this.beastGauge.modify(i)}}},{key:"onComplete",value:function(){this.suggestions.add(new at.eg({icon:this.data.actions.INFURIATE.icon,content:(0,nt.jsx)(K.Trans,{id:"war.gauge.suggestions.loss.content",defaults:"Avoid letting your Beast Gauge overcap - the wasted resources may cost further uses of your spenders over the course of the fight."}),why:(0,nt.jsx)(K.Trans,{id:"war.gauge.suggestions.loss.why",defaults:"{0} Wrath lost to overcapping Beast gauge.",values:{0:this.beastGauge.overCap}}),tiers:it,value:this.beastGauge.overCap}))}}]),a}(et.aC),g.title={id:"war.gauge.title",defaults:"Beast Gauge"},f=E,v=(0,F.Z)(f.prototype,"actors",[$.I,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),m=(0,F.Z)(f.prototype,"suggestions",[$.I,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),f),rt=a(32366),ot=a.n(rt),ct=a(9263),lt=a(81336),ut=a(24950),dt=["FELL_CLEAVE","DECIMATE","CHAOTIC_CYCLONE","INNER_CHAOS"],pt={1:at.bI.MAJOR},ht=(y=Reflect.metadata("design:type",lt.w),R=w=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=e.call.apply(e,l()(t=[this]).call(t,r)),(0,H.Z)(n,"cooldowns",I,(0,G.Z)(n)),n.trackedProcs=[{procStatus:n.data.statuses.NASCENT_CHAOS,consumeActions:[n.data.actions.INNER_CHAOS,n.data.actions.CHAOTIC_CYCLONE]}],n.showDroppedProcSuggestion=!0,n.showOverwroteProcSuggestion=!0,n.droppedProcIcon=n.data.actions.INFURIATE.icon,n.droppedProcSeverityTiers=pt,n.droppedProcContent=(0,nt.jsx)(K.Trans,{id:"war.infuriate.suggestions.dropped.content",defaults:"Try to consume <0/> before it expires, as <1/> and <2/> are two of your strongest skills.",components:[(0,nt.jsx)(ct.P9,{status:"NASCENT_CHAOS"}),(0,nt.jsx)(ct.P9,{action:"INNER_CHAOS"}),(0,nt.jsx)(ct.P9,{action:"CHAOTIC_CYCLONE"})]}),n.overwroteProcIcon=n.data.actions.INFURIATE.icon,n.overwroteProcSeverityTiers=pt,n.overwroteProcContent=(0,nt.jsx)(K.Trans,{id:"war.infuriate.suggestions.overwritten.content",defaults:"Avoid using <0/> when you already have <1/> applied.",components:[(0,nt.jsx)(ct.P9,{action:"INFURIATE"}),(0,nt.jsx)(ct.P9,{status:"NASCENT_CHAOS"})]}),n}return(0,x.Z)(a,[{key:"initialise",value:function(){var t=this;(0,M.Z)((0,D.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,Q.hX)().source(this.parser.actor.id).type("action").action(this.data.matchActionId(dt)),(function(){var e;return ot()(e=t.cooldowns).call(e,"INFURIATE",5e3)}))}}]),a}(ut.Q),w.handle="infuriate",A=R,I=(0,F.Z)(A.prototype,"cooldowns",[$.I,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),A),ft=a(99021),vt=a(20116),mt=a.n(vt),gt=a(2991),Et=a.n(gt),yt=a(78580),At=a.n(yt),It=a(28683),wt=a(52102),Rt=a(73947),Zt=["INNER_CHAOS","CHAOTIC_CYCLONE"],bt=["FELL_CLEAVE","DECIMATE"],Tt=(Z=Reflect.metadata("design:type",wt.ZP),b=Reflect.metadata("design:type",Rt.V),T=Reflect.metadata("design:type",at.ZP),O=L=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n,i;(0,s.Z)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return i=e.call.apply(e,l()(t=[this]).call(t,o)),(0,H.Z)(i,"checklist",N,(0,G.Z)(i)),(0,H.Z)(i,"data",k,(0,G.Z)(i)),(0,H.Z)(i,"suggestions",_,(0,G.Z)(i)),i.stacksApplied=null!==(n=i.data.statuses.INNER_RELEASE.stacksApplied)&&void 0!==n?n:3,i.current=void 0,i.history=[],i.innerHook=void 0,i}return(0,x.Z)(a,[{key:"initialise",value:function(){var t=(0,Q.hX)().source(this.parser.actor.id);this.addEventHook(t.type("statusApply").status(this.data.statuses.INNER_RELEASE.id),this.onGain),this.addEventHook(t.type("statusRemove").status(this.data.statuses.INNER_RELEASE.id),this.onDrop),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){var e;if(null!=this.current){var a=this.data.getAction(t.action);null!=a&&null!==(e=a.onGcd)&&void 0!==e&&e&&null==this.current.end&&this.current.casts.push(a.id)}}},{key:"onGain",value:function(t){if(null==this.current){this.current={start:t.timestamp,casts:[],rushing:!1},this.current.rushing=this.data.statuses.INNER_RELEASE.duration>=this.parser.pull.timestamp+this.parser.pull.duration-t.timestamp;var e=(0,Q.hX)().source(this.parser.actor.id);this.innerHook=this.parser.patch.before("6.1")?this.addEventHook(e.type("action"),this.onCast):this.addEventHook(e.type("action").action(this.data.matchActionId(bt)),this.onCast)}}},{key:"onDrop",value:function(t){this.stopAndSave(t.timestamp)}},{key:"stopAndSave",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.currentEpochTimestamp;null!=this.current&&(this.current.end=t,this.history.push(this.current),null!=this.innerHook&&(this.removeEventHook(this.innerHook),this.innerHook=void 0)),this.current=void 0}},{key:"onComplete",value:function(){var t,e,a,n=this;this.stopAndSave(this.parser.pull.timestamp+this.parser.pull.duration);var i=mt()(t=this.history).call(t,(function(t){return!t.rushing})),s=ot()(i).call(i,(function(t,e){var a;return t+Math.max(0,n.stacksApplied-mt()(a=e.casts).call(a,(function(t){return t!==n.data.actions.PRIMAL_REND.id})).length)}),0),r=i.length*this.stacksApplied,o=this.getPercentUsed(r,s);if(this.checklist.add(new wt.$9({name:(0,nt.jsx)(K.Trans,{id:"war.ir.checklist.missedgcd.name",defaults:"Use All Inner Release Stacks"}),description:(0,nt.jsx)(K.Trans,{id:"war.ir.checklist.missedgcd.description",defaults:"<0/> grants {0} stacks to use on <1/> (or <2/> for 3 or more targets). Try to consume all stacks generated.",values:{0:this.stacksApplied},components:[(0,nt.jsx)(ct.P9,{action:"INNER_RELEASE"}),(0,nt.jsx)(ct.P9,{action:"FELL_CLEAVE"}),(0,nt.jsx)(ct.P9,{action:"DECIMATE"})]}),target:100,requirements:[new wt.nb({name:(0,nt.jsx)(K.Trans,{id:"war.ir.checklist.missedgcd.requirement.name",defaults:"<0/> stacks used",components:[(0,nt.jsx)(ct.P9,{action:"INNER_RELEASE"})]}),overrideDisplay:l()(e=l()(a="".concat(r-s," / ")).call(a,r," (")).call(e,o,"%)"),percent:o})]})),this.parser.patch.before("6.1")){var c,u=Et()(Zt).call(Zt,(function(t){return n.data.actions[t].id})),d=Et()(bt).call(bt,(function(t){return n.data.actions[t].id})),p=ot()(c=this.history).call(c,(function(t,e){return t+(n.stacksApplied-n.accountGcds(e,d))}),0),h=ot()(i).call(i,(function(t,e){return t+n.accountGcds(e,u)}),0);this.suggestions.add(new at.eg({icon:this.data.actions.FELL_CLEAVE.icon,content:(0,nt.jsx)(K.Trans,{id:"war.ir.suggestions.badgcd.content",defaults:"GCDs used during <0/> should be limited to <1/> for optimal damage (or <2/> if three or more targets are present).",components:[(0,nt.jsx)(ct.P9,{action:"INNER_RELEASE"}),(0,nt.jsx)(ct.P9,{action:"FELL_CLEAVE"}),(0,nt.jsx)(ct.P9,{action:"DECIMATE"})]}),tiers:{1:at.bI.MAJOR},value:p,why:(0,nt.jsx)(K.Trans,{id:"war.ir.suggestions.badgcd.why",defaults:"{badGcds, plural, one {# GCD} other {# GCDs}} wasted <0/> stacks.",values:{badGcds:p},components:[(0,nt.jsx)(ct.P9,{showIcon:!1,status:"INNER_RELEASE"})]})})),this.suggestions.add(new at.eg({icon:this.data.actions.INNER_CHAOS.icon,content:(0,nt.jsx)(K.Trans,{id:"war.ir.suggestions.verybadgcd.content",defaults:"Avoid using <0/> or <1/> inside of <2/> unless pushing downtime. These abilities are guaranteed to be a critical direct hit, and make no use of <3/>'s benefits.",components:[(0,nt.jsx)(ct.P9,{action:"INNER_CHAOS"}),(0,nt.jsx)(ct.P9,{action:"CHAOTIC_CYCLONE"}),(0,nt.jsx)(ct.P9,{status:"INNER_RELEASE"}),(0,nt.jsx)(ct.P9,{showIcon:!1,status:"INNER_RELEASE"})]}),tiers:{1:at.bI.MAJOR},value:h,why:(0,nt.jsx)(K.Trans,{id:"war.ir.suggestions.verybadgcd.why",defaults:"{veryBadGcds, plural, one {# stack} other {# stacks}} of <0/> {veryBadGcds, plural, one {was} other {were}} lost to <1/> or <2/>.",values:{veryBadGcds:h},components:[(0,nt.jsx)(ct.P9,{status:"INNER_RELEASE"}),(0,nt.jsx)(ct.P9,{action:"INNER_CHAOS"}),(0,nt.jsx)(ct.P9,{action:"CHAOTIC_CYCLONE"})]})}))}}},{key:"accountGcds",value:function(t,e){var a,n=0,i=0,s=(0,ft.Z)(t.casts);try{for(s.s();!(a=s.n()).done;){var r=a.value;if(r!==this.data.actions.PRIMAL_REND.id&&(At()(e).call(e,r)&&i++,++n>=this.stacksApplied))break}}catch(t){s.e(t)}finally{s.f()}return Math.min(this.stacksApplied,i)}},{key:"getPercentUsed",value:function(t,e){return((t-e)/t*100).toFixed(2)}}]),a}(It.qk),L.handle="ir",L.title={id:"war.ir.title",defaults:"Inner Release"},C=O,N=(0,F.Z)(C.prototype,"checklist",[$.I,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),k=(0,F.Z)(C.prototype,"data",[$.I,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),_=(0,F.Z)(C.prototype,"suggestions",[$.I,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),C),Ct=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=e.call.apply(e,l()(t=[this]).call(t,r))).trackedCds=[{cooldowns:[n.data.actions.INFURIATE],firstUseOffset:2500,resetBy:{actions:[n.data.actions.FELL_CLEAVE,n.data.actions.DECIMATE,n.data.actions.CHAOTIC_CYCLONE,n.data.actions.INNER_CHAOS],refundAmount:5e3}},{cooldowns:[n.data.actions.INNER_RELEASE],allowedAverageDowntime:2500,firstUseOffset:15e3},{cooldowns:[n.data.actions.UPHEAVAL,n.data.actions.OROGENY],firstUseOffset:12500},{cooldowns:[n.data.actions.ONSLAUGHT],firstUseOffset:18500}],n}return a}(a(48945).u),Nt={1:at.bI.MAJOR},kt=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(n=e.call.apply(e,l()(t=[this]).call(t,r))).trackedProcs=[{procStatus:n.data.statuses.PRIMAL_REND_READY,consumeActions:[n.data.actions.PRIMAL_REND]}],n.showDroppedProcSuggestion=!0,n.droppedProcIcon=n.data.actions.PRIMAL_REND.icon,n.droppedProcSeverityTiers=Nt,n.droppedProcContent=(0,nt.jsx)(K.Trans,{id:"war.primalrend.suggestions.dropped.content",defaults:"Try to consume <0/> before it expires as <1/> is your single strongest skill.",components:[(0,nt.jsx)(ct.P9,{status:"PRIMAL_REND_READY"}),(0,nt.jsx)(ct.P9,{action:"PRIMAL_REND"})]}),n.droppedProcWhy=(0,nt.jsx)(K.Trans,{id:"war.primalrend.suggestions.dropped.why",defaults:"<0/> timed out {0, plural, one {# time} other {# times}}",values:{0:n.droppedProcs},components:[(0,nt.jsx)(ct.P9,{status:"PRIMAL_REND_READY"})]}),n}return a}(ut.Q);kt.handle="primalrend";var _t,Lt,Ot,St,Pt,jt,Ht,xt,Gt,Mt,Dt,Ft=a(90577),Ut=a(32596),Vt=(_t=Reflect.metadata("design:type",tt.e),Lt=Reflect.metadata("design:type",wt.ZP),Ot=Reflect.metadata("design:type",Ft.I),St=Reflect.metadata("design:type",Ut.t),Dt=Mt=function(t){(0,r.Z)(a,t);var e=(0,o.Z)(a);function a(){var t,n;(0,s.Z)(this,a);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=e.call.apply(e,l()(t=[this]).call(t,r)),(0,H.Z)(n,"actors",jt,(0,G.Z)(n)),(0,H.Z)(n,"checklist",Ht,(0,G.Z)(n)),(0,H.Z)(n,"invulnerability",xt,(0,G.Z)(n)),(0,H.Z)(n,"statuses",Gt,(0,G.Z)(n)),n}return(0,x.Z)(a,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t=this;this.checklist.add(new wt.$9({name:(0,nt.jsx)(K.Trans,{id:"war.surgingtempest.checklist.name",defaults:"Keep Surging Tempest Up"}),description:(0,nt.jsx)(K.Trans,{id:"war.surgingtempest.checklist.description",defaults:"Surging Tempest increases your damage by 10%, a substantial part of your damage."}),target:90,requirements:[new wt.nb({name:(0,nt.jsx)(K.Trans,{id:"war.surgingtempest.checklist.uptime",defaults:"<0/> uptime",components:[(0,nt.jsx)(ct.P9,{status:"SURGING_TEMPEST"})]}),percent:function(){return t.getUptimePercent()}})]}))}},{key:"getUptimePercent",value:function(){return this.statuses.getUptime("SURGING_TEMPEST",this.actors.friends)/(this.parser.currentDuration-this.invulnerability.getDuration({types:["invulnerable"]}))*100}}]),a}(It.qk),Mt.handle="surgingtempest",Pt=Dt,jt=(0,F.Z)(Pt.prototype,"actors",[$.I,_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),Ht=(0,F.Z)(Pt.prototype,"checklist",[$.I,Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),xt=(0,F.Z)(Pt.prototype,"invulnerability",[$.I,Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),Gt=(0,F.Z)(Pt.prototype,"statuses",[$.I,St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statuses}}),Pt),Yt=[d,S,P,j,st,ht,Tt,Ct,kt,Vt]}}]);
//# sourceMappingURL=jobs-war.8c328b47.js.map
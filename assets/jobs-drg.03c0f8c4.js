(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[3413],{50925:function(t,e,i){t.exports=i(75838)},61806:function(t,e,i){"use strict";i.d(e,{E:function(){return K}});var s,n,a,o,r,l,d,u,c,h,f,p,g=i(97530),v=i(19623),m=i(99021),y=i(23257),w=i(68420),b=i(27344),E=i(5281),T=i(90306),Z=i(50596),I=i(300),R=i(77766),A=i.n(R),x=i(39392),C=i.n(x),S=i(36384),D=i.n(S),j=i(20116),G=i.n(j),k=i(80426),N=i.n(k),_=i(94473),H=i.n(_),L=i(2991),O=i.n(L),W=i(86359),M=i(28683),P=i(76704),U=i(8510),F=i(81336),B=i(73947),V=i(56611),Y=(i(67294),i(45150)),z=i(40753),J="ActionTimeline-module_chargeGain__3-Of9",q="ActionTimeline-module_icon__8OvsF",X=i(85893);!function(t){t[t.CHARGE_GAIN=0]="CHARGE_GAIN",t[t.ACTION=1]="ACTION"}(p||(p={}));var K=(s=Reflect.metadata("design:type",U.Z),n=Reflect.metadata("design:type",F.w),a=Reflect.metadata("design:type",B.V),o=Reflect.metadata("design:type",V.TY),f=h=function(t){(0,T.Z)(i,t);var e=(0,Z.Z)(i);function i(){var t,s;(0,w.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return s=e.call.apply(e,A()(t=[this]).call(t,a)),(0,y.Z)(s,"castTime",l,(0,E.Z)(s)),(0,y.Z)(s,"cooldowns",d,(0,E.Z)(s)),(0,y.Z)(s,"data",u,(0,E.Z)(s)),(0,y.Z)(s,"timeline",c,(0,E.Z)(s)),s.resolvedRows=[],s.groupRows=new(C()),s}return(0,b.Z)(i,[{key:"getRow",value:function(t){return this.addRow({content:[t]})}},{key:"initialise",value:function(){var t,e=(0,m.Z)(this.constructor.rows);try{for(e.s();!(t=e.n()).done;){var i=t.value,s=this.resolveConfig(i);this.resolvedRows.push(s),this.addRow(s)}}catch(t){e.e(t)}finally{e.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t,e,i=this,s=new(D()),n=(0,m.Z)(this.resolvedRows);try{for(n.s();!(e=n.n()).done;){var a=e.value,o=this.addRow(a);this.populateRow(o,a),a.content.forEach((function(t){return i.cooldowns.groups(t).forEach((function(t){return s.add(t)}))}))}}catch(t){n.e(t)}finally{n.f()}G()(t=this.cooldowns.allGroups()).call(t,(function(t){return!s.has(t)})).forEach((function(t){var e={content:[t]},s=i.addRow(e);i.populateRow(s,e)}))}},{key:"resolveConfig",value:function(t){var e=t;return("object"!==(0,v.Z)(e)||Array.isArray(e))&&(e={content:e}),(0,g.Z)((0,g.Z)({},e),{},{content:(0,z.rY)(e.content)})}},{key:"addRow",value:function(t){var e,i,s=this,n=N()(e=t.content).call(e,(function(t){return s.cooldowns.groups(t)})),a=H()(i=O()(n).call(n,(function(t){return s.groupRows.get(t)}))).call(i,z.$K);if(null!=a)return a;var o,r=t.content[0],l=null!=t.label?t.label:"GCD"===r?(0,X.jsx)(W.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof r?s.data.actions[r].name:"number"==typeof r?null===(o=s.cooldowns.cooldownHistory(r)[0])||void 0===o?void 0:o.action.name:r.name,d=this.timeline.addRow(new V.vo({label:l,order:t.order,collapse:!0}));return n.forEach((function(t){return s.groupRows.set(t,d)})),d}},{key:"populateRow",value:function(t,e){var i=this,s=e.content;this.addCooldownItems(t,N()(s).call(s,(function(t){return i.cooldowns.cooldownHistory(t)}))),this.addChargeItems(t,N()(s).call(s,(function(t){return i.cooldowns.chargeHistory(t)})))}},{key:"addCooldownItems",value:function(t,e){var i,s=(0,m.Z)(e);try{for(s.s();!(i=s.n()).done;){var n=i.value,a=this.getCooldownDuration(n),o=n.start-this.parser.pull.timestamp,r=o+a;t.addItem(new V.ct({start:o,end:r,content:(0,X.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(t){s.e(t)}finally{s.f()}}},{key:"addChargeItems",value:function(t,e){var i,s=(0,m.Z)(e);try{for(s.s();!(i=s.n()).done;){var n=i.value,a=n.delta<0?new V.tC({depth:p.ACTION,start:n.timestamp-this.parser.pull.timestamp,action:n.action}):new $({depth:p.CHARGE_GAIN,start:n.timestamp-this.parser.pull.timestamp});t.addItem(a)}}catch(t){s.e(t)}finally{s.f()}}},{key:"getCooldownDuration",value:function(t){var e=t.end-t.start;if(t.endReason===F.g.EXPIRED){var i,s=null!==(i=this.castTime.forAction(t.action.id,t.start))&&void 0!==i?i:0;e=Math.max(e,s+100)}return e}}]),i}(M.qk),h.handle="actionTimeline",h.debug=!1,h.rows=[{content:"GCD",order:-97}],r=f,l=(0,I.Z)(r.prototype,"castTime",[P.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),d=(0,I.Z)(r.prototype,"cooldowns",[P.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),u=(0,I.Z)(r.prototype,"data",[P.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),c=(0,I.Z)(r.prototype,"timeline",[P.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r),$=function(t){(0,T.Z)(i,t);var e=(0,Z.Z)(i);function i(){var t,s;(0,w.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(s=e.call.apply(e,A()(t=[this]).call(t,a))).Content=function(){return(0,X.jsx)("div",{className:J,children:(0,X.jsx)(Y.Z,{name:"angle double up",className:q})})},s}return i}(V.Pp)},49006:function(t,e,i){"use strict";i.d(e,{N:function(){return O}});var s,n,a,o,r,l,d,u,c,h,f,p=i(23257),g=i(68420),v=i(27344),m=i(5281),y=i(90306),w=i(50596),b=i(300),E=i(77766),T=i.n(E),Z=i(39392),I=i.n(Z),R=i(32366),A=i.n(R),x=i(66419),C=i.n(x),S=i(89400),D=i.n(S),j=i(28683),G=i(74489),k=i(76704),N=i(70273),_=i(73947),H=i(90577),L=i(32596),O=(s=Reflect.metadata("design:type",_.V),n=Reflect.metadata("design:type",N.e),a=Reflect.metadata("design:type",H.I),o=Reflect.metadata("design:type",L.t),f=h=function(t){(0,y.Z)(i,t);var e=(0,w.Z)(i);function i(){var t,s;(0,g.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return s=e.call.apply(e,T()(t=[this]).call(t,a)),(0,p.Z)(s,"data",l,(0,m.Z)(s)),(0,p.Z)(s,"actors",d,(0,m.Z)(s)),(0,p.Z)(s,"invulnerability",u,(0,m.Z)(s)),(0,p.Z)(s,"statuses",c,(0,m.Z)(s)),s.trackedStatuses=[],s.statusApplications=new(I()),s}return(0,v.Z)(i,[{key:"initialise",value:function(){this.addEventHook((0,G.hX)().type("statusApply").source(this.parser.actor.id).status((0,G.kw)(this.trackedStatuses)),this.onApply),this.addEventHook("complete",this.onComplete)}},{key:"excludeApplication",value:function(){return!1}},{key:"onApply",value:function(t){var e=this.data.getStatus(t.status);if(null!=(null==e?void 0:e.duration)){var i=this.statusApplications.get(e.id);null==i&&(i=new(I()),this.statusApplications.set(e.id,i));var s=t.target,n=i.get(s);if(null==n&&(n={lastApplied:0,totalClipping:0},i.set(s,n)),0===n.lastApplied||this.excludeApplication())n.lastApplied=t.timestamp;else{var a=e.duration-(t.timestamp-n.lastApplied);n.totalClipping+=Math.max(0,a),n.lastApplied=t.timestamp}}}},{key:"onComplete",value:function(){this.addChecklistRules(),this.addClippingSuggestions()}},{key:"getUptimePercent",value:function(t){var e=this.data.getStatus(t);return null==e?0:this.statuses.getUptime(e,this.actors.foes)/(this.parser.pull.duration-this.invulnerability.getDuration({types:["invulnerable"]}))*100}},{key:"getClippingAmount",value:function(t){var e,i=this.parser.pull.duration-this.invulnerability.getDuration({types:["invulnerable"]});if(i<=0)return 0;var s=this.statusApplications.get(t);if(null==s)return 0;var n=A()(e=C()(D()(s).call(s))).call(e,(function(t,e){return t+e.totalClipping}),0);return Math.round(n/(i/6e4))}}]),i}(j.qk),h.handle="dots",r=f,l=(0,b.Z)(r.prototype,"data",[k.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,b.Z)(r.prototype,"actors",[k.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),u=(0,b.Z)(r.prototype,"invulnerability",[k.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),c=(0,b.Z)(r.prototype,"statuses",[k.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statuses}}),r)},83459:function(t,e,i){"use strict";i.d(e,{E:function(){return j}});var s,n,a,o,r,l,d,u,c,h=i(23257),f=i(68420),p=i(27344),g=i(5281),v=i(90306),m=i(50596),y=i(300),w=i(77766),b=i.n(w),E=i(86359),T=i(59652),Z=i(84626),I=(i(67294),i(28683)),R=i(76704),A=i(73947),x=i(48453),C=i(51422),S=i(85893),D={__all:{id:"core.gcd.no-statistics.v2",defaults:"This GCD recast is an *estimate*, and may be incorrect. If it is reporting a GCD recast *longer* than reality, you likely need to focus on keeping your GCD rolling."},legacyFflogs:{id:"core.gcd.estimate-help.fflogs",defaults:"Precise attribute values are only available from FF Logs for the player who logged the report in ACT."}},j=(s=Reflect.metadata("design:type",A.V),n=Reflect.metadata("design:type",C.gy),a=Reflect.metadata("design:type",x.a),c=u=function(t){(0,v.Z)(i,t);var e=(0,m.Z)(i);function i(){var t,s;(0,f.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return s=e.call.apply(e,b()(t=[this]).call(t,a)),(0,h.Z)(s,"data",r,(0,g.Z)(s)),(0,h.Z)(s,"statistics",l,(0,g.Z)(s)),(0,h.Z)(s,"speedAdjustments",d,(0,g.Z)(s)),s}return(0,p.Z)(i,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"getDuration",value:function(){return this.speedAdjustments.getAdjustedDuration({duration:Z.b})}},{key:"isEstimated",value:function(){return this.speedAdjustments.isAdjustmentEstimated()}},{key:"onComplete",value:function(){var t=this.isEstimated();this.statistics.add(new C.IC({title:t?(0,S.jsx)(E.Trans,{id:"core.gcd.estimated-gcd",defaults:"Estimated GCD"}):(0,S.jsx)(E.Trans,{id:"core.gcd.gcd",defaults:"GCD Recast"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(this.getDuration()),info:t?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(T.Z,{source:D.__all}),(0,S.jsx)(T.Z,{source:D[this.parser.report.meta.source]})]}):void 0}))}}]),i}(I.qk),u.handle="gcd",o=c,r=(0,y.Z)(o.prototype,"data",[R.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,y.Z)(o.prototype,"statistics",[R.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),d=(0,y.Z)(o.prototype,"speedAdjustments",[R.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),o)},28101:function(t,e,i){"use strict";i.d(e,{O:function(){return q}});var s,n,a,o,r,l,d,u,c,h=i(97530),f=i(41420),p=i(23257),g=i(68420),v=i(27344),m=i(5281),y=i(90306),w=i(50596),b=i(300),E=i(77766),T=i.n(E),Z=i(2991),I=i.n(Z),R=i(94473),A=i.n(R),x=i(36384),C=i.n(x),S=i(78580),D=i.n(S),j=i(50925),G=i.n(j),k=i(32366),N=i.n(k),_=i(86359),H=i(9263),L=i(95859),O=i(10110),W=i(74489),M=i(76704),P=i(52102),U=i(8437),F=i(56611),B=(i(67294),i(80967)),V=i(65927),Y=i(28683),z=i(73947),J=i(85893),q=(s=Reflect.metadata("design:type",z.V),n=Reflect.metadata("design:type",P.ZP),a=Reflect.metadata("design:type",F.TY),c=u=function(t){(0,y.Z)(i,t);var e=(0,w.Z)(i);function i(){var t,s;(0,g.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return s=e.call.apply(e,T()(t=[this]).call(t,a)),(0,p.Z)(s,"data",r,(0,m.Z)(s)),(0,p.Z)(s,"checklist",l,(0,m.Z)(s)),(0,p.Z)(s,"timeline",d,(0,m.Z)(s)),s.positionalResults=[],s.positionals=void 0,s}return(0,v.Z)(i,[{key:"initialise",value:function(){var t;this.addEventHook((0,W.hX)().source(this.parser.actor.id).type("damage").cause(this.data.matchCauseActionId(I()(t=this.positionals).call(t,(function(t){return t.id})))),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){var e;if("action"===t.cause.type){var i=this.data.getAction(t.cause.action);if(null!=i){var s=A()(e=this.positionals).call(e,(function(t){return t===i}));if(null!=s){var n=this.getOrCreatePositionalResult(s);this.positionalHit(s,t.targets[0].bonusPercent)?n.hits.push(t):n.misses.push(t)}}}}},{key:"getOrCreatePositionalResult",value:function(t){var e,i=A()(e=this.positionalResults).call(e,(function(e){return e.positional===t}));return null==i&&(i={positional:t,hits:[],misses:[]},this.positionalResults.push(i)),i}},{key:"missedPositionalBonusPercents",value:function(t){var e=this.calculateBonusPercent((0,L.u2)(t),(0,L.gw)(t,[O.R4.COMBO],[]));return(0,f.Z)(new(C())([0,e]))}},{key:"positionalHit",value:function(t,e){var i;return!D()(i=this.missedPositionalBonusPercents(t)).call(i,e)}},{key:"calculateBonusPercent",value:function(t,e){return G()(100*(1-t/e))}},{key:"relativeTimestamp",value:function(t){return t-this.parser.pull.timestamp}},{key:"createTimelineButton",value:function(t){var e=this,i=this.relativeTimestamp(t);return(0,J.jsx)(B.Z,{circular:!0,compact:!0,icon:"time",size:"small",onClick:function(){return e.timeline.show(i,i)},content:this.parser.formatEpochTimestamp(t)})}},{key:"onComplete",value:function(){var t;0!==this.positionalResults.length&&this.checklist.add(new P.$9({name:(0,J.jsx)(_.Trans,{id:"core.positionals.checklist.title",defaults:"Hit your positionals"}),displayOrder:U.Z.POSITIONALS,description:(0,J.jsx)(_.Trans,{id:"core.positionals.checklist.description",defaults:"Melee DPS jobs have some skills that will do more damage when used from the rear or flank. Make sure you use those skills in the right position to do the most damage, or use <0/> when you are out of position.",components:[(0,J.jsx)(H.P9,{action:"TRUE_NORTH"})]}),requirements:I()(t=this.positionalResults).call(t,this.positionalRequirement)}))}},{key:"positionalRequirement",value:function(t){var e,i,s=t.hits.length,n=s+t.misses.length,a=s/n*100;return new P.nb({name:(0,J.jsx)(H.vm,(0,h.Z)({},t.positional)),percent:a,weight:n,overrideDisplay:T()(e=T()(i="".concat(s," / ")).call(i,n," (")).call(e,a.toFixed(2),"%)")})}},{key:"output",value:function(){var t,e,i=this;if(0!==N()(t=this.positionalResults).call(t,(function(t,e){return t+e.misses.length}),0))return(0,J.jsxs)(V.Z,{compact:!0,unstackable:!0,celled:!0,textAlign:"center",children:[(0,J.jsx)(V.Z.Header,{children:(0,J.jsxs)(V.Z.Row,{children:[(0,J.jsx)(V.Z.HeaderCell,{children:(0,J.jsx)("strong",{children:(0,J.jsx)(_.Trans,{id:"core.ui.positionals-table.header.action",defaults:"Action"})})}),(0,J.jsx)(V.Z.HeaderCell,{children:(0,J.jsx)("strong",{children:(0,J.jsx)(_.Trans,{id:"core.ui.positionals-table.header.hits",defaults:"Hits"})})}),(0,J.jsx)(V.Z.HeaderCell,{children:(0,J.jsx)("strong",{children:(0,J.jsx)(_.Trans,{id:"core.ui.positionals-table.header.misses",defaults:"Misses"})})})]})}),(0,J.jsx)(V.Z.Body,{children:I()(e=this.positionalResults).call(e,(function(t){var e,s=t.hits.length,n=t.misses.length,a=0===n;return(0,J.jsxs)(V.Z.Row,{children:[(0,J.jsx)(V.Z.Cell,{style:{whiteSpace:"nowrap"},children:(0,J.jsx)(H.vm,(0,h.Z)((0,h.Z)({},t.positional),{},{showName:!1}))}),(0,J.jsxs)(V.Z.Cell,{textAlign:"center",positive:a,negative:!a,children:[s,"/",n+s]}),(0,J.jsx)(V.Z.Cell,{textAlign:"left",children:I()(e=t.misses).call(e,(function(t){return i.createTimelineButton(t.timestamp)}))})]},t.positional.id)}))})]})}}]),i}(Y.qk),u.handle="positionals",u.title={id:"core.positionals.title",defaults:"Positionals"},u.displayOrder=U.Z.POSITIONALS,o=c,r=(0,b.Z)(o.prototype,"data",[M.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,b.Z)(o.prototype,"checklist",[M.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),d=(0,b.Z)(o.prototype,"timeline",[M.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),o)},32596:function(t,e,i){"use strict";i.d(e,{t:function(){return j}});var s,n,a,o,r,l,d,u=i(97530),c=i(41420),h=i(99021),f=i(23257),p=i(68420),g=i(27344),v=i(5281),m=i(90306),y=i(50596),w=i(300),b=i(77766),E=i.n(b),T=i(80426),Z=i.n(T),I=i(47302),R=i.n(I),A=i(40753),x=i(28683),C=i(76704),S=i(73947),D=i(90577),j=(s=Reflect.metadata("design:type",S.V),n=Reflect.metadata("design:type",D.I),d=l=function(t){(0,m.Z)(i,t);var e=(0,y.Z)(i);function i(){var t,s;(0,p.Z)(this,i);for(var n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return s=e.call.apply(e,E()(t=[this]).call(t,a)),(0,f.Z)(s,"data",o,(0,v.Z)(s)),(0,f.Z)(s,"invulnerability",r,(0,v.Z)(s)),s.ft=function(t){return s.parser.formatEpochTimestamp(t,1)},s}return(0,g.Z)(i,[{key:"getUptime",value:function(t,e){var i=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.actor,n="string"==typeof t?this.data.statuses[t]:t,a=(0,A.rY)(e),o=Z()(a).call(a,(function(t){var e,a;return i.edgesForActor(t,null!==(e=null===(a=t.statusHistory.get(n.id))||void 0===a?void 0:a.get(s.id))&&void 0!==e?e:[])}));R()(o).call(o,(function(t,e){return t.timestamp-e.timestamp}));var r,l={uptime:0,depth:0,application:0},d=(0,h.Z)(o);try{for(d.s();!(r=d.n()).done;){var u,c,f,p=r.value;"apply"===p.side?(0===l.depth&&(l.application=p.timestamp),l.depth++):(l.depth--,0===l.depth&&(l.uptime+=p.timestamp-l.application)),this.debug(E()(u=E()(c=E()(f="Status ".concat(n.name," ")).call(f,p.side," at ")).call(c,this.ft(p.timestamp),", depth=")).call(u,l.depth))}}catch(t){d.e(t)}finally{d.f()}return l.uptime}},{key:"edgesForActor",value:function(t,e){var i,s,n,a=[],o=(0,h.Z)(e);try{for(o.s();!(n=o.n()).done;){var r,l=n.value;"statusApply"!==l.type?null!=i&&(a.push.apply(a,(0,c.Z)(this.splitRangeForInvulns(t,i.timestamp,l.timestamp))),i=void 0):(null!==(r=i)&&void 0!==r||(i=l),s=l)}}catch(t){o.e(t)}finally{o.f()}if(null!=i){var d,u,f=null===(d=this.data.getStatus(i.status))||void 0===d?void 0:d.duration,p=null==f?this.parser.currentEpochTimestamp:Math.min((null!==(u=s)&&void 0!==u?u:i).timestamp+f,this.parser.currentEpochTimestamp);a.push.apply(a,(0,c.Z)(this.splitRangeForInvulns(t,i.timestamp,p)))}return a}},{key:"splitRangeForInvulns",value:function(t,e,i){var s,n={apply:e,remove:i},a=[n],o=this.invulnerability.getWindows({start:e,end:i,actorFilter:function(e){return e.kind===t.kind},types:["invulnerable"]}),r=(0,h.Z)(o);try{for(r.s();!(s=r.n()).done;){var l,d,c,f,p,g,v,m,y,w,b,T=s.value;if(T.start<n.apply&&T.end>=n.apply)this.debug(E()(g=E()(v=E()(m="Start clip, [".concat(this.ft(n.apply),",")).call(m,this.ft(n.remove),"] -> [")).call(v,this.ft(T.end),",")).call(g,this.ft(n.remove),"]")),n.apply=T.end;else if(T.start<=n.remove&&T.end>n.remove)this.debug(E()(y=E()(w=E()(b="End clip, [".concat(this.ft(n.apply),",")).call(b,this.ft(n.remove),"] -> [")).call(w,this.ft(n.apply),",")).call(y,this.ft(T.start),"]")),n.remove=T.start;else if(!(T.start<n.apply||T.end>n.remove)){this.debug(E()(l=E()(d=E()(c=E()(f=E()(p="Split [".concat(this.ft(n.apply),",")).call(p,this.ft(n.remove),"] -> [")).call(f,this.ft(n.apply),",")).call(c,this.ft(T.start),"], [")).call(d,this.ft(T.end),",")).call(l,this.ft(n.remove),"]"));var I=n;n=(0,u.Z)({},n),a.push(n),I.remove=T.start,n.apply=T.end}}}catch(t){r.e(t)}finally{r.f()}return Z()(a).call(a,(function(t){return[{side:"apply",timestamp:t.apply},{side:"remove",timestamp:t.remove}]}))}}]),i}(x.qk),l.handle="statuses",l.debug=!1,a=d,o=(0,w.Z)(a.prototype,"data",[C.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),r=(0,w.Z)(a.prototype,"invulnerability",[C.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),a)},90137:function(t,e,i){"use strict";i.d(e,{J:function(){return l}});var s=i(68420),n=i(90306),a=i(50596),o=i(77766),r=i.n(o),l=function(t){(0,n.Z)(i,t);var e=(0,a.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=e.call.apply(e,r()(t=[this]).call(t,o))).buffStatus=n.data.statuses.MEDICATED,n}return i}(i(27596).x);l.handle="tincture",l.title={id:"core.tincture.title",defaults:"Tinctures"}},45715:function(t,e,i){"use strict";i.d(e,{x:function(){return V}});var s,n,a,o,r,l,d,u,c,h,f,p=i(41420),g=i(97530),v=i(23257),m=i(68420),y=i(27344),w=i(5281),b=i(90306),E=i(50596),T=i(300),Z=i(77766),I=i.n(Z),R=i(20116),A=i.n(R),x=i(2991),C=i.n(x),S=i(86359),D=i(40090),j=i(71370),G=i(84626),k=i(28683),N=i(74489),_=i(76704),H=i(8510),L=i(73947),O=i(90577),W=i(52250),M=(i(67294),i(30919)),P=i(40753),U=i(85893),F={0:2,1e3:1,2500:0},B={1:W.bI.MEDIUM,5:W.bI.MAJOR},V=(s=Reflect.metadata("design:type",H.Z),n=Reflect.metadata("design:type",L.V),a=Reflect.metadata("design:type",O.I),o=Reflect.metadata("design:type",W.ZP),f=h=function(t){(0,b.Z)(i,t);var e=(0,E.Z)(i);function i(){var t,s;(0,m.Z)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return s=e.call.apply(e,I()(t=[this]).call(t,a)),(0,v.Z)(s,"castTime",l,(0,w.Z)(s)),(0,v.Z)(s,"data",d,(0,w.Z)(s)),(0,v.Z)(s,"invulnerability",u,(0,w.Z)(s)),(0,v.Z)(s,"suggestions",c,(0,w.Z)(s)),s.suggestionIcon="https://xivapi.com/i/001000/001785.png",s.moduleLink=(0,U.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return s.parser.scrollTo(i.handle)},children:(0,U.jsx)(D.Z,{message:i.title})}),s.suggestionContent=(0,U.jsx)(S.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:s.moduleLink}}),s.severity=B,s.weaves=[],s.ongoingCastEvent=void 0,s.leadingGcdEvent=void 0,s.trailingGcdEvent=void 0,s.badWeaves=[],s}return(0,y.Z)(i,[{key:"initialise",value:function(){var t=(0,N.hX)().source(this.parser.actor.id);this.addEventHook(t.type("prepare"),this.onBeginCast),this.addEventHook(t.type("action"),this.onCast),this.addEventHook((0,N.hX)().type("complete"),this.onComplete),this.addEventHook((0,N.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(t){this.ongoingCastEvent=t}},{key:"onCast",value:function(t){var e=this.data.getAction(t.action);e&&!e.autoAttack&&(this.isOgcd(e)?this.weaves.push(t):(this.ongoingCastEvent&&this.ongoingCastEvent.action===e.id?this.trailingGcdEvent=(0,g.Z)((0,g.Z)({},t),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=t,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new W.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,U.jsx)(S.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var t,e;if(null!=this.trailingGcdEvent){var i=null!==(t=null===(e=this.leadingGcdEvent)||void 0===e?void 0:e.timestamp)&&void 0!==t?t:this.parser.pull.timestamp,s=this.trailingGcdEvent.timestamp-i-this.invulnerability.getDuration({start:i,end:this.trailingGcdEvent.timestamp}),n={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:s,weaves:this.weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this.badWeaves.push(n)}}},{key:"isOgcd",value:function(t){return!t.onGcd&&!t.autoAttack}},{key:"isBadWeave",value:function(t){var e,i,s=this,n=A()(e=t.weaves).call(e,(function(t){return!s.invulnerability.isActive({timestamp:t.timestamp,types:["untargetable"]})&&t.timestamp>=s.parser.pull.timestamp})).length,a=null!==(i=null!=t.leadingGcdEvent?this.castTime.recastForEvent(t.leadingGcdEvent):void 0)&&void 0!==i?i:G.b;return t.gcdTimeDiff>a&&n>this.getMaxWeaves(t)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(t){var e,i;if(null==t.leadingGcdEvent)return 2;var s=this.castTime.forEvent(t.leadingGcdEvent);return null==s?2:(null!==(e=(0,P.CL)(F,s))&&void 0!==e?e:2)-((null!==(i=this.castTime.recastForEvent(t.leadingGcdEvent))&&void 0!==i?i:G.b)<1800?1:0)}},{key:"output",value:function(){var t,e=this;if(0===this.badWeaves.length)return!1;var i=C()(t=this.badWeaves).call(t,(function(t){var i,s,n,a,o;return{key:null!==(i=null===(s=t.leadingGcdEvent)||void 0===s?void 0:s.timestamp)&&void 0!==i?i:e.parser.pull.timestamp,title:{content:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("strong",{children:e.parser.formatEpochTimestamp(null!==(n=null===(a=t.leadingGcdEvent)||void 0===a?void 0:a.timestamp)&&void 0!==n?n:e.parser.pull.timestamp)})," - ",(0,U.jsx)(S.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:t.weaves.length}})," (",e.parser.formatDuration(t.gcdTimeDiff)," ",(0,U.jsx)(S.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,U.jsx)(j.Z,{events:I()(o=[]).call(o,(0,p.Z)(null!=t.leadingGcdEvent?[t.leadingGcdEvent]:[]),(0,p.Z)(t.weaves))})}}}));return(0,U.jsx)(M.Z,{exclusive:!1,panels:i,styled:!0,fluid:!0})}}]),i}(k.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},r=f,l=(0,T.Z)(r.prototype,"castTime",[_.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),d=(0,T.Z)(r.prototype,"data",[_.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,T.Z)(r.prototype,"invulnerability",[_.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),c=(0,T.Z)(r.prototype,"suggestions",[_.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),r)},79065:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return ai}});var s,n=i(41420),a=i(68420),o=i(90306),r=i(50596),l=i(77766),d=i.n(l),u=i(61806),c=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){return(0,a.Z)(this,i),e.apply(this,arguments)}return i}(u.E);c.rows=d()(s=[]).call(s,(0,n.Z)(u.E.rows),["BATTLE_LITANY","DRAGON_SIGHT","LANCE_CHARGE","JUMP","HIGH_JUMP","MIRAGE_DIVE","GEIRSKOGUL","NASTROND","STARDIVER","SPINESHATTER_DIVE","DRAGONFIRE_DIVE","LIFE_SURGE","ELUSIVE_JUMP"]);var h,f,p,g,v,m,y,w,b,E,T,Z,I,R,A,x,C,S,D,j,G,k,N,_,H,L,O,W,M,P,U,F,B,V,Y,z,J,q,X,K,$,Q,tt,et,it,st,nt,at,ot,rt,lt,dt,ut,ct,ht,ft,pt,gt,vt,mt,yt,wt,bt,Et,Tt,Zt,It,Rt,At=i(23257),xt=i(5281),Ct=i(18527),St=i(3362),Dt=i(300),jt=i(27344),Gt=i(2991),kt=i.n(Gt),Nt=i(20116),_t=i.n(Nt),Ht=i(86359),Lt=i(9263),Ot=i(74489),Wt=i(76704),Mt=i(37517),Pt=i(70273),Ut=i(83459),Ft=i(52250),Bt=i(67294),Vt=i(85893),Yt=function(){function t(e){(0,a.Z)(this,t),this.doubleDrgNote=void 0,this.doubleDrgNote=e}return(0,jt.Z)(t,[{key:"suggest",value:function(){}},{key:"output",value:function(t){var e=this,i=kt()(t).call(t,(function(t){return e.doubleDrgNote(t)}));if(!i.every((function(t){return 0===t})))return{format:"notes",header:{header:(0,Vt.jsx)(Ht.Trans,{id:"drg.battlelitany.rotation-table.header.interference",defaults:"Window Interference"}),accessor:"interference"},rows:kt()(i).call(i,(function(t){return 1===t?(0,Vt.jsx)(Ht.Trans,{id:"drg.battlelitany.notes.they-overwrote",defaults:"Overwritten by Other DRG"}):2===t?(0,Vt.jsx)(Ht.Trans,{id:"drg.battlelitany.notes.you-overwrote",defaults:"You Overwrote an Existing Window"}):(0,Vt.jsx)(Vt.Fragment,{})}))}}}]),t}(),zt=(h=Reflect.metadata("design:type",Pt.e),f=Reflect.metadata("design:type",Ut.E),y=m=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"actors",g,(0,xt.Z)(s)),(0,At.Z)(s,"globalCooldown",v,(0,xt.Z)(s)),s.buffAction=s.data.actions.BATTLE_LITANY,s.buffStatus=s.data.statuses.BATTLE_LITANY,s.buffApplications=[],s}return(0,jt.Z)(i,[{key:"initialise",value:function(){(0,Ct.Z)((0,St.Z)(i.prototype),"initialise",this).call(this);var t=(0,Ot.hX)().type("statusApply").status(this.data.statuses.BATTLE_LITANY.id);this.addEventHook(t,this.onBlStatusApply);var e=this.data.actions.BATTLE_LITANY.icon,s=(0,Vt.jsx)(Lt.vm,{action:"BATTLE_LITANY",showIcon:!1});this.addEvaluator(new Mt.nZ({expectedGcds:6,globalCooldown:this.globalCooldown,hasStacks:!1,suggestionIcon:e,suggestionContent:(0,Vt.jsx)(Ht.Trans,{id:"drg.bl.suggestions.missedgcd.content",defaults:"Try to land at least 6 GCDs during every <0/> window.",components:[(0,Vt.jsx)(Lt.vm,{action:"BATTLE_LITANY"})]}),suggestionWindowName:s,severityTiers:{1:Ft.bI.MINOR,2:Ft.bI.MEDIUM,3:Ft.bI.MAJOR}})),this.addEvaluator(new Yt(this.doubleDrgNote.bind(this)))}},{key:"onBlStatusApply",value:function(t){var e=this.actors.get(t.target);e.playerControlled&&this.buffApplications.push({timestamp:t.timestamp,appliedByThisDrg:t.source===this.parser.actor.id,job:e.job})}},{key:"doubleDrgNote",value:function(t){var e,i,s,n=(null!==(e=null==t?void 0:t.end)&&void 0!==e?e:t.start)-t.start,a=t.start-this.buffStatus.duration;return _t()(i=this.buffApplications).call(i,(function(e){return!e.appliedByThisDrg&&a<=e.timestamp&&e.timestamp<=t.start})).length>0?2:_t()(s=this.buffApplications).call(s,(function(e){return!e.appliedByThisDrg&&t.start<=e.timestamp&&e.timestamp<=t.start+n})).length>0?1:0}}]),i}(Mt.ug),m.handle="battlelitany",m.title={id:"drg.battlelitany.title",defaults:"Battle Litany"},m.displayOrder=16,p=y,g=(0,Dt.Z)(p.prototype,"actors",[Wt.I,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),v=(0,Dt.Z)(p.prototype,"globalCooldown",[Wt.I,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),p),Jt=i(8333),qt=i(99021),Xt=i(97530),Kt=i(47302),$t=i.n(Kt),Qt=i(26295),te=i.n(Qt),ee=i(6767),ie=i.n(ee),se=i(32690),ne=i(81336),ae=i(51691),oe=i(78766),re=i(56611),le=i(80967),de=i(65927),ue=i(68156),ce=i(45150),he=i(30919),fe=3e4,pe=ie().rgb(61,135,255).fade(.25).toString(),ge=(w=Reflect.metadata("design:type",Pt.e),b=Reflect.metadata("design:type",se.Z),E=Reflect.metadata("design:type",ne.w),T=Reflect.metadata("design:type",ae.Z),Z=Reflect.metadata("design:type",Ft.ZP),I=Reflect.metadata("design:type",re.TY),k=G=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"actors",A,(0,xt.Z)(s)),(0,At.Z)(s,"brokenLog",x,(0,xt.Z)(s)),(0,At.Z)(s,"cooldowns",C,(0,xt.Z)(s)),(0,At.Z)(s,"downtime",S,(0,xt.Z)(s)),(0,At.Z)(s,"suggestions",D,(0,xt.Z)(s)),(0,At.Z)(s,"timeline",j,(0,xt.Z)(s)),s.lifeDuration=0,s.lifeWindows={current:void 0,history:[]},s.lastEventTime=s.parser.pull.timestamp,s.lastMdTime=s.parser.pull.timestamp,s.lastGskTime=s.parser.pull.timestamp,s.eyeGauge=s.add(new oe.qT({maximum:2,graph:{label:(0,Vt.jsx)(Ht.Trans,{id:"drg.gauge.resource.eyes",defaults:"First Brood's Gaze"}),color:pe},correctHistory:!0,deterministic:!0})),s}return(0,jt.Z)(i,[{key:"initialise",value:function(){(0,Ct.Z)((0,St.Z)(i.prototype),"initialise",this).call(this);var t=(0,Ot.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action").action(this.data.actions.MIRAGE_DIVE.id),this.onMirageDiveCast),this.addEventHook(t.type("action").action(this.data.actions.GEIRSKOGUL.id),this.onGeirskogulCast),this.addEventHook(t.type("action").action(this.data.actions.NASTROND.id),this.onNastrondCast),this.addEventHook(t.type("action").action(this.data.actions.STARDIVER.id),this.onStardiverCast),this.addEventHook((0,Ot.hX)().actor(this.parser.actor.id).type("death"),this.onDeathLotd),this.addEventHook("complete",this.onComplete)}},{key:"getActiveDrgBuffs",value:function(){var t=[];return this.actors.current.hasStatus(this.data.statuses.LANCE_CHARGE.id)&&t.push("LANCE_CHARGE"),this.actors.current.hasStatus(this.data.statuses.BATTLE_LITANY.id)&&t.push("BATTLE_LITANY"),(this.actors.current.hasStatus(this.data.statuses.RIGHT_EYE.id)||this.actors.current.hasStatus(this.data.statuses.RIGHT_EYE_SOLO.id))&&t.push("RIGHT_EYE"),t}},{key:"createTimelineButton",value:function(t){var e=this;return(0,Vt.jsx)(le.Z,{circular:!0,compact:!0,icon:"time",size:"small",onClick:function(){return e.timeline.show(t-e.parser.pull.timestamp,t-e.parser.pull.timestamp)},content:this.parser.formatEpochTimestamp(t)})}},{key:"finishLifeWindow",value:function(){null!=this.lifeWindows.current&&(this.lifeWindows.current.duration=this.parser.currentEpochTimestamp-this.lifeWindows.current.start,this.lifeWindows.history.push(this.lifeWindows.current),this.lifeWindows.current=void 0)}},{key:"updateGauge",value:function(){var t=this.parser.currentEpochTimestamp-this.lastEventTime;null!=this.lifeWindows.current&&(this.lifeDuration-=t,this.lifeDuration<=0&&(this.finishLifeWindow(),this.lifeDuration=0)),this.lastEventTime=this.parser.currentEpochTimestamp}},{key:"onMirageDiveCast",value:function(t){this.updateGauge(),this.lastMdTime=t.timestamp,this.eyeGauge.generate(1)}},{key:"onGeirskogulCast",value:function(t){this.updateGauge(),this.lastGskTime=t.timestamp,2===this.eyeGauge.value&&(this.lifeDuration=fe,this.lifeWindows.current={start:this.parser.currentEpochTimestamp,duration:this.lifeDuration,nastronds:[],stardivers:[],timeToNextBuff:{LANCE_CHARGE:this.cooldowns.remaining("LANCE_CHARGE"),RIGHT_EYE:this.cooldowns.remaining("DRAGON_SIGHT"),BATTLE_LITANY:this.cooldowns.remaining("BATTLE_LITANY")},activeBuffs:this.getActiveDrgBuffs(),buffsInDelayWindow:{LANCE_CHARGE:!1,RIGHT_EYE:!1,BATTLE_LITANY:!1},dtOverlapTime:null,isLast:!1,shouldDelay:!1,showNoDelayNote:!1,missedSdBuff:!1},this.eyeGauge.spend(2))}},{key:"onNastrondCast",value:function(t){null!=this.lifeWindows.current?this.lifeWindows.current&&!this.lifeWindows.current.nastronds.some((function(e){return e.timestamp===t.timestamp}))&&this.lifeWindows.current.nastronds.push({timestamp:t.timestamp,buffs:this.getActiveDrgBuffs(),action:"NASTROND"}):this.brokenLog.trigger(this,"no lotd nastrond",(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.trigger.no-lotd-nastrond",defaults:"<0/> was cast while Life of the Dragon was deemed inactive.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.NASTROND))]}))}},{key:"onStardiverCast",value:function(t){null!==this.lifeWindows.current?this.lifeWindows.current&&!this.lifeWindows.current.stardivers.some((function(e){return e.timestamp===t.timestamp}))&&this.lifeWindows.current.stardivers.push({timestamp:t.timestamp,buffs:this.getActiveDrgBuffs(),action:"STARDIVER"}):this.brokenLog.trigger(this,"no lotd stardiver",(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.trigger.no-lotd-stardiver",defaults:"<0/> was cast while Life of the Dragon was deemed inactive.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]}))}},{key:"onDeathLotd",value:function(){this.updateGauge(),this.lifeDuration=0,this.finishLifeWindow()}},{key:"intersectsDowntime",value:function(t){var e,i=this.downtime.getDowntimeWindows(t),s=t+fe,n=(0,qt.Z)(i);try{for(n.s();!(e=n.n()).done;){var a=e.value;if(a.start<s)return a.start}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"analyzeLifeWindows",value:function(){var t,e=(0,qt.Z)(this.lifeWindows.history);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.dtOverlapTime=this.intersectsDowntime(Math.min(i.start+this.data.actions.HIGH_JUMP.cooldown,this.parser.pull.timestamp+this.parser.pull.duration)),i.isLast=i.start+i.duration>=this.parser.pull.timestamp+this.parser.pull.duration;var s=i.activeBuffs.length>0,n=0===i.activeBuffs.length&&null===i.dtOverlapTime&&i.start+6e4<this.parser.pull.timestamp+this.parser.pull.duration,a=!1,o=void 0;for(o in i.timeToNextBuff)i.buffsInDelayWindow[o]=i.timeToNextBuff[o]>=3e4&&i.timeToNextBuff[o]<=6e4,a=i.buffsInDelayWindow[o]||a,s=i.timeToNextBuff[o]<i.duration||s;i.shouldDelay=!s&&a&&n,i.showNoDelayNote=null!==i.dtOverlapTime&&!s&&a,i.missedSdBuff=(s||i.shouldDelay)&&1===i.stardivers.length&&0===i.stardivers[0].buffs.length}}catch(t){e.e(t)}finally{e.f()}}},{key:"shouldRushFinalWindow",value:function(){if(this.lifeWindows.history.length<1)return 0;if(2===this.eyeGauge.value&&this.lastGskTime<this.lastMdTime&&this.parser.pull.duration-(this.lastMdTime-this.parser.pull.timestamp)>5e3)return 1;var t=this.lifeWindows.history[this.lifeWindows.history.length-1];return t.duration<fe&&this.parser.pull.duration-(this.lastMdTime-this.parser.pull.timestamp)-t.duration>1e4?2:0}},{key:"onComplete",value:function(){var t,e,i;this.updateGauge(),this.finishLifeWindow(),this.analyzeLifeWindows();var s=_t()(t=this.lifeWindows.history).call(t,(function(t){return!t.isLast&&t.missedSdBuff})).length,n=_t()(e=this.lifeWindows.history).call(e,(function(t){return!t.isLast&&0===t.stardivers.length})).length,a=_t()(i=this.lifeWindows.history).call(i,(function(t){return!t.isLast&&t.nastronds.length<3})).length,o=this.shouldRushFinalWindow();if(this.suggestions.add(new Ft.eg({icon:this.data.actions.MIRAGE_DIVE.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.eyes.content",defaults:"Avoid using <0/> when you already have {MAX_EYES} Eyes. Wasting Eyes will delay your Life of the Dragon windows and potentially cost you a lot of DPS.",values:{MAX_EYES:2},components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.MIRAGE_DIVE))]}),value:this.eyeGauge.overCap,tiers:{1:Ft.bI.MEDIUM,2:Ft.bI.MAJOR},why:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.eyes.why",defaults:"You used Mirage Dive {0, plural, one {# time} other {# times}} when you already had {MAX_EYES} Eyes.",values:{0:this.eyeGauge.overCap,MAX_EYES:2}})})),this.suggestions.add(new Ft.eg({icon:this.data.actions.STARDIVER.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.suggestions.stardiver.content",defaults:"Each Life of the Dragon window should contain 1 <0/> use.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]}),value:n,tiers:{1:Ft.bI.MEDIUM,2:Ft.bI.MAJOR},why:(0,Vt.jsx)(Ht.Trans,{id:"drg.suggetions.stardiver.why",defaults:"{noLifeSd} of your Life of the Dragon windows were missing a <0/> use.",values:{noLifeSd:n},components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]})})),this.suggestions.add(new Ft.eg({icon:this.data.actions.NASTROND.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.suggestions.nastrond.content",defaults:"Each Life of the Dragon window should contain 3 <0/> uses.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.NASTROND))]}),value:a,tiers:{1:Ft.bI.MEDIUM,2:Ft.bI.MAJOR},why:(0,Vt.jsx)(Ht.Trans,{id:"drg.suggestions.nastrond.why",defaults:"{noFullNsLife} of your Life of the Dragon windows were missing one or more <0/> uses.",values:{noFullNsLife:a},components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.NASTROND))]})})),s>0&&this.suggestions.add(new Ft.q$({icon:this.data.actions.STARDIVER.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.buffed-stardiver",defaults:"Try to ensure that <0/> always lands while at least one of <1/>, <2/>, or <3/> is active. Depending on the fight specifics, this may not always be possible. See the Timeline module below for details.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER)),(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.LANCE_CHARGE)),(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.DRAGON_SIGHT)),(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.BATTLE_LITANY))]}),severity:Ft.bI.MINOR,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.buffsed-stardiver.why",defaults:"When <0/> could have been buffed, you used it {noBuffSd, plural, one {# time} other {# times}} without a buff.",values:{noBuffSd:s},components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]})})),1===o)this.suggestions.add(new Ft.q$({icon:this.data.actions.NASTROND.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.rush",defaults:"Try to make sure you enter Life of the Dragon before the fight ends, even if it does not align with your buffs."}),severity:Ft.bI.MAJOR,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.rush.why",defaults:"You could have entered Life of the Dragon one more time before the end of the fight."})}));else if(2===o){var r=(this.parser.pull.duration-(this.lastMdTime-this.parser.pull.timestamp))/1e3,l=this.lifeWindows.history[this.lifeWindows.history.length-1].duration/1e3;this.suggestions.add(new Ft.q$({icon:this.data.actions.NASTROND.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.late-window",defaults:"Avoid entering Life of the Dragon right before the end of the fight. Try to enter Life of the Dragon earlier, even if it does not align with your buffs, in order to get as many uses of <0/> and <1/> as possible before the end of the fight.",components:[(0,Vt.jsx)(Lt.P9,{action:"NASTROND"}),(0,Vt.jsx)(Lt.P9,{action:"STARDIVER"})]}),severity:Ft.bI.MEDIUM,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.suggestions.rush.late-window.why",defaults:"Your final Life of the Dragon window lasted {0}s, but could have been used {1}s before the end of the fight.",values:{0:l.toFixed(1),1:r.toFixed(1)}})}))}}},{key:"windowTable",value:function(t){var e,i,s,n,a=this,o=d()(e=t.nastronds).call(e,t.stardivers);$t()(o).call(o,(function(t,e){return t.timestamp-e.timestamp}));var r=kt()(o).call(o,(function(e){var i,s=kt()(i=e.buffs).call(i,(function(t){return(0,Vt.jsx)(Lt.ci,(0,Xt.Z)({showName:!1,iconSize:"35px"},a.data.statuses[t]),t)}));return(0,Vt.jsxs)(de.Z.Row,{warning:"STARDIVER"===e.action&&t.missedSdBuff,children:[(0,Vt.jsx)(de.Z.Cell,{children:a.createTimelineButton(e.timestamp)}),(0,Vt.jsx)(de.Z.Cell,{children:(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},a.data.actions[e.action]))}),(0,Vt.jsx)(de.Z.Cell,{children:s})]},e.timestamp)})),l=kt()(i=_t()(s=te()(t.buffsInDelayWindow)).call(s,(function(t){var e=(0,Jt.Z)(t,2);return e[0],e[1]}))).call(i,(function(e,i){var s=(0,Jt.Z)(e,2),n=s[0];return s[1],(0,Vt.jsx)(ue.Z.Item,{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.delay-buff",defaults:"<0/> in {0}",values:{0:a.parser.formatDuration(t.timeToNextBuff[n])},components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},a.data.statuses[n]))]})},i)}));return(0,Vt.jsxs)(Bt.Fragment,{children:[t.isLast&&(0,Vt.jsx)(ue.Z,{info:!0,children:(0,Vt.jsx)("p",{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.final-window-explain",defaults:"This window would last past the end of the fight and does not count against missing casts of <0/> and <1/> in the Suggestions. The warnings will still be shown for completeness.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.NASTROND)),(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]})})}),0===t.stardivers.length&&(0,Vt.jsx)(ue.Z,{error:!0,children:(0,Vt.jsxs)("p",{children:[(0,Vt.jsx)(ce.Z,{name:"warning sign"})," ",(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.no-stardiver-explain",defaults:"You did not use <0/> during this window.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]})]})}),t.nastronds.length<3&&(0,Vt.jsx)(ue.Z,{error:!0,children:(0,Vt.jsxs)("p",{children:[(0,Vt.jsx)(ce.Z,{name:"warning sign"})," ",(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.no-nastrond-explain",defaults:"You missed one or more uses of <0/> during this window.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.NASTROND))]})]})}),t.missedSdBuff&&(0,Vt.jsx)(ue.Z,{warning:!0,children:(0,Vt.jsx)("p",{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.no-buff-stardiver-explain",defaults:"You did not use <0/> while buffed during this window.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.STARDIVER))]})})}),t.shouldDelay&&(0,Vt.jsxs)(ue.Z,{warning:!0,children:[(0,Vt.jsx)("p",{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.delay-explain",defaults:"If possible, Life of the Dragon windows should line up with your personal buffs. This window could be delayed to line up with:"})}),(0,Vt.jsx)(ue.Z.List,{children:l})]}),t.showNoDelayNote&&(0,Vt.jsx)(ue.Z,{info:!0,children:(0,Vt.jsx)("p",{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.no-delay-explain",defaults:"This window cannot be delayed due to downtime occurring at {0}. This window would otherwise be delayed for better buff alignment.",values:{0:this.parser.formatEpochTimestamp(null!==(n=t.dtOverlapTime)&&void 0!==n?n:0)}})})}),(0,Vt.jsxs)(de.Z,{children:[(0,Vt.jsx)(de.Z.Header,{children:(0,Vt.jsxs)(de.Z.Row,{children:[(0,Vt.jsx)(de.Z.HeaderCell,{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.table.time",defaults:"Time"})}),(0,Vt.jsx)(de.Z.HeaderCell,{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.table.action",defaults:"Action"})}),(0,Vt.jsx)(de.Z.HeaderCell,{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.table.statuses",defaults:"Personal Buffs"})})]},"header")}),r]})]})}},{key:"formatWindowTitle",value:function(t){var e=t.shouldDelay||t.missedSdBuff,i=0===t.stardivers.length||t.nastronds.length<3,s=(0,Vt.jsxs)(Vt.Fragment,{children:[this.parser.formatEpochTimestamp(t.start)," ",(0,Vt.jsx)("span",{children:" - "})," ",(0,Vt.jsx)(Ht.Trans,{id:"drg.blood.windows.hits",defaults:"{0, plural, one {# Nastrond} other {# Nastronds}}, {1, plural, one {# Stardiver} other {# Stardivers}}",values:{0:t.nastronds.length,1:t.stardivers.length}})]});return i?(0,Vt.jsx)("span",{className:"text-error",children:s}):e?(0,Vt.jsx)("span",{className:"text-warning",children:s}):s}},{key:"output",value:function(){var t=this;if(this.lifeWindows.history.length>0){var e,i=kt()(e=this.lifeWindows.history).call(e,(function(e){return{title:{key:"title-".concat(e.start),content:t.formatWindowTitle(e)},content:{key:"content-".concat(e.start),content:t.windowTable(e)}}}));return(0,Vt.jsx)(Bt.Fragment,{children:(0,Vt.jsx)(he.Z,{exclusive:!1,panels:i,styled:!0,fluid:!0})})}return!1}}]),i}(oe.aC),G.handle="bloodOfTheDragon",G.title={id:"drg.blood.title",defaults:"Life of the Dragon"},G.displayOrder=11,R=k,A=(0,Dt.Z)(R.prototype,"actors",[Wt.I,w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),x=(0,Dt.Z)(R.prototype,"brokenLog",[Wt.I,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.brokenLog}}),C=(0,Dt.Z)(R.prototype,"cooldowns",[Wt.I,E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),S=(0,Dt.Z)(R.prototype,"downtime",[Wt.I,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),D=(0,Dt.Z)(R.prototype,"suggestions",[Wt.I,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),j=(0,Dt.Z)(R.prototype,"timeline",[Wt.I,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),R),ve=i(78580),me=i.n(ve),ye=i(28683),we=i(52102),be=i(73947),Ee=i(90577),Te=i(51422),Ze=i(32596),Ie=["TRUE_THRUST","RAIDEN_THRUST","VORPAL_THRUST","DISEMBOWEL","CHAOS_THRUST","PIERCING_TALON","DOOM_SPIKE","SONIC_THRUST"],Re=["FANG_AND_CLAW","WHEELING_THRUST"],Ae=["FULL_THRUST","HEAVENS_THRUST","FANG_AND_CLAW","WHEELING_THRUST","COERTHAN_TORMENT"],xe={FULL_THRUST:"#0e81f7",HEAVENS_THRUST:"#0e81f7",FANG_AND_CLAW:"#b36b00",WHEELING_THRUST:"#b36b00",COERTHAN_TORMENT:"#b36b00"},Ce=(N=Reflect.metadata("design:type",Pt.e),_=Reflect.metadata("design:type",we.ZP),H=Reflect.metadata("design:type",Ze.t),L=Reflect.metadata("design:type",Ee.I),O=Reflect.metadata("design:type",Ft.ZP),W=Reflect.metadata("design:type",be.V),M=Reflect.metadata("design:type",Te.gy),X=q=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).badLifeSurges=0,s.fifthGcd=!1,s.soloDragonSightCount=0,s.lifeSurgeCasts=[],(0,At.Z)(s,"actors",U,(0,xt.Z)(s)),(0,At.Z)(s,"checklist",F,(0,xt.Z)(s)),(0,At.Z)(s,"statuses",B,(0,xt.Z)(s)),(0,At.Z)(s,"invulnerability",V,(0,xt.Z)(s)),(0,At.Z)(s,"suggestions",Y,(0,xt.Z)(s)),(0,At.Z)(s,"data",z,(0,xt.Z)(s)),(0,At.Z)(s,"statistics",J,(0,xt.Z)(s)),s.badLifeSurgeConsumers=kt()(Ie).call(Ie,(function(t){return s.data.actions[t].id})),s.finalComboHits=kt()(Re).call(Re,(function(t){return s.data.actions[t].id})),s.chartLifeSurgeConsumers=kt()(Ae).call(Ae,(function(t){return s.data.actions[t].id})),s.chartColors={},s}return(0,jt.Z)(i,[{key:"initialise",value:function(){var t=(0,Ot.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action"),this.onCast),this.addEventHook(t.action(this.data.actions.DRAGON_SIGHT.id),this.onDragonSight),this.addEventHook(t.type("damage").cause((0,Ot.hX)().action(this.data.actions.COERTHAN_TORMENT.id)),this.onCot),this.addEventHook("complete",this.onComplete);for(var e=0,i=te()(xe);e<i.length;e++){var s=(0,Jt.Z)(i[e],2),n=s[0],a=s[1];this.chartColors[this.data.actions[n].id]=a}}},{key:"onCast",value:function(t){var e,i,s=this.data.getAction(t.action);s&&s.onGcd&&(this.actors.current.hasStatus(this.data.statuses.LIFE_SURGE.id)&&this.lifeSurgeCasts.push(s.id),me()(e=this.badLifeSurgeConsumers).call(e,s.id)?(this.fifthGcd=!1,this.actors.current.hasStatus(this.data.statuses.LIFE_SURGE.id)&&this.badLifeSurges++):me()(i=this.finalComboHits).call(i,s.id)&&(this.fifthGcd||(this.fifthGcd=!0,this.actors.current.hasStatus(this.data.statuses.LIFE_SURGE.id)&&this.badLifeSurges++)))}},{key:"onDragonSight",value:function(t){t.source===t.target&&(this.soloDragonSightCount+=1)}},{key:"onCot",value:function(t){var e=t.targets.length;this.actors.current.hasStatus(this.data.statuses.LIFE_SURGE.id)&&e<3&&this.badLifeSurges++}},{key:"getPowerSurgeUptimePercent",value:function(){return this.statuses.getUptime("POWER_SURGE",this.actors.current)/(this.parser.currentDuration-this.invulnerability.getDuration({types:["invulnerable"]}))*100}},{key:"onComplete",value:function(){var t=this;this.checklist.add(new we.$9({name:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.checklist.name",defaults:"Keep {0} up",values:{0:this.data.statuses.POWER_SURGE.name}}),description:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.checklist.description",defaults:"<0/> and <1/> grant <2/> which provides a 10% boost to your personal damage and should always be kept up.",components:[(0,Vt.jsx)(Lt.P9,{action:"DISEMBOWEL"}),(0,Vt.jsx)(Lt.P9,{action:"SONIC_THRUST"}),(0,Vt.jsx)(Lt.P9,{status:"POWER_SURGE"})]}),displayOrder:2,requirements:[new we.nb({name:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.checklist.requirement.name",defaults:"<0/> uptime",components:[(0,Vt.jsx)(Lt.P9,{status:"POWER_SURGE"})]}),percent:function(){return t.getPowerSurgeUptimePercent()}})]})),this.suggestions.add(new Ft.eg({icon:this.data.actions.LIFE_SURGE.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.suggestions.life-surge.content",defaults:"<0/> should be used on <1/>, your highest potency ability, as much as possible. In order to keep <2/> on cooldown, it may sometimes be necessary to use it on a 5th combo hit. In multi-target scenarios, <3/> can be used on <4/> if you hit at least three targets.",components:[(0,Vt.jsx)(Lt.P9,{action:"LIFE_SURGE"}),(0,Vt.jsx)(Lt.P9,{action:"HEAVENS_THRUST"}),(0,Vt.jsx)(Lt.P9,{action:"LIFE_SURGE"}),(0,Vt.jsx)(Lt.P9,{action:"LIFE_SURGE"}),(0,Vt.jsx)(Lt.P9,{action:"COERTHAN_TORMENT"})]}),tiers:{1:Ft.bI.MINOR,2:Ft.bI.MEDIUM,4:Ft.bI.MAJOR},value:this.badLifeSurges,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.suggestions.life-surge.why",defaults:"You used {0} on a non-optimal GCD {1, plural, one {# time} other {# times}}.",values:{0:this.data.actions.LIFE_SURGE.name,1:this.badLifeSurges}})})),this.suggestions.add(new Ft.eg({icon:this.data.actions.DRAGON_SIGHT.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.suggestions.solo-ds.content",defaults:"Although it doesn't impact your personal DPS, try to always use <0/> on a partner in group content so that someone else can benefit from the damage bonus too.",components:[(0,Vt.jsx)(Lt.P9,{action:"DRAGON_SIGHT"})]}),tiers:{1:Ft.bI.MINOR},value:this.soloDragonSightCount,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.buffs.suggestions.solo-ds.why",defaults:"{0} of your Dragon Sight casts didn't have a tether partner.",values:{0:this.soloDragonSightCount}})}));var e,i=this.lifeSurgeCasts.length,s=[],n=0,a=(0,qt.Z)(this.chartLifeSurgeConsumers);try{var o=function(){var a,o,r=e.value,l=_t()(a=t.lifeSurgeCasts).call(a,(function(t){return r===t})).length;if(0===l)return"continue";s.push({value:l,color:t.chartColors[r],columns:[null===(o=t.data.getAction(r))||void 0===o?void 0:o.name,l,t.lsCastPercent(l,i)]}),n+=l};for(a.s();!(e=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}var r=i-n;r>0&&s.push({value:r,color:"#660000",columns:["Other",r,this.lsCastPercent(r,i)]}),s.length>0&&this.statistics.add(new Te.vA({headings:["Life Surge Consumer","Count","%"],data:s}))}},{key:"lsCastPercent",value:function(t,e){return(t/e*100).toFixed(2)+"%"}}]),i}(ye.qk),q.handle="buffs",q.title={id:"drg.buffs.title",defaults:"Buffs"},P=X,U=(0,Dt.Z)(P.prototype,"actors",[Wt.I,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),F=(0,Dt.Z)(P.prototype,"checklist",[Wt.I,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),B=(0,Dt.Z)(P.prototype,"statuses",[Wt.I,H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statuses}}),V=(0,Dt.Z)(P.prototype,"invulnerability",[Wt.I,L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),Y=(0,Dt.Z)(P.prototype,"suggestions",[Wt.I,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),z=(0,Dt.Z)(P.prototype,"data",[Wt.I,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),J=(0,Dt.Z)(P.prototype,"statistics",[Wt.I,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),P),Se=i(95859),De=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).suggestionIcon=Se.ZP.HEAVENS_THRUST.icon,s}return i}(i(47969).G),je=i(49006),Ge=(K=Reflect.metadata("design:type",we.ZP),$=Reflect.metadata("design:type",Ft.ZP),Q=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"checklist",tt,(0,xt.Z)(s)),(0,At.Z)(s,"suggestions",et,(0,xt.Z)(s)),s.trackedStatuses=[s.data.statuses.CHAOTIC_SPRING.id],s}return(0,jt.Z)(i,[{key:"addChecklistRules",value:function(){var t=this;this.checklist.add(new we.$9({name:(0,Vt.jsx)(Ht.Trans,{id:"drg.debuffs.checklist.name",defaults:"Keep your debuffs up"}),description:(0,Vt.jsx)(Ht.Trans,{id:"drg.debuffs.checklist.description",defaults:"<0/> provides a potent DoT which should be maintained at all times.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.CHAOTIC_SPRING))]}),displayOrder:3,target:90,requirements:[new we.nb({name:(0,Vt.jsx)(Ht.Trans,{id:"drg.debuffs.checklist.requirement.chaos-thrust.name",defaults:"<0/> uptime",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.CHAOTIC_SPRING))]}),percent:function(){return t.getUptimePercent(t.data.statuses.CHAOTIC_SPRING.id)}})]}))}},{key:"addClippingSuggestions",value:function(){var t=this.getClippingAmount(this.data.statuses.CHAOTIC_SPRING.id);this.suggestions.add(new Ft.eg({icon:this.data.actions.CHAOS_THRUST.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.debuffs.suggestions.clipping.content",defaults:"Avoid refreshing <0/> significantly earlier or later than its expiration, as it usually indicates rotational errors. DRG's strict 10-GCD rotation should have you refreshing Chaos Thrust within 2 seconds before or after expiry, depending on your skill speed.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.CHAOTIC_SPRING))]}),tiers:{5e3:Ft.bI.MINOR,1e4:Ft.bI.MEDIUM,15e3:Ft.bI.MAJOR},value:t,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.debuffs.suggestions.clipping.why",defaults:"An average of {0} seconds of <0/> clipped per minute due to early refreshes.",values:{0:this.parser.formatDuration(t,1)},components:[(0,Vt.jsx)(Lt.P9,{status:"CHAOTIC_SPRING"})]})}))}}]),i}(je.N),tt=(0,Dt.Z)(Q.prototype,"checklist",[Wt.I,K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),et=(0,Dt.Z)(Q.prototype,"suggestions",[Wt.I,$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Q),ke=i(6162),Ne=i.n(ke),_e=i(73905),He=function(){function t(e){(0,a.Z)(this,t),this.expectedActions=void 0,this.expectedActions=e}return(0,jt.Z)(t,[{key:"output",value:function(t){var e,i=this;return kt()(e=this.expectedActions).call(e,(function(e){return{format:"table",header:{header:(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({showName:!1},e)),accessor:e.name},rows:kt()(t).call(t,(function(t){return{actual:i.countUsed(t,e),expected:void 0}}))}}))}},{key:"suggest",value:function(){}},{key:"countUsed",value:function(t,e){var i;return _t()(i=t.data).call(i,(function(t){return t.action.id===e.id})).length}}]),t}(),Le=i(40753),Oe=function(){function t(e){(0,a.Z)(this,t),this.shortWindowReason=void 0,this.shortWindowReason=e}return(0,jt.Z)(t,[{key:"suggest",value:function(){}},{key:"output",value:function(t){var e=this,i=kt()(t).call(t,(function(t){return e.shortWindowReason(t)}));if(!i.every((function(t){return 0===t})))return{format:"notes",header:{header:(0,Vt.jsx)(Ht.Trans,{id:"drg.ds.notes.header",defaults:"Short Window Cause"}),accessor:"shortwindow"},rows:kt()(i).call(i,(function(t){return 1===t?(0,Vt.jsx)(Ht.Trans,{id:"drg.ds.notes.partnerdied",defaults:"Partner Died"}):2===t?(0,Vt.jsx)(Ht.Trans,{id:"drg.ds.notes.drgdied",defaults:"You Died"}):(0,Vt.jsx)(Vt.Fragment,{})}))}}}]),t}(),We=(it=Reflect.metadata("design:type",Ut.E),ot=at=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"globalCooldown",nt,(0,xt.Z)(s)),s.buffAction=s.data.actions.DRAGON_SIGHT,s.buffStatus=[s.data.statuses.RIGHT_EYE,s.data.statuses.RIGHT_EYE_SOLO],s.deathTimes=[],s}return(0,jt.Z)(i,[{key:"initialise",value:function(){(0,Ct.Z)((0,St.Z)(i.prototype),"initialise",this).call(this),this.addEventHook({type:"death",actor:this.parser.actor.id},this.onDeath);var t=this.data.actions.DRAGON_SIGHT.icon,e=(0,Vt.jsx)(Lt.vm,{action:"DRAGON_SIGHT",showIcon:!1});this.addEvaluator(new Mt.nZ({expectedGcds:8,globalCooldown:this.globalCooldown,hasStacks:!1,suggestionIcon:t,suggestionContent:(0,Vt.jsx)(Ht.Trans,{id:"drg.ds.suggestions.missedgcd.content",defaults:"Try to land at least 8 GCDs during every <0/> window.",components:[(0,Vt.jsx)(Lt.vm,{action:"DRAGON_SIGHT"})]}),suggestionWindowName:e,severityTiers:{1:Ft.bI.MINOR,2:Ft.bI.MEDIUM,4:Ft.bI.MAJOR},adjustCount:this.adjustExpectedGcdCount.bind(this)}));var s=[{action:this.data.actions.HIGH_JUMP,expectedPerWindow:1},{action:this.data.actions.GEIRSKOGUL,expectedPerWindow:1},{action:this.data.actions.MIRAGE_DIVE,expectedPerWindow:1},{action:this.data.actions.SPINESHATTER_DIVE,expectedPerWindow:this.parser.patch.before("6.1")?1:2},{action:this.data.actions.DRAGONFIRE_DIVE,expectedPerWindow:1}];this.parser.patch.before("6.08")&&s.push({action:this.data.actions.LIFE_SURGE,expectedPerWindow:1}),this.addEvaluator(new Mt.np({expectedActions:s,suggestionIcon:t,suggestionContent:(0,Vt.jsx)(Ht.Trans,{id:"drg.lc.suggestions.missedaction.content",defaults:"Try to use as many of your oGCDs as possible during <0/>. Remember to keep your abilities on cooldown, when possible, to prevent them from drifting outside of your buff windows.",components:[(0,Vt.jsx)(Lt.vm,{action:"DRAGON_SIGHT"})]}),suggestionWindowName:e,severityTiers:{1:Ft.bI.MINOR,3:Ft.bI.MEDIUM,6:Ft.bI.MAJOR},adjustCount:this.adjustExpectedActionCount.bind(this),adjustOutcome:this.adjustExpectedActionOutcome.bind(this)})),this.addEvaluator(new Oe(this.buffTargetDied.bind(this))),this.parser.patch.after("6.05")&&this.addEvaluator(new He([this.data.actions.LIFE_SURGE]))}},{key:"onDeath",value:function(t){this.deathTimes.push(t.timestamp)}},{key:"adjustExpectedGcdCount",value:function(t){return 1===this.buffTargetDied(t)?-(0,Mt.Kb)(8,this.globalCooldown.getDuration(),t.start,t.end):0}},{key:"adjustExpectedActionCount",value:function(t){return this.isRushedEndOfPullWindow(t)||1===this.buffTargetDied(t)?-1:0}},{key:"adjustExpectedActionOutcome",value:function(t){if(1===this.buffTargetDied(t))return function(t,e){return!(0,Le.$K)(e)||t<=e?_e.m.NEGATIVE:_e.m.POSITIVE}}},{key:"buffTargetDied",value:function(t){var e,i,s,n,a=null!==(e=Ne()(kt()(i=(0,Le.rY)(this.buffStatus)).call(i,(function(t){return t.duration}))))&&void 0!==e?e:0,o=(null!==(s=null==t?void 0:t.end)&&void 0!==s?s:t.start)-t.start;return this.isRushedEndOfPullWindow(t)?0:o<a-2500?_t()(n=this.deathTimes).call(n,(function(e){return t.start<e&&e<t.start+(o+2500)})).length>0?2:1:0}}]),i}(Mt.xl),at.handle="dragonsight",at.title={id:"drg.dragonsight.title",defaults:"Dragon Sight"},at.displayOrder=15,st=ot,nt=(0,Dt.Z)(st.prototype,"globalCooldown",[Wt.I,it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),st),Me=["HIGH_JUMP","GEIRSKOGUL"],Pe=function t(e,i){(0,a.Z)(this,t),this.actionId=void 0,this.start=void 0,this.end=0,this.drift=0,this.actionId=e,this.start=i},Ue=(rt=Reflect.metadata("design:type",ae.Z),lt=Reflect.metadata("design:type",re.TY),dt=Reflect.metadata("design:type",be.V),gt=pt=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"downtime",ct,(0,xt.Z)(s)),(0,At.Z)(s,"timeline",ht,(0,xt.Z)(s)),(0,At.Z)(s,"data",ft,(0,xt.Z)(s)),s.driftedWindows=[],s.driftAbilities=kt()(Me).call(Me,(function(t){return s.data.actions[t].id})),s.cooldownMs={},s.currentWindows={},s}return(0,jt.Z)(i,[{key:"initialise",value:function(){var t=this,e=(0,Ot.hX)().source(this.parser.actor.id);this.addEventHook(e.type("action").action((0,Ot.kw)(this.driftAbilities)),this.onDriftableCast),Me.forEach((function(e){var i,s=t.data.actions[e];t.cooldownMs[s.id]=null!==(i=s.cooldown)&&void 0!==i?i:0,t.currentWindows[s.id]=new Pe(s.id,t.parser.pull.timestamp)}))}},{key:"onDriftableCast",value:function(t){var e=t.action,i=this.cooldownMs[e],s=this.currentWindows[e];s.end=t.timestamp;var n=Math.min(s.start+i,t.timestamp);this.debug(this.parser.formatEpochTimestamp(n));var a=0;if(this.downtime.isDowntime(n)){var o,r=this.downtime.getDowntimeWindows(n,n)[0];a=null!==(o=null==r?void 0:r.end)&&void 0!==o?o:n}else a=n;s.drift=Math.max(0,s.end-a),this.driftedWindows.push(s),this.currentWindows[e]=new Pe(e,t.timestamp)}},{key:"createTimelineButton",value:function(t){var e=this;return(0,Vt.jsx)(le.Z,{circular:!0,compact:!0,icon:"time",size:"small",onClick:function(){return e.timeline.show(t-e.parser.pull.timestamp,t-e.parser.pull.timestamp)},content:this.parser.formatEpochTimestamp(t)})}},{key:"createDriftTable",value:function(t){var e=this,i=0;if(0!==t.length){var s=this.data.getAction(t[0].actionId);return(0,Vt.jsxs)(de.Z,{children:[(0,Vt.jsx)(de.Z.Header,{children:(0,Vt.jsxs)(de.Z.Row,{children:[(0,Vt.jsxs)(de.Z.HeaderCell,{children:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},s))," ",(0,Vt.jsx)(Ht.Trans,{id:"drg.drift.table.heading-1",defaults:"Casts"})]}),(0,Vt.jsx)(de.Z.HeaderCell,{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.drift.table.heading-2",defaults:"Drift"})}),(0,Vt.jsx)(de.Z.HeaderCell,{children:(0,Vt.jsx)(Ht.Trans,{id:"drg.drift.table.heading-3",defaults:"Total Drift"})})]})}),(0,Vt.jsx)(de.Z.Body,{children:kt()(t).call(t,(function(t,s){return i+=s>0?t.drift:0,(0,Vt.jsxs)(de.Z.Row,{warning:s>0&&t.drift>1250,children:[(0,Vt.jsx)(de.Z.Cell,{children:e.createTimelineButton(t.end)}),(0,Vt.jsx)(de.Z.Cell,{children:null!==t.drift&&s>0?e.parser.formatDuration(t.drift):"-"}),(0,Vt.jsx)(de.Z.Cell,{children:i?e.parser.formatDuration(i):"-"})]},t.end)}))})]})}}},{key:"output",value:function(){var t,e,i=this;if(this.driftedWindows.length)return(0,Vt.jsx)(Bt.Fragment,{children:(0,Vt.jsx)(de.Z,{style:{border:"none"},children:(0,Vt.jsx)(de.Z.Body,{children:(0,Vt.jsxs)(de.Z.Row,{children:[(0,Vt.jsx)(de.Z.Cell,{style:{verticalAlign:"top"},children:this.createDriftTable(_t()(t=this.driftedWindows).call(t,(function(t){return t.actionId===i.data.actions.HIGH_JUMP.id})))}),(0,Vt.jsx)(de.Z.Cell,{style:{verticalAlign:"top"},children:this.createDriftTable(_t()(e=this.driftedWindows).call(e,(function(t){return t.actionId===i.data.actions.GEIRSKOGUL.id})))})]})})})})}}]),i}(ye.qk),pt.debug=!1,pt.handle="drift",pt.title={id:"drg.drift.title",defaults:"Ability Drift"},pt.displayOrder=10,ut=gt,ct=(0,Dt.Z)(ut.prototype,"downtime",[Wt.I,rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),ht=(0,Dt.Z)(ut.prototype,"timeline",[Wt.I,lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),ft=(0,Dt.Z)(ut.prototype,"data",[Wt.I,dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),ut),Fe=ie().rgb(196,101,234).fade(.25).toString(),Be=["RAIDEN_THRUST","DRACONIAN_FURY"],Ve=(vt=Reflect.metadata("design:type",Ft.ZP),mt=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"suggestions",yt,(0,xt.Z)(s)),s.fmfGauge=s.add(new oe.qT({maximum:2,graph:{label:(0,Vt.jsx)(Ht.Trans,{id:"drg.gauge.resource.fmf",defaults:"Firstminds' Focus"}),color:Fe},correctHistory:!0,deterministic:!0})),s}return(0,jt.Z)(i,[{key:"initialise",value:function(){(0,Ct.Z)((0,St.Z)(i.prototype),"initialise",this).call(this);var t=(0,Ot.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action").action(this.data.matchActionId(Be)),this.onGeneratorCast),this.addEventHook(t.type("action").action(this.data.actions.WYRMWIND_THRUST.id),this.onWwtCast),this.addEventHook("complete",this.onComplete)}},{key:"onGeneratorCast",value:function(){this.fmfGauge.generate(1)}},{key:"onWwtCast",value:function(){this.fmfGauge.spend(2)}},{key:"onComplete",value:function(){var t=this.fmfGauge.overCap;this.suggestions.add(new Ft.eg({icon:this.data.actions.WYRMWIND_THRUST.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.gauge.suggestions.overcapped-fmf.content",defaults:"Make sure to use <0/> before <1/> or <2/> when you already have two stacks of Firstminds' Focus to prevent losing uses of <3/> by overcapping.",components:[(0,Vt.jsx)(Lt.P9,{action:"WYRMWIND_THRUST"}),(0,Vt.jsx)(Lt.P9,{action:"RAIDEN_THRUST"}),(0,Vt.jsx)(Lt.P9,{action:"DRACONIAN_FURY"}),(0,Vt.jsx)(Lt.P9,{action:"WYRMWIND_THRUST"})]}),tiers:{1:Ft.bI.MEDIUM,2:Ft.bI.MAJOR},value:t,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.gauge.suggestions.overcapped-fmf.why",defaults:"{fmfOvercap, plural, one {# Firstminds' Focus stack} other {# Firstminds' Focus stacks}} were lost.",values:{fmfOvercap:t}})}))}}]),i}(oe.aC),yt=(0,Dt.Z)(mt.prototype,"suggestions",[Wt.I,vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),mt),Ye=i(94473),ze=i.n(Ye),Je=(wt=Reflect.metadata("design:type",Ut.E),bt=Reflect.metadata("design:type",ne.w),Rt=It=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return s=e.call.apply(e,d()(t=[this]).call(t,o)),(0,At.Z)(s,"globalCooldown",Tt,(0,xt.Z)(s)),(0,At.Z)(s,"cooldowns",Zt,(0,xt.Z)(s)),s.buffStatus=s.data.statuses.LANCE_CHARGE,s.prependMessages=(0,Vt.jsx)(ue.Z,{info:!0,children:(0,Vt.jsx)(Ht.Trans,{id:"drg.lc.prepend-message",defaults:"Both charges of <0/> should be used while both <1/> and <2/> are active. Since this is not always possible, we do our best in this module to avoid marking windows where <3/> was correctly held as errors. <4/> should be used in every other window.",components:[(0,Vt.jsx)(Lt.vm,{action:"SPINESHATTER_DIVE"}),(0,Vt.jsx)(Lt.vm,{action:"LANCE_CHARGE"}),(0,Vt.jsx)(Lt.vm,{action:"DRAGON_SIGHT"}),(0,Vt.jsx)(Lt.vm,{action:"SPINESHATTER_DIVE",showIcon:!1}),(0,Vt.jsx)(Lt.vm,{action:"DRAGONFIRE_DIVE"})]})}),s.ssdDelays=[],s.currentSsdWindow=void 0,s.previousSsdWindow=void 0,s}return(0,jt.Z)(i,[{key:"initialise",value:function(){(0,Ct.Z)((0,St.Z)(i.prototype),"initialise",this).call(this);var t=(0,Ot.hX)().source(this.parser.actor.id).status(this.data.statuses.LANCE_CHARGE.id),e=(0,Ot.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.SPINESHATTER_DIVE.id);this.addEventHook(t.type("statusApply"),this.onLcStatusApply),this.addEventHook(e,this.onSsd),this.addEventHook(t.type("statusRemove"),this.onLcStatusRemove);var s=this.data.actions.LANCE_CHARGE.icon,n=(0,Vt.jsx)(Lt.vm,{action:"LANCE_CHARGE",showIcon:!1});this.addEvaluator(new Mt.nZ({expectedGcds:8,globalCooldown:this.globalCooldown,hasStacks:!1,suggestionIcon:s,suggestionContent:(0,Vt.jsx)(Ht.Trans,{id:"drg.lc.suggestions.missedgcd.content",defaults:"Try to land at least 8 GCDs during every <0/> window.",components:[(0,Vt.jsx)(Lt.vm,{action:"LANCE_CHARGE"})]}),suggestionWindowName:n,severityTiers:{1:Ft.bI.MINOR,2:Ft.bI.MEDIUM,4:Ft.bI.MAJOR}})),this.addEvaluator(new Mt.np({expectedActions:[{action:this.data.actions.HIGH_JUMP,expectedPerWindow:1},{action:this.data.actions.GEIRSKOGUL,expectedPerWindow:1},{action:this.data.actions.MIRAGE_DIVE,expectedPerWindow:1},{action:this.data.actions.SPINESHATTER_DIVE,expectedPerWindow:1}],suggestionIcon:s,suggestionContent:(0,Vt.jsx)(Ht.Trans,{id:"drg.lc.suggestions.missedaction.content",defaults:"Try to use as many of your oGCDs as possible during <0/>. Remember to keep your abilities on cooldown, when possible, to prevent them from drifting outside of your buff windows.",components:[(0,Vt.jsx)(Lt.vm,{action:"LANCE_CHARGE"})]}),suggestionWindowName:n,severityTiers:{1:Ft.bI.MINOR,6:Ft.bI.MEDIUM,12:Ft.bI.MAJOR},adjustCount:this.adjustExpectedActionCount.bind(this)})),this.addEvaluator(new He([this.data.actions.LIFE_SURGE,this.data.actions.DRAGONFIRE_DIVE]))}},{key:"onLcStatusApply",value:function(t){var e,i;this.currentSsdWindow={nextWindowHoldSuccess:!1,ssdHeld:!1,ssdUseCount:0,start:t.timestamp,expectsTwo:null!==(e=null===(i=this.previousSsdWindow)||void 0===i?void 0:i.ssdHeld)&&void 0!==e&&e},this.ssdDelays.push(this.currentSsdWindow)}},{key:"onSsd",value:function(){null!=this.currentSsdWindow&&(this.currentSsdWindow.ssdUseCount+=1)}},{key:"onLcStatusRemove",value:function(){null!=this.currentSsdWindow&&(this.cooldowns.charges("SPINESHATTER_DIVE")>=1&&(this.currentSsdWindow.ssdHeld=!0),this.previousSsdWindow&&2===this.currentSsdWindow.ssdUseCount&&this.previousSsdWindow.ssdHeld&&(this.previousSsdWindow.nextWindowHoldSuccess=!0),this.previousSsdWindow=this.currentSsdWindow,this.currentSsdWindow=void 0)}},{key:"adjustExpectedActionCount",value:function(t,e){var i=this;if(this.isRushedEndOfPullWindow(t)&&e.action.id!==this.data.actions.DRAGONFIRE_DIVE.id)return-1;if(e.action.id===this.data.actions.SPINESHATTER_DIVE.id){var s,n,a=_t()(s=t.data).call(s,(function(t){return t.action.id===i.data.actions.SPINESHATTER_DIVE.id}));if(1===a.length)return 0;var o=ze()(n=this.ssdDelays).call(n,(function(e){return e.start===t.start}));if(o){if(o.ssdHeld&&o.nextWindowHoldSuccess)return-1;if(o.expectsTwo)return 1;if(!o.expectsTwo&&2===a.length)return 1}}return 0}}]),i}(Mt.xl),It.handle="lancecharge",It.title={id:"drg.lancecharge.title",defaults:"Lance Charge"},It.displayOrder=14,Et=Rt,Tt=(0,Dt.Z)(Et.prototype,"globalCooldown",[Wt.I,wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),Zt=(0,Dt.Z)(Et.prototype,"cooldowns",[Wt.I,bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),Et),qe=i(48945),Xe=24500,Ke=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).defaultFirstUseOffset=7e3,s.trackedCds=[{cooldowns:[s.data.actions.HIGH_JUMP],firstUseOffset:Xe},{cooldowns:[s.data.actions.GEIRSKOGUL],firstUseOffset:Xe},{cooldowns:[s.data.actions.SPINESHATTER_DIVE],firstUseOffset:Xe},{cooldowns:[s.data.actions.DRAGONFIRE_DIVE],firstUseOffset:Xe},{cooldowns:[s.data.actions.LIFE_SURGE],firstUseOffset:22e3},{cooldowns:[s.data.actions.LANCE_CHARGE]},{cooldowns:[s.data.actions.DRAGON_SIGHT]},{cooldowns:[s.data.actions.BATTLE_LITANY]}],s}return i}(qe.u),$e=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).positionals=[s.data.actions.CHAOTIC_SPRING,s.data.actions.FANG_AND_CLAW,s.data.actions.WHEELING_THRUST],s}return i}(i(28101).O),Qe=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).trackedProcs=[{procStatus:s.data.statuses.SHARPER_FANG_AND_CLAW,consumeActions:[s.data.actions.FANG_AND_CLAW]},{procStatus:s.data.statuses.ENHANCED_WHEELING_THRUST,consumeActions:[s.data.actions.WHEELING_THRUST]},{procStatus:s.data.statuses.DIVE_READY,consumeActions:[s.data.actions.MIRAGE_DIVE]}],s}return(0,jt.Z)(i,[{key:"addJobSpecificSuggestions",value:function(){var t=this.getDropCountForStatus(this.data.statuses.SHARPER_FANG_AND_CLAW.id),e=this.getDropCountForStatus(this.data.statuses.ENHANCED_WHEELING_THRUST.id),i=this.getDropCountForStatus(this.data.statuses.DIVE_READY.id);this.suggestions.add(new Ft.eg({icon:t>=e?this.data.actions.FANG_AND_CLAW.icon:this.data.actions.WHEELING_THRUST.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.procs.suggestions.extenders.content",defaults:"Avoid interrupting your combos at the <0/> and <1/> stages, as it causes you to lose the procs that allow you to cast them.",components:[(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.FANG_AND_CLAW)),(0,Vt.jsx)(Lt.vm,(0,Xt.Z)({},this.data.actions.WHEELING_THRUST))]}),tiers:{1:Ft.bI.MINOR,2:Ft.bI.MEDIUM,4:Ft.bI.MAJOR},value:t+e,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.procs.suggestions.extenders.why",defaults:"You dropped {droppedFang, plural, one {# Fang and Claw proc} other {# Fang and Claw procs}} and {droppedWheeling, plural, one {# Wheeling Thrust proc} other {# Wheeling Thrust procs}}.",values:{droppedFang:t,droppedWheeling:e}})})),this.suggestions.add(new Ft.eg({icon:this.data.actions.MIRAGE_DIVE.icon,content:(0,Vt.jsx)(Ht.Trans,{id:"drg.procs.suggestions.mirage-dropped.content",defaults:"Avoid letting your <0/> procs fall off, as it can delay your Life of the Dragon windows and potentially cost you a lot of DPS.",components:[(0,Vt.jsx)(Lt.ci,(0,Xt.Z)({},this.data.statuses.DIVE_READY))]}),tiers:{1:Ft.bI.MEDIUM,3:Ft.bI.MAJOR},value:i,why:(0,Vt.jsx)(Ht.Trans,{id:"drg.procs.suggestions.mirage-dropped.why",defaults:"You dropped {droppedMirage, plural, one {# Mirage Dive proc} other {# Mirage Dive procs}}.",values:{droppedMirage:i}})}))}}]),i}(i(24950).Q),ti=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).buffAction=Se.ZP.INFUSION_STR,s}return i}(i(90137).J);ti.displayOrder=17;var ei=i(45715),ii=["STARDIVER"],si=["JUMP","HIGH_JUMP","SPINESHATTER_DIVE","DRAGONFIRE_DIVE"],ni=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,a.Z)(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(s=e.call.apply(e,d()(t=[this]).call(t,o))).jumpIds=kt()(ii).call(ii,(function(t){return s.data.actions[t].id})),s}return(0,jt.Z)(i,[{key:"getMaxWeaves",value:function(t){var e=this;if(this.parser.patch.before("6.1")){var s,a=kt()(si).call(si,(function(t){return e.data.actions[t].id}));(s=this.jumpIds).push.apply(s,(0,n.Z)(a))}return t.weaves.some((function(t){var i;return me()(i=e.jumpIds).call(i,t.action)}))?1:(0,Ct.Z)((0,St.Z)(i.prototype),"getMaxWeaves",this).call(this,t)}}]),i}(ei.x);ni.displayOrder=13;var ai=[c,zt,ge,Ce,De,Ge,We,Ue,Ve,Je,Ke,$e,Qe,ti,ni]},9179:function(t,e,i){i(18103);var s=i(54058);t.exports=s.Math.trunc},18103:function(t,e,i){var s=i(76887),n=Math.ceil,a=Math.floor;s({target:"Math",stat:!0},{trunc:function(t){return(t>0?a:n)(t)}})},75838:function(t,e,i){var s=i(9179);t.exports=s}}]);
//# sourceMappingURL=jobs-drg.03c0f8c4.js.map
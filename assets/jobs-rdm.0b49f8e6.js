"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[2143],{50281:function(t,e,a){a.d(e,{e:function(){return _}});var i,s,n,o,r,l,c,u,d,h,m,g,v,p,f,E=a(23257),b=a(68420),y=a(27344),w=a(5281),R=a(90306),k=a(50596),I=a(300),T=a(77766),x=a.n(T),A=a(86359),C=a(84626),M=a(28683),Z=a(74489),S=a(76704),j=a(8510),D=a(52102),O=a(73947),G=a(51691),N=a(83459),L=a(48453),V=(a(67294),a(85893)),_=(i=Reflect.metadata("design:type",j.Z),s=Reflect.metadata("design:type",D.ZP),n=Reflect.metadata("design:type",O.V),o=Reflect.metadata("design:type",G.Z),r=Reflect.metadata("design:type",N.E),l=Reflect.metadata("design:type",L.a),f=p=function(t){(0,R.Z)(a,t);var e=(0,k.Z)(a);function a(){var t,i;(0,b.Z)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return i=e.call.apply(e,x()(t=[this]).call(t,n)),(0,E.Z)(i,"castTime",u,(0,w.Z)(i)),(0,E.Z)(i,"checklist",d,(0,w.Z)(i)),(0,E.Z)(i,"data",h,(0,w.Z)(i)),(0,E.Z)(i,"downtime",m,(0,w.Z)(i)),(0,E.Z)(i,"globalCooldown",g,(0,w.Z)(i)),(0,E.Z)(i,"speedAdjustments",v,(0,w.Z)(i)),i.gcdUptime=0,i.gcdsCounted=0,i.lastBeginCast=void 0,i}return(0,y.Z)(a,[{key:"initialise",value:function(){this.addEventHook((0,Z.hX)().source(this.parser.actor.id).type("prepare"),this.onBeginCast),this.addEventHook((0,Z.hX)().source(this.parser.actor.id).type("action"),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onBeginCast",value:function(t){this.lastBeginCast=t}},{key:"onCast",value:function(t){var e,a,i=this.data.getAction(t.action);if(null!=i&&null!=i.onGcd&&i.onGcd){var s=null!==(e=this.castTime.forEvent(t))&&void 0!==e?e:0;s>=this.globalCooldown.getDuration()&&(s+=C.C);var n=null!==(a=this.castTime.recastForEvent(t))&&void 0!==a?a:0,o=null!=this.lastBeginCast&&this.lastBeginCast.action===t.action?this.lastBeginCast.timestamp:t.timestamp;if(this.considerCast(i,o)){var r,l,c,u,d,h,m,g=t.timestamp-this.parser.pull.timestamp;s>g?(this.debug(x()(r=x()(l=x()(c=x()(u="GCD Uptime for precast ".concat(i.name," at ")).call(u,this.parser.formatEpochTimestamp(t.timestamp,1)," - Cast time: ")).call(c,s," | Recast time: ")).call(l,n," | Time of completion: ")).call(r,g)),this.gcdUptime+=Math.max(0,g)):(this.debug(x()(d=x()(h=x()(m="GCD Uptime for ".concat(i.name," at ")).call(m,this.parser.formatEpochTimestamp(t.timestamp,1)," - Cast time: ")).call(h,s," | Recast time: ")).call(d,n)),this.gcdUptime+=Math.max(s,n)),this.gcdsCounted+=1}else{var v;this.debug(x()(v="Excluding cast of ".concat(i.name," at ")).call(v,this.parser.formatEpochTimestamp(t.timestamp,1)))}this.lastBeginCast=void 0}}},{key:"considerCast",value:function(t,e){return!this.downtime.isDowntime(e)}},{key:"getUptimePercent",value:function(){var t,e,a;this.debug(x()(t="Observed ".concat(this.gcdsCounted," GCDs for a total of ")).call(t,this.gcdUptime," ms of uptime"));var i=this.parser.currentDuration-this.downtime.getDowntime(),s=this.gcdUptime/i*100;return this.debug(x()(e=x()(a="Total fight duration: ".concat(this.parser.currentDuration," - Downtime: ")).call(a,this.downtime.getDowntime()," - Uptime percentage ")).call(e,s)),s}},{key:"onComplete",value:function(){0!==this.gcdUptime&&this.checklist.add(new D.$9({name:(0,V.jsx)(A.Trans,{id:"core.always-cast.title",defaults:"Always be casting"}),description:(0,V.jsx)(A.Trans,{id:"core.always-cast.description",defaults:"Make sure you're always doing something. It's often better to make small mistakes while keeping the GCD rolling than it is to perform the correct rotation slowly."}),displayOrder:-1,requirements:[new D.nb({name:(0,V.jsx)(A.Trans,{id:"core.always-cast.gcd-uptime",defaults:"GCD Uptime"}),percent:this.getUptimePercent()})],target:98}))}}]),a}(M.qk),p.handle="abc",p.debug=!1,c=f,u=(0,I.Z)(c.prototype,"castTime",[S.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),d=(0,I.Z)(c.prototype,"checklist",[S.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),h=(0,I.Z)(c.prototype,"data",[S.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),m=(0,I.Z)(c.prototype,"downtime",[S.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),g=(0,I.Z)(c.prototype,"globalCooldown",[S.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),v=(0,I.Z)(c.prototype,"speedAdjustments",[S.I,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),c)},12541:function(t,e,a){a.d(e,{O:function(){return Q}});var i,s,n,o,r,l,c,u,d,h,m,g=a(97530),v=a(23257),p=a(68420),f=a(27344),E=a(5281),b=a(90306),y=a(50596),w=a(300),R=a(39392),k=a.n(R),I=a(77766),T=a.n(I),x=a(2991),A=a.n(x),C=a(94473),M=a.n(C),Z=a(20116),S=a.n(Z),j=a(32366),D=a.n(j),O=a(86359),G=a(9263),N=a(43719),L=a(28683),V=a(76704),_=a(48945),F=a(73947),P=a(67294),H=a(68156),U=a(45150),B=a(30919),W=a(65927),Y=a(80967),z=a(81336),J=a(8437),X=a(56611),q=a(85893),K=new(k())([["TANK",["RAMPART","REPRISAL"]],["MELEE",["FEINT","BLOODBATH","SECOND_WIND"]],["PHYSICAL_RANGED",["SECOND_WIND"]],["MAGICAL_RANGED",["ADDLE"]],["HEALER",[]]]),Q=(i=Reflect.metadata("design:type",z.w),s=Reflect.metadata("design:type",_.u),n=Reflect.metadata("design:type",F.V),o=Reflect.metadata("design:type",X.TY),m=h=function(t){(0,b.Z)(a,t);var e=(0,y.Z)(a);function a(){var t,i;(0,p.Z)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return i=e.call.apply(e,T()(t=[this]).call(t,n)),(0,v.Z)(i,"cooldowns",l,(0,E.Z)(i)),(0,v.Z)(i,"cooldownDowntime",c,(0,E.Z)(i)),(0,v.Z)(i,"data",u,(0,E.Z)(i)),(0,v.Z)(i,"timeline",d,(0,E.Z)(i)),i.trackedDefensives=[],i.headerContent=(0,q.jsx)(O.Trans,{id:"core.defensives.header.content",defaults:"Using your mitigation and healing cooldowns can help you survive mistakes, or relieve some stress on the healers and let them deal more damage.<0/>While you shouldn't use them at the expense of your rotation or buff alignment, you should try to find helpful times to use them.",components:[(0,q.jsx)("br",{})]}),i}return(0,f.Z)(a,[{key:"initialise",value:function(){var t,e,a=this;(null!==(t=null===(e=K.get(N.W[this.parser.actor.job].role))||void 0===e?void 0:A()(e).call(e,(function(t){return a.data.actions[t]})))&&void 0!==t?t:[]).forEach((function(t){var e;M()(e=a.trackedDefensives).call(e,(function(e){return t.id===e.id}))||a.trackedDefensives.push(t)}))}},{key:"getUsageCount",value:function(t){return this.getUses(t).length}},{key:"getUses",value:function(t){var e;return S()(e=this.cooldowns.cooldownHistory(t)).call(e,(function(t){return t.endReason!==z.g.INTERRUPTED}))}},{key:"getMaxUses",value:function(t){var e,a=this,i=D()(e=this.getUses(t)).call(e,(function(e,i){return e+a.getAdditionalUsageData(t,i.start).chargesBeforeNextUse}),this.getAdditionalUsageData(t).chargesBeforeNextUse);return this.getUsageCount(t)+i}},{key:"output",value:function(){var t,e=this;if(0!==this.trackedDefensives.length)return(0,q.jsxs)(P.Fragment,{children:[(0,q.jsxs)(H.Z,{icon:!0,children:[(0,q.jsx)(U.Z,{name:"info"}),(0,q.jsxs)(H.Z.Content,{children:[this.headerContent,(0,q.jsx)("br",{}),(0,q.jsx)("br",{}),(0,q.jsx)(O.Trans,{id:"core.defensives.header.sub-content",defaults:"The below tables will show you where you can gain additional uses of these cooldowns, without interfering with your existing ones."})]})]}),(0,q.jsx)(B.Z,{exclusive:!1,styled:!0,fluid:!0,panels:A()(t=this.trackedDefensives).call(t,(function(t,a){var i;return{key:t.id,title:{content:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(G.vm,(0,g.Z)({},t),a)," - ",e.getUsageCount(t)," / ",e.getMaxUses(t)]})},content:{content:(0,q.jsx)(W.Z,{compact:!0,unstackable:!0,celled:!0,children:(0,q.jsxs)(W.Z.Body,{children:[e.tryGetAdditionalUseRow(t),A()(i=e.getUses(t)).call(i,(function(a){return e.getUsageRow(a,t)}))]})})}}}))})]})}},{key:"getUsageRow",value:function(t,e){var a=this;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(W.Z.Row,{children:(0,q.jsx)(W.Z.Cell,{children:(0,q.jsx)(O.Trans,{id:"core.defensives.table.usage-row.text",defaults:"Used at <0></0> {0}",values:{0:this.parser.formatEpochTimestamp(t.start)},components:[(0,q.jsx)(Y.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return a.timeline.show(t.start-a.parser.pull.timestamp,t.end-a.parser.pull.timestamp)}})]})})},t.start),this.tryGetAdditionalUseRow(e,t.start)]})}},{key:"getAdditionalUsageData",value:function(t){var e,a,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.pull.timestamp;if(s===this.parser.pull.timestamp)a=this.parser.pull.timestamp,i=t.charges||1;else{var n,o=M()(n=this.cooldowns.chargeHistory(t)).call(n,(function(t){return t.timestamp>=s&&t.current>0}));a=(null==o?void 0:o.timestamp)||this.parser.pull.duration+this.parser.pull.timestamp,i=(null==o?void 0:o.current)||0}var r=t.cooldown||this.parser.pull.duration,l=M()(e=this.getUses(t)).call(e,(function(t){return t.start>s})),c=null!=l?l.start-r:this.parser.pull.timestamp+this.parser.pull.duration;return c<=a?{chargesBeforeNextUse:0,availableTimestamp:a,useByTimestamp:c}:{chargesBeforeNextUse:i+Math.floor((c-a)/r),availableTimestamp:a,useByTimestamp:c}}},{key:"tryGetAdditionalUseRow",value:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.pull.timestamp,i=this.getAdditionalUsageData(t,a),s=i.chargesBeforeNextUse,n=i.availableTimestamp,o=i.useByTimestamp;return 0===s?(0,q.jsx)(q.Fragment,{}):(0,q.jsx)(W.Z.Row,{children:(0,q.jsx)(W.Z.Cell,{children:(0,q.jsx)(O.Trans,{id:"core.defensives.table.extra-usage-row.text",defaults:"{chargesBeforeNextUse, plural, one {1 extra use} other {# extra uses}} available between <0></0> {0} and {1}",values:{0:this.parser.formatEpochTimestamp(n),1:this.parser.formatEpochTimestamp(o),chargesBeforeNextUse:s},components:[(0,q.jsx)(Y.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return e.timeline.show(n-e.parser.pull.timestamp,o-e.parser.pull.timestamp)}})]})})})}}]),a}(L.qk),h.handle="defensives",h.title={id:"core.defensives.title",defaults:"Defensives"},h.displayOrder=J.Z.DEFENSIVES,r=m,l=(0,w.Z)(r.prototype,"cooldowns",[V.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),c=(0,w.Z)(r.prototype,"cooldownDowntime",[V.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldownDowntime}}),u=(0,w.Z)(r.prototype,"data",[V.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,w.Z)(r.prototype,"timeline",[V.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r)},45715:function(t,e,a){a.d(e,{x:function(){return W}});var i,s,n,o,r,l,c,u,d,h,m,g=a(41420),v=a(97530),p=a(23257),f=a(68420),E=a(27344),b=a(5281),y=a(90306),w=a(50596),R=a(300),k=a(77766),I=a.n(k),T=a(20116),x=a.n(T),A=a(2991),C=a.n(A),M=a(86359),Z=a(40090),S=a(71370),j=a(84626),D=a(28683),O=a(74489),G=a(76704),N=a(8510),L=a(73947),V=a(90577),_=a(52250),F=(a(67294),a(30919)),P=a(40753),H=a(85893),U={0:2,1e3:1,2500:0},B={1:_.bI.MEDIUM,5:_.bI.MAJOR},W=(i=Reflect.metadata("design:type",N.Z),s=Reflect.metadata("design:type",L.V),n=Reflect.metadata("design:type",V.I),o=Reflect.metadata("design:type",_.ZP),m=h=function(t){(0,y.Z)(a,t);var e=(0,w.Z)(a);function a(){var t,i;(0,f.Z)(this,a);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return i=e.call.apply(e,I()(t=[this]).call(t,n)),(0,p.Z)(i,"castTime",l,(0,b.Z)(i)),(0,p.Z)(i,"data",c,(0,b.Z)(i)),(0,p.Z)(i,"invulnerability",u,(0,b.Z)(i)),(0,p.Z)(i,"suggestions",d,(0,b.Z)(i)),i.suggestionIcon="https://xivapi.com/i/001000/001785.png",i.moduleLink=(0,H.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return i.parser.scrollTo(a.handle)},children:(0,H.jsx)(Z.Z,{message:a.title})}),i.suggestionContent=(0,H.jsx)(M.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:i.moduleLink}}),i.severity=B,i.weaves=[],i.ongoingCastEvent=void 0,i.leadingGcdEvent=void 0,i.trailingGcdEvent=void 0,i.badWeaves=[],i}return(0,E.Z)(a,[{key:"initialise",value:function(){var t=(0,O.hX)().source(this.parser.actor.id);this.addEventHook(t.type("prepare"),this.onBeginCast),this.addEventHook(t.type("action"),this.onCast),this.addEventHook((0,O.hX)().type("complete"),this.onComplete),this.addEventHook((0,O.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(t){this.ongoingCastEvent=t}},{key:"onCast",value:function(t){var e=this.data.getAction(t.action);e&&!e.autoAttack&&(this.isOgcd(e)?this.weaves.push(t):(this.ongoingCastEvent&&this.ongoingCastEvent.action===e.id?this.trailingGcdEvent=(0,v.Z)((0,v.Z)({},t),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=t,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new _.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,H.jsx)(M.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var t,e;if(null!=this.trailingGcdEvent){var a=null!==(t=null===(e=this.leadingGcdEvent)||void 0===e?void 0:e.timestamp)&&void 0!==t?t:this.parser.pull.timestamp,i=this.trailingGcdEvent.timestamp-a-this.invulnerability.getDuration({start:a,end:this.trailingGcdEvent.timestamp}),s={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:i,weaves:this.weaves};0!==s.weaves.length&&this.isBadWeave(s)&&this.badWeaves.push(s)}}},{key:"isOgcd",value:function(t){return!t.onGcd&&!t.autoAttack}},{key:"isBadWeave",value:function(t){var e,a,i=this,s=x()(e=t.weaves).call(e,(function(t){return!i.invulnerability.isActive({timestamp:t.timestamp,types:["untargetable"]})&&t.timestamp>=i.parser.pull.timestamp})).length,n=null!==(a=null!=t.leadingGcdEvent?this.castTime.recastForEvent(t.leadingGcdEvent):void 0)&&void 0!==a?a:j.b;return t.gcdTimeDiff>n&&s>this.getMaxWeaves(t)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(t){var e,a;if(null==t.leadingGcdEvent)return 2;var i=this.castTime.forEvent(t.leadingGcdEvent);return null==i?2:(null!==(e=(0,P.CL)(U,i))&&void 0!==e?e:2)-((null!==(a=this.castTime.recastForEvent(t.leadingGcdEvent))&&void 0!==a?a:j.b)<1800?1:0)}},{key:"output",value:function(){var t,e=this;if(0===this.badWeaves.length)return!1;var a=C()(t=this.badWeaves).call(t,(function(t){var a,i,s,n,o;return{key:null!==(a=null===(i=t.leadingGcdEvent)||void 0===i?void 0:i.timestamp)&&void 0!==a?a:e.parser.pull.timestamp,title:{content:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("strong",{children:e.parser.formatEpochTimestamp(null!==(s=null===(n=t.leadingGcdEvent)||void 0===n?void 0:n.timestamp)&&void 0!==s?s:e.parser.pull.timestamp)})," - ",(0,H.jsx)(M.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:t.weaves.length}})," (",e.parser.formatDuration(t.gcdTimeDiff)," ",(0,H.jsx)(M.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,H.jsx)(S.Z,{events:I()(o=[]).call(o,(0,g.Z)(null!=t.leadingGcdEvent?[t.leadingGcdEvent]:[]),(0,g.Z)(t.weaves))})}}}));return(0,H.jsx)(F.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})}}]),a}(D.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},r=m,l=(0,R.Z)(r.prototype,"castTime",[G.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),c=(0,R.Z)(r.prototype,"data",[G.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,R.Z)(r.prototype,"invulnerability",[G.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),d=(0,R.Z)(r.prototype,"suggestions",[G.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),r)},4770:function(t,e,a){a.r(e),a.d(e,{DualStatistic:function(){return Wt},default:function(){return Ce}});var i=a(50281),s=a(90137),n=a(68420),o=a(27344),r=a(18527),l=a(3362),c=a(90306),u=a(50596),d=a(77766),h=a.n(d),m=a(74489),g=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).accelerationIndex=null,i.dualcastIndex=null,i}return(0,o.Z)(a,[{key:"initialise",value:function(){(0,r.Z)((0,l.Z)(a.prototype),"initialise",this).call(this);var t=(0,m.hX)().target(this.parser.actor.id).status(this.data.statuses.ACCELERATION.id);this.addEventHook(t.type("statusApply"),this.onGainAcceleration),this.addEventHook(t.type("statusRemove"),this.onRemoveAcceleration);var e=(0,m.hX)().target(this.parser.actor.id).status(this.data.statuses.DUALCAST.id);this.addEventHook(e.type("statusApply"),this.onGainDualcast),this.addEventHook(e.type("statusRemove"),this.onRemoveDualcast)}},{key:"onGainAcceleration",value:function(){this.onRemoveAcceleration(),this.accelerationIndex=this.setInstantCastAdjustment([this.data.actions.VERAERO.id,this.data.actions.VERAERO_III.id,this.data.actions.VERTHUNDER.id,this.data.actions.VERTHUNDER_III.id,this.data.actions.SCATTER.id,this.data.actions.IMPACT.id])}},{key:"onRemoveAcceleration",value:function(){this.reset(this.accelerationIndex),this.accelerationIndex=null}},{key:"onGainDualcast",value:function(){this.dualcastIndex=this.setInstantCastAdjustment()}},{key:"onRemoveDualcast",value:function(){this.reset(this.dualcastIndex),this.dualcastIndex=null}}]),a}(a(8510).Z),v=a(2991),p=a.n(v),f=a(59340),E=a.n(f),b=a(78580),y=a.n(b),w=a(86359),R=a(95859),k=a(47969),I=a(52250),T=a(67294),x=a(85893),A=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).suggestionIcon=R.ZP.ENCHANTED_REDOUBLEMENT.icon,i._derpComboActions=[R.ZP.ENCHANTED_RIPOSTE.id,R.ZP.ENCHANTED_ZWERCHHAU.id,R.ZP.ENCHANTED_REDOUBLEMENT.id],i._severityDerpComboActions={1:I.bI.MAJOR},i._notEnoughManaActions=[R.ZP.RIPOSTE.id,R.ZP.ZWERCHHAU.id,R.ZP.REDOUBLEMENT.id],i._severityNotEnoughManaActions={1:I.bI.MAJOR},i._severityGenericActions={1:I.bI.MAJOR},i}return(0,o.Z)(a,[{key:"addJobSpecificSuggestions",value:function(t,e){var a=this;if(0===t.length&&0===e.length)return!1;var i=0,s=0;t.length>0&&p()(t).call(t,(function(t){var e,n;"action"===t.cause.type&&(a.debug("Checking combo breaker: ".concat(E()(t))),y()(e=a._derpComboActions).call(e,t.cause.action)&&(a.debug("".concat(i,": derpComboCount")),i++),y()(n=a._notEnoughManaActions).call(n,t.cause.action)&&(a.debug("".concat(s,": notEnoughManaCount")),s++))})),i>0&&this.suggestions.add(new I.eg({icon:R.ZP.ENCHANTED_REDOUBLEMENT.icon,why:(0,x.jsx)(w.Trans,{id:"rdm.combos.suggestions.derpcombos.why",defaults:"{derpComboCount, plural, one {# enchanted combo was lost due to using the combo skills out of order} other {# enchanted combos were lost due to using the combo skills out of order}}",values:{derpComboCount:i}}),content:(0,x.jsx)(w.Trans,{id:"rdm.combos.suggestions.derpcombos.content",defaults:"Be sure not to use combo actions out of order."}),tiers:this._severityDerpComboActions,value:i})),s>0&&this.suggestions.add(new I.eg({icon:R.ZP.RESOLUTION.icon,why:(0,x.jsx)(w.Trans,{id:"rdm.combos.suggestions.notenoughmanacombos.why",defaults:"{notEnoughManaCount, plural, one {# enchanted combo was lost due to entering the combo before having enough mana} other {# enchanted combos were lost due to entering the combo before having enough mana}}",values:{notEnoughManaCount:s}}),content:(0,x.jsx)(w.Trans,{id:"rdm.combos.suggestions.notenoughmanacombos.content",defaults:"Be sure not to enter your combo before having 50|50 mana"}),tiers:this._severityNotEnoughManaActions,value:s}));var n=t.length+e.length-i-s;return this.debug("TheRest: ".concat(n)),n>0&&this.suggestions.add(new I.eg({icon:R.ZP.ENCHANTED_REDOUBLEMENT.icon,why:(0,x.jsx)(w.Trans,{id:"rdm.combos.suggestions.therestcombos.why",defaults:"{theRest, plural, one {# enchanted combo was lost due to general combo breakage or combo timing out} other {# enchanted combos were lost due to general combo breakage or combo timing out}}",values:{theRest:n}}),content:(0,x.jsx)(w.Trans,{id:"rdm.combos.suggestions.therestcombos.content",defaults:"Do not allow your combo to timeout or use GCD Skills or Manafication during your enchanted combos"}),tiers:this._severityGenericActions,value:n})),!0}}]),a}(k.G);A.displayOrder=2;var C,M,Z,S,j,D,O,G,N,L=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).trackedDefensives=[i.data.actions.MAGICK_BARRIER],i}return a}(a(12541).O),V=a(23257),_=a(5281),F=a(300),P=a(9263),H=a(71370),U=a(84626),B=a(28683),W=a(76704),Y=a(73947),z=a(51691),J=a(30919),X={1:I.bI.MEDIUM,2:I.bI.MAJOR},q={1:I.bI.MINOR,3:I.bI.MEDIUM,5:I.bI.MAJOR},K=(C=Reflect.metadata("design:type",Y.V),M=Reflect.metadata("design:type",z.Z),Z=Reflect.metadata("design:type",I.ZP),N=G=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=e.call.apply(e,h()(t=[this]).call(t,o)),(0,V.Z)(i,"data",j,(0,_.Z)(i)),(0,V.Z)(i,"downtime",D,(0,_.Z)(i)),(0,V.Z)(i,"suggestions",O,(0,_.Z)(i)),i.wastedDualCasts=[],i.expiredDualCasts=0,i.dualcastActive=!1,i}return(0,o.Z)(a,[{key:"initialise",value:function(){var t=(0,m.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action"),this.onCast),this.addEventHook(t.status(this.data.statuses.DUALCAST.id).type("statusApply"),this.onGain),this.addEventHook(t.status(this.data.statuses.DUALCAST.id).type("statusRemove"),this.onRemove),this.addEventHook((0,m.hX)().type("complete"),this.onComplete)}},{key:"onCast",value:function(t){var e,a=this.data.getAction(t.action),i=null!==(e=null==a?void 0:a.castTime)&&void 0!==e?e:0;this.dualcastActive&&i>0&&(!this.downtime.isDowntime()&&(i<=U.b||a===this.data.actions.SPRINT)&&this.wastedDualCasts.push(t),this.dualcastActive=!1)}},{key:"onGain",value:function(){this.dualcastActive=!0}},{key:"onRemove",value:function(){this.dualcastActive&&(this.downtime.isDowntime()||this.expiredDualCasts++),this.dualcastActive=!1}},{key:"onComplete",value:function(){this.wastedDualCasts.length>0&&this.suggestions.add(new I.eg({icon:this.data.statuses.DUALCAST.icon,content:(0,x.jsx)(w.Trans,{id:"rdm.dualcast.suggestions.wasted.content",defaults:"Spells used while <0/> is up should be limited to <1/>, <2/>, or <3/>",components:[(0,x.jsx)(P.P9,{status:"DUALCAST"}),(0,x.jsx)(P.P9,{action:"VERAERO_III"}),(0,x.jsx)(P.P9,{action:"VERTHUNDER_III"}),(0,x.jsx)(P.P9,{action:"VERRAISE"})]}),tiers:q,value:this.wastedDualCasts.length,why:(0,x.jsx)(w.Trans,{id:"rdm.dualcast.suggestions.wasted.why",defaults:"{0} {1, plural, one {Dualcast was} other {Dualcasts were}} wasted on low cast-time spells.",values:{0:this.wastedDualCasts.length,1:this.wastedDualCasts.length}})})),this.expiredDualCasts>0&&this.suggestions.add(new I.eg({icon:this.data.statuses.DUALCAST.icon,content:(0,x.jsx)(w.Trans,{id:"rdm.dualcast.suggestions.missed.content",defaults:"You should avoid wasting Dualcast procs entirely as it is lost potency overtime."}),tiers:X,value:this.expiredDualCasts,why:(0,x.jsx)(w.Trans,{id:"rdm.dualcast.suggestions.missed.why",defaults:"{0} {1, plural, one {Dualcast was} other {Dualcasts were}} lost due to not casting.",values:{0:this.expiredDualCasts,1:this.expiredDualCasts}})}))}},{key:"output",value:function(){var t,e=this;if(0===this.wastedDualCasts.length)return!1;var a=p()(t=this.wastedDualCasts).call(t,(function(t){var a=e.data.getAction(t.action);return{key:t.timestamp,title:{content:(0,x.jsxs)(T.Fragment,{children:[e.parser.formatEpochTimestamp(t.timestamp)," - ",null==a?void 0:a.name]})},content:{content:(0,x.jsx)(H.Z,{events:[t]})}}}));return(0,x.jsx)(J.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})}}]),a}(B.qk),G.handle="dualCast",G.title={id:"rdm.dualcast.title",defaults:"Dualcast"},G.displayOrder=1,S=N,j=(0,F.Z)(S.prototype,"data",[W.I,C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),D=(0,F.Z)(S.prototype,"downtime",[W.I,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),O=(0,F.Z)(S.prototype,"suggestions",[W.I,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),S),Q=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).buffStatus=[i.data.statuses.EMBOLDEN_SELF,i.data.statuses.EMBOLDEN_PARTY],i.IGNORE_ACTIONS=[i.data.actions.FLECHE.id,i.data.actions.CONTRE_SIXTE.id,i.data.actions.CORPS_A_CORPS.id,i.data.actions.ENGAGEMENT.id,i.data.actions.DISPLACEMENT.id,i.data.actions.ADDLE.id,i.data.actions.LUCID_DREAMING.id,i.data.actions.MAGICK_BARRIER.id,i.data.actions.SURECAST.id],i}return(0,o.Z)(a,[{key:"initialise",value:function(){(0,r.Z)((0,l.Z)(a.prototype),"initialise",this).call(this),this.ignoreActions(this.IGNORE_ACTIONS)}}]),a}(a(37517).ug);Q.handle="embolden",Q.title={id:"rdm.embolden.title",defaults:"Embolden"},Q.displayOrder=7;var $=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).defaultAllowedAverageDowntime=1e3,i.trackedCds=[{cooldowns:[i.data.actions.ACCELERATION],allowedAverageDowntime:4e3},{cooldowns:[i.data.actions.MANAFICATION],firstUseOffset:17500},{cooldowns:[i.data.actions.EMBOLDEN],firstUseOffset:7500},{cooldowns:[i.data.actions.FLECHE]},{cooldowns:[i.data.actions.CONTRE_SIXTE]},{cooldowns:[i.data.actions.CORPS_A_CORPS]},{cooldowns:[i.data.actions.ENGAGEMENT,i.data.actions.DISPLACEMENT]}],i}return a}(a(48945).u),tt=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).suggestionContent=(0,x.jsx)(w.Trans,{id:"rdm.interrupts.suggestion.content",defaults:"Avoid interrupting casts by either prepositioning yourself or utilizing slidecasting where possible. If you need to move, try to save a use of <0/>, <1/>, or pool mana for a melee combo or if none of these are available use <2/>.",components:[(0,x.jsx)(P.P9,{action:"SWIFTCAST"}),(0,x.jsx)(P.P9,{action:"ACCELERATION"}),(0,x.jsx)(P.P9,{action:"ENCHANTED_REPRISE"})]}),i}return a}(a(48989).e);tt.displayOrder=3;var et,at,it,st,nt,ot,rt,lt,ct,ut,dt,ht,mt,gt,vt,pt,ft,Et,bt,yt,wt,Rt,kt,It,Tt,xt,At,Ct,Mt,Zt,St=a(39392),jt=a.n(St),Dt=a(66419),Ot=a.n(Dt),Gt=a(69301),Nt=a.n(Gt),Lt=a(43719),Vt=a(78766),_t=a(51422),Ft=a(58267),Pt="DualStatistic-module_titleWrapper__1P8a2",Ht="DualStatistic-module_icon__3hIHe",Ut="DualStatistic-module_title__2wyDX",Bt="DualStatistic-module_value__2ZGDv",Wt=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(t){var i;return(0,n.Z)(this,a),(i=e.call(this,t)).label=void 0,i.title=void 0,i.title2=void 0,i.icon=void 0,i.icon2=void 0,i.value=void 0,i.value2=void 0,i.Content=function(){return(0,x.jsxs)("div",{className:"DualStatistic-module_dualStatistic__2Fk80",children:[i.label,(0,x.jsxs)("div",{className:Pt,children:[i.icon&&(0,x.jsx)("img",{src:i.icon,className:Ht}),(0,x.jsx)("div",{className:Ut,children:i.title}),(0,x.jsx)("div",{className:Bt,children:i.value})]}),(0,x.jsxs)("div",{className:Pt,children:[i.icon&&(0,x.jsx)("img",{src:i.icon2,className:Ht}),(0,x.jsx)("div",{className:Ut,children:i.title2}),(0,x.jsx)("div",{className:Bt,children:i.value2})]})]})},i.label=t.label,i.title=t.title,i.title2=t.title2,i.icon=t.icon,i.icon2=t.icon2,i.value=t.value,i.value2=t.value2,i}return a}(Ft.h),Yt=a(40753),zt=100,Jt=(et=Reflect.metadata("design:type",I.ZP),at=Reflect.metadata("design:type",_t.gy),rt=ot=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=e.call.apply(e,h()(t=[this]).call(t,o)),(0,V.Z)(i,"suggestions",st,(0,_.Z)(i)),(0,V.Z)(i,"statistics",nt,(0,_.Z)(i)),i.whiteManaGauge=i.add(new Vt.qT({graph:{label:(0,x.jsx)(w.Trans,{id:"rdm.gauge.resource.whitemana",defaults:"White Mana"}),color:Lt.W.WHITE_MAGE.colour},maximum:100,minimum:0})),i.blackManaGauge=i.add(new Vt.qT({graph:{label:(0,x.jsx)(w.Trans,{id:"rdm.gauge.resource.blackmana",defaults:"Black Mana"}),color:Lt.W.BLACK_MAGE.colour},maximum:100,minimum:0})),i.gaugeModifiers=new(jt())([[i.data.actions.VERAERO.id,{white:6,black:0}],[i.data.actions.VERAERO_II.id,{white:7,black:0}],[i.data.actions.VERAERO_III.id,{white:6,black:0}],[i.data.actions.VERSTONE.id,{white:5,black:0}],[i.data.actions.VERHOLY.id,{white:11,black:0}],[i.data.actions.VERTHUNDER.id,{white:0,black:6}],[i.data.actions.VERTHUNDER_II.id,{white:0,black:7}],[i.data.actions.VERTHUNDER_III.id,{white:0,black:6}],[i.data.actions.VERFIRE.id,{white:0,black:5}],[i.data.actions.VERFLARE.id,{white:0,black:11}],[i.data.actions.JOLT.id,{white:2,black:2}],[i.data.actions.JOLT_II.id,{white:2,black:2}],[i.data.actions.IMPACT.id,{white:3,black:3}],[i.data.actions.SCORCH.id,{white:4,black:4}],[i.data.actions.RESOLUTION.id,{white:4,black:4}]]),i.spenderModifiers=new(jt())([[i.data.actions.ENCHANTED_REPRISE.id,{white:-5,black:-5}],[i.data.actions.ENCHANTED_MOULINET.id,{white:-20,black:-20}],[i.data.actions.ENCHANTED_RIPOSTE.id,{white:-20,black:-20}],[i.data.actions.ENCHANTED_ZWERCHHAU.id,{white:-15,black:-15}],[i.data.actions.ENCHANTED_REDOUBLEMENT.id,{white:-15,black:-15}]]),i.severityWastedMana={1:I.bI.MINOR,20:I.bI.MEDIUM,80:I.bI.MAJOR},i.severityLostMana={1:I.bI.MINOR,20:I.bI.MEDIUM,80:I.bI.MAJOR},i.manaLostDivisor=2,i.manaficationManaGain=50,i.manaStatistics={white:{manaficationLoss:0,imbalanceLoss:0,invulnLoss:0},black:{manaficationLoss:0,imbalanceLoss:0,invulnLoss:0}},i}return(0,o.Z)(a,[{key:"initialise",value:function(){var t;(0,r.Z)((0,l.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,m.hX)().type("damage").source(this.parser.actor.id),this.onGaugeModifying),this.addEventHook((0,m.hX)().type("action").source(this.parser.actor.id).action((0,m.kw)(Ot()(Nt()(t=this.spenderModifiers).call(t)))),this.onGaugeSpender),this.addEventHook((0,m.hX)().type("action").source(this.parser.actor.id).action(this.data.actions.MANAFICATION.id),this.onManafication),this.addEventHook("complete",this.onComplete)}},{key:"onGaugeModifying",value:function(t){if("action"===t.cause.type){var e=this.gaugeModifiers.get(t.cause.action);if(null!=e){var a=e,i=this.isOutOfBalance(),s=i.white?Math.floor(a.white/this.manaLostDivisor):a.white,n=i.black?Math.floor(a.black/this.manaLostDivisor):a.black;if(!(0,Yt.SV)(t))return this.manaStatistics.white.invulnLoss+=s,void(this.manaStatistics.black.invulnLoss+=n);this.whiteManaGauge.modify(s),this.blackManaGauge.modify(n),this.manaStatistics.white.imbalanceLoss+=a.white-s,this.manaStatistics.black.imbalanceLoss+=a.black-n}}}},{key:"onManafication",value:function(){var t=this.getWhiteMana()+this.manaficationManaGain,e=this.getBlackMana()+this.manaficationManaGain;t>zt&&(this.manaStatistics.white.manaficationLoss=t-zt,t=zt),e>zt&&(this.manaStatistics.black.manaficationLoss=e-zt,e=zt),this.whiteManaGauge.set(t),this.blackManaGauge.set(e)}},{key:"onGaugeSpender",value:function(t){var e=this.spenderModifiers.get(t.action);if(null!=e){var a=e;this.whiteManaGauge.modify(a.white),this.blackManaGauge.modify(a.black)}}},{key:"isOutOfBalance",value:function(){var t=this.getWhiteMana(),e=this.getBlackMana();return t&&e-t>30?{white:!0,black:!1}:e&&t-e>30?{white:!1,black:!0}:{white:!1,black:!1}}},{key:"onComplete",value:function(){this.suggestions.add(new I.eg({icon:this.whiteManaGauge.overCap>this.blackManaGauge.overCap?this.data.actions.VERHOLY.icon:this.data.actions.VERFLARE.icon,content:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.gauge.suggestions.mana-wasted-content",defaults:"Ensure you don't overcap your Mana before a combo; overcapping Mana indicates your balance was off, and you potentially lost out on Enchanted Combo damage."})}),tiers:this.severityWastedMana,value:this.whiteManaGauge.overCap+this.blackManaGauge.overCap,why:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.gauge.suggestions.mana-wasted-why",defaults:"You lost {0} White Mana and {1} Black Mana due to capped Gauge resources",values:{0:this.whiteManaGauge.overCap,1:this.blackManaGauge.overCap}})})})),this.suggestions.add(new I.eg({icon:this.manaStatistics.white.imbalanceLoss>this.manaStatistics.black.imbalanceLoss?this.data.actions.VERHOLY.icon:this.data.actions.VERFLARE.icon,content:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.gauge.suggestions.mana-lost-content",defaults:"Ensure you don't allow a difference of more than 30 betwen mana types. You lost Mana due to Imbalance which reduces your overall mana gain and potentially costs you one or more Enchanted Combos."})}),tiers:this.severityLostMana,value:this.manaStatistics.white.imbalanceLoss+this.manaStatistics.black.imbalanceLoss,why:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.gauge.suggestions.mana-lost-why",defaults:"You lost {0} White Mana and {1} Black Mana due to overage of black Mana",values:{0:this.manaStatistics.white.imbalanceLoss,1:this.manaStatistics.black.imbalanceLoss}})})})),this.suggestions.add(new I.eg({icon:this.manaStatistics.white.invulnLoss>this.manaStatistics.black.invulnLoss?this.data.actions.VERHOLY.icon:this.data.actions.VERFLARE.icon,content:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.gauge.suggestions.mana-invuln-content",defaults:"Ensure you don't target a boss that you cannot damage with your damaging spells.  Spells that do no damage due to an invulnerable target or due to missing result in no mana gained, which potentially costs you one or more Enchanted Combos."})}),tiers:this.severityLostMana,value:this.manaStatistics.white.invulnLoss+this.manaStatistics.black.invulnLoss,why:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.gauge.suggestions.mana-invuln-why",defaults:"You lost {0} White Mana and {1} Black Mana due to misses or spells that targeted an invulnerable target",values:{0:this.manaStatistics.white.invulnLoss,1:this.manaStatistics.black.invulnLoss}})})})),this.statistics.add(new Wt({label:(0,x.jsx)(w.Trans,{id:"rdm.gauge.title-mana-lost-to-manafication",defaults:"Manafication Loss:"}),title:(0,x.jsx)(w.Trans,{id:"rdm.gauge.white-mana-lost-to-manafication",defaults:"White"}),title2:(0,x.jsx)(w.Trans,{id:"rdm.gauge.black-mana-lost-to-manafication",defaults:"Black"}),icon:this.data.actions.VERHOLY.icon,icon2:this.data.actions.VERFLARE.icon,value:this.manaStatistics.white.manaficationLoss,value2:this.manaStatistics.black.manaficationLoss,info:(0,x.jsx)(w.Trans,{id:"rdm.gauge.white-mana-lost-to-manafication-statistics",defaults:"It is ok to lose some mana to manafication over the course of a fight, you should however strive to keep this number as low as possible."})}))}},{key:"getWhiteMana",value:function(){return this.whiteManaGauge.value}},{key:"getWhiteManaAt",value:function(t){return this.whiteManaGauge.getValueAt(t)}},{key:"getBlackMana",value:function(){return this.blackManaGauge.value}},{key:"getBlackManaAt",value:function(t){return this.blackManaGauge.getValueAt(t)}}]),a}(Vt.aC),ot.title={id:"rdm.gauge.title",defaults:"Mana Gauge Usage"},it=rt,st=(0,F.Z)(it.prototype,"suggestions",[W.I,et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),nt=(0,F.Z)(it.prototype,"statistics",[W.I,at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),it),Xt=a(32366),qt=a.n(Xt),Kt=(lt=Reflect.metadata("design:type",I.ZP),ct=Reflect.metadata("design:type",_t.gy),ut=Reflect.metadata("design:type",Jt),pt=vt=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=e.call.apply(e,h()(t=[this]).call(t,o)),(0,V.Z)(i,"suggestions",ht,(0,_.Z)(i)),(0,V.Z)(i,"statistics",mt,(0,_.Z)(i)),(0,V.Z)(i,"manaGauge",gt,(0,_.Z)(i)),i.manaStackGauge=i.add(new Vt.qT({graph:{label:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.resource.manaStacks",defaults:"Mana Stacks"}),color:Lt.W.RED_MAGE.colour},maximum:3,minimum:0})),i.gaugeModifiers=new(jt())([[i.data.actions.ENCHANTED_REPRISE.id,{manaStack:0}],[i.data.actions.ENCHANTED_MOULINET.id,{manaStack:1}],[i.data.actions.ENCHANTED_RIPOSTE.id,{manaStack:1}],[i.data.actions.ENCHANTED_ZWERCHHAU.id,{manaStack:1}],[i.data.actions.ENCHANTED_REDOUBLEMENT.id,{manaStack:1}]]),i.spenderModifiers=new(jt())([[i.data.actions.VERHOLY.id,{manaStack:-3}],[i.data.actions.VERFLARE.id,{manaStack:-3}],[i.data.actions.SCORCH.id,{manaStack:0}],[i.data.actions.RESOLUTION.id,{manaStack:0}]]),i.gaugeBreakers=[i.data.actions.VERAERO.id,i.data.actions.VERAERO_II.id,i.data.actions.VERAERO_III.id,i.data.actions.VERSTONE.id,i.data.actions.VERTHUNDER.id,i.data.actions.VERTHUNDER_II.id,i.data.actions.VERTHUNDER_III.id,i.data.actions.VERFIRE.id,i.data.actions.JOLT.id,i.data.actions.JOLT_II.id,i.data.actions.IMPACT.id],i.gaugeBreak=[],i.severity={1:I.bI.MAJOR},i.manaStatistics={white:{overcapLoss:0},black:{overcapLoss:0}},i}return(0,o.Z)(a,[{key:"initialise",value:function(){var t,e;(0,r.Z)((0,l.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,m.hX)().type("action").source(this.parser.actor.id).action((0,m.kw)(Ot()(Nt()(t=this.gaugeModifiers).call(t)))),this.onGaugeModifying),this.addEventHook((0,m.hX)().type("action").source(this.parser.actor.id).action((0,m.kw)(this.gaugeBreakers)),this.onGaugeModifying),this.addEventHook((0,m.hX)().type("action").source(this.parser.actor.id).action((0,m.kw)(Ot()(Nt()(e=this.spenderModifiers).call(e)))),this.onGaugeSpender),this.addEventHook("complete",this.onComplete)}},{key:"onGaugeModifying",value:function(t){if(this.shouldGaugeBreak(t))this.onGaugeBreak(t);else{var e=this.gaugeModifiers.get(t.action);if(null!=e){if(this.manaStackGauge.capped){var a,i,s=this.manaGauge.spenderModifiers.get(t.action);this.debug(h()(a=h()(i="manaSpender is ".concat(s," white mana value of ")).call(i,null==s?void 0:s.white," and black mana value of ")).call(a,null==s?void 0:s.black)),this.debug("Time the Overcap happened ".concat(this.parser.formatEpochTimestamp(t.timestamp))),null!=s&&(this.manaStatistics.white.overcapLoss+=Math.abs(s.white),this.manaStatistics.black.overcapLoss+=Math.abs(s.black))}this.manaStackGauge.modify(e.manaStack)}}}},{key:"onGaugeSpender",value:function(t){var e=this.spenderModifiers.get(t.action);null!=e&&this.manaStackGauge.modify(e.manaStack)}},{key:"onGaugeBreak",value:function(t){var e={};e.action=t.action,e.timestamp=t.timestamp,e.manaStacksLost=this.manaStackGauge.value,this.gaugeBreak.push(e),this.manaStackGauge.reset()}},{key:"shouldGaugeBreak",value:function(t){var e,a,i,s,n,o;return this.debug(h()(e=h()(a=h()(i="manaStackGauge is ".concat(this.manaStackGauge.value," and the action is ")).call(i,null===(s=this.data.getAction(t.action))||void 0===s?void 0:s.name," with id ")).call(a,t.action," and it's included? ")).call(e,y()(n=this.gaugeBreakers).call(n,t.action))),y()(o=this.gaugeBreakers).call(o,t.action)&&this.manaStackGauge.value>0}},{key:"onComplete",value:function(){var t;this.suggestions.add(new I.eg({icon:this.data.actions.RESOLUTION.icon,content:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.suggestions.manaStack-wasted-content",defaults:"Ensure you don't overcap your Mana Stacks before using your finisher combo; overcapping Mana Stacks means you used more than 3 enchanted skills in a row."})}),tiers:this.severity,value:this.manaStackGauge.overCap,why:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.suggestions.manaStack-wasted-why",defaults:"You lost {0} Mana Stacks due to capped Gauge resources",values:{0:this.manaStackGauge.overCap}})})}));var e=qt()(t=this.gaugeBreak).call(t,(function(t,e){return t+e.manaStacksLost}),0);this.suggestions.add(new I.eg({icon:this.data.actions.RESOLUTION.icon,content:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.suggestions.manaStack-loss-content",defaults:"Ensure that you don't use a non Enchanted GCD when you have Mana Stacks, otherwise you lose them all"})}),tiers:this.severity,value:e,why:(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.suggestions.manaStack-loss-why",defaults:"You lost {manaStacksLost} Mana Stacks due to using a non Enchanted GCD",values:{manaStacksLost:e}})})})),this.statistics.add(new Wt({label:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.title-mana-lost-to-overcap",defaults:"Mana Stack Overcap Loss:"}),title:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.white-mana-lost-to-overcap",defaults:"White"}),title2:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.black-mana-lost-to-overcap",defaults:"Black"}),icon:this.data.actions.VERHOLY.icon,icon2:this.data.actions.VERFLARE.icon,value:this.manaStatistics.white.overcapLoss,value2:this.manaStatistics.black.overcapLoss,info:(0,x.jsx)(w.Trans,{id:"rdm.manaStackGauge.white-mana-lost-to-overcap-statistics",defaults:"You should never overcap your Mana Stacks"})}))}},{key:"getManaStacks",value:function(){return this.manaStackGauge.value}},{key:"getManaStacksAt",value:function(t){return this.manaStackGauge.getValueAt(t)}}]),a}(Vt.aC),vt.handle="manaStackGauge",vt.title={id:"rdm.manaStackGauge.title",defaults:"Mana Stack Gauge Usage"},vt.debug=!1,dt=pt,ht=(0,F.Z)(dt.prototype,"suggestions",[W.I,lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),mt=(0,F.Z)(dt.prototype,"statistics",[W.I,ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),gt=(0,F.Z)(dt.prototype,"manaGauge",[W.I,ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.manaGauge}}),dt),Qt=a(97530),$t=a(44845),te=a(72119),ee=a.n(te),ae=a(47302),ie=a.n(ae),se=a(81643),ne=a.n(se),oe=a(19914),re=a(70273),le=a(56611),ce=a(65927),ue=a(80967),de=a(68156);!function(t){t.WRONG_FINISHER="WRONG_FINISHER",t.DELAY_COMBO="DELAY_COMBO"}(Zt||(Zt={}));var he=(ft=Reflect.metadata("design:type",Y.V),Et=Reflect.metadata("design:type",I.ZP),bt=Reflect.metadata("design:type",le.TY),yt=Reflect.metadata("design:type",re.e),wt=Reflect.metadata("design:type",Jt),Mt=Ct=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i,s;(0,n.Z)(this,a);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return s=e.call.apply(e,h()(t=[this]).call(t,r)),(0,V.Z)(s,"data",kt,(0,_.Z)(s)),(0,V.Z)(s,"suggestions",It,(0,_.Z)(s)),(0,V.Z)(s,"timeline",Tt,(0,_.Z)(s)),(0,V.Z)(s,"actors",xt,(0,_.Z)(s)),(0,V.Z)(s,"manaGauge",At,(0,_.Z)(s)),s.finishers=[s.data.actions.VERHOLY.id,s.data.actions.VERFLARE.id],s.severityWastedFinisher={1:I.bI.MINOR,2:I.bI.MEDIUM,3:I.bI.MAJOR},s.whiteManaActions={proc:s.data.actions.VERSTONE,dualcast:s.data.actions.VERAERO_III,finisher:s.data.actions.VERHOLY},s.blackManaActions={proc:s.data.actions.VERFIRE,dualcast:s.data.actions.VERTHUNDER_III,finisher:s.data.actions.VERFLARE},s.ignoreFinisherProcsManaThreshold=4,s.upperComboTimeFrame=13,s.openerDelayForgivenessDuration=15e3,s.suggestionText=(i={},(0,$t.Z)(i,Zt.WRONG_FINISHER,(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.recommendation.wrongfinisher",defaults:"You should use <0/> when your black mana is lower or <1/> when your white mana is lower.",components:[(0,x.jsx)(P.P9,{action:"VERFLARE"}),(0,x.jsx)(P.P9,{action:"VERHOLY"})]})),(0,$t.Z)(i,Zt.DELAY_COMBO,(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.recommendation.delaycombo",defaults:"Do not enter your combo with your finisher's proc up. Consider dumping a proc before entering the melee combo as long as you waste less than {0} mana to overcapping.",values:{0:s.ignoreFinisherProcsManaThreshold}})),i),s.meleeCombos=new oe.A((function(){return{events:[],lastAction:{},finisher:{used:0,recommendedActions:[],recommendation:(0,x.jsx)(w.Trans,{id:""})},procs:[],broken:!1,startingMana:{white:0,black:0}}})),s.incorrectFinishers={verholy:0,verflare:0,delay:0},s.footnoteIndexes=[],s}return(0,o.Z)(a,[{key:"initialise",value:function(){(0,r.Z)((0,l.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,m.hX)().type("action").source(this.parser.actor.id),this.onCast),this.addEventHook((0,m.hX)().type("death").actor(this.parser.actor.id),this.onDeath),this.addEventHook((0,m.hX)().type("complete"),this.onComplete)}},{key:"onCast",value:function(t){var e=this.data.getAction(t.action);if(null!=e){var a,i=this.meleeCombos.getCurrent();if(e.combo)if(e.combo.start&&!y()(a=this.finishers).call(a,e.id))this.breakComboIfExists(t.timestamp),this.startCombo(t);else{var s;if(null==i)return;if(e.combo.from||y()(s=this.finishers).call(s,e.id)){var n,o,r,l=Array.isArray(e.combo.from)?e.combo.from:[e.combo.from];y()(l).call(l,null!==(n=i.data.lastAction.action)&&void 0!==n?n:0)||y()(o=this.finishers).call(o,e.id)?(i.data.events.push(t),i.data.lastAction=t,y()(r=this.finishers).call(r,e.id)&&(i.data.finisher.used=t.action),e.combo.end&&t.action===this.data.actions.RESOLUTION.id&&(this.handleFinisher(),this.endCombo(t.timestamp))):(i.data.broken=!0,this.endCombo(t.timestamp))}}if(e.breaksCombo){if(e.id===this.data.actions.MANAFICATION.id&&i&&i.data.lastAction.action===this.data.actions.ENCHANTED_REDOUBLEMENT.id)return;this.breakComboIfExists(t.timestamp)}}}},{key:"onDeath",value:function(t){this.breakComboIfExists(t.timestamp)}},{key:"onComplete",value:function(t){this.breakComboIfExists(t.timestamp),this.suggestions.add(new I.eg({icon:this.data.actions.VERFLARE.icon,content:this.suggestionText.WRONG_FINISHER,why:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.recommendation.wrongfinisher.why",defaults:"{0, plural, one {# Verfire/Verstone cast was lost due to using the incorrect finisher.} other {# Verfire/Verstone casts were lost due to using the incorrect finisher.}}",values:{0:this.incorrectFinishers.verholy+this.incorrectFinishers.verflare}}),tiers:this.severityWastedFinisher,value:this.incorrectFinishers.verholy+this.incorrectFinishers.verflare})),this.suggestions.add(new I.eg({icon:this.data.actions.VERSTONE.icon,content:this.suggestionText.DELAY_COMBO,why:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.recommendation.delaycombo.why",defaults:"{0, plural, one {# Proc cast was lost due to entering the melee combo with the finisher proc up.} other {# Proc casts were lost due to entering the melee combo with the finisher proc up.}}",values:{0:this.incorrectFinishers.delay}}),tiers:this.severityWastedFinisher,value:this.incorrectFinishers.delay}))}},{key:"relativeTimestamp",value:function(t){return t-this.parser.pull.timestamp}},{key:"endTimestampCap",value:function(t){var e=this.parser.pull.duration+this.parser.pull.timestamp;return t>e?e:t}},{key:"output",value:function(){var t,e,a=this;if(0!==ee()(this.meleeCombos).length)return(0,x.jsxs)(T.Fragment,{children:[(0,x.jsxs)(ce.Z,{compact:!0,unstackable:!0,celled:!0,children:[(0,x.jsx)(ce.Z.Header,{children:(0,x.jsxs)(ce.Z.Row,{children:[(0,x.jsx)(ce.Z.HeaderCell,{collapsing:!0,children:(0,x.jsx)("strong",{children:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.table.header.time",defaults:"Time"})})}),(0,x.jsx)(ce.Z.HeaderCell,{collapsing:!0,children:(0,x.jsx)("strong",{children:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.table.header.starting-mana",defaults:"Starting Mana"})})}),(0,x.jsx)(ce.Z.HeaderCell,{collapsing:!0,children:(0,x.jsx)("strong",{children:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.table.header.starting-procs",defaults:"Starting Procs"})})}),(0,x.jsx)(ce.Z.HeaderCell,{children:(0,x.jsx)("strong",{children:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.table.header.rotation",defaults:"Rotation"})})}),(0,x.jsx)(ce.Z.HeaderCell,{children:(0,x.jsx)("strong",{children:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.table.header.recommended",defaults:"Recommended"})})})]})}),(0,x.jsx)(ce.Z.Body,{children:p()(t=ee()(this.meleeCombos)).call(t,(function(t){var e,i=t.data.startingMana.white,s=t.data.startingMana.black,n=t.data.finisher?t.data.finisher.recommendedActions:[],o=t.data.finisher?t.data.finisher.recommendation:"";return(0,x.jsxs)(ce.Z.Row,{children:[(0,x.jsxs)(ce.Z.Cell,{textAlign:"center",children:[(0,x.jsx)("span",{style:{marginRight:5},children:a.parser.formatEpochTimestamp(t.start)}),(0,x.jsx)(ue.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){var e;return a.timeline.show(a.relativeTimestamp(t.start),a.relativeTimestamp(a.endTimestampCap(null!==(e=t.end)&&void 0!==e?e:t.start+a.upperComboTimeFrame)))}})]}),(0,x.jsx)(ce.Z.Cell,{children:(0,x.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[i," White | ",s," Black"]})}),(0,x.jsx)(ce.Z.Cell,{children:(0,x.jsx)("span",{children:p()(e=t.data.procs).call(e,(function(t){switch(t){case a.data.statuses.VERSTONE_READY:return(0,x.jsx)(P.P9,{showName:!1,status:"VERSTONE_READY"},"verstone");case a.data.statuses.VERFIRE_READY:return(0,x.jsx)(P.P9,{showName:!1,status:"VERFIRE_READY"},"verfire")}}))})}),(0,x.jsx)(ce.Z.Cell,{children:(0,x.jsx)("span",{style:{whiteSpace:"nowrap"},children:(0,x.jsx)(H.Z,{events:t.data.events})})}),(0,x.jsxs)(ce.Z.Cell,{children:[p()(n).call(n,(function(t){return(0,x.jsx)(P.vm,(0,Qt.Z)({showName:!1},t),t.id)})),n.length>0&&(0,x.jsx)("br",{}),o]})]},t.start)}))})]}),this.footnoteIndexes.length>0&&(0,x.jsx)(de.Z,{children:p()(e=this.footnoteIndexes).call(e,(function(t,e){return(0,x.jsxs)(T.Fragment,{children:[(0,x.jsx)("sup",{children:e+1})," ",a.suggestionText[t],e<a.footnoteIndexes.length-1&&(0,x.jsx)("br",{})]},t)}))})]})}},{key:"startCombo",value:function(t){var e=this.meleeCombos.openNew(t.timestamp);e.data.events.push(t),e.data.lastAction=t,this.actors.current.at(t.timestamp).hasStatus(this.data.statuses.VERSTONE_READY.id)&&e.data.procs.push(this.data.statuses.VERSTONE_READY),this.actors.current.at(t.timestamp).hasStatus(this.data.statuses.VERFIRE_READY.id)&&e.data.procs.push(this.data.statuses.VERFIRE_READY),e.data.startingMana.white=this.manaGauge.getWhiteManaAt(t.timestamp-1),e.data.startingMana.black=this.manaGauge.getBlackManaAt(t.timestamp-1)}},{key:"breakComboIfExists",value:function(t){var e=this.meleeCombos.getCurrent();e&&(e.data.broken=!0,this.endCombo(t))}},{key:"endCombo",value:function(t){this.meleeCombos.closeCurrent(t)}},{key:"handleFinisher",value:function(){var t,e,a=this.meleeCombos.getCurrent();if(a){var i={amount:a.data.startingMana.white,procReady:y()(t=a.data.procs).call(t,this.data.statuses.VERSTONE_READY),actions:this.whiteManaActions},s={amount:a.data.startingMana.black,procReady:y()(e=a.data.procs).call(e,this.data.statuses.VERFIRE_READY),actions:this.blackManaActions},n=this.data.getAction(a.data.finisher.used);if(null!=n){var o;if((o=i.amount<s.amount?this.outOfBalanceFinisher(i,s):s.amount<i.amount?this.outOfBalanceFinisher(s,i):this.inBalanceFinisher(s,i))instanceof Array)o===this.finishers?a.data.finisher.recommendedActions.push(n):a.start-this.parser.pull.timestamp<this.openerDelayForgivenessDuration?a.data.finisher.recommendation=(0,x.jsx)(T.Fragment,{children:(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.recommendation.opener.short",defaults:"It's okay to lose procs in the opener."})}):a.data.finisher.recommendedActions.push(n);else{var r=o;if(null==r)return;a.data.finisher.recommendedActions.push(r),a.data.finisher.used!==o.id&&(a.data.finisher.used===this.data.actions.VERHOLY.id&&this.incorrectFinishers.verholy++,a.data.finisher.used===this.data.actions.VERFLARE.id&&this.incorrectFinishers.verflare++,a.data.finisher.recommendation=(0,x.jsxs)(T.Fragment,{children:[(0,x.jsx)(w.Trans,{id:"rdm.meleecombos.recommendation.wrongfinisher.short",defaults:"Wrong finisher"}),(0,x.jsx)("sup",{children:this.assignOrGetFootnoteIndex(Zt.WRONG_FINISHER)})]}))}}}}},{key:"outOfBalanceFinisher",value:function(t,e){if(!t.procReady)return t.actions.finisher;var a=this.manaLossToDelayCombo(t,e);if(!e.procReady){var i,s,n,o,r=(null!==(i=null===(s=this.manaGauge.gaugeModifiers.get(e.actions.finisher.id))||void 0===s?void 0:s.white)&&void 0!==i?i:0)||(null!==(n=null===(o=this.manaGauge.gaugeModifiers.get(e.actions.finisher.id))||void 0===o?void 0:o.black)&&void 0!==n?n:0);return e.amount-t.amount+r>30?null!==a&&a.manaLoss<=this.ignoreFinisherProcsManaThreshold?a.finisher:t.actions.finisher:null!==a&&a.manaLoss<=this.ignoreFinisherProcsManaThreshold?a.finisher:e.actions.finisher}return null!==a&&a.manaLoss<=this.ignoreFinisherProcsManaThreshold?a.finisher:this.finishers}},{key:"inBalanceFinisher",value:function(t,e){if(t.procReady&&e.procReady){var a=this.manaLossToDelayCombo(t,e);if(null!==a&&a.manaLoss<=this.ignoreFinisherProcsManaThreshold)return a.finisher}return t.procReady||e.procReady?t.procReady?e.procReady?this.finishers:e.actions.finisher:t.actions.finisher:this.finishers}},{key:"manaLossToDelayCombo",value:function(t,e){var a=[];if(t.procReady){var i,s,n,o,r,l,c,u,d=t.amount+(null!==(i=null===(s=this.manaGauge.gaugeModifiers.get(t.actions.proc.id))||void 0===s?void 0:s.white)&&void 0!==i?i:0)||(null!==(n=null===(o=this.manaGauge.gaugeModifiers.get(t.actions.proc.id))||void 0===o?void 0:o.black)&&void 0!==n?n:0),h=e.amount+(null!==(r=null===(l=this.manaGauge.gaugeModifiers.get(e.actions.dualcast.id))||void 0===l?void 0:l.white)&&void 0!==r?r:0)||(null!==(c=null===(u=this.manaGauge.gaugeModifiers.get(e.actions.dualcast.id))||void 0===u?void 0:u.black)&&void 0!==c?c:0),m=Math.max(d-zt,0)+Math.max(h-zt,0);if((d=Math.min(d,zt))<(h=Math.min(h,zt))&&a.push({finisher:[t.actions.proc,e.actions.dualcast,t.actions.finisher],manaLoss:m}),!e.procReady){var g,v,p,f,E,b,y,w,R,k,I,T,x=t.amount+((null!==(g=null===(v=this.manaGauge.gaugeModifiers.get(t.actions.proc.id))||void 0===v?void 0:v.white)&&void 0!==g?g:0)||(null!==(p=null===(f=this.manaGauge.gaugeModifiers.get(t.actions.proc.id))||void 0===f?void 0:f.black)&&void 0!==p?p:0))+((null!==(E=null===(b=this.manaGauge.gaugeModifiers.get(t.actions.dualcast.id))||void 0===b?void 0:b.white)&&void 0!==E?E:0)||(null!==(y=null===(w=this.manaGauge.gaugeModifiers.get(t.actions.dualcast.id))||void 0===w?void 0:w.black)&&void 0!==y?y:0)),A=e.amount,C=Math.max(x-zt,0)+Math.max(A-zt,0);x=Math.min(x,zt),(A=Math.min(A,zt))<x?a.push({finisher:[t.actions.proc,t.actions.dualcast,e.actions.finisher],manaLoss:C}):A+((null!==(R=null===(k=this.manaGauge.gaugeModifiers.get(e.actions.finisher.id))||void 0===k?void 0:k.white)&&void 0!==R?R:0)||(null!==(I=null===(T=this.manaGauge.gaugeModifiers.get(e.actions.finisher.id))||void 0===T?void 0:T.black)&&void 0!==I?I:0))-x>30||a.push({finisher:[t.actions.proc,t.actions.dualcast,e.actions.finisher],manaLoss:C})}}else if(e.procReady){var M,Z,S,j,D,O,G,N,L=t.amount+((null!==(M=null===(Z=this.manaGauge.gaugeModifiers.get(t.actions.dualcast.id))||void 0===Z?void 0:Z.white)&&void 0!==M?M:0)||(null!==(S=null===(j=this.manaGauge.gaugeModifiers.get(t.actions.dualcast.id))||void 0===j?void 0:j.black)&&void 0!==S?S:0)),V=e.amount+((null!==(D=null===(O=this.manaGauge.gaugeModifiers.get(e.actions.proc.id))||void 0===O?void 0:O.white)&&void 0!==D?D:0)||(null!==(G=null===(N=this.manaGauge.gaugeModifiers.get(e.actions.proc.id))||void 0===N?void 0:N.black)&&void 0!==G?G:0)),_=Math.max(L-zt,0)+Math.max(V-zt,0);L=Math.min(L,zt),(V=Math.min(V,zt))<L&&a.push({finisher:[e.actions.proc,t.actions.dualcast,e.actions.finisher],manaLoss:_})}else{var F,P,H,U,B,W,Y,z,J=t.amount+(null!==(F=null===(P=this.manaGauge.gaugeModifiers.get(this.data.actions.JOLT_II.id))||void 0===P?void 0:P.white)&&void 0!==F?F:0),X=e.amount+(null!==(H=null===(U=this.manaGauge.gaugeModifiers.get(this.data.actions.JOLT_II.id))||void 0===U?void 0:U.black)&&void 0!==H?H:0)+((null!==(B=null===(W=this.manaGauge.gaugeModifiers.get(e.actions.dualcast.id))||void 0===W?void 0:W.white)&&void 0!==B?B:0)||(null!==(Y=null===(z=this.manaGauge.gaugeModifiers.get(e.actions.dualcast.id))||void 0===z?void 0:z.black)&&void 0!==Y?Y:0)),q=this.data.actions.JOLT_II,K=Math.max(J-zt,0)+Math.max(X-zt,0);if((J=Math.min(J,zt))<(X=Math.min(X,zt)))a.push({finisher:[q,t.actions.dualcast,e.actions.finisher],manaLoss:K});else{var Q,$,tt,et,at,it,st,nt,ot=t.amount+(null!==(Q=null===($=this.manaGauge.gaugeModifiers.get(this.data.actions.JOLT_II.id))||void 0===$?void 0:$.white)&&void 0!==Q?Q:0)+((null!==(tt=null===(et=this.manaGauge.gaugeModifiers.get(t.actions.dualcast.id))||void 0===et?void 0:et.white)&&void 0!==tt?tt:0)||(null!==(at=null===(it=this.manaGauge.gaugeModifiers.get(t.actions.dualcast.id))||void 0===it?void 0:it.black)&&void 0!==at?at:0)),rt=e.amount+(null!==(st=null===(nt=this.manaGauge.gaugeModifiers.get(this.data.actions.JOLT_II.id))||void 0===nt?void 0:nt.black)&&void 0!==st?st:0),lt=this.data.actions.JOLT_II,ct=Math.max(ot-zt,0)+Math.max(rt-zt,0);ot=Math.min(ot,zt),(rt=Math.min(rt,zt))<ot&&a.push({finisher:[lt,t.actions.dualcast,e.actions.finisher],manaLoss:ct})}}return a.length>0?(ie()(a).call(a,(function(t,e){return t.manaLoss>e.manaLoss?1:t.manaLoss<e.manaLoss?-1:0})),a[0]):null}},{key:"assignOrGetFootnoteIndex",value:function(t){var e,a;return y()(e=this.footnoteIndexes).call(e,t)||this.footnoteIndexes.push(t),ne()(a=this.footnoteIndexes).call(a,t)+1}}]),a}(B.qk),Ct.handle="mlc",Ct.title={id:"rdm.meleecombos.title",defaults:"Melee Combos"},Ct.displayOrder=6,Rt=Mt,kt=(0,F.Z)(Rt.prototype,"data",[W.I,ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),It=(0,F.Z)(Rt.prototype,"suggestions",[W.I,Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Tt=(0,F.Z)(Rt.prototype,"timeline",[W.I,bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),xt=(0,F.Z)(Rt.prototype,"actors",[W.I,yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),At=(0,F.Z)(Rt.prototype,"manaGauge",[W.I,wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.manaGauge}}),Rt),me=a(24950),ge={1:I.bI.MINOR,15:I.bI.MEDIUM},ve={1:I.bI.MINOR,2:I.bI.MEDIUM,3:I.bI.MAJOR},pe={1:I.bI.MINOR,2:I.bI.MEDIUM,7:I.bI.MAJOR},fe=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return(i=e.call.apply(e,h()(t=[this]).call(t,o))).trackedProcs=[{procStatus:i.data.statuses.VERSTONE_READY,consumeActions:[i.data.actions.VERSTONE]},{procStatus:i.data.statuses.VERFIRE_READY,consumeActions:[i.data.actions.VERFIRE]}],i}return(0,o.Z)(a,[{key:"getMissedProcContent",value:function(t,e){return t>0&&e>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.missed.content",defaults:"Try to use <0/> whenever you have <1/> or <2/> whenever you have <3/> to avoid losing out on mana gains.",components:[(0,x.jsx)(P.P9,{action:"VERFIRE"}),(0,x.jsx)(P.P9,{status:"VERFIRE_READY"}),(0,x.jsx)(P.P9,{action:"VERSTONE"}),(0,x.jsx)(P.P9,{status:"VERSTONE_READY"})]}):t>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.missed-fire.content",defaults:"Try to use <0/> whenever you have <1/> to avoid losing out on mana gains.",components:[(0,x.jsx)(P.P9,{action:"VERFIRE"}),(0,x.jsx)(P.P9,{status:"VERFIRE_READY"})]}):(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.missed-stone.content",defaults:"Try to use <0/> whenever you have <1/> to avoid losing out on mana gains.",components:[(0,x.jsx)(P.P9,{action:"VERSTONE"}),(0,x.jsx)(P.P9,{status:"VERSTONE_READY"})]})}},{key:"getMissedProcWhy",value:function(t,e){return t>0&&e>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.missed.why",defaults:"You missed {missedFire, plural, one {# Verfire proc} other {# Verfire procs}} and {missedStone, plural, one {# Verstone proc} other {# Verstone procs}}.",values:{missedFire:t,missedStone:e}}):t>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.missed-fire.why",defaults:"You missed {missedFire, plural, one {# Verfire proc} other {# Verfire procs}}.",values:{missedFire:t}}):(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.missed-stone.why",defaults:"You missed {missedStone, plural, one {# Verstone proc} other {# Verstone procs}}.",values:{missedStone:e}})}},{key:"getOverwrittenProcContent",value:function(t,e){return t>0&&e>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.overwritten.content",defaults:"Don't cast <0/> when you have <1/> or <2/> when you have <3/>.",components:[(0,x.jsx)(P.P9,{action:"VERTHUNDER_III"}),(0,x.jsx)(P.P9,{status:"VERFIRE_READY"}),(0,x.jsx)(P.P9,{action:"VERAERO_III"}),(0,x.jsx)(P.P9,{status:"VERSTONE_READY"})]}):t>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.overwritten-fire.content",defaults:"Don't cast <0/> when you have <1/>.",components:[(0,x.jsx)(P.P9,{action:"VERTHUNDER_III"}),(0,x.jsx)(P.P9,{status:"VERFIRE_READY"})]}):(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.overwritten-stone.content",defaults:"Don't cast <0/> when you have <1/>.",components:[(0,x.jsx)(P.P9,{action:"VERAERO_III"}),(0,x.jsx)(P.P9,{status:"VERSTONE_READY"})]})}},{key:"getOverwrittenProcWhy",value:function(t,e){return t>0&&e>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.overwritten.why",defaults:"{overWrittenFire, plural, one {# Verfire proc} other {# Verfire procs}} and {overWrittenStone, plural, one {# Verstone proc} other {# Verstone procs}} were lost due to being overwritten.",values:{overWrittenFire:t,overWrittenStone:e}}):t>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.overwritten-fire.why",defaults:"{overWrittenFire, plural, one {# Verfire proc was} other {# Verfire procs were}} lost due to being overwritten.",values:{overWrittenFire:t}}):(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.overwritten-stone.why",defaults:"{overWrittenStone, plural, one {# Verstone proc was} other {# Verstone procs were}} lost due to being overwritten.",values:{overWrittenStone:e}})}},{key:"getInvulnProcContent",value:function(t,e){return t>0&&e>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.invuln.content",defaults:"Try not to use <0/> and <1/> while the boss is invulnerable.",components:[(0,x.jsx)(P.P9,{action:"VERFIRE"}),(0,x.jsx)(P.P9,{action:"VERSTONE"})]}):t>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.invuln-fire.content",defaults:"Try not to use <0/> while the boss is invulnerable.",components:[(0,x.jsx)(P.P9,{action:"VERFIRE"})]}):(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.invuln-stone.content",defaults:"Try not to use <0/> while the boss is invulnerable.",components:[(0,x.jsx)(P.P9,{action:"VERSTONE"})]})}},{key:"getInvulnProcWhy",value:function(t,e){return t>0&&e>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.invuln.why",defaults:"You used {invulnFire, plural, one {# Verfire proc} other {# Verfire procs}} and {invulnStone, plural, one {# Verstone proc} other {# Verstone procs}} on an invulnerable boss.",values:{invulnFire:t,invulnStone:e}}):t>0?(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.invuln-fire.why",defaults:"You used {invulnFire, plural, one {# Verfire proc} other {# Verfire procs}} on an invulnerable boss.",values:{invulnFire:t}}):(0,x.jsx)(w.Trans,{id:"rdm.procs.suggestions.invuln-stone.why",defaults:"You used {invulnStone, plural, one {# Verstone proc} other {# Verstone procs}} on an invulnerable boss.",values:{invulnStone:e}})}},{key:"addJobSpecificSuggestions",value:function(){var t=this.getDropCountForStatus(this.data.statuses.VERFIRE_READY.id),e=this.getInvulnCountForStatus(this.data.statuses.VERFIRE_READY.id),a=this.getOverwriteCountForStatus(this.data.statuses.VERFIRE_READY.id),i=this.getDropCountForStatus(this.data.statuses.VERSTONE_READY.id),s=this.getInvulnCountForStatus(this.data.statuses.VERSTONE_READY.id),n=this.getOverwriteCountForStatus(this.data.statuses.VERSTONE_READY.id);this.suggestions.add(new I.eg({icon:t>i?this.data.actions.VERFIRE.icon:this.data.actions.VERSTONE.icon,content:this.getMissedProcContent(t,i),tiers:pe,value:t+i,why:this.getMissedProcWhy(t,i)})),this.suggestions.add(new I.eg({icon:a>n?this.data.actions.VERFIRE.icon:this.data.actions.VERSTONE.icon,content:this.getOverwrittenProcContent(a,n),tiers:ge,value:a+n,why:this.getOverwrittenProcWhy(a,n)})),this.suggestions.add(new I.eg({icon:e>s?this.data.actions.VERFIRE.icon:this.data.actions.VERSTONE.icon,content:this.getInvulnProcContent(e,s),tiers:ve,value:e+s,why:this.getInvulnProcWhy(e,s)}))}},{key:"output",value:function(){var t,e,a=this,i=ie()(t=h()(e=this.getInvulnsForStatus(this.data.statuses.VERFIRE_READY.id)).call(e,this.getInvulnsForStatus(this.data.statuses.VERSTONE_READY.id))).call(t,(function(t,e){return t.timestamp-e.timestamp}));if(0!==i.length)return(0,x.jsxs)(T.Fragment,{children:[(0,x.jsx)(w.Trans,{id:"rdm.procs.invulnlist.preface",defaults:"Each of the bullets below is the chronological order of procs wasted on an invulnerable boss"}),(0,x.jsx)("ul",{children:p()(i).call(i,(function(t){var e;return(0,x.jsxs)("li",{children:[(0,x.jsx)("strong",{children:a.parser.formatEpochTimestamp(t.timestamp)}),": ",null===(e=a.data.getAction(t.action))||void 0===e?void 0:e.name," - ",(0,x.jsx)("strong",{children:(0,x.jsx)(w.Trans,{id:"rdm.procs.invuln.target",defaults:"Target"})}),": ",a.actors.get(t.target).name]},t.timestamp)}))})]})}}]),a}(me.Q);fe.title={id:"rdm.procs.title",defaults:"Proc Issues"};var Ee,be,ye,we,Re,ke,Ie,Te=a(48523),xe=(Ee=Reflect.metadata("design:type",z.Z),be=Reflect.metadata("design:type",re.e),Ie=ke=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){var t,i;(0,n.Z)(this,a);for(var s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=e.call.apply(e,h()(t=[this]).call(t,o)),(0,V.Z)(i,"downtime",we,(0,_.Z)(i)),(0,V.Z)(i,"actors",Re,(0,_.Z)(i)),i.accelerationActions=[i.data.actions.VERTHUNDER_III,i.data.actions.VERAERO_III,i.data.actions.IMPACT],i.suggestionContent=(0,x.jsx)(w.Trans,{id:"rdm.swiftcast.suggestion.content",defaults:"Spells used while <0/> is up should be limited to <1/>, <2/>, or <3/>",components:[(0,x.jsx)(P.P9,{status:"SWIFTCAST"}),(0,x.jsx)(P.P9,{action:"VERAERO_III"}),(0,x.jsx)(P.P9,{action:"VERTHUNDER_III"}),(0,x.jsx)(P.P9,{action:"VERRAISE"})]}),i}return(0,o.Z)(a,[{key:"considerSwiftAction",value:function(t){var e,i,s=null!==(e=null==t?void 0:t.castTime)&&void 0!==e?e:0;return s>0?!(!this.downtime.isDowntime()&&s<=U.b||this.actors.current.hasStatus(this.data.statuses.ACCELERATION.id)&&y()(i=this.accelerationActions).call(i,t)):(0,r.Z)((0,l.Z)(a.prototype),"considerSwiftAction",this).call(this,t)}}]),a}(Te.t),ke.displayOrder=5,ye=Ie,we=(0,F.Z)(ye.prototype,"downtime",[W.I,Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),Re=(0,F.Z)(ye.prototype,"actors",[W.I,be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),ye),Ae=function(t){(0,c.Z)(a,t);var e=(0,u.Z)(a);function a(){return(0,n.Z)(this,a),e.apply(this,arguments)}return a}(a(45715).x);Ae.displayOrder=4;var Ce=[i.e,Q,Jt,Kt,g,L,K,$,tt,fe,A,he,s.J,xe,Ae]}}]);
//# sourceMappingURL=jobs-rdm.0b49f8e6.js.map
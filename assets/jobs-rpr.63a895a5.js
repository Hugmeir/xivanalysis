(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[4348],{50925:function(t,e,a){t.exports=a(75838)},61806:function(t,e,a){"use strict";a.d(e,{E:function(){return K}});var i,n,s,o,r,l,c,u,d,h,p,v,f=a(97530),g=a(19623),m=a(99021),E=a(23257),y=a(68420),I=a(27344),S=a(5281),A=a(90306),w=a(50596),Z=a(300),R=a(77766),b=a.n(R),T=a(39392),O=a.n(T),k=a(36384),C=a.n(k),x=a(20116),N=a.n(x),G=a(80426),L=a.n(G),j=a(94473),_=a.n(j),H=a(2991),M=a.n(H),U=a(86359),D=a(28683),P=a(76704),W=a(8510),B=a(81336),V=a(73947),F=a(56611),z=(a(67294),a(45150)),Y=a(40753),q="ActionTimeline-module_chargeGain__3-Of9",X="ActionTimeline-module_icon__8OvsF",J=a(85893);!function(t){t[t.CHARGE_GAIN=0]="CHARGE_GAIN",t[t.ACTION=1]="ACTION"}(v||(v={}));var K=(i=Reflect.metadata("design:type",W.Z),n=Reflect.metadata("design:type",B.w),s=Reflect.metadata("design:type",V.V),o=Reflect.metadata("design:type",F.TY),p=h=function(t){(0,A.Z)(a,t);var e=(0,w.Z)(a);function a(){var t,i;(0,y.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,b()(t=[this]).call(t,s)),(0,E.Z)(i,"castTime",l,(0,S.Z)(i)),(0,E.Z)(i,"cooldowns",c,(0,S.Z)(i)),(0,E.Z)(i,"data",u,(0,S.Z)(i)),(0,E.Z)(i,"timeline",d,(0,S.Z)(i)),i.resolvedRows=[],i.groupRows=new(O()),i}return(0,I.Z)(a,[{key:"getRow",value:function(t){return this.addRow({content:[t]})}},{key:"initialise",value:function(){var t,e=(0,m.Z)(this.constructor.rows);try{for(e.s();!(t=e.n()).done;){var a=t.value,i=this.resolveConfig(a);this.resolvedRows.push(i),this.addRow(i)}}catch(t){e.e(t)}finally{e.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t,e,a=this,i=new(C()),n=(0,m.Z)(this.resolvedRows);try{for(n.s();!(e=n.n()).done;){var s=e.value,o=this.addRow(s);this.populateRow(o,s),s.content.forEach((function(t){return a.cooldowns.groups(t).forEach((function(t){return i.add(t)}))}))}}catch(t){n.e(t)}finally{n.f()}N()(t=this.cooldowns.allGroups()).call(t,(function(t){return!i.has(t)})).forEach((function(t){var e={content:[t]},i=a.addRow(e);a.populateRow(i,e)}))}},{key:"resolveConfig",value:function(t){var e=t;return("object"!==(0,g.Z)(e)||Array.isArray(e))&&(e={content:e}),(0,f.Z)((0,f.Z)({},e),{},{content:(0,Y.rY)(e.content)})}},{key:"addRow",value:function(t){var e,a,i=this,n=L()(e=t.content).call(e,(function(t){return i.cooldowns.groups(t)})),s=_()(a=M()(n).call(n,(function(t){return i.groupRows.get(t)}))).call(a,Y.$K);if(null!=s)return s;var o,r=t.content[0],l=null!=t.label?t.label:"GCD"===r?(0,J.jsx)(U.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof r?i.data.actions[r].name:"number"==typeof r?null===(o=i.cooldowns.cooldownHistory(r)[0])||void 0===o?void 0:o.action.name:r.name,c=this.timeline.addRow(new F.vo({label:l,order:t.order,collapse:!0}));return n.forEach((function(t){return i.groupRows.set(t,c)})),c}},{key:"populateRow",value:function(t,e){var a=this,i=e.content;this.addCooldownItems(t,L()(i).call(i,(function(t){return a.cooldowns.cooldownHistory(t)}))),this.addChargeItems(t,L()(i).call(i,(function(t){return a.cooldowns.chargeHistory(t)})))}},{key:"addCooldownItems",value:function(t,e){var a,i=(0,m.Z)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=this.getCooldownDuration(n),o=n.start-this.parser.pull.timestamp,r=o+s;t.addItem(new F.ct({start:o,end:r,content:(0,J.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(t){i.e(t)}finally{i.f()}}},{key:"addChargeItems",value:function(t,e){var a,i=(0,m.Z)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=n.delta<0?new F.tC({depth:v.ACTION,start:n.timestamp-this.parser.pull.timestamp,action:n.action}):new $({depth:v.CHARGE_GAIN,start:n.timestamp-this.parser.pull.timestamp});t.addItem(s)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getCooldownDuration",value:function(t){var e=t.end-t.start;if(t.endReason===B.g.EXPIRED){var a,i=null!==(a=this.castTime.forAction(t.action.id,t.start))&&void 0!==a?a:0;e=Math.max(e,i+100)}return e}}]),a}(D.qk),h.handle="actionTimeline",h.debug=!1,h.rows=[{content:"GCD",order:-97}],r=p,l=(0,Z.Z)(r.prototype,"castTime",[P.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),c=(0,Z.Z)(r.prototype,"cooldowns",[P.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),u=(0,Z.Z)(r.prototype,"data",[P.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,Z.Z)(r.prototype,"timeline",[P.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r),$=function(t){(0,A.Z)(a,t);var e=(0,w.Z)(a);function a(){var t,i;(0,y.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,b()(t=[this]).call(t,s))).Content=function(){return(0,J.jsx)("div",{className:q,children:(0,J.jsx)(z.Z,{name:"angle double up",className:X})})},i}return a}(F.Pp)},8510:function(t,e,a){"use strict";a.d(e,{Z:function(){return k}});var i,n,s,o,r,l,c,u=a(23257),d=a(68420),h=a(27344),p=a(5281),v=a(90306),f=a(50596),g=a(300),m=a(77766),E=a.n(m),y=a(20116),I=a.n(y),S=a(78580),A=a.n(S),w=a(28683),Z=a(74489),R=a(76704),b=a(73947),T=a(48453),O=1500,k=(i=Reflect.metadata("design:type",b.V),n=Reflect.metadata("design:type",T.a),c=l=function(t){(0,v.Z)(a,t);var e=(0,f.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return i=e.call.apply(e,E()(t=[this]).call(t,s)),(0,u.Z)(i,"data",o,(0,p.Z)(i)),(0,u.Z)(i,"speedAdjustments",r,(0,p.Z)(i)),i.castTimes=[],i.scIndex=null,i}return(0,h.Z)(a,[{key:"initialise",value:function(){var t=(0,Z.hX)().target(this.parser.actor.id).status(this.data.statuses.SWIFTCAST.id);this.addEventHook(t.type("statusApply"),this.onApplySwiftcast),this.addEventHook(t.type("statusRemove"),this.onRemoveSwiftcast)}},{key:"onApplySwiftcast",value:function(){this.scIndex=this.setInstantCastAdjustment()}},{key:"onRemoveSwiftcast",value:function(){this.reset(this.scIndex),this.scIndex=null}},{key:"setTimeAdjustment",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.currentEpochTimestamp,i=arguments.length>3?arguments[3]:void 0;return this.set({actions:t,adjustment:e,start:a,end:i,type:"time",affectsWhich:"cast"})}},{key:"setInstantCastAdjustment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,a=arguments.length>2?arguments[2]:void 0;return this.setPercentageAdjustment(t,0,"cast",e,a)}},{key:"setPercentageAdjustment",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cast",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.parser.currentEpochTimestamp,n=arguments.length>4?arguments[4]:void 0;return this.set({actions:t,adjustment:e,affectsWhich:a,start:i,end:n,type:"percentage"})}},{key:"set",value:function(t){return this.castTimes.push(t)-1}},{key:"reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;if(null!=t){var a=this.castTimes[t];a&&(a.end=e)}}},{key:"forEvent",value:function(t){return this.forAction(t.action,t.timestamp)}},{key:"recastForEvent",value:function(t){return this.recastForAction(t.action,t.timestamp)}},{key:"forAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return this.getAdjustedTime(t,e)}},{key:"recastForAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return this.getAdjustedTime(t,e,"recast")}},{key:"getAdjustedTime",value:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cast",n=I()(e=this.castTimes).call(e,(function(e){var n;return("all"===e.actions||A()(n=e.actions).call(n,t))&&e.start<=a&&(null==e.end||e.end>=a)&&("both"===e.affectsWhich||e.affectsWhich===i)})),s=this.data.getAction(t);if(null!=s){var o="recast"===i?null!=s.gcdRecast?s.gcdRecast:s.cooldown:s.castTime;if(null==o||"recast"===i&&o<=O)return o;null!=s.speedAttribute&&(o=this.speedAdjustments.getAdjustedDuration({duration:o,attribute:s.speedAttribute}));var r=0,l=0,c=1;n.forEach((function(t){"time"===t.type?(t.adjustment<0&&t.adjustment<r&&(r=t.adjustment),t.adjustment>0&&t.adjustment>l&&(l=t.adjustment)):"percentage"===t.type&&(c*=t.adjustment)}));var u=Math.max(o+l+r,0);if("recast"===i&&u<=O)return O;if(0===c)return 0;var d=u*c;return"recast"===i&&(d=Math.max(d,O)),10*Math.floor(d/10)}}}]),a}(w.qk),l.handle="castTime",s=c,o=(0,g.Z)(s.prototype,"data",[R.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),r=(0,g.Z)(s.prototype,"speedAdjustments",[R.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),s)},28101:function(t,e,a){"use strict";a.d(e,{O:function(){return X}});var i,n,s,o,r,l,c,u,d,h=a(97530),p=a(41420),v=a(23257),f=a(68420),g=a(27344),m=a(5281),E=a(90306),y=a(50596),I=a(300),S=a(77766),A=a.n(S),w=a(2991),Z=a.n(w),R=a(94473),b=a.n(R),T=a(36384),O=a.n(T),k=a(78580),C=a.n(k),x=a(50925),N=a.n(x),G=a(32366),L=a.n(G),j=a(86359),_=a(9263),H=a(95859),M=a(10110),U=a(74489),D=a(76704),P=a(52102),W=a(8437),B=a(56611),V=(a(67294),a(80967)),F=a(65927),z=a(28683),Y=a(73947),q=a(85893),X=(i=Reflect.metadata("design:type",Y.V),n=Reflect.metadata("design:type",P.ZP),s=Reflect.metadata("design:type",B.TY),d=u=function(t){(0,E.Z)(a,t);var e=(0,y.Z)(a);function a(){var t,i;(0,f.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,A()(t=[this]).call(t,s)),(0,v.Z)(i,"data",r,(0,m.Z)(i)),(0,v.Z)(i,"checklist",l,(0,m.Z)(i)),(0,v.Z)(i,"timeline",c,(0,m.Z)(i)),i.positionalResults=[],i.positionals=void 0,i}return(0,g.Z)(a,[{key:"initialise",value:function(){var t;this.addEventHook((0,U.hX)().source(this.parser.actor.id).type("damage").cause(this.data.matchCauseActionId(Z()(t=this.positionals).call(t,(function(t){return t.id})))),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){var e;if("action"===t.cause.type){var a=this.data.getAction(t.cause.action);if(null!=a){var i=b()(e=this.positionals).call(e,(function(t){return t===a}));if(null!=i){var n=this.getOrCreatePositionalResult(i);this.positionalHit(i,t.targets[0].bonusPercent)?n.hits.push(t):n.misses.push(t)}}}}},{key:"getOrCreatePositionalResult",value:function(t){var e,a=b()(e=this.positionalResults).call(e,(function(e){return e.positional===t}));return null==a&&(a={positional:t,hits:[],misses:[]},this.positionalResults.push(a)),a}},{key:"missedPositionalBonusPercents",value:function(t){var e=this.calculateBonusPercent((0,H.u2)(t),(0,H.gw)(t,[M.R4.COMBO],[]));return(0,p.Z)(new(O())([0,e]))}},{key:"positionalHit",value:function(t,e){var a;return!C()(a=this.missedPositionalBonusPercents(t)).call(a,e)}},{key:"calculateBonusPercent",value:function(t,e){return N()(100*(1-t/e))}},{key:"relativeTimestamp",value:function(t){return t-this.parser.pull.timestamp}},{key:"createTimelineButton",value:function(t){var e=this,a=this.relativeTimestamp(t);return(0,q.jsx)(V.Z,{circular:!0,compact:!0,icon:"time",size:"small",onClick:function(){return e.timeline.show(a,a)},content:this.parser.formatEpochTimestamp(t)})}},{key:"onComplete",value:function(){var t;0!==this.positionalResults.length&&this.checklist.add(new P.$9({name:(0,q.jsx)(j.Trans,{id:"core.positionals.checklist.title",defaults:"Hit your positionals"}),displayOrder:W.Z.POSITIONALS,description:(0,q.jsx)(j.Trans,{id:"core.positionals.checklist.description",defaults:"Melee DPS jobs have some skills that will do more damage when used from the rear or flank. Make sure you use those skills in the right position to do the most damage, or use <0/> when you are out of position.",components:[(0,q.jsx)(_.P9,{action:"TRUE_NORTH"})]}),requirements:Z()(t=this.positionalResults).call(t,this.positionalRequirement)}))}},{key:"positionalRequirement",value:function(t){var e,a,i=t.hits.length,n=i+t.misses.length,s=i/n*100;return new P.nb({name:(0,q.jsx)(_.vm,(0,h.Z)({},t.positional)),percent:s,weight:n,overrideDisplay:A()(e=A()(a="".concat(i," / ")).call(a,n," (")).call(e,s.toFixed(2),"%)")})}},{key:"output",value:function(){var t,e,a=this;if(0!==L()(t=this.positionalResults).call(t,(function(t,e){return t+e.misses.length}),0))return(0,q.jsxs)(F.Z,{compact:!0,unstackable:!0,celled:!0,textAlign:"center",children:[(0,q.jsx)(F.Z.Header,{children:(0,q.jsxs)(F.Z.Row,{children:[(0,q.jsx)(F.Z.HeaderCell,{children:(0,q.jsx)("strong",{children:(0,q.jsx)(j.Trans,{id:"core.ui.positionals-table.header.action",defaults:"Action"})})}),(0,q.jsx)(F.Z.HeaderCell,{children:(0,q.jsx)("strong",{children:(0,q.jsx)(j.Trans,{id:"core.ui.positionals-table.header.hits",defaults:"Hits"})})}),(0,q.jsx)(F.Z.HeaderCell,{children:(0,q.jsx)("strong",{children:(0,q.jsx)(j.Trans,{id:"core.ui.positionals-table.header.misses",defaults:"Misses"})})})]})}),(0,q.jsx)(F.Z.Body,{children:Z()(e=this.positionalResults).call(e,(function(t){var e,i=t.hits.length,n=t.misses.length,s=0===n;return(0,q.jsxs)(F.Z.Row,{children:[(0,q.jsx)(F.Z.Cell,{style:{whiteSpace:"nowrap"},children:(0,q.jsx)(_.vm,(0,h.Z)((0,h.Z)({},t.positional),{},{showName:!1}))}),(0,q.jsxs)(F.Z.Cell,{textAlign:"center",positive:s,negative:!s,children:[i,"/",n+i]}),(0,q.jsx)(F.Z.Cell,{textAlign:"left",children:Z()(e=t.misses).call(e,(function(t){return a.createTimelineButton(t.timestamp)}))})]},t.positional.id)}))})]})}}]),a}(z.qk),u.handle="positionals",u.title={id:"core.positionals.title",defaults:"Positionals"},u.displayOrder=W.Z.POSITIONALS,o=d,r=(0,I.Z)(o.prototype,"data",[D.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,I.Z)(o.prototype,"checklist",[D.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),c=(0,I.Z)(o.prototype,"timeline",[D.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),o)},32596:function(t,e,a){"use strict";a.d(e,{t:function(){return x}});var i,n,s,o,r,l,c,u=a(97530),d=a(41420),h=a(99021),p=a(23257),v=a(68420),f=a(27344),g=a(5281),m=a(90306),E=a(50596),y=a(300),I=a(77766),S=a.n(I),A=a(80426),w=a.n(A),Z=a(47302),R=a.n(Z),b=a(40753),T=a(28683),O=a(76704),k=a(73947),C=a(90577),x=(i=Reflect.metadata("design:type",k.V),n=Reflect.metadata("design:type",C.I),c=l=function(t){(0,m.Z)(a,t);var e=(0,E.Z)(a);function a(){var t,i;(0,v.Z)(this,a);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return i=e.call.apply(e,S()(t=[this]).call(t,s)),(0,p.Z)(i,"data",o,(0,g.Z)(i)),(0,p.Z)(i,"invulnerability",r,(0,g.Z)(i)),i.ft=function(t){return i.parser.formatEpochTimestamp(t,1)},i}return(0,f.Z)(a,[{key:"getUptime",value:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.actor,n="string"==typeof t?this.data.statuses[t]:t,s=(0,b.rY)(e),o=w()(s).call(s,(function(t){var e,s;return a.edgesForActor(t,null!==(e=null===(s=t.statusHistory.get(n.id))||void 0===s?void 0:s.get(i.id))&&void 0!==e?e:[])}));R()(o).call(o,(function(t,e){return t.timestamp-e.timestamp}));var r,l={uptime:0,depth:0,application:0},c=(0,h.Z)(o);try{for(c.s();!(r=c.n()).done;){var u,d,p,v=r.value;"apply"===v.side?(0===l.depth&&(l.application=v.timestamp),l.depth++):(l.depth--,0===l.depth&&(l.uptime+=v.timestamp-l.application)),this.debug(S()(u=S()(d=S()(p="Status ".concat(n.name," ")).call(p,v.side," at ")).call(d,this.ft(v.timestamp),", depth=")).call(u,l.depth))}}catch(t){c.e(t)}finally{c.f()}return l.uptime}},{key:"edgesForActor",value:function(t,e){var a,i,n,s=[],o=(0,h.Z)(e);try{for(o.s();!(n=o.n()).done;){var r,l=n.value;"statusApply"!==l.type?null!=a&&(s.push.apply(s,(0,d.Z)(this.splitRangeForInvulns(t,a.timestamp,l.timestamp))),a=void 0):(null!==(r=a)&&void 0!==r||(a=l),i=l)}}catch(t){o.e(t)}finally{o.f()}if(null!=a){var c,u,p=null===(c=this.data.getStatus(a.status))||void 0===c?void 0:c.duration,v=null==p?this.parser.currentEpochTimestamp:Math.min((null!==(u=i)&&void 0!==u?u:a).timestamp+p,this.parser.currentEpochTimestamp);s.push.apply(s,(0,d.Z)(this.splitRangeForInvulns(t,a.timestamp,v)))}return s}},{key:"splitRangeForInvulns",value:function(t,e,a){var i,n={apply:e,remove:a},s=[n],o=this.invulnerability.getWindows({start:e,end:a,actorFilter:function(e){return e.kind===t.kind},types:["invulnerable"]}),r=(0,h.Z)(o);try{for(r.s();!(i=r.n()).done;){var l,c,d,p,v,f,g,m,E,y,I,A=i.value;if(A.start<n.apply&&A.end>=n.apply)this.debug(S()(f=S()(g=S()(m="Start clip, [".concat(this.ft(n.apply),",")).call(m,this.ft(n.remove),"] -> [")).call(g,this.ft(A.end),",")).call(f,this.ft(n.remove),"]")),n.apply=A.end;else if(A.start<=n.remove&&A.end>n.remove)this.debug(S()(E=S()(y=S()(I="End clip, [".concat(this.ft(n.apply),",")).call(I,this.ft(n.remove),"] -> [")).call(y,this.ft(n.apply),",")).call(E,this.ft(A.start),"]")),n.remove=A.start;else if(!(A.start<n.apply||A.end>n.remove)){this.debug(S()(l=S()(c=S()(d=S()(p=S()(v="Split [".concat(this.ft(n.apply),",")).call(v,this.ft(n.remove),"] -> [")).call(p,this.ft(n.apply),",")).call(d,this.ft(A.start),"], [")).call(c,this.ft(A.end),",")).call(l,this.ft(n.remove),"]"));var Z=n;n=(0,u.Z)({},n),s.push(n),Z.remove=A.start,n.apply=A.end}}}catch(t){r.e(t)}finally{r.f()}return w()(s).call(s,(function(t){return[{side:"apply",timestamp:t.apply},{side:"remove",timestamp:t.remove}]}))}}]),a}(T.qk),l.handle="statuses",l.debug=!1,s=c,o=(0,y.Z)(s.prototype,"data",[O.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),r=(0,y.Z)(s.prototype,"invulnerability",[O.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),s)},90137:function(t,e,a){"use strict";a.d(e,{J:function(){return l}});var i=a(68420),n=a(90306),s=a(50596),o=a(77766),r=a.n(o),l=function(t){(0,n.Z)(a,t);var e=(0,s.Z)(a);function a(){var t,n;(0,i.Z)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(n=e.call.apply(e,r()(t=[this]).call(t,o))).buffStatus=n.data.statuses.MEDICATED,n}return a}(a(27596).x);l.handle="tincture",l.title={id:"core.tincture.title",defaults:"Tinctures"}},45715:function(t,e,a){"use strict";a.d(e,{x:function(){return F}});var i,n,s,o,r,l,c,u,d,h,p,v=a(41420),f=a(97530),g=a(23257),m=a(68420),E=a(27344),y=a(5281),I=a(90306),S=a(50596),A=a(300),w=a(77766),Z=a.n(w),R=a(20116),b=a.n(R),T=a(2991),O=a.n(T),k=a(86359),C=a(40090),x=a(71370),N=a(84626),G=a(28683),L=a(74489),j=a(76704),_=a(8510),H=a(73947),M=a(90577),U=a(52250),D=(a(67294),a(30919)),P=a(40753),W=a(85893),B={0:2,1e3:1,2500:0},V={1:U.bI.MEDIUM,5:U.bI.MAJOR},F=(i=Reflect.metadata("design:type",_.Z),n=Reflect.metadata("design:type",H.V),s=Reflect.metadata("design:type",M.I),o=Reflect.metadata("design:type",U.ZP),p=h=function(t){(0,I.Z)(a,t);var e=(0,S.Z)(a);function a(){var t,i;(0,m.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,Z()(t=[this]).call(t,s)),(0,g.Z)(i,"castTime",l,(0,y.Z)(i)),(0,g.Z)(i,"data",c,(0,y.Z)(i)),(0,g.Z)(i,"invulnerability",u,(0,y.Z)(i)),(0,g.Z)(i,"suggestions",d,(0,y.Z)(i)),i.suggestionIcon="https://xivapi.com/i/001000/001785.png",i.moduleLink=(0,W.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return i.parser.scrollTo(a.handle)},children:(0,W.jsx)(C.Z,{message:a.title})}),i.suggestionContent=(0,W.jsx)(k.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:i.moduleLink}}),i.severity=V,i.weaves=[],i.ongoingCastEvent=void 0,i.leadingGcdEvent=void 0,i.trailingGcdEvent=void 0,i.badWeaves=[],i}return(0,E.Z)(a,[{key:"initialise",value:function(){var t=(0,L.hX)().source(this.parser.actor.id);this.addEventHook(t.type("prepare"),this.onBeginCast),this.addEventHook(t.type("action"),this.onCast),this.addEventHook((0,L.hX)().type("complete"),this.onComplete),this.addEventHook((0,L.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(t){this.ongoingCastEvent=t}},{key:"onCast",value:function(t){var e=this.data.getAction(t.action);e&&!e.autoAttack&&(this.isOgcd(e)?this.weaves.push(t):(this.ongoingCastEvent&&this.ongoingCastEvent.action===e.id?this.trailingGcdEvent=(0,f.Z)((0,f.Z)({},t),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=t,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new U.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,W.jsx)(k.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var t,e;if(null!=this.trailingGcdEvent){var a=null!==(t=null===(e=this.leadingGcdEvent)||void 0===e?void 0:e.timestamp)&&void 0!==t?t:this.parser.pull.timestamp,i=this.trailingGcdEvent.timestamp-a-this.invulnerability.getDuration({start:a,end:this.trailingGcdEvent.timestamp}),n={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:i,weaves:this.weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this.badWeaves.push(n)}}},{key:"isOgcd",value:function(t){return!t.onGcd&&!t.autoAttack}},{key:"isBadWeave",value:function(t){var e,a,i=this,n=b()(e=t.weaves).call(e,(function(t){return!i.invulnerability.isActive({timestamp:t.timestamp,types:["untargetable"]})&&t.timestamp>=i.parser.pull.timestamp})).length,s=null!==(a=null!=t.leadingGcdEvent?this.castTime.recastForEvent(t.leadingGcdEvent):void 0)&&void 0!==a?a:N.b;return t.gcdTimeDiff>s&&n>this.getMaxWeaves(t)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(t){var e,a;if(null==t.leadingGcdEvent)return 2;var i=this.castTime.forEvent(t.leadingGcdEvent);return null==i?2:(null!==(e=(0,P.CL)(B,i))&&void 0!==e?e:2)-((null!==(a=this.castTime.recastForEvent(t.leadingGcdEvent))&&void 0!==a?a:N.b)<1800?1:0)}},{key:"output",value:function(){var t,e=this;if(0===this.badWeaves.length)return!1;var a=O()(t=this.badWeaves).call(t,(function(t){var a,i,n,s,o;return{key:null!==(a=null===(i=t.leadingGcdEvent)||void 0===i?void 0:i.timestamp)&&void 0!==a?a:e.parser.pull.timestamp,title:{content:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("strong",{children:e.parser.formatEpochTimestamp(null!==(n=null===(s=t.leadingGcdEvent)||void 0===s?void 0:s.timestamp)&&void 0!==n?n:e.parser.pull.timestamp)})," - ",(0,W.jsx)(k.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:t.weaves.length}})," (",e.parser.formatDuration(t.gcdTimeDiff)," ",(0,W.jsx)(k.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,W.jsx)(x.Z,{events:Z()(o=[]).call(o,(0,v.Z)(null!=t.leadingGcdEvent?[t.leadingGcdEvent]:[]),(0,v.Z)(t.weaves))})}}}));return(0,W.jsx)(D.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})}}]),a}(G.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},r=p,l=(0,A.Z)(r.prototype,"castTime",[j.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),c=(0,A.Z)(r.prototype,"data",[j.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,A.Z)(r.prototype,"invulnerability",[j.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),d=(0,A.Z)(r.prototype,"suggestions",[j.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),r)},43140:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return be}});var i,n=a(41420),s=a(68420),o=a(90306),r=a(50596),l=a(77766),c=a.n(l),u=a(86359),d=a(61806),h=(a(67294),a(85893)),p=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){return(0,s.Z)(this,a),e.apply(this,arguments)}return a}(d.E);p.rows=c()(i=[]).call(i,(0,n.Z)(d.E.rows),["ARCANE_CIRCLE","ENSHROUD",{label:(0,h.jsx)(u.Trans,{id:"rpr.actiontimeline.lemure",defaults:"Lemure"}),content:["LEMURES_SLICE","LEMURES_SCYTHE"]},{label:(0,h.jsx)(u.Trans,{id:"rpr.actiontimeline.bloodstalk",defaults:"Blood Stalk"}),content:["BLOOD_STALK","GRIM_SWATHE","UNVEILED_GALLOWS","UNVEILED_GIBBET"]},"GLUTTONY",{label:(0,h.jsx)(u.Trans,{id:"rpr.actiontimeline.movement",defaults:"Movement"}),content:["HELLS_INGRESS","REGRESS"]},"ARCANE_CREST"]);var v=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).suggestionIcon=i.data.actions.SPINNING_SCYTHE.icon,i.trackedActions=[{aoeAction:i.data.actions.SPINNING_SCYTHE,stActions:[i.data.actions.SLICE],minTargets:3},{aoeAction:i.data.actions.SOUL_SCYTHE,stActions:[i.data.actions.SOUL_SLICE],minTargets:3},{aoeAction:i.data.actions.WHORL_OF_DEATH,stActions:[i.data.actions.SHADOW_OF_DEATH],minTargets:3},{aoeAction:i.data.actions.GRIM_SWATHE,stActions:[i.data.actions.BLOOD_STALK],minTargets:3},{aoeAction:i.data.actions.GUILLOTINE,stActions:[i.data.actions.GALLOWS,i.data.actions.GIBBET],minTargets:3},{aoeAction:i.data.actions.LEMURES_SCYTHE,stActions:[i.data.actions.LEMURES_SLICE],minTargets:2},{aoeAction:i.data.actions.GRIM_REAPING,stActions:[i.data.actions.VOID_REAPING,i.data.actions.CROSS_REAPING],minTargets:3}],i}return a}(a(54106).C);v.displayOrder=50;var f=a(27344),g=a(18527),m=a(3362),E=a(9263),y=a(37517),I=a(52250),S=15e3,A={1:I.bI.MINOR,3:I.bI.MEDIUM,5:I.bI.MAJOR},w=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).buffStatus=i.data.statuses.ARCANE_CIRCLE,i}return(0,f.Z)(a,[{key:"initialise",value:function(){(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this),this.addEvaluator(new y.np({expectedActions:[{action:this.data.actions.COMMUNIO,expectedPerWindow:2},{action:this.data.actions.PLENTIFUL_HARVEST,expectedPerWindow:1}],suggestionIcon:this.data.actions.ARCANE_CIRCLE.icon,suggestionContent:(0,h.jsx)(u.Trans,{id:"rpr.arcanecircle.suggestions.content",defaults:"Each <0/> window should contain 2 uses of <1/>and 1 use of <2/>. In your opener, only 1 <3/> is expected.",components:[(0,h.jsx)(E.vm,{action:"ARCANE_CIRCLE"}),(0,h.jsx)(E.vm,{action:"COMMUNIO"}),(0,h.jsx)(E.vm,{action:"PLENTIFUL_HARVEST"}),(0,h.jsx)(E.vm,{showIcon:!1,action:"COMMUNIO"})]}),suggestionWindowName:(0,h.jsx)(E.vm,{action:"ARCANE_CIRCLE",showIcon:!1}),severityTiers:A,adjustCount:this.adjustCount.bind(this)}))}},{key:"adjustCount",value:function(t,e){var a=this.parser.pull.timestamp+this.parser.pull.duration-t.start;if(this.isRushedEndOfPullWindow(t)){if(a<8e3)switch(e.action){case this.data.actions.COMMUNIO:return-2;case this.data.actions.PLENTIFUL_HARVEST:return-1;default:return 0}if(e.action===this.data.actions.COMMUNIO)return-1}return e.action!==this.data.actions.COMMUNIO?0:t.start-S<=this.parser.pull.timestamp?-1:0}}]),a}(y.ug);w.handle="arcaneCircle",w.title={id:"rpr.arcanecircle.title",defaults:"Arcane Circle"},w.displayOrder=2;var Z=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).suggestionIcon=i.data.actions.WAXING_SLICE.icon,i}return a}(a(47969).G);Z.displayOrder=51;var R,b,T,O,k,C,x,N,G,L,j,_,H,M,U,D,P,W,B,V,F=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).trackedCds=[{cooldowns:[i.data.actions.ARCANE_CIRCLE],firstUseOffset:5e3},{cooldowns:[i.data.actions.SOUL_SLICE,i.data.actions.SOUL_SCYTHE],firstUseOffset:4e3},{cooldowns:[i.data.actions.GLUTTONY],firstUseOffset:22500}],i}return a}(a(48945).u),z=a(97530),Y=a(23257),q=a(5281),X=a(300),J=a(6767),K=a.n(J),$=a(43719),Q=a(74489),tt=a(76704),et=a(70273),at=a(32690),it=a(78766),nt=.25,st=["VOID_REAPING","CROSS_REAPING","GRIM_REAPING","COMMUNIO"],ot=["LEMURES_SLICE","LEMURES_SCYTHE"],rt=(R=Reflect.metadata("design:type",et.e),b=Reflect.metadata("design:type",at.Z),x=C=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,Y.Z)(i,"actors",O,(0,q.Z)(i)),(0,Y.Z)(i,"brokenLog",k,(0,q.Z)(i)),i.lemureShroud=i.add(new it.qT({maximum:0,correctHistory:!0,graph:{label:"Lemure Shroud",color:K()($.W.PALADIN.colour).fade(nt),collapse:!0}})),i.voidShroud=i.add(new it.qT({maximum:0,correctHistory:!0,graph:{label:"Void Shroud",color:K()($.W.REAPER.colour).fade(nt),collapse:!0}})),i}return(0,f.Z)(a,[{key:"initialise",value:function(){(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this);var t=(0,Q.hX)().source(this.parser.actor.id);this.addEventHook(t.type("statusApply").status(this.data.statuses.ENSHROUDED.id),this.onEnshroud),this.addEventHook(t.type("statusRemove").status(this.data.statuses.ENSHROUDED.id),this.onDeshroud),this.addEventHook(t.type("action").action(this.data.matchActionId(st)),this.onLemure),this.addEventHook(t.type("action").action(this.data.matchActionId(ot)),this.onVoid),this.addEventHook("complete",this.onDeshroud)}},{key:"onEnshroud",value:function(){this.lemureShroud.setMaximum(5),this.lemureShroud.generate(5),this.voidShroud.setMaximum(4)}},{key:"onDeshroud",value:function(){this.lemureShroud.reset(),this.lemureShroud.setMaximum(0),this.voidShroud.reset(),this.voidShroud.setMaximum(0)}},{key:"onLemure",value:function(t){var e=this.data.getAction(t.action);null!=e&&this.actors.current.hasStatus(this.data.statuses.ENSHROUDED.id)&&(e.id===this.data.actions.COMMUNIO.id&&this.lemureShroud.value>0?this.lemureShroud.set(0,"spend"):(this.lemureShroud.spend(1),this.voidShroud.generate(1),this.lemureShroud.value+this.voidShroud.value>5&&this.brokenLog.trigger(this,"rpr.gauge.lemure.outofbounds",(0,h.jsx)(u.Trans,{id:"rpr.gauge.lemure.outofbounds.reason",defaults:"<0/> can't be executed with {0} stacks of Lemure's Shroud and {1} stacks of Void Shroud as this would go over the shared gauge max.",values:{0:this.lemureShroud.value,1:this.voidShroud.value},components:[(0,h.jsx)(E.vm,(0,z.Z)({},e))]}))))}},{key:"onVoid",value:function(){this.actors.current.hasStatus(this.data.statuses.ENSHROUDED.id)&&this.voidShroud.spend(2)}}]),a}(it.aC),C.handle="deathGauge",T=x,O=(0,X.Z)(T.prototype,"actors",[tt.I,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),k=(0,X.Z)(T.prototype,"brokenLog",[tt.I,b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.brokenLog}}),T),lt=a(28683),ct=a(52102),ut=a(73947),dt=a(90577),ht=a(32596),pt={95:ct.hI.SUCCESS},vt=(N=Reflect.metadata("design:type",et.e),G=Reflect.metadata("design:type",ct.ZP),L=Reflect.metadata("design:type",ut.V),j=Reflect.metadata("design:type",dt.I),_=Reflect.metadata("design:type",ht.t),V=B=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,Y.Z)(i,"actors",M,(0,q.Z)(i)),(0,Y.Z)(i,"checklist",U,(0,q.Z)(i)),(0,Y.Z)(i,"data",D,(0,q.Z)(i)),(0,Y.Z)(i,"invulnerability",P,(0,q.Z)(i)),(0,Y.Z)(i,"statuses",W,(0,q.Z)(i)),i}return(0,f.Z)(a,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"getUptimePercent",value:function(){return this.statuses.getUptime(this.data.statuses.DEATHS_DESIGN,this.actors.foes)/(this.parser.pull.duration-this.invulnerability.getDuration({types:["invulnerable"]}))*100}},{key:"onComplete",value:function(){var t=this;this.checklist.add(new ct.dV({name:(0,h.jsx)(u.Trans,{id:"rpr.deathsdesign.rule.name",defaults:"Keep <0/> up",components:[(0,h.jsx)(E.P9,{status:"DEATHS_DESIGN"})]}),description:(0,h.jsx)(u.Trans,{id:"rpr.deathsdesign.rule.description",defaults:"Death's Design increases all damage you deal to the target by 10%. Aim to keep this debuff up at all times."}),tiers:pt,requirements:[new ct.nb({name:(0,h.jsx)(u.Trans,{id:"rpr.deathsdesign.requirement.uptime.name",defaults:"<0/> uptime",components:[(0,h.jsx)(E.P9,{status:"DEATHS_DESIGN"})]}),percent:function(){return t.getUptimePercent()}})]}))}}]),a}(lt.qk),B.handle="deathsdesign",H=V,M=(0,X.Z)(H.prototype,"actors",[tt.I,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),U=(0,X.Z)(H.prototype,"checklist",[tt.I,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),D=(0,X.Z)(H.prototype,"data",[tt.I,L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),P=(0,X.Z)(H.prototype,"invulnerability",[tt.I,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),W=(0,X.Z)(H.prototype,"statuses",[tt.I,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statuses}}),H),ft=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).trackedDefensives=[i.data.actions.ARCANE_CREST],i}return a}(a(12541).O),gt=a(99021),mt=a(2991),Et=a.n(mt),yt=a(73905),It=a(45150),St={1:I.bI.MINOR,3:I.bI.MEDIUM,5:I.bI.MAJOR},At=["CROSS_REAPING","VOID_REAPING","GRIM_REAPING","LEMURES_SLICE","LEMURES_SCYTHE","COMMUNIO"],wt=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(t){var i;return(0,s.Z)(this,a),(i=e.call(this)).header={header:(0,h.jsx)(u.Trans,{id:"rpr.enshroud.enhanced.header",defaults:"Alternated Reapings"}),accessor:"enhanced"},i.data=void 0,i.data=t,i}return(0,f.Z)(a,[{key:"generateNotes",value:function(t){return this.didReapingsAlternate(t)?(0,h.jsx)(It.Z,{name:"checkmark",className:"text-success"}):(0,h.jsx)(It.Z,{name:"remove",className:"text-error"})}},{key:"didReapingsAlternate",value:function(t){var e,a=void 0,i=(0,gt.Z)(t.data);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.action===this.data.actions.VOID_REAPING||n.action===this.data.actions.CROSS_REAPING){if(a===n.action)return!1;a=n.action}}}catch(t){i.e(t)}finally{i.f()}return!0}}]),a}(y.qt),Zt=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).buffStatus=i.data.statuses.ENSHROUDED,i}return(0,f.Z)(a,[{key:"initialise",value:function(){var t=this;(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this),this.trackOnlyActions(Et()(At).call(At,(function(e){return t.data.actions[e].id}))),this.addEvaluator(new y.Np({expectedActionGroups:[{actions:[this.data.actions.CROSS_REAPING,this.data.actions.VOID_REAPING,this.data.actions.GRIM_REAPING],expectedPerWindow:4},{actions:[this.data.actions.LEMURES_SLICE,this.data.actions.LEMURES_SCYTHE],expectedPerWindow:2},{actions:[this.data.actions.COMMUNIO],expectedPerWindow:1}],suggestionIcon:this.data.actions.ENSHROUD.icon,suggestionContent:(0,h.jsx)(u.Trans,{id:"rpr.enshroud.suggestions.content",defaults:"Each <0/> window should contain 2 uses each of <1/>, <2/>, and <3/> (or their AoE equivalents), and 1 use of <4/>.",components:[(0,h.jsx)(E.vm,{action:"ENSHROUD"}),(0,h.jsx)(E.vm,{action:"CROSS_REAPING"}),(0,h.jsx)(E.vm,{action:"VOID_REAPING"}),(0,h.jsx)(E.vm,{action:"LEMURES_SLICE"}),(0,h.jsx)(E.vm,{action:"COMMUNIO"})]}),suggestionWindowName:(0,h.jsx)(E.vm,{action:"ENSHROUD",showIcon:!1}),severityTiers:St,adjustOutcome:this.adjustOutcome.bind(this)})),this.addEvaluator(new wt(this.data))}},{key:"adjustOutcome",value:function(t,e){if(e.actions[0]===this.data.actions.CROSS_REAPING)return function(t,e){return t===e?yt.m.POSITIVE:yt.m.NEGATIVE}}}]),a}(y.xl);Zt.handle="enshroud",Zt.title={id:"rpr.enshroud.title",defaults:"Enshroud"},Zt.displayOrder=3;var Rt,bt,Tt,Ot,kt,Ct,xt,Nt,Gt,Lt,jt,_t,Ht,Mt,Ut,Dt,Pt,Wt,Bt=a(20116),Vt=a.n(Bt),Ft=a(3085),zt=(Rt=Reflect.metadata("design:type",ct.ZP),bt=Reflect.metadata("design:type",ut.V),Tt=Reflect.metadata("design:type",dt.I),Ot=Reflect.metadata("design:type",Ft.b),jt=Lt=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,Y.Z)(i,"checklist",Ct,(0,q.Z)(i)),(0,Y.Z)(i,"data",xt,(0,q.Z)(i)),(0,Y.Z)(i,"invulnerability",Nt,(0,q.Z)(i)),(0,Y.Z)(i,"unableToAct",Gt,(0,q.Z)(i)),i.moons=0,i}return(0,f.Z)(a,[{key:"initialise",value:function(){var t=this;(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,Q.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.HARVEST_MOON.id),(function(){return t.moons++})),this.addEventHook("complete",this.onComplete)}},{key:"getExpectedUses",value:function(){var t,e=this,a=this.data.actions.SOULSOW.castTime+1e3,i=Vt()(t=this.invulnerability.getWindows()).call(t,(function(t){return t.end-t.start>=a}));return this.unableToAct.getDuration({start:this.parser.pull.timestamp,end:this.parser.pull.timestamp+this.parser.pull.duration})>0?Vt()(i).call(i,(function(t){return e.canChargeMoon(t)})).length+1:i.length+1}},{key:"canChargeMoon",value:function(t){var e=this.data.actions.SOULSOW.castTime+1e3,a=this.unableToAct.getWindows(t)[0];return null==a?t.end-t.start>=e:a.start-t.start>=e||this.canChargeMoon({start:a.end,end:t.end})}},{key:"onComplete",value:function(){var t,e,a=this.getExpectedUses(),i=this.getUsedPercentage(a);this.checklist.add(new ct.$9({name:(0,h.jsx)(u.Trans,{id:"rpr.harvestmoon.checklist.title",defaults:"Use <0/> and <1/>",components:[(0,h.jsx)(E.P9,{action:"SOULSOW"}),(0,h.jsx)(E.P9,{action:"HARVEST_MOON"})]}),description:(0,h.jsx)(u.Trans,{id:"rpr.harvestmoon.checklist.description",defaults:"<0/> is one of your highest damage abilities. Aim to use <1/> pre-pull to guarantee at least one <2/> in the fight. If any downtime is long enough to cast <3/> again, you can get additional uses of <4/>.",components:[(0,h.jsx)(E.P9,{action:"HARVEST_MOON"}),(0,h.jsx)(E.P9,{action:"SOULSOW"}),(0,h.jsx)(E.P9,{showIcon:!1,action:"HARVEST_MOON"}),(0,h.jsx)(E.P9,{action:"SOULSOW"}),(0,h.jsx)(E.P9,{showIcon:!1,action:"HARVEST_MOON"})]}),requirements:[new ct.nb({name:(0,h.jsx)(u.Trans,{id:"rpr.harvestmoon.checklist.requirement.name",defaults:"<0/> uses",components:[(0,h.jsx)(E.P9,{action:"HARVEST_MOON"})]}),overrideDisplay:c()(t=c()(e="".concat(this.moons," / ")).call(e,a," (")).call(t,i,"%)"),percent:i})],target:100}))}},{key:"getUsedPercentage",value:function(t){return(this.moons/t*100).toFixed(2)}}]),a}(lt.qk),Lt.handle="harvestMoon",kt=jt,Ct=(0,X.Z)(kt.prototype,"checklist",[tt.I,Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),xt=(0,X.Z)(kt.prototype,"data",[tt.I,bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Nt=(0,X.Z)(kt.prototype,"invulnerability",[tt.I,Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),Gt=(0,X.Z)(kt.prototype,"unableToAct",[tt.I,Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.unableToAct}}),kt),Yt=a(39392),qt=a.n(Yt),Xt=a(66419),Jt=a.n(Xt),Kt=a(69301),$t=a.n(Kt),Qt={10:I.bI.MINOR,30:I.bI.MEDIUM,50:I.bI.MAJOR},te=["GIBBET","GALLOWS","GUILLOTINE","PLENTIFUL_HARVEST","ENSHROUD"],ee=.25,ae=(_t=Reflect.metadata("design:type",et.e),Ht=Reflect.metadata("design:type",I.ZP),Wt=Pt=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,Y.Z)(i,"actors",Ut,(0,q.Z)(i)),(0,Y.Z)(i,"suggestions",Dt,(0,q.Z)(i)),i.soulGauge=i.add(new it.qT({graph:{label:"Soul Gauge",color:K()($.W.WARRIOR.colour).fade(ee),collapse:!0}})),i.shroudGauge=i.add(new it.qT({graph:{label:"Shroud Gauge",color:K()($.W.BLUE_MAGE.colour).fade(ee),collapse:!0}})),i.soulGaugeModifiers=new(qt())([[i.data.actions.SLICE.id,{action:10}],[i.data.actions.WAXING_SLICE.id,{combo:10}],[i.data.actions.INFERNAL_SLICE.id,{combo:10}],[i.data.actions.SPINNING_SCYTHE.id,{action:10}],[i.data.actions.NIGHTMARE_SCYTHE.id,{combo:10}],[i.data.actions.SOUL_SLICE.id,{action:50}],[i.data.actions.SOUL_SCYTHE.id,{action:50}],[i.data.actions.BLOOD_STALK.id,{action:-50}],[i.data.actions.GRIM_SWATHE.id,{action:-50}],[i.data.actions.UNVEILED_GIBBET.id,{action:-50}],[i.data.actions.UNVEILED_GALLOWS.id,{action:-50}],[i.data.actions.GLUTTONY.id,{action:-50}]]),i}return(0,f.Z)(a,[{key:"initialise",value:function(){var t,e;(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this);var i=(0,Q.hX)().source(this.parser.actor.id),n=(0,Q.hX)().actor((0,Q.kw)(Et()(t=this.actors.foes).call(t,(function(t){return t.id})))),s=Jt()($t()(e=this.soulGaugeModifiers).call(e));this.addEventHook(i.type((0,Q.kw)(["action","combo"])).action((0,Q.kw)(s)),this.onSoulModifier),this.addEventHook(n.type("death"),this.onFoeDeath),this.addEventHook(i.type("action").action(this.data.matchActionId(te)),this.onShroudModifier),this.addEventHook("complete",this.onComplete)}},{key:"onFoeDeath",value:function(t){this.actors.get(t.actor).at(t.timestamp-100).hasStatus(this.data.statuses.DEATHS_DESIGN.id)&&this.soulGauge.generate(10)}},{key:"onSoulModifier",value:function(t){var e=this.soulGaugeModifiers.get(t.action);if(null!=e){var a,i=null!==(a=e[t.type])&&void 0!==a?a:0;this.soulGauge.modify(i)}}},{key:"onShroudModifier",value:function(t){var e=this.data.getAction(t.action);if(null!=e)switch(e.id){case this.data.actions.ENSHROUD.id:this.shroudGauge.spend(50);break;case this.data.actions.PLENTIFUL_HARVEST.id:this.shroudGauge.generate(50);break;default:this.shroudGauge.generate(10)}}},{key:"onComplete",value:function(){this.suggestions.add(new I.eg({icon:this.data.actions.SOUL_SLICE.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.gauge.soul.suggestions.overcap.content",defaults:"Avoid letting your Soul gauge overcap. The wasted resources cost you Shroud generation which you need for your highest damage skills."}),why:(0,h.jsx)(u.Trans,{id:"rpr.gauge.soul.suggestions.overcap.why",defaults:"{0} Souls lost to overcapping Soul gauge.",values:{0:this.soulGauge.overCap}}),tiers:Qt,value:this.soulGauge.overCap})),this.suggestions.add(new I.eg({icon:this.data.actions.PLENTIFUL_HARVEST.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.gauge.shroud.suggestions.overcap.content",defaults:"Avoid letting your Shroud gauge overcap as it can cost you uses of <0/> over the fight.",components:[(0,h.jsx)(E.P9,{action:"ENSHROUD"})]}),why:(0,h.jsx)(u.Trans,{id:"rpr.gauge.shroud.suggestions.overcap.why",defaults:"{0} Shrouds lost to overcapping Shroud gauge.",values:{0:this.shroudGauge.overCap}}),tiers:Qt,value:this.shroudGauge.overCap}))}}]),a}(it.aC),Pt.handle="otherGauges",Mt=Wt,Ut=(0,X.Z)(Mt.prototype,"actors",[tt.I,_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),Dt=(0,X.Z)(Mt.prototype,"suggestions",[tt.I,Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Mt),ie=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).positionals=[i.data.actions.GIBBET,i.data.actions.GALLOWS],i}return a}(a(28101).O);ie.displayOrder=52;var ne,se,oe,re,le,ce,ue,de,he,pe=a(24950),ve={EXPIRED:{1:I.bI.MEDIUM,2:I.bI.MAJOR},OVERWRITTEN:{1:I.bI.MINOR,5:I.bI.MEDIUM}},fe=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).badStalks=0,i.showProcTimelineRow=!1,i.trackedProcs=[{procStatus:i.data.statuses.ENHANCED_GALLOWS,consumeActions:[i.data.actions.GALLOWS]},{procStatus:i.data.statuses.ENHANCED_GIBBET,consumeActions:[i.data.actions.GIBBET]},{procStatus:i.data.statuses.ENHANCED_CROSS_REAPING,consumeActions:[i.data.actions.CROSS_REAPING]},{procStatus:i.data.statuses.ENHANCED_VOID_REAPING,consumeActions:[i.data.actions.VOID_REAPING]}],i}return(0,f.Z)(a,[{key:"initialise",value:function(){var t=this;(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,Q.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.BLOOD_STALK.id),(function(){return t.badStalks++}))}},{key:"addJobSpecificSuggestions",value:function(){var t,e,a=this.getOverwriteCountForStatus(this.data.statuses.ENHANCED_GIBBET.id),i=this.getOverwriteCountForStatus(this.data.statuses.ENHANCED_GALLOWS.id),n=this.getDropCountForStatus(this.data.statuses.ENHANCED_GIBBET.id),s=this.getDropCountForStatus(this.data.statuses.ENHANCED_GALLOWS.id),o=this.badStalks-n,r=this.badStalks-s;o+r!==this.badStalks&&this.debug(c()(t=c()(e="Mismatched bloodstalks to lost enhanced procs: ".concat(this.badStalks," stalks: Gibbet ")).call(e,o," + Gallows ")).call(t,r)),this.suggestions.add(new I.eg({icon:this.data.actions.GIBBET.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.overwritten.gibbet.content",defaults:"Avoid overwriting Enhanced <0/> with an unenhanced <1/>. Each overwrite is the same as losing a positional, and quickly adds up.",components:[(0,h.jsx)(E.P9,{showIcon:!1,action:"GIBBET"}),(0,h.jsx)(E.P9,{showIcon:!1,action:"GALLOWS"})]}),tiers:ve.OVERWRITTEN,value:a,why:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.overwritten.gibbet.why",defaults:"{0} potency lost due to overwriting procs.",values:{0:60*a}})})),this.suggestions.add(new I.eg({icon:this.data.actions.GALLOWS.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.overwritten.gallows.content",defaults:"Avoid overwriting Enhanced <0/> with an unenhanced <1/>. Each overwrite is the same as losing a positional, and quickly adds up.",components:[(0,h.jsx)(E.P9,{showIcon:!1,action:"GALLOWS"}),(0,h.jsx)(E.P9,{showIcon:!1,action:"GIBBET"})]}),tiers:ve.OVERWRITTEN,value:i,why:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.overwritten.gallows.why",defaults:"{0} potency lost due to overwriting procs.",values:{0:60*i}})})),this.suggestions.add(new I.eg({icon:this.data.actions.GIBBET.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.expired.gibbet.content",defaults:"Avoid letting Enhanced  <0/> expire. On top of the lost potency itself, you're also losing the potency from <1/> if <2/> hasn't given you extra stacks of <3/>.",components:[(0,h.jsx)(E.P9,{showIcon:!1,action:"GIBBET"}),(0,h.jsx)(E.P9,{action:"UNVEILED_GALLOWS"}),(0,h.jsx)(E.P9,{action:"GLUTTONY"}),(0,h.jsx)(E.P9,{status:"SOUL_REAVER"})]}),tiers:ve.EXPIRED,value:n,why:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.expired.gibbet.why",defaults:"{0} potency lost to letting {expiredGibbet, plural, one {an Enhanced Gibbet proc} other {Enhanced Gibbet procs}} expire.",values:{0:60*(n+o),expiredGibbet:n}})})),this.suggestions.add(new I.eg({icon:this.data.actions.GALLOWS.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.expired.gallows.content",defaults:"Avoid letting Enhanced  <0/> expire. On top of the lost potency itself, you're also losing the potency from <1/> if <2/> hasn't given you extra stacks of <3/>.",components:[(0,h.jsx)(E.P9,{showIcon:!1,action:"GALLOWS"}),(0,h.jsx)(E.P9,{action:"UNVEILED_GIBBET"}),(0,h.jsx)(E.P9,{action:"GLUTTONY"}),(0,h.jsx)(E.P9,{status:"SOUL_REAVER"})]}),tiers:ve.EXPIRED,value:s,why:(0,h.jsx)(u.Trans,{id:"rpr.procs.suggestions.expired.gallows.why",defaults:"{0} potency lost to letting {expiredGallows, plural, one {an Enhanced Gallows proc} other {Enhanced Gallows procs}} expire.",values:{0:60*(s+r),expiredGallows:s}})}))}}]),a}(pe.Q);fe.title={id:"rpr.procs.title",defaults:"Enhanced Procs"},fe.debug=!1;var ge={1:I.bI.MEDIUM,2:I.bI.MAJOR},me=["GLUTTONY","BLOOD_STALK","GRIM_SWATHE","UNVEILED_GALLOWS","UNVEILED_GIBBET"],Ee=["SLICE","WAXING_SLICE","INFERNAL_SLICE","SHADOW_OF_DEATH","WHORL_OF_DEATH","SOUL_SLICE","SOUL_SCYTHE","SOULSOW","HARVEST_MOON","HARPE","NIGHTMARE_SCYTHE","SPINNING_SCYTHE","PLENTIFUL_HARVEST"],ye=["GALLOWS","GIBBET","GUILLOTINE"],Ie=(ne=Reflect.metadata("design:type",ut.V),se=Reflect.metadata("design:type",I.ZP),oe=Reflect.metadata("design:type",et.e),he=de=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,Y.Z)(i,"data",le,(0,q.Z)(i)),(0,Y.Z)(i,"suggestions",ce,(0,q.Z)(i)),(0,Y.Z)(i,"actors",ue,(0,q.Z)(i)),i.droppedReavers=0,i.currentReaverStacks=0,i}return(0,f.Z)(a,[{key:"initialise",value:function(){(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this);var t=(0,Q.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action").action(this.data.matchActionId(me)),this.onGain),this.addEventHook(t.type("action").action(this.data.matchActionId(ye)),this.onUse),this.addEventHook(t.type("action").action(this.data.matchActionId(Ee)),this.dropStacks),this.addEventHook((0,Q.hX)().type("death").actor(this.parser.actor.id),this.dropStacks),this.addEventHook("complete",this.onComplete)}},{key:"onGain",value:function(t){this.actors.current.hasStatus(this.data.statuses.SOUL_REAVER.id)&&this.dropStacks(),this.currentReaverStacks=t.action===this.data.actions.GLUTTONY.id?2:1}},{key:"onUse",value:function(){this.actors.current.hasStatus(this.data.statuses.SOUL_REAVER.id)&&this.currentReaverStacks--}},{key:"dropStacks",value:function(){this.droppedReavers+=this.currentReaverStacks,this.currentReaverStacks=0}},{key:"onComplete",value:function(){this.suggestions.add(new I.eg({icon:this.data.actions.GLUTTONY.icon,content:(0,h.jsx)(u.Trans,{id:"rpr.reaver.suggestion.dropped.content",defaults:"Avoid dropping <0/> by using <1/>, <2/>, or <3/>. These actions have high damage and grant you 10 Shroud gauge, giving you more chances to use <4/> over the course of a fight.",components:[(0,h.jsx)(E.P9,{status:"SOUL_REAVER"}),(0,h.jsx)(E.P9,{action:"GALLOWS"}),(0,h.jsx)(E.P9,{action:"GIBBET"}),(0,h.jsx)(E.P9,{action:"GUILLOTINE"}),(0,h.jsx)(E.P9,{action:"ENSHROUD"})]}),tiers:ge,why:(0,h.jsx)(u.Trans,{id:"rpr.reaver.suggestion.dropped.why",defaults:"You lost {0, plural, one {# stack} other {# stacks}} over the course of the fight.",values:{0:this.droppedReavers}}),value:this.droppedReavers}))}}]),a}(lt.qk),de.handle="reaver",re=he,le=(0,X.Z)(re.prototype,"data",[tt.I,ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),ce=(0,X.Z)(re.prototype,"suggestions",[tt.I,se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),ue=(0,X.Z)(re.prototype,"actors",[tt.I,oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),re),Se=a(90137),Ae={1:I.bI.MINOR,2:I.bI.MEDIUM},we=["ARCANE_CREST","ARMS_LENGTH","BLOODBATH","FEINT","HELLS_EGRESS","HELLS_INGRESS","REGRESS","SECOND_WIND"],Ze=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).adjustExpectedActionCount=function(t){return t.start-S<=i.parser.pull.timestamp?-1:0},i}return(0,f.Z)(a,[{key:"initialise",value:function(){var t=this;(0,g.Z)((0,m.Z)(a.prototype),"initialise",this).call(this),this.ignoreActions(Et()(we).call(we,(function(e){return t.data.actions[e].id}))),this.addEvaluator(new y.np({expectedActions:[{action:this.data.actions.COMMUNIO,expectedPerWindow:2}],suggestionIcon:this.data.actions.INFUSION_STR.icon,suggestionContent:(0,h.jsx)(u.Trans,{id:"rpr.tincture.suggestions.trackedActions.content",defaults:"Try to fit two uses of <0/> while under the effects of a Tincture.",components:[(0,h.jsx)(E.P9,{action:"COMMUNIO"})]}),suggestionWindowName:(0,h.jsx)(E.P9,{action:"INFUSION_STR",showIcon:!1}),severityTiers:Ae,adjustCount:this.adjustExpectedActionCount}))}}]),a}(Se.J);Ze.displayOrder=55;var Re=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){return(0,s.Z)(this,a),e.apply(this,arguments)}return a}(a(45715).x);Re.displayOrder=53;var be=[p,v,w,Z,F,vt,rt,ft,Zt,zt,ae,ie,fe,Ie,Ze,Re]},9179:function(t,e,a){a(18103);var i=a(54058);t.exports=i.Math.trunc},18103:function(t,e,a){var i=a(76887),n=Math.ceil,s=Math.floor;i({target:"Math",stat:!0},{trunc:function(t){return(t>0?s:n)(t)}})},75838:function(t,e,a){var i=a(9179);t.exports=i}}]);
//# sourceMappingURL=jobs-rpr.63a895a5.js.map
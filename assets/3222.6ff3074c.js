"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[3222],{8510:function(t,e,i){i.d(e,{Z:function(){return I}});var n,s,a,r,c,o,u,l=i(23257),d=i(68420),h=i(27344),p=i(5281),m=i(90306),v=i(50596),f=i(300),g=i(77766),_=i.n(g),j=i(20116),y=i.n(j),x=i(78580),S=i.n(x),Z=i(28683),k=i(74489),A=i(76704),w=i(73947),T=i(48453),b=1500,I=(n=Reflect.metadata("design:type",w.V),s=Reflect.metadata("design:type",T.a),u=o=function(t){(0,m.Z)(i,t);var e=(0,v.Z)(i);function i(){var t,n;(0,d.Z)(this,i);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return n=e.call.apply(e,_()(t=[this]).call(t,a)),(0,l.Z)(n,"data",r,(0,p.Z)(n)),(0,l.Z)(n,"speedAdjustments",c,(0,p.Z)(n)),n.castTimes=[],n.scIndex=null,n}return(0,h.Z)(i,[{key:"initialise",value:function(){var t=(0,k.hX)().target(this.parser.actor.id).status(this.data.statuses.SWIFTCAST.id);this.addEventHook(t.type("statusApply"),this.onApplySwiftcast),this.addEventHook(t.type("statusRemove"),this.onRemoveSwiftcast)}},{key:"onApplySwiftcast",value:function(){this.scIndex=this.setInstantCastAdjustment()}},{key:"onRemoveSwiftcast",value:function(){this.reset(this.scIndex),this.scIndex=null}},{key:"setTimeAdjustment",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.currentEpochTimestamp,n=arguments.length>3?arguments[3]:void 0;return this.set({actions:t,adjustment:e,start:i,end:n,type:"time",affectsWhich:"cast"})}},{key:"setInstantCastAdjustment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,i=arguments.length>2?arguments[2]:void 0;return this.setPercentageAdjustment(t,0,"cast",e,i)}},{key:"setPercentageAdjustment",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cast",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.parser.currentEpochTimestamp,s=arguments.length>4?arguments[4]:void 0;return this.set({actions:t,adjustment:e,affectsWhich:i,start:n,end:s,type:"percentage"})}},{key:"set",value:function(t){return this.castTimes.push(t)-1}},{key:"reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;if(null!=t){var i=this.castTimes[t];i&&(i.end=e)}}},{key:"forEvent",value:function(t){return this.forAction(t.action,t.timestamp)}},{key:"recastForEvent",value:function(t){return this.recastForAction(t.action,t.timestamp)}},{key:"forAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return this.getAdjustedTime(t,e)}},{key:"recastForAction",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp;return this.getAdjustedTime(t,e,"recast")}},{key:"getAdjustedTime",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentEpochTimestamp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cast",s=y()(e=this.castTimes).call(e,(function(e){var s;return("all"===e.actions||S()(s=e.actions).call(s,t))&&e.start<=i&&(null==e.end||e.end>=i)&&("both"===e.affectsWhich||e.affectsWhich===n)})),a=this.data.getAction(t);if(null!=a){var r="recast"===n?null!=a.gcdRecast?a.gcdRecast:a.cooldown:a.castTime;if(null==r||"recast"===n&&r<=b)return r;null!=a.speedAttribute&&(r=this.speedAdjustments.getAdjustedDuration({duration:r,attribute:a.speedAttribute}));var c=0,o=0,u=1;s.forEach((function(t){"time"===t.type?(t.adjustment<0&&t.adjustment<c&&(c=t.adjustment),t.adjustment>0&&t.adjustment>o&&(o=t.adjustment)):"percentage"===t.type&&(u*=t.adjustment)}));var l=Math.max(r+o+c,0);if("recast"===n&&l<=b)return b;if(0===u)return 0;var d=l*u;return"recast"===n&&(d=Math.max(d,b)),10*Math.floor(d/10)}}}]),i}(Z.qk),o.handle="castTime",a=u,r=(0,f.Z)(a.prototype,"data",[A.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),c=(0,f.Z)(a.prototype,"speedAdjustments",[A.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),a)},58267:function(t,e,i){i.d(e,{h:function(){return a}});var n=i(68420),s=(i(67294),i(85893)),a=function t(e){(0,n.Z)(this,t),this.Content=void 0,this.Info=void 0,this.width=void 0,this.height=void 0,this.width=e.width,this.height=e.height,e.info&&(this.Info=function(){return(0,s.jsx)(s.Fragment,{children:e.info})})}},51422:function(t,e,i){i.d(e,{vA:function(){return R},IC:function(){return k},gy:function(){return S}});var n=i(68420),s=i(27344),a=i(90306),r=i(50596),c=i(77766),o=i.n(c),u=i(2991),l=i.n(u),d=i(28683),h=i(67294),p=i(8437),m=i(94184),v=i.n(m),f=i(45150),g=i(59261),_={gutter:"20px",sm:"(min-width: 576px)",lg:"(min-width: 992px)",xl:"(min-width: 1340px)",themeBackground:"var(--background)",themeBlue:"#2185d0",statistics:"Statistics-module_statistics__1Bk5V",statistic:"Statistics-module_statistic__2-U_7",span1:"Statistics-module_span1__1YnR2",span2:"Statistics-module_span2__11j6f",span3:"Statistics-module_span3__1qvL5",span4:"Statistics-module_span4__1k2Iu",info:"Statistics-module_info__123Ar",infoIcon:"Statistics-module_infoIcon__95qnY"},j=i(85893),y={1:"span1",2:"span2",3:"span3",4:"span4"},x=function(t){(0,a.Z)(i,t);var e=(0,r.Z)(i);function i(){return(0,n.Z)(this,i),e.apply(this,arguments)}return(0,s.Z)(i,[{key:"render",value:function(){var t=this.props.statistic,e=y[t.width||1],i=(0,j.jsxs)("div",{className:v()(_.statistic,_[e]),style:{gridRowEnd:"span ".concat(t.height||1)},children:[(0,j.jsx)(t.Content,{}),t.Info&&(0,j.jsx)("div",{className:_.info,children:(0,j.jsx)(f.Z,{name:"info",className:_.infoIcon})})]});return t.Info?(0,j.jsx)(g.Z,{trigger:i,content:(0,j.jsx)(t.Info,{}),position:"bottom center",wide:"very"}):i}}]),i}(h.PureComponent),S=function(t){(0,a.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,s;(0,n.Z)(this,i);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(s=e.call.apply(e,o()(t=[this]).call(t,r))).statistics=[],s}return(0,s.Z)(i,[{key:"add",value:function(t){this.statistics.push(t)}},{key:"output",value:function(){var t;return!!this.statistics.length&&(0,j.jsx)("div",{className:_.statistics,children:l()(t=this.statistics).call(t,(function(t,e){return(0,j.jsx)(x,{statistic:t},e)}))})}}]),i}(d.qk);S.handle="statistics",S.title={id:"core.statistics.title",defaults:"Statistics"},S.displayOrder=p.Z.STATISTICS,S.displayMode=d.d1.RAW;var Z=i(58267),k=function(t){(0,a.Z)(i,t);var e=(0,r.Z)(i);function i(t){var s;return(0,n.Z)(this,i),(s=e.call(this,t)).title=void 0,s.icon=void 0,s.value=void 0,s.Content=function(){return(0,j.jsxs)("div",{className:"SimpleStatistic-module_simpleStatistic__2uROS",children:[(0,j.jsxs)("div",{className:"SimpleStatistic-module_titleWrapper__BBWB4",children:[s.icon&&(0,j.jsx)("img",{src:s.icon,className:"SimpleStatistic-module_icon__1E0wK"}),(0,j.jsx)("div",{className:"SimpleStatistic-module_title__1UZdX",children:s.title})]}),(0,j.jsx)("div",{className:"SimpleStatistic-module_value__2UUte",children:s.value})]})},s.title=t.title,s.icon=t.icon,s.value=t.value,s}return i}(Z.h),A=i(97530),w=i(82492),T=i.n(w),b=i(32366),I=i.n(b),C=i(46799),E={responsive:!1,legend:{display:!1},tooltips:{enabled:!1}},N="#888",R=function(t){(0,a.Z)(i,t);var e=(0,r.Z)(i);function i(t){var s;return(0,n.Z)(this,i),(s=e.call(this,(0,A.Z)((0,A.Z)({},t),{},{width:t.width||2}))).headings=void 0,s.data=void 0,s.options=void 0,s.Content=function(){var t,e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"PieChartStatistic-module_chartWrapper__1TgDl",children:(0,j.jsx)(C.by,{width:80,height:80,data:s.chartData,options:s.options})}),(0,j.jsxs)("table",{className:"PieChartStatistic-module_legend__2r-Ln",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{}),l()(t=s.headings).call(t,(function(t,e){return(0,j.jsx)("th",{children:t},e)}))]})}),(0,j.jsx)("tbody",{children:l()(e=s.data).call(e,(function(t,e){var i;return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsx)("span",{className:"PieChartStatistic-module_swatch__3GvsV",style:{backgroundColor:t.color||N}})}),l()(i=t.columns).call(i,(function(t,e){return(0,j.jsx)("td",{children:t},e)}))]},e)}))})]})]})},s.headings=t.headings,s.data=t.data,s.options=T()(E,t.options),s}return(0,s.Z)(i,[{key:"chartData",get:function(){var t;return{datasets:[I()(t=this.data).call(t,(function(t,e){return t.data.push(e.value),t.backgroundColor.push(e.color||N),t}),{data:[],backgroundColor:[]})]}}}]),i}(Z.h)}}]);
//# sourceMappingURL=3222.6ff3074c.js.map
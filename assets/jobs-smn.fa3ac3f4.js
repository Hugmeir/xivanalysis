"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[8571],{61806:function(t,e,a){a.d(e,{E:function(){return J}});var i,n,s,o,r,l,d,u,c,h,m,p,v=a(97530),f=a(19623),g=a(99021),y=a(23257),I=a(68420),w=a(27344),E=a(5281),R=a(90306),A=a(50596),T=a(300),N=a(77766),Z=a.n(N),k=a(39392),S=a.n(k),b=a(36384),C=a.n(b),_=a(20116),x=a.n(_),G=a(80426),M=a.n(G),j=a(94473),O=a.n(j),H=a(2991),P=a.n(H),L=a(86359),U=a(28683),D=a(76704),B=a(8510),F=a(81336),Y=a(73947),z=a(56611),W=(a(67294),a(45150)),V=a(40753),X="ActionTimeline-module_chargeGain__3-Of9",K="ActionTimeline-module_icon__8OvsF",q=a(85893);!function(t){t[t.CHARGE_GAIN=0]="CHARGE_GAIN",t[t.ACTION=1]="ACTION"}(p||(p={}));var J=(i=Reflect.metadata("design:type",B.Z),n=Reflect.metadata("design:type",F.w),s=Reflect.metadata("design:type",Y.V),o=Reflect.metadata("design:type",z.TY),m=h=function(t){(0,R.Z)(a,t);var e=(0,A.Z)(a);function a(){var t,i;(0,I.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,Z()(t=[this]).call(t,s)),(0,y.Z)(i,"castTime",l,(0,E.Z)(i)),(0,y.Z)(i,"cooldowns",d,(0,E.Z)(i)),(0,y.Z)(i,"data",u,(0,E.Z)(i)),(0,y.Z)(i,"timeline",c,(0,E.Z)(i)),i.resolvedRows=[],i.groupRows=new(S()),i}return(0,w.Z)(a,[{key:"getRow",value:function(t){return this.addRow({content:[t]})}},{key:"initialise",value:function(){var t,e=(0,g.Z)(this.constructor.rows);try{for(e.s();!(t=e.n()).done;){var a=t.value,i=this.resolveConfig(a);this.resolvedRows.push(i),this.addRow(i)}}catch(t){e.e(t)}finally{e.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t,e,a=this,i=new(C()),n=(0,g.Z)(this.resolvedRows);try{for(n.s();!(e=n.n()).done;){var s=e.value,o=this.addRow(s);this.populateRow(o,s),s.content.forEach((function(t){return a.cooldowns.groups(t).forEach((function(t){return i.add(t)}))}))}}catch(t){n.e(t)}finally{n.f()}x()(t=this.cooldowns.allGroups()).call(t,(function(t){return!i.has(t)})).forEach((function(t){var e={content:[t]},i=a.addRow(e);a.populateRow(i,e)}))}},{key:"resolveConfig",value:function(t){var e=t;return("object"!==(0,f.Z)(e)||Array.isArray(e))&&(e={content:e}),(0,v.Z)((0,v.Z)({},e),{},{content:(0,V.rY)(e.content)})}},{key:"addRow",value:function(t){var e,a,i=this,n=M()(e=t.content).call(e,(function(t){return i.cooldowns.groups(t)})),s=O()(a=P()(n).call(n,(function(t){return i.groupRows.get(t)}))).call(a,V.$K);if(null!=s)return s;var o,r=t.content[0],l=null!=t.label?t.label:"GCD"===r?(0,q.jsx)(L.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof r?i.data.actions[r].name:"number"==typeof r?null===(o=i.cooldowns.cooldownHistory(r)[0])||void 0===o?void 0:o.action.name:r.name,d=this.timeline.addRow(new z.vo({label:l,order:t.order,collapse:!0}));return n.forEach((function(t){return i.groupRows.set(t,d)})),d}},{key:"populateRow",value:function(t,e){var a=this,i=e.content;this.addCooldownItems(t,M()(i).call(i,(function(t){return a.cooldowns.cooldownHistory(t)}))),this.addChargeItems(t,M()(i).call(i,(function(t){return a.cooldowns.chargeHistory(t)})))}},{key:"addCooldownItems",value:function(t,e){var a,i=(0,g.Z)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=this.getCooldownDuration(n),o=n.start-this.parser.pull.timestamp,r=o+s;t.addItem(new z.ct({start:o,end:r,content:(0,q.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(t){i.e(t)}finally{i.f()}}},{key:"addChargeItems",value:function(t,e){var a,i=(0,g.Z)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=n.delta<0?new z.tC({depth:p.ACTION,start:n.timestamp-this.parser.pull.timestamp,action:n.action}):new $({depth:p.CHARGE_GAIN,start:n.timestamp-this.parser.pull.timestamp});t.addItem(s)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getCooldownDuration",value:function(t){var e=t.end-t.start;if(t.endReason===F.g.EXPIRED){var a,i=null!==(a=this.castTime.forAction(t.action.id,t.start))&&void 0!==a?a:0;e=Math.max(e,i+100)}return e}}]),a}(U.qk),h.handle="actionTimeline",h.debug=!1,h.rows=[{content:"GCD",order:-97}],r=m,l=(0,T.Z)(r.prototype,"castTime",[D.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),d=(0,T.Z)(r.prototype,"cooldowns",[D.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),u=(0,T.Z)(r.prototype,"data",[D.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),c=(0,T.Z)(r.prototype,"timeline",[D.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r),$=function(t){(0,R.Z)(a,t);var e=(0,A.Z)(a);function a(){var t,i;(0,I.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,Z()(t=[this]).call(t,s))).Content=function(){return(0,q.jsx)("div",{className:X,children:(0,q.jsx)(W.Z,{name:"angle double up",className:K})})},i}return a}(z.Pp)},17982:function(t,e,a){a.d(e,{k:function(){return _}});var i,n,s,o,r,l,d,u,c,h=a(23257),m=a(68420),p=a(27344),v=a(5281),f=a(90306),g=a(50596),y=a(300),I=a(77766),w=a.n(I),E=a(2991),R=a.n(E),A=a(20116),T=a.n(A),N=a(28683),Z=a(74489),k=a(76704),S=a(61806),b=a(73947),C=a(56611),_=(i=Reflect.metadata("design:type",b.V),n=Reflect.metadata("design:type",C.TY),s=Reflect.metadata("design:type",S.E),c=u=function(t){(0,f.Z)(a,t);var e=(0,g.Z)(a);function a(){var t,i;(0,m.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,w()(t=[this]).call(t,s)),(0,h.Z)(i,"data",r,(0,v.Z)(i)),(0,h.Z)(i,"timeline",l,(0,v.Z)(i)),(0,h.Z)(i,"actionTimeline",d,(0,v.Z)(i)),i.timelineGroupName="Pet",i.timelineSummonAction=void 0,i.timelineAutosName="Autos",i.timelineCommandsName="Commands",i.canPetBeCommanded=!1,i.autoCasts=[],i.commandCasts=[],i}return(0,p.Z)(a,[{key:"isCommandedEvent",value:function(t){return!1}},{key:"initialise",value:function(){var t,e,a=this,i=R()(t=T()(e=this.parser.pull.actors).call(e,(function(t){return null!=t.owner&&t.owner.id===a.parser.actor.id}))).call(t,(function(t){return t.id}));this.addEventHook((0,Z.hX)().type("action").source((0,Z.kw)(i)),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){this.isCommandedEvent(t)?this.commandCasts.push(t):this.autoCasts.push(t)}},{key:"onComplete",value:function(){var t;if(this.canPetBeCommanded){var e=this.timeline.addRow(new C.e2({label:this.timelineGroupName,order:-98}));t=e.addRow(new C.e2({label:this.timelineAutosName,order:1}));var a=e.addRow(new C.e2({label:this.timelineCommandsName,order:2}));this.addCastsToRow(a,this.commandCasts)}else if(null!=this.timelineSummonAction){var i=this.data.getAction(this.timelineSummonAction);if(null==i)throw new Error("Timeline summon action set to an invalid action ID");t=this.actionTimeline.getRow(i).addRow(new C.e2({label:this.timelineGroupName,order:-98}))}else t=this.timeline.addRow(new C.e2({label:this.timelineGroupName,order:-98}));this.addCastsToRow(t,this.autoCasts)}},{key:"addCastsToRow",value:function(t,e){var a=this;e.forEach((function(e){var i=a.data.getAction(e.action);if(null!=i){var n=e.timestamp-a.parser.pull.timestamp;t.addItem(new C.tC({action:i,start:n,end:n}))}}))}}]),a}(N.qk),u.handle="pettimeline",o=c,r=(0,y.Z)(o.prototype,"data",[k.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,y.Z)(o.prototype,"timeline",[k.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),d=(0,y.Z)(o.prototype,"actionTimeline",[k.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actionTimeline}}),o)},45715:function(t,e,a){a.d(e,{x:function(){return z}});var i,n,s,o,r,l,d,u,c,h,m,p=a(41420),v=a(97530),f=a(23257),g=a(68420),y=a(27344),I=a(5281),w=a(90306),E=a(50596),R=a(300),A=a(77766),T=a.n(A),N=a(20116),Z=a.n(N),k=a(2991),S=a.n(k),b=a(86359),C=a(40090),_=a(71370),x=a(84626),G=a(28683),M=a(74489),j=a(76704),O=a(8510),H=a(73947),P=a(90577),L=a(52250),U=(a(67294),a(30919)),D=a(40753),B=a(85893),F={0:2,1e3:1,2500:0},Y={1:L.bI.MEDIUM,5:L.bI.MAJOR},z=(i=Reflect.metadata("design:type",O.Z),n=Reflect.metadata("design:type",H.V),s=Reflect.metadata("design:type",P.I),o=Reflect.metadata("design:type",L.ZP),m=h=function(t){(0,w.Z)(a,t);var e=(0,E.Z)(a);function a(){var t,i;(0,g.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,T()(t=[this]).call(t,s)),(0,f.Z)(i,"castTime",l,(0,I.Z)(i)),(0,f.Z)(i,"data",d,(0,I.Z)(i)),(0,f.Z)(i,"invulnerability",u,(0,I.Z)(i)),(0,f.Z)(i,"suggestions",c,(0,I.Z)(i)),i.suggestionIcon="https://xivapi.com/i/001000/001785.png",i.moduleLink=(0,B.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return i.parser.scrollTo(a.handle)},children:(0,B.jsx)(C.Z,{message:a.title})}),i.suggestionContent=(0,B.jsx)(b.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:i.moduleLink}}),i.severity=Y,i.weaves=[],i.ongoingCastEvent=void 0,i.leadingGcdEvent=void 0,i.trailingGcdEvent=void 0,i.badWeaves=[],i}return(0,y.Z)(a,[{key:"initialise",value:function(){var t=(0,M.hX)().source(this.parser.actor.id);this.addEventHook(t.type("prepare"),this.onBeginCast),this.addEventHook(t.type("action"),this.onCast),this.addEventHook((0,M.hX)().type("complete"),this.onComplete),this.addEventHook((0,M.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(t){this.ongoingCastEvent=t}},{key:"onCast",value:function(t){var e=this.data.getAction(t.action);e&&!e.autoAttack&&(this.isOgcd(e)?this.weaves.push(t):(this.ongoingCastEvent&&this.ongoingCastEvent.action===e.id?this.trailingGcdEvent=(0,v.Z)((0,v.Z)({},t),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=t,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new L.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,B.jsx)(b.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var t,e;if(null!=this.trailingGcdEvent){var a=null!==(t=null===(e=this.leadingGcdEvent)||void 0===e?void 0:e.timestamp)&&void 0!==t?t:this.parser.pull.timestamp,i=this.trailingGcdEvent.timestamp-a-this.invulnerability.getDuration({start:a,end:this.trailingGcdEvent.timestamp}),n={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:i,weaves:this.weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this.badWeaves.push(n)}}},{key:"isOgcd",value:function(t){return!t.onGcd&&!t.autoAttack}},{key:"isBadWeave",value:function(t){var e,a,i=this,n=Z()(e=t.weaves).call(e,(function(t){return!i.invulnerability.isActive({timestamp:t.timestamp,types:["untargetable"]})&&t.timestamp>=i.parser.pull.timestamp})).length,s=null!==(a=null!=t.leadingGcdEvent?this.castTime.recastForEvent(t.leadingGcdEvent):void 0)&&void 0!==a?a:x.b;return t.gcdTimeDiff>s&&n>this.getMaxWeaves(t)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(t){var e,a;if(null==t.leadingGcdEvent)return 2;var i=this.castTime.forEvent(t.leadingGcdEvent);return null==i?2:(null!==(e=(0,D.CL)(F,i))&&void 0!==e?e:2)-((null!==(a=this.castTime.recastForEvent(t.leadingGcdEvent))&&void 0!==a?a:x.b)<1800?1:0)}},{key:"output",value:function(){var t,e=this;if(0===this.badWeaves.length)return!1;var a=S()(t=this.badWeaves).call(t,(function(t){var a,i,n,s,o;return{key:null!==(a=null===(i=t.leadingGcdEvent)||void 0===i?void 0:i.timestamp)&&void 0!==a?a:e.parser.pull.timestamp,title:{content:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("strong",{children:e.parser.formatEpochTimestamp(null!==(n=null===(s=t.leadingGcdEvent)||void 0===s?void 0:s.timestamp)&&void 0!==n?n:e.parser.pull.timestamp)})," - ",(0,B.jsx)(b.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:t.weaves.length}})," (",e.parser.formatDuration(t.gcdTimeDiff)," ",(0,B.jsx)(b.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,B.jsx)(_.Z,{events:T()(o=[]).call(o,(0,p.Z)(null!=t.leadingGcdEvent?[t.leadingGcdEvent]:[]),(0,p.Z)(t.weaves))})}}}));return(0,B.jsx)(U.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})}}]),a}(G.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},r=m,l=(0,R.Z)(r.prototype,"castTime",[j.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),d=(0,R.Z)(r.prototype,"data",[j.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,R.Z)(r.prototype,"invulnerability",[j.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),c=(0,R.Z)(r.prototype,"suggestions",[j.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),r)},92740:function(t,e,a){a.r(e),a.d(e,{default:function(){return fe}});var i,n=a(48989),s=a(17982),o=a(90137),r=a(45715),l=a(41420),d=a(68420),u=a(90306),c=a(50596),h=a(77766),m=a.n(h),p=a(61806),v=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){return(0,d.Z)(this,a),e.apply(this,arguments)}return a}(p.E);v.rows=m()(i=[]).call(i,(0,l.Z)(p.E.rows),["SMN_MOUNTAIN_BUSTER",{label:"Energy Drain/Siphon",content:"SMN_ENERGY_DRAIN"},"FESTER","PAINFLARE",{label:"Demi",content:"SUMMON_BAHAMUT"},"DEATHFLARE","ENKINDLE_BAHAMUT","ENKINDLE_PHOENIX","REKINDLE","SEARING_LIGHT","RADIANT_AEGIS"]);var f,g,y,I,w,E,R,A,T,N,Z,k,S,b,C,_,x,G,M,j,O,H,P,L,U,D,B,F,Y=a(23257),z=a(27344),W=a(5281),V=a(18527),X=a(3362),K=a(300),q=a(32366),J=a.n(q),$=a(72119),Q=a.n($),tt=a(20116),et=a.n(tt),at=a(86359),it=a(9263),nt=a(28683),st=a(74489),ot=a(76704),rt=a(19914),lt=a(73947),dt=a(52250),ut=(a(67294),a(85893)),ct=["SMN_ENERGY_DRAIN","ENERGY_SIPHON"],ht=["FESTER","PAINFLARE"],mt=["RUIN_III","TRI_DISASTER"],pt=(f=Reflect.metadata("design:type",lt.V),g=Reflect.metadata("design:type",dt.ZP),R=E=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,m()(t=[this]).call(t,s)),(0,Y.Z)(i,"data",I,(0,W.Z)(i)),(0,Y.Z)(i,"suggestions",w,(0,W.Z)(i)),i.history=new rt.A((function(){return{aetherflowRemaining:2,fillerCount:0,usedRuin4:!1}})),i}return(0,z.Z)(a,[{key:"initialise",value:function(){(0,V.Z)((0,X.Z)(a.prototype),"initialise",this).call(this);var t=(0,st.hX)().source(this.parser.actor.id);this.addEventHook(t.action(this.data.matchActionId(ct)).type("action"),this.onGenerator),this.addEventHook(t.action(this.data.matchActionId(ht)).type("action"),this.onSpender),this.addEventHook(t.action(this.data.matchActionId(mt)).type("action"),this.onFiller),this.addEventHook(t.action(this.data.actions.RUIN_IV.id).type("action"),this.onRuin4),this.addEventHook("complete",this.onComplete)}},{key:"onGenerator",value:function(t){this.history.openNew(t.timestamp)}},{key:"onSpender",value:function(){this.history.doIfOpen((function(t){t.aetherflowRemaining>0&&(t.aetherflowRemaining-=1)}))}},{key:"onFiller",value:function(){this.history.doIfOpen((function(t){return t.fillerCount+=1}))}},{key:"onRuin4",value:function(){this.history.doIfOpen((function(t){return t.usedRuin4=!0}))}},{key:"onComplete",value:function(){var t,e,a,i;this.history.closeCurrent(this.parser.pull.timestamp+this.parser.pull.duration);var n=J()(t=Q()(this.history)).call(t,(function(t,e){return t+e.data.aetherflowRemaining}),0);n>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.SMN_ENERGY_DRAIN.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.aetherflow.lost-aetherflow.content",defaults:"Ensure you gain a full 2 stacks of Aetherflow per cast. Every lost stack is a significant potency loss."}),severity:dt.bI.MAJOR,why:(0,ut.jsx)(at.Trans,{id:"smn.aetherflow.lost-aetherflow.why",defaults:"{lostAetherflow, plural, one {# stack} other {# stacks}} of Aetherflow lost.",values:{lostAetherflow:n}})}));var s=et()(e=Q()(this.history)).call(e,(function(t){return t.data.fillerCount>0&&!t.data.usedRuin4})).length;s&&this.suggestions.add(new dt.q$({icon:this.data.actions.RUIN_IV.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.aetherflow.lost-ruin4.content",defaults:"Prefer using Ruin 4 instead of Ruin 3 or Tri-disaster. You may need to hold the Ruin 4 for movement, but it should be used before the next<0/> or <1/> cast.",components:[(0,ut.jsx)(it.vm,{action:"SMN_ENERGY_DRAIN"}),(0,ut.jsx)(it.vm,{action:"ENERGY_SIPHON"})]}),severity:dt.bI.MAJOR,why:(0,ut.jsx)(at.Trans,{id:"smn.aetherflow.lost-ruin4.why",defaults:"{wastedR4, plural, one {# cast} other {# casts}} of Ruin 4 lost.",values:{wastedR4:s}})}));var o=J()(a=et()(i=Q()(this.history)).call(i,(function(t){return t.data.fillerCount>2}))).call(a,(function(t,e){return t+e.data.fillerCount-2}),0);o>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.RUIN_III.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.aetherflow.extra-ruin3.content",defaults:"Use Ruin 4, summon skills, and their related skills to keep the number of Ruin 3 or Tri-disaster casts per minute below {0}.",values:{0:3}}),severity:dt.bI.MAJOR,why:(0,ut.jsx)(at.Trans,{id:"smn.aetherflow.extra-ruin3.why",defaults:"{extraR3, plural, one {# extra cast} other {# extra casts}} of Ruin 3 or Tri-disaster were performed.",values:{extraR3:o}})}))}}]),a}(nt.qk),E.handle="aetherflow",E.title={id:"smn.aetherflow.title",defaults:"Aetherflow"},y=R,I=(0,K.Z)(y.prototype,"data",[ot.I,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),w=(0,K.Z)(y.prototype,"suggestions",[ot.I,g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),y),vt=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,m()(t=[this]).call(t,s))).trackedCds=[{cooldowns:[i.data.actions.SUMMON_BAHAMUT,i.data.actions.SUMMON_PHOENIX],firstUseOffset:4500},{cooldowns:[i.data.actions.SMN_ENERGY_DRAIN,i.data.actions.ENERGY_SIPHON],firstUseOffset:7500},{cooldowns:[i.data.actions.SEARING_LIGHT],firstUseOffset:3500}],i}return a}(a(48945).u),ft=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,m()(t=[this]).call(t,s))).suggestionIcon=i.data.actions.TRI_DISASTER.icon,i.trackedActions=[{aoeAction:i.data.actions.TRI_DISASTER,stActions:[i.data.actions.RUIN_III],minTargets:3},{aoeAction:i.data.actions.ENERGY_SIPHON,stActions:[i.data.actions.SMN_ENERGY_DRAIN],minTargets:2},{aoeAction:i.data.actions.PAINFLARE,stActions:[i.data.actions.FESTER],minTargets:2},{aoeAction:i.data.actions.ASTRAL_FLARE,stActions:[i.data.actions.ASTRAL_IMPULSE],minTargets:3},{aoeAction:i.data.actions.BRAND_OF_PURGATORY,stActions:[i.data.actions.FOUNTAIN_OF_FIRE],minTargets:3},{aoeAction:i.data.actions.RUBY_CATASTROPHE,stActions:[i.data.actions.RUBY_RITE],minTargets:3},{aoeAction:i.data.actions.TOPAZ_CATASTROPHE,stActions:[i.data.actions.TOPAZ_RITE],minTargets:3},{aoeAction:i.data.actions.EMERALD_CATASTROPHE,stActions:[i.data.actions.EMERALD_RITE],minTargets:3}],i}return a}(a(54106).C),gt=a(97530),yt=a(95859),It=a(51691),wt=(A=Reflect.metadata("design:type",lt.V),T=Reflect.metadata("design:type",It.Z),N=Reflect.metadata("design:type",dt.ZP),_=C=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,m()(t=[this]).call(t,s)),(0,Y.Z)(i,"data",k,(0,W.Z)(i)),(0,Y.Z)(i,"downtime",S,(0,W.Z)(i)),(0,Y.Z)(i,"suggestions",b,(0,W.Z)(i)),i.phyisckCount=0,i}return(0,z.Z)(a,[{key:"initialise",value:function(){this.addEventHook((0,st.hX)().source(this.parser.actor.id).action(this.data.actions.SMN_PHYSICK.id).type("action"),this.onPhysick),this.addEventHook("complete",this.onComplete)}},{key:"onPhysick",value:function(t){this.downtime.isDowntime(t.timestamp)||(this.phyisckCount+=1)}},{key:"onComplete",value:function(){this.phyisckCount>0&&this.suggestions.add(new dt.q$({icon:yt.ZP.SMN_PHYSICK.icon,severity:dt.bI.MAJOR,content:(0,ut.jsx)(at.Trans,{id:"smn.physick.suggestion.content",defaults:"Do not cast <0/> in group content. The heal is too small to justify casting over a damaging GCD.",components:[(0,ut.jsx)(it.vm,(0,gt.Z)({},yt.ZP.SMN_PHYSICK))]}),why:(0,ut.jsx)(at.Trans,{id:"smn.physick.suggestion.why",defaults:"Physick was cast {0, plural, one {# time} other {# times}}.",values:{0:this.phyisckCount}})}))}}]),a}(nt.qk),C.handle="physick",C.title={id:"smn.physick.title",defaults:"Physick"},Z=_,k=(0,K.Z)(Z.prototype,"data",[ot.I,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),S=(0,K.Z)(Z.prototype,"downtime",[ot.I,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),b=(0,K.Z)(Z.prototype,"suggestions",[ot.I,N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Z),Et=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,m()(t=[this]).call(t,s))).trackedDefensives=[i.data.actions.RADIANT_AEGIS],i}return a}(a(12541).O),Rt=a(36384),At=a.n(Rt),Tt=a(2991),Nt=a.n(Tt),Zt=a(78580),kt=a.n(Zt),St=a(62462),bt=a.n(St),Ct=a(73905),_t=a(70273),xt=a(56611),Gt=a(45150);!function(t){t[t.SUMMONS=1]="SUMMONS",t[t.SEARING_LIGHT=2]="SEARING_LIGHT",t[t.SWIFTCAST=nt.Gx.DEFAULT+1]="SWIFTCAST"}(x||(x={}));var Mt,jt,Ot,Ht,Pt,Lt,Ut,Dt,Bt,Ft,Yt,zt,Wt,Vt,Xt,Kt,qt,Jt,$t,Qt=3e4,te=["INFERNO","EARTHEN_FURY","AERIAL_BLAST","WYRMWAVE","AKH_MORN","EVERLASTING_FLIGHT","SCARLET_FLAME","REVELATION"],ee=(G=Reflect.metadata("design:type",_t.e),M=Reflect.metadata("design:type",lt.V),j=Reflect.metadata("design:type",dt.ZP),O=Reflect.metadata("design:type",xt.TY),F=B=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,m()(t=[this]).call(t,s)),(0,Y.Z)(i,"actors",P,(0,W.Z)(i)),(0,Y.Z)(i,"data",L,(0,W.Z)(i)),(0,Y.Z)(i,"suggestions",U,(0,W.Z)(i)),(0,Y.Z)(i,"timeline",D,(0,W.Z)(i)),i.history=new rt.A((function(){return{playersHit:new(At()),events:[],ghosted:!1}})),i.players=[],i.playerCastHook=void 0,i.slPending=0,i.petIds=[],i}return(0,z.Z)(a,[{key:"initialise",value:function(){var t,e,i,n=this;(0,V.Z)((0,X.Z)(a.prototype),"initialise",this).call(this),this.petIds=Nt()(t=et()(e=this.parser.pull.actors).call(e,(function(t){return t.owner===n.parser.actor}))).call(t,(function(t){return t.id}));var s=(0,st.hX)().source(this.parser.actor.id),o=(0,st.hX)().source((0,st.kw)(this.petIds)),r=this.parser.patch.before("6.1")?o:s;this.parser.patch.before("6.1")?(this.addEventHook((0,st.hX)().source(this.parser.actor.id).action(this.data.actions.SEARING_LIGHT.id).type("action"),this.queueSearingLight),this.addEventHook(o.action(this.data.actions.PET_SEARING_LIGHT.id).type("action"),this.onBuffGeneratorCast),this.addEventHook(o.action(this.data.matchActionId(te)).type("action"),this.nonCarbuncleAction)):this.addEventHook(s.action(this.data.actions.SEARING_LIGHT.id).type("action"),this.onBuffGeneratorCast),this.addEventHook(r.status(this.data.statuses.SEARING_LIGHT.id).type("statusApply"),this.countTargets),this.addEventHook((0,st.hX)().target(this.parser.actor.id).status(this.data.statuses.SEARING_LIGHT.id).type("statusApply"),this.onBuffApplied),this.addEventHook((0,st.hX)().target(this.parser.actor.id).status(this.data.statuses.SEARING_LIGHT.id).type("statusRemove"),this.onBuffRemoved),this.players=et()(i=this.actors.friends).call(i,(function(t){return t.playerControlled})),this.addEventHook("complete",this.onComplete)}},{key:"hookPlayerCasts",value:function(){null==this.playerCastHook&&(this.playerCastHook=this.addEventHook((0,st.hX)().source(this.parser.actor.id).type("action"),this.onPlayerCast))}},{key:"unhookPlayerCasts",value:function(){null!=this.playerCastHook&&(this.removeEventHook(this.playerCastHook),this.playerCastHook=void 0)}},{key:"onPlayerCast",value:function(t){var e=this,a=this.data.getAction(t.action);if(null==a||!a.autoAttack){var i=this.history.getCurrent();null!=i&&t.timestamp>i.start+Qt?this.closeSearingLightWindow(i.start+Qt):this.history.doIfOpen((function(a){e.actors.current.hasStatus(e.data.statuses.SEARING_LIGHT.id)&&a.events.push(t)}))}}},{key:"onBuffGeneratorCast",value:function(t){this.tryStartNewWindow(t.timestamp,t.source),this.slPending=0}},{key:"onBuffApplied",value:function(t){this.tryStartNewWindow(t.timestamp,t.source),this.history.doIfOpen((function(e){e.playersHit=e.playersHit.add(t.target)}))}},{key:"tryStartNewWindow",value:function(t,e){this.hookPlayerCasts();var a=this.history.getCurrent();if(null==a){var i;if(this.history.endOfLastEntry()===t)return void this.history.reopenLastEntry();(kt()(i=this.petIds).call(i,e)||this.parser.actor.id===e)&&this.history.openNew(t)}else a.start+Qt<t&&this.history.openNew(t)}},{key:"countTargets",value:function(t){var e=this;this.history.doIfOpen((function(a){var i;bt()(i=e.players).call(i,(function(e){return e.id===t.target}))>=0&&(a.playersHit=a.playersHit.add(t.target))}))}},{key:"onBuffRemoved",value:function(t){this.closeSearingLightWindow(t.timestamp)}},{key:"closeSearingLightWindow",value:function(t){this.history.closeCurrent(t),this.unhookPlayerCasts()}},{key:"queueSearingLight",value:function(t){this.slPending=t.timestamp}},{key:"nonCarbuncleAction",value:function(t){0!==this.slPending&&(this.history.openNew(this.slPending).data.ghosted=!0,this.history.closeCurrent(t.timestamp),this.slPending=0)}},{key:"onComplete",value:function(){var t,e,a;if(this.history.closeCurrent(this.parser.pull.timestamp+this.parser.pull.duration),0!==Q()(this.history).length){var i=et()(t=Q()(this.history)).call(t,(function(t){return t.data.playersHit.size<=7})).length;J()(e=Q()(this.history)).call(e,(function(t,e){return t+(e.data.ghosted?0:8-e.data.playersHit.size)}),0)>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.SEARING_LIGHT.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.suggestions.missed-players.content",defaults:"Try to make sure your <0/> casts buff your full party with each use. Failing to do so is a raid damage loss.",components:[(0,ut.jsx)(it.ci,{status:"SEARING_LIGHT"})]}),severity:dt.bI.MINOR,why:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.suggestions.missed-players.why",defaults:"{missedPlayersWindows} of your Searing Light uses did not buff the full party.",values:{missedPlayersWindows:i}})}));var n=et()(a=Q()(this.history)).call(a,(function(t){return t.data.ghosted})).length;n&&this.suggestions.add(new dt.q$({icon:this.data.actions.SEARING_LIGHT.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.suggestions.ghosted.content",defaults:"Make sure carbuncle has enough time to cast <0/> before summoning an Arcanum or demi summon or your cast will be wasted.",components:[(0,ut.jsx)(it.vm,{action:"PET_SEARING_LIGHT"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.suggestiongs.ghosted.why",defaults:"{ghostedWindows, plural, one {# Searing Light use was} other {# Searing Light uses were}} lost.",values:{ghostedWindows:n}}),severity:dt.bI.MAJOR}))}}},{key:"output",value:function(){var t,e=this,a=Q()(this.history).some((function(t){return t.data.ghosted})),i=Nt()(t=Q()(this.history)).call(t,(function(t){var a,i={players:{actual:t.data.playersHit.size,expected:8}},n={executed:e.getNotesIcon(t.data.ghosted)};return{start:t.start-e.parser.pull.timestamp,end:(null!==(a=t.end)&&void 0!==a?a:e.parser.pull.timestamp+e.parser.pull.duration)-e.parser.pull.timestamp,rotation:t.data.events,targetsData:i,notesMap:n}})),n=[{header:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.players-count",defaults:"Players Buffed"}),accessor:"players"}],s=a?[{header:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.executed",defaults:"Cast by carbuncle"}),accessor:"executed"}]:[];return(0,ut.jsx)(Ct.y,{targets:n,notes:s,data:i,onGoto:this.timeline.show,headerTitle:(0,ut.jsx)(at.Trans,{id:"smn.searinglight.table-header",defaults:"Searing Light Actions"})})}},{key:"getNotesIcon",value:function(t){return(0,ut.jsx)(Gt.Z,{name:t?"remove":"checkmark",className:t?"text-error":"text-success"})}}]),a}(nt.qk),B.handle="searinglight",B.title={id:"smn.searinglight.title",defaults:"Searing Light"},B.displayOrder=x.SEARING_LIGHT,H=F,P=(0,K.Z)(H.prototype,"actors",[ot.I,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),L=(0,K.Z)(H.prototype,"data",[ot.I,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),U=(0,K.Z)(H.prototype,"suggestions",[ot.I,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),D=(0,K.Z)(H.prototype,"timeline",[ot.I,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),H),ae=a(44845),ie=(Mt={1:dt.bI.MINOR},(0,ae.Z)(Mt,6,dt.bI.MEDIUM),(0,ae.Z)(Mt,12,dt.bI.MAJOR),Mt),ne=(jt=Reflect.metadata("design:type",lt.V),Ot=Reflect.metadata("design:type",dt.ZP),Dt=Ut=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,m()(t=[this]).call(t,s)),(0,Y.Z)(i,"data",Pt,(0,W.Z)(i)),(0,Y.Z)(i,"suggestions",Lt,(0,W.Z)(i)),i.lastSlipstream=0,i.slipstreamCasts=0,i.slipstreamTicks=0,i}return(0,z.Z)(a,[{key:"initialise",value:function(){var t=(0,st.hX)().source(this.parser.actor.id);this.addEventHook(t.action(this.data.statuses.SLIPSTREAM.id).type("action"),this.onSlipstreamCast),this.addEventHook(t.cause(this.data.matchCauseStatus(["SLIPSTREAM"])).type("damage"),this.onSlipstreamTick),this.addEventHook("complete",this.onComplete)}},{key:"onSlipstreamCast",value:function(t){this.lastSlipstream=t.timestamp,this.slipstreamCasts+=1}},{key:"onSlipstreamTick",value:function(){this.slipstreamTicks+=1}},{key:"onComplete",value:function(){var t=Math.max(0,6*this.slipstreamCasts-this.slipstreamTicks),e=this.parser.pull.timestamp+this.parser.pull.duration;if(this.lastSlipstream+15e3>e){var a=6-Math.floor((e-this.lastSlipstream)/3e3);t=Math.max(0,t-a)}this.suggestions.add(new dt.eg({icon:this.data.actions.SLIPSTREAM.icon,tiers:ie,value:t,content:(0,ut.jsx)(at.Trans,{id:"smn.pets.suggestions.slipstream-ticks.content",defaults:"Ensure you use <0/> such that it can deal damage for its entire duration.",components:[(0,ut.jsx)(it.vm,{action:"SLIPSTREAM"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.pets.suggestions.slipstream-ticks.why",defaults:"of Slipstream."})}))}}]),a}(nt.qk),Ut.handle="slipstream",Ut.title={id:"smn.slipstream.title",defaults:"Slipstream"},Ht=Dt,Pt=(0,K.Z)(Ht.prototype,"data",[ot.I,jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Lt=(0,K.Z)(Ht.prototype,"suggestions",[ot.I,Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Ht),se=a(47302),oe=a.n(se),re=a(83459),le=a(68156),de=a(30919),ue=a(65927),ce=a(40753),he=15e3,me=["SUMMON_BAHAMUT","SUMMON_PHOENIX"],pe=(Bt=Reflect.metadata("design:type",lt.V),Ft=Reflect.metadata("design:type",It.Z),Yt=Reflect.metadata("design:type",dt.ZP),zt=Reflect.metadata("design:type",re.E),$t=Jt=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,m()(t=[this]).call(t,s)),(0,Y.Z)(i,"data",Vt,(0,W.Z)(i)),(0,Y.Z)(i,"downtime",Xt,(0,W.Z)(i)),(0,Y.Z)(i,"suggestions",Kt,(0,W.Z)(i)),(0,Y.Z)(i,"globalCooldown",qt,(0,W.Z)(i)),i.history=new rt.A((function(){return{demiSummon:void 0,demiGcds:0,deathflareOrRekindle:0,enkindle:0,ifritSummon:void 0,rubyGcds:0,crimsonCyclone:0,crimsonStrike:0,titanSummon:void 0,topazGcds:0,mountainBusters:0,garudaSummon:void 0,emeraldGcds:0,slipstream:0,fillerGcds:0,ruinIV:void 0}})),i}return(0,z.Z)(a,[{key:"initialise",value:function(){var t=this;(0,V.Z)((0,X.Z)(a.prototype),"initialise",this).call(this);var e=(0,st.hX)().source(this.parser.actor.id),i=Nt()(me).call(me,(function(e){return t.data.actions[e].id}));this.addEventHook(e.action((0,st.kw)(i)).type("action"),this.onSummon),this.addEventHook(e.action((0,st.jg)(i)).type("action"),this.onNonSummon),this.addEventHook("complete",this.onComplete)}},{key:"onSummon",value:function(t){this.history.openNew(t.timestamp).data.demiSummon=t}},{key:"onNonSummon",value:function(t){var e=this.history.getCurrent();if(null!=e)switch(t.action){case this.data.actions.ASTRAL_IMPULSE.id:case this.data.actions.ASTRAL_FLARE.id:case this.data.actions.FOUNTAIN_OF_FIRE.id:case this.data.actions.BRAND_OF_PURGATORY.id:e.data.demiGcds+=1;break;case this.data.actions.DEATHFLARE.id:case this.data.actions.REKINDLE.id:e.data.deathflareOrRekindle+=1;break;case this.data.actions.ENKINDLE_BAHAMUT.id:case this.data.actions.ENKINDLE_PHOENIX.id:e.data.enkindle+=1;break;case this.data.actions.SUMMON_IFRIT_II.id:e.data.ifritSummon=t;break;case this.data.actions.RUBY_RITE.id:case this.data.actions.RUBY_CATASTROPHE.id:e.data.rubyGcds+=1;break;case this.data.actions.CRIMSON_CYCLONE.id:e.data.crimsonCyclone+=1;break;case this.data.actions.CRIMSON_STRIKE.id:e.data.crimsonStrike+=1;break;case this.data.actions.SUMMON_TITAN_II.id:e.data.titanSummon=t;break;case this.data.actions.TOPAZ_RITE.id:case this.data.actions.TOPAZ_CATASTROPHE.id:e.data.topazGcds+=1;break;case this.data.actions.SMN_MOUNTAIN_BUSTER.id:e.data.mountainBusters+=1;break;case this.data.actions.SUMMON_GARUDA_II.id:e.data.garudaSummon=t;break;case this.data.actions.EMERALD_RITE.id:case this.data.actions.EMERALD_CATASTROPHE.id:e.data.emeraldGcds+=1;break;case this.data.actions.SLIPSTREAM.id:e.data.slipstream+=1;break;case this.data.actions.RUIN_III.id:case this.data.actions.TRI_DISASTER.id:e.data.fillerGcds+=1;break;case this.data.actions.RUIN_IV.id:e.data.ruinIV=t}}},{key:"onComplete",value:function(){var t,e,a,i,n,s,o,r=this;this.history.closeCurrent(this.parser.pull.timestamp+this.parser.pull.duration);var l=J()(t=et()(e=Q()(this.history)).call(e,(function(t){var e;return t.start+he<(null!==(e=t.end)&&void 0!==e?e:0)}))).call(t,(function(t,e){return t+Math.max(0,r.expectedDemiGcdsForWindow(e)-e.data.demiGcds)}),0);this.suggestions.add(new dt.eg({icon:this.data.actions.ASTRAL_IMPULSE.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.summons.demigcds.content",defaults:"Be sure to get {EXPECTED_DEMI_GCDS} uses of the demi GCDs each time you summon them. (<0/> or <1/> for Bahamut and <2/>or <3/> for Phoenix)",values:{EXPECTED_DEMI_GCDS:6},components:[(0,ut.jsx)(it.vm,{action:"ASTRAL_IMPULSE"}),(0,ut.jsx)(it.vm,{action:"ASTRAL_FLARE"}),(0,ut.jsx)(it.vm,{action:"FOUNTAIN_OF_FIRE"}),(0,ut.jsx)(it.vm,{action:"BRAND_OF_PURGATORY"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.summons.demigcds.why",defaults:"You missed {missed, plural, one {# demi GCD} other {# demi GCDs}}.",values:{missed:l}}),value:l,tiers:{1:dt.bI.MINOR,2:dt.bI.MEDIUM,4:dt.bI.MAJOR}})),(l=et()(a=Q()(this.history)).call(a,(function(t){var e;return(null===(e=t.data.demiSummon)||void 0===e?void 0:e.action)===r.data.actions.SUMMON_BAHAMUT.id&&0===t.data.deathflareOrRekindle})).length)>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.DEATHFLARE.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.summons.deathflare.content",defaults:"Be sure to use <0/> each time you summon Bahamut.",components:[(0,ut.jsx)(it.vm,{action:"DEATHFLARE"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.summons.deathflare.why",defaults:"You failed to cast Deathflare {missed, plural, one {# time} other {# times}}.",values:{missed:l}}),severity:dt.bI.MAJOR})),(l=et()(i=Q()(this.history)).call(i,(function(t){var e;return(null===(e=t.data.demiSummon)||void 0===e?void 0:e.action)===r.data.actions.SUMMON_PHOENIX.id&&0===t.data.deathflareOrRekindle})).length)>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.REKINDLE.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.summons.rekindle.content",defaults:"Try to use <0/> each time you summon Phoenix. While it is not a direct personal damage boost, it may improve healer damage by reducing their required healing.",components:[(0,ut.jsx)(it.vm,{action:"REKINDLE"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.summons.rekindle.why",defaults:"You failed to cast Rekindle {missed, plural, one {# time} other {# times}}.",values:{missed:l}}),severity:dt.bI.MINOR})),(l=et()(n=Q()(this.history)).call(n,(function(t){return 0===t.data.enkindle})).length)>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.ENKINDLE_BAHAMUT.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.summons.enkindle.content",defaults:"Be sure to use <0/> each time you summon Bahamut and <1/> each time you summon Phoenix.",components:[(0,ut.jsx)(it.vm,{action:"ENKINDLE_BAHAMUT"}),(0,ut.jsx)(it.vm,{action:"ENKINDLE_PHOENIX"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.summons.enkindle.why",defaults:"You failed to cast an Enkindle ability {missed, plural, one {# time} other {# times}}.",values:{missed:l}}),severity:dt.bI.MAJOR})),l=J()(s=Q()(this.history)).call(s,(function(t,e){return t+Math.max(0,e.data.topazGcds-e.data.mountainBusters)}),0),this.suggestions.add(new dt.eg({icon:this.data.actions.SMN_MOUNTAIN_BUSTER.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.summons.mountainbuster.content",defaults:"Be sure to use <0/> each time you cast<1/> or <2/>.",components:[(0,ut.jsx)(it.vm,{action:"SMN_MOUNTAIN_BUSTER"}),(0,ut.jsx)(it.vm,{action:"TOPAZ_RITE"}),(0,ut.jsx)(it.vm,{action:"TOPAZ_CATASTROPHE"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.summons.mountainbuster.why",defaults:"You missed {missed, plural, one {# Mountain Buster} other {# Mountain Busters}}.",values:{missed:l}}),value:l,tiers:{1:dt.bI.MINOR,2:dt.bI.MEDIUM,4:dt.bI.MAJOR}})),(l=et()(o=Q()(this.history)).call(o,(function(t){return null!=t.data.ruinIV&&t.data.ruinIV.timestamp<t.start+he})).length)>0&&this.suggestions.add(new dt.q$({icon:this.data.actions.RUIN_IV.icon,content:(0,ut.jsx)(at.Trans,{id:"smn.summons.ruiniv-demi.content",defaults:"Avoid using <0/> during a demi summon.",components:[(0,ut.jsx)(it.vm,{action:"RUIN_IV"})]}),why:(0,ut.jsx)(at.Trans,{id:"smn.summons.ruiniv-demi.why",defaults:"You used Ruin IV during a demi summon {missed, plural, one {# time} other {# times}}.",values:{missed:l}}),severity:dt.bI.MAJOR}))}},{key:"output",value:function(){var t,e,a,i=this,n=et()(t=Nt()(e=Q()(this.history)).call(e,(function(t){return i.buildPanel(t)}))).call(t,ce.$K);return(0,ut.jsxs)(ut.Fragment,{children:[(0,ut.jsx)(le.Z,{children:(0,ut.jsx)(at.Trans,{id:"smn.summons.disclaimer",defaults:"You should aim to use all three Arcanums between each summoning of Bahamut and Phoenix.  You should also aim to use all of the Attunement and Favor stacks of each summon.  However, this will not be possible when the boss goes invulnerable for extended periods of time."})}),(0,ut.jsx)(de.Z,{exclusive:!1,panels:Nt()(n).call(n,(function(t){return t.panel})),styled:!0,fluid:!0,defaultActiveIndex:et()(a=Nt()(n).call(n,(function(t,e){return t.hasError?e:-1}))).call(a,(function(t){return t>=0}))})]})}},{key:"expectedDemiGcdsForWindow",value:function(t){var e=t.start+he,a=this.downtime.getDowntime(t.start,e);return null!=t.end&&t.end<e&&(a+=e-t.end),6-Math.ceil(a/this.globalCooldown.getDuration())}},{key:"buildPanel",value:function(t){if(null!=t.data.demiSummon){var e=this.buildWindowOutput(t);return{panel:{key:t.start,title:{content:(0,ut.jsxs)(ut.Fragment,{children:[this.parser.formatEpochTimestamp(t.start),": ",(0,ut.jsx)(it.vm,(0,gt.Z)({},this.data.getAction(t.data.demiSummon.action))),this.getEgiIcons(t)]})},content:{content:e.display}},hasError:e.hasError}}}},{key:"getEgiIcons",value:function(t){var e=[t.data.titanSummon,t.data.ifritSummon,t.data.garudaSummon];oe()(e).call(e,(function(t,e){return void 0===t?-1:void 0===e?1:t.timestamp>e.timestamp?-1:1}));var a=[];return e.forEach((function(e){void 0!==e&&(e===t.data.ifritSummon?a.push((0,ut.jsxs)("span",{style:{float:"right"},children:[" ",(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_IFRIT_II"}),"  "]})):e===t.data.garudaSummon?a.push((0,ut.jsxs)("span",{style:{float:"right"},children:[" ",(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_GARUDA_II"}),"  "]})):e===t.data.titanSummon&&a.push((0,ut.jsxs)("span",{style:{float:"right"},children:[" ",(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_TITAN_II"}),"  "]})))})),a}},{key:"buildWindowOutput",value:function(t){var e,a,i=(null===(e=t.data.demiSummon)||void 0===e?void 0:e.action)===this.data.actions.SUMMON_BAHAMUT.id?this.buildBahamutRow(t):this.buildPhoenixRow(t),n=t.data.mountainBusters<t.data.topazGcds,s=null==t.data.ruinIV&&t.data.fillerGcds>0||null!=t.data.ruinIV&&t.data.ruinIV.timestamp<t.start+he;return{hasError:i.hasError||n||s,display:(0,ut.jsxs)(ue.Z,{children:[i.display,(0,ut.jsxs)(ue.Z.Row,{children:[(0,ut.jsxs)(ue.Z.Cell,{positive:null!=t.data.ifritSummon,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_IFRIT_II"})," ",this.printUsageTime(t.data.ifritSummon)]}),(0,ut.jsxs)(ue.Z.Cell,{positive:2===t.data.rubyGcds,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"RUBY_RITE"}),"/",(0,ut.jsx)(it.vm,{showName:!1,action:"RUBY_CATASTROPHE"})," ",t.data.rubyGcds]}),(0,ut.jsxs)(ue.Z.Cell,{positive:1===t.data.crimsonCyclone,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"CRIMSON_CYCLONE"})," ",t.data.crimsonCyclone]}),(0,ut.jsxs)(ue.Z.Cell,{positive:1===t.data.crimsonStrike,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"CRIMSON_STRIKE"})," ",t.data.crimsonStrike]})]}),(0,ut.jsxs)(ue.Z.Row,{children:[(0,ut.jsxs)(ue.Z.Cell,{positive:null!=t.data.titanSummon,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_TITAN_II"})," ",this.printUsageTime(t.data.titanSummon)]}),(0,ut.jsxs)(ue.Z.Cell,{positive:4===t.data.topazGcds,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"TOPAZ_RITE"}),"/",(0,ut.jsx)(it.vm,{showName:!1,action:"TOPAZ_CATASTROPHE"})," ",t.data.topazGcds]}),(0,ut.jsxs)(ue.Z.Cell,{positive:t.data.mountainBusters===t.data.topazGcds,negative:n,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SMN_MOUNTAIN_BUSTER"})," ",t.data.mountainBusters]})]}),(0,ut.jsxs)(ue.Z.Row,{children:[(0,ut.jsxs)(ue.Z.Cell,{positive:null!=t.data.garudaSummon,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_GARUDA_II"})," ",this.printUsageTime(t.data.garudaSummon)]}),(0,ut.jsxs)(ue.Z.Cell,{positive:4===t.data.emeraldGcds,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"EMERALD_RITE"}),"/",(0,ut.jsx)(it.vm,{showName:!1,action:"EMERALD_CATASTROPHE"})," ",t.data.emeraldGcds]}),(0,ut.jsxs)(ue.Z.Cell,{positive:1===t.data.slipstream,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SLIPSTREAM"})," ",t.data.slipstream]})]}),(0,ut.jsxs)(ue.Z.Row,{children:[(0,ut.jsxs)(ue.Z.Cell,{children:["Uptime: ",this.parser.formatDuration(Math.max(0,(null!==(a=t.end)&&void 0!==a?a:t.start)-t.start-this.downtime.getDowntime(t.start,t.end)))]}),(0,ut.jsxs)(ue.Z.Cell,{children:[(0,ut.jsx)(it.vm,{showName:!1,action:"RUIN_III"}),"/",(0,ut.jsx)(it.vm,{showName:!1,action:"TRI_DISASTER"})," ",t.data.fillerGcds]}),(0,ut.jsxs)(ue.Z.Cell,{positive:null!=t.data.ruinIV&&t.data.ruinIV.timestamp>=t.start+he,negative:s,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"RUIN_IV"})," ",null==t.data.ruinIV?0:1]})]})]})}}},{key:"buildBahamutRow",value:function(t){var e=this.expectedDemiGcdsForWindow(t),a=t.data.demiGcds<e,i=t.data.deathflareOrRekindle<1,n=t.data.enkindle<1;return{hasError:a||i||n,display:(0,ut.jsxs)(ue.Z.Row,{children:[(0,ut.jsxs)(ue.Z.Cell,{children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_BAHAMUT"})," ",this.parser.formatEpochTimestamp(t.start)]}),(0,ut.jsxs)(ue.Z.Cell,{positive:!a,negative:a,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"ASTRAL_IMPULSE"}),"/",(0,ut.jsx)(it.vm,{showName:!1,action:"ASTRAL_FLARE"})," ",t.data.demiGcds]}),(0,ut.jsxs)(ue.Z.Cell,{positive:!i,negative:i,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"DEATHFLARE"})," ",t.data.deathflareOrRekindle]}),(0,ut.jsxs)(ue.Z.Cell,{positive:!n,negative:n,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"ENKINDLE_BAHAMUT"})," ",t.data.enkindle]})]})}}},{key:"buildPhoenixRow",value:function(t){var e=this.expectedDemiGcdsForWindow(t),a=t.data.demiGcds<e,i=t.data.deathflareOrRekindle<1,n=t.data.enkindle<1;return{hasError:a||i||n,display:(0,ut.jsxs)(ue.Z.Row,{children:[(0,ut.jsxs)(ue.Z.Cell,{children:[(0,ut.jsx)(it.vm,{showName:!1,action:"SUMMON_PHOENIX"})," ",this.parser.formatEpochTimestamp(t.start)]}),(0,ut.jsxs)(ue.Z.Cell,{positive:!a,negative:a,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"FOUNTAIN_OF_FIRE"}),"/",(0,ut.jsx)(it.vm,{showName:!1,action:"BRAND_OF_PURGATORY"})," ",t.data.demiGcds]}),(0,ut.jsxs)(ue.Z.Cell,{positive:!i,negative:i,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"REKINDLE"})," ",t.data.deathflareOrRekindle]}),(0,ut.jsxs)(ue.Z.Cell,{positive:!n,negative:n,children:[(0,ut.jsx)(it.vm,{showName:!1,action:"ENKINDLE_PHOENIX"})," ",t.data.enkindle]})]})}}},{key:"printUsageTime",value:function(t){return null==t?"N/A":this.parser.formatEpochTimestamp(t.timestamp)}}]),a}(nt.qk),Jt.handle="summons",Jt.title={id:"smn.summons.title",defaults:"Summons"},Jt.displayOrder=x.SUMMONS,Wt=$t,Vt=(0,K.Z)(Wt.prototype,"data",[ot.I,Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Xt=(0,K.Z)(Wt.prototype,"downtime",[ot.I,Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),Kt=(0,K.Z)(Wt.prototype,"suggestions",[ot.I,Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),qt=(0,K.Z)(Wt.prototype,"globalCooldown",[ot.I,zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),Wt),ve=function(t){(0,u.Z)(a,t);var e=(0,c.Z)(a);function a(){var t,i;(0,d.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,m()(t=[this]).call(t,s))).suggestionContent=(0,ut.jsx)(at.Trans,{id:"smn.swiftcast.missed.suggestion.content",defaults:"Use a spell with <0/> before it expires.",components:[(0,ut.jsx)(it.vm,{action:"SWIFTCAST"})]}),i}return a}(a(48523).t);ve.displayOrder=x.SWIFTCAST;var fe=[v,pt,vt,n.e,ft,s.k,wt,Et,ee,ne,pe,ve,o.J,r.x]}}]);
//# sourceMappingURL=jobs-smn.fa3ac3f4.js.map
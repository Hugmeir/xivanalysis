(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[1644],{50925:function(t,e,i){t.exports=i(75838)},61806:function(t,e,i){"use strict";i.d(e,{E:function(){return X}});var n,a,s,o,r,l,u,c,d,h,p,g,m=i(97530),f=i(19623),v=i(99021),y=i(23257),w=i(68420),A=i(27344),T=i(5281),b=i(90306),I=i(50596),k=i(300),E=i(77766),Z=i.n(E),R=i(39392),x=i.n(R),C=i(36384),j=i.n(C),H=i(20116),N=i.n(H),U=i(80426),_=i.n(U),O=i(94473),M=i.n(O),S=i(2991),D=i.n(S),G=i(86359),K=i(28683),B=i(76704),W=i(8510),P=i(81336),J=i(73947),z=i(56611),Y=(i(67294),i(45150)),F=i(40753),L="ActionTimeline-module_chargeGain__3-Of9",q="ActionTimeline-module_icon__8OvsF",V=i(85893);!function(t){t[t.CHARGE_GAIN=0]="CHARGE_GAIN",t[t.ACTION=1]="ACTION"}(g||(g={}));var X=(n=Reflect.metadata("design:type",W.Z),a=Reflect.metadata("design:type",P.w),s=Reflect.metadata("design:type",J.V),o=Reflect.metadata("design:type",z.TY),p=h=function(t){(0,b.Z)(i,t);var e=(0,I.Z)(i);function i(){var t,n;(0,w.Z)(this,i);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=e.call.apply(e,Z()(t=[this]).call(t,s)),(0,y.Z)(n,"castTime",l,(0,T.Z)(n)),(0,y.Z)(n,"cooldowns",u,(0,T.Z)(n)),(0,y.Z)(n,"data",c,(0,T.Z)(n)),(0,y.Z)(n,"timeline",d,(0,T.Z)(n)),n.resolvedRows=[],n.groupRows=new(x()),n}return(0,A.Z)(i,[{key:"getRow",value:function(t){return this.addRow({content:[t]})}},{key:"initialise",value:function(){var t,e=(0,v.Z)(this.constructor.rows);try{for(e.s();!(t=e.n()).done;){var i=t.value,n=this.resolveConfig(i);this.resolvedRows.push(n),this.addRow(n)}}catch(t){e.e(t)}finally{e.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t,e,i=this,n=new(j()),a=(0,v.Z)(this.resolvedRows);try{for(a.s();!(e=a.n()).done;){var s=e.value,o=this.addRow(s);this.populateRow(o,s),s.content.forEach((function(t){return i.cooldowns.groups(t).forEach((function(t){return n.add(t)}))}))}}catch(t){a.e(t)}finally{a.f()}N()(t=this.cooldowns.allGroups()).call(t,(function(t){return!n.has(t)})).forEach((function(t){var e={content:[t]},n=i.addRow(e);i.populateRow(n,e)}))}},{key:"resolveConfig",value:function(t){var e=t;return("object"!==(0,f.Z)(e)||Array.isArray(e))&&(e={content:e}),(0,m.Z)((0,m.Z)({},e),{},{content:(0,F.rY)(e.content)})}},{key:"addRow",value:function(t){var e,i,n=this,a=_()(e=t.content).call(e,(function(t){return n.cooldowns.groups(t)})),s=M()(i=D()(a).call(a,(function(t){return n.groupRows.get(t)}))).call(i,F.$K);if(null!=s)return s;var o,r=t.content[0],l=null!=t.label?t.label:"GCD"===r?(0,V.jsx)(G.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof r?n.data.actions[r].name:"number"==typeof r?null===(o=n.cooldowns.cooldownHistory(r)[0])||void 0===o?void 0:o.action.name:r.name,u=this.timeline.addRow(new z.vo({label:l,order:t.order,collapse:!0}));return a.forEach((function(t){return n.groupRows.set(t,u)})),u}},{key:"populateRow",value:function(t,e){var i=this,n=e.content;this.addCooldownItems(t,_()(n).call(n,(function(t){return i.cooldowns.cooldownHistory(t)}))),this.addChargeItems(t,_()(n).call(n,(function(t){return i.cooldowns.chargeHistory(t)})))}},{key:"addCooldownItems",value:function(t,e){var i,n=(0,v.Z)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=this.getCooldownDuration(a),o=a.start-this.parser.pull.timestamp,r=o+s;t.addItem(new z.ct({start:o,end:r,content:(0,V.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(t){n.e(t)}finally{n.f()}}},{key:"addChargeItems",value:function(t,e){var i,n=(0,v.Z)(e);try{for(n.s();!(i=n.n()).done;){var a=i.value,s=a.delta<0?new z.tC({depth:g.ACTION,start:a.timestamp-this.parser.pull.timestamp,action:a.action}):new $({depth:g.CHARGE_GAIN,start:a.timestamp-this.parser.pull.timestamp});t.addItem(s)}}catch(t){n.e(t)}finally{n.f()}}},{key:"getCooldownDuration",value:function(t){var e=t.end-t.start;if(t.endReason===P.g.EXPIRED){var i,n=null!==(i=this.castTime.forAction(t.action.id,t.start))&&void 0!==i?i:0;e=Math.max(e,n+100)}return e}}]),i}(K.qk),h.handle="actionTimeline",h.debug=!1,h.rows=[{content:"GCD",order:-97}],r=p,l=(0,k.Z)(r.prototype,"castTime",[B.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),u=(0,k.Z)(r.prototype,"cooldowns",[B.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),c=(0,k.Z)(r.prototype,"data",[B.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,k.Z)(r.prototype,"timeline",[B.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r),$=function(t){(0,b.Z)(i,t);var e=(0,I.Z)(i);function i(){var t,n;(0,w.Z)(this,i);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=e.call.apply(e,Z()(t=[this]).call(t,s))).Content=function(){return(0,V.jsx)("div",{className:L,children:(0,V.jsx)(Y.Z,{name:"angle double up",className:q})})},n}return i}(z.Pp)},12541:function(t,e,i){"use strict";i.d(e,{O:function(){return $}});var n,a,s,o,r,l,u,c,d,h,p,g=i(97530),m=i(23257),f=i(68420),v=i(27344),y=i(5281),w=i(90306),A=i(50596),T=i(300),b=i(39392),I=i.n(b),k=i(77766),E=i.n(k),Z=i(2991),R=i.n(Z),x=i(94473),C=i.n(x),j=i(20116),H=i.n(j),N=i(32366),U=i.n(N),_=i(86359),O=i(9263),M=i(43719),S=i(28683),D=i(76704),G=i(48945),K=i(73947),B=i(67294),W=i(68156),P=i(45150),J=i(30919),z=i(65927),Y=i(80967),F=i(81336),L=i(8437),q=i(56611),V=i(85893),X=new(I())([["TANK",["RAMPART","REPRISAL"]],["MELEE",["FEINT","BLOODBATH","SECOND_WIND"]],["PHYSICAL_RANGED",["SECOND_WIND"]],["MAGICAL_RANGED",["ADDLE"]],["HEALER",[]]]),$=(n=Reflect.metadata("design:type",F.w),a=Reflect.metadata("design:type",G.u),s=Reflect.metadata("design:type",K.V),o=Reflect.metadata("design:type",q.TY),p=h=function(t){(0,w.Z)(i,t);var e=(0,A.Z)(i);function i(){var t,n;(0,f.Z)(this,i);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=e.call.apply(e,E()(t=[this]).call(t,s)),(0,m.Z)(n,"cooldowns",l,(0,y.Z)(n)),(0,m.Z)(n,"cooldownDowntime",u,(0,y.Z)(n)),(0,m.Z)(n,"data",c,(0,y.Z)(n)),(0,m.Z)(n,"timeline",d,(0,y.Z)(n)),n.trackedDefensives=[],n.headerContent=(0,V.jsx)(_.Trans,{id:"core.defensives.header.content",defaults:"Using your mitigation and healing cooldowns can help you survive mistakes, or relieve some stress on the healers and let them deal more damage.<0/>While you shouldn't use them at the expense of your rotation or buff alignment, you should try to find helpful times to use them.",components:[(0,V.jsx)("br",{})]}),n}return(0,v.Z)(i,[{key:"initialise",value:function(){var t,e,i=this;(null!==(t=null===(e=X.get(M.W[this.parser.actor.job].role))||void 0===e?void 0:R()(e).call(e,(function(t){return i.data.actions[t]})))&&void 0!==t?t:[]).forEach((function(t){var e;C()(e=i.trackedDefensives).call(e,(function(e){return t.id===e.id}))||i.trackedDefensives.push(t)}))}},{key:"getUsageCount",value:function(t){return this.getUses(t).length}},{key:"getUses",value:function(t){var e;return H()(e=this.cooldowns.cooldownHistory(t)).call(e,(function(t){return t.endReason!==F.g.INTERRUPTED}))}},{key:"getMaxUses",value:function(t){var e,i=this,n=U()(e=this.getUses(t)).call(e,(function(e,n){return e+i.getAdditionalUsageData(t,n.start).chargesBeforeNextUse}),this.getAdditionalUsageData(t).chargesBeforeNextUse);return this.getUsageCount(t)+n}},{key:"output",value:function(){var t,e=this;if(0!==this.trackedDefensives.length)return(0,V.jsxs)(B.Fragment,{children:[(0,V.jsxs)(W.Z,{icon:!0,children:[(0,V.jsx)(P.Z,{name:"info"}),(0,V.jsxs)(W.Z.Content,{children:[this.headerContent,(0,V.jsx)("br",{}),(0,V.jsx)("br",{}),(0,V.jsx)(_.Trans,{id:"core.defensives.header.sub-content",defaults:"The below tables will show you where you can gain additional uses of these cooldowns, without interfering with your existing ones."})]})]}),(0,V.jsx)(J.Z,{exclusive:!1,styled:!0,fluid:!0,panels:R()(t=this.trackedDefensives).call(t,(function(t,i){var n;return{key:t.id,title:{content:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(O.vm,(0,g.Z)({},t),i)," - ",e.getUsageCount(t)," / ",e.getMaxUses(t)]})},content:{content:(0,V.jsx)(z.Z,{compact:!0,unstackable:!0,celled:!0,children:(0,V.jsxs)(z.Z.Body,{children:[e.tryGetAdditionalUseRow(t),R()(n=e.getUses(t)).call(n,(function(i){return e.getUsageRow(i,t)}))]})})}}}))})]})}},{key:"getUsageRow",value:function(t,e){var i=this;return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(z.Z.Row,{children:(0,V.jsx)(z.Z.Cell,{children:(0,V.jsx)(_.Trans,{id:"core.defensives.table.usage-row.text",defaults:"Used at <0></0> {0}",values:{0:this.parser.formatEpochTimestamp(t.start)},components:[(0,V.jsx)(Y.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return i.timeline.show(t.start-i.parser.pull.timestamp,t.end-i.parser.pull.timestamp)}})]})})},t.start),this.tryGetAdditionalUseRow(e,t.start)]})}},{key:"getAdditionalUsageData",value:function(t){var e,i,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.pull.timestamp;if(a===this.parser.pull.timestamp)i=this.parser.pull.timestamp,n=t.charges||1;else{var s,o=C()(s=this.cooldowns.chargeHistory(t)).call(s,(function(t){return t.timestamp>=a&&t.current>0}));i=(null==o?void 0:o.timestamp)||this.parser.pull.duration+this.parser.pull.timestamp,n=(null==o?void 0:o.current)||0}var r=t.cooldown||this.parser.pull.duration,l=C()(e=this.getUses(t)).call(e,(function(t){return t.start>a})),u=null!=l?l.start-r:this.parser.pull.timestamp+this.parser.pull.duration;return u<=i?{chargesBeforeNextUse:0,availableTimestamp:i,useByTimestamp:u}:{chargesBeforeNextUse:n+Math.floor((u-i)/r),availableTimestamp:i,useByTimestamp:u}}},{key:"tryGetAdditionalUseRow",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.pull.timestamp,n=this.getAdditionalUsageData(t,i),a=n.chargesBeforeNextUse,s=n.availableTimestamp,o=n.useByTimestamp;return 0===a?(0,V.jsx)(V.Fragment,{}):(0,V.jsx)(z.Z.Row,{children:(0,V.jsx)(z.Z.Cell,{children:(0,V.jsx)(_.Trans,{id:"core.defensives.table.extra-usage-row.text",defaults:"{chargesBeforeNextUse, plural, one {1 extra use} other {# extra uses}} available between <0></0> {0} and {1}",values:{0:this.parser.formatEpochTimestamp(s),1:this.parser.formatEpochTimestamp(o),chargesBeforeNextUse:a},components:[(0,V.jsx)(Y.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return e.timeline.show(s-e.parser.pull.timestamp,o-e.parser.pull.timestamp)}})]})})})}}]),i}(S.qk),h.handle="defensives",h.title={id:"core.defensives.title",defaults:"Defensives"},h.displayOrder=L.Z.DEFENSIVES,r=p,l=(0,T.Z)(r.prototype,"cooldowns",[D.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),u=(0,T.Z)(r.prototype,"cooldownDowntime",[D.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldownDowntime}}),c=(0,T.Z)(r.prototype,"data",[D.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,T.Z)(r.prototype,"timeline",[D.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r)},83459:function(t,e,i){"use strict";i.d(e,{E:function(){return H}});var n,a,s,o,r,l,u,c,d,h=i(23257),p=i(68420),g=i(27344),m=i(5281),f=i(90306),v=i(50596),y=i(300),w=i(77766),A=i.n(w),T=i(86359),b=i(59652),I=i(84626),k=(i(67294),i(28683)),E=i(76704),Z=i(73947),R=i(48453),x=i(51422),C=i(85893),j={__all:{id:"core.gcd.no-statistics.v2",defaults:"This GCD recast is an *estimate*, and may be incorrect. If it is reporting a GCD recast *longer* than reality, you likely need to focus on keeping your GCD rolling."},legacyFflogs:{id:"core.gcd.estimate-help.fflogs",defaults:"Precise attribute values are only available from FF Logs for the player who logged the report in ACT."}},H=(n=Reflect.metadata("design:type",Z.V),a=Reflect.metadata("design:type",x.gy),s=Reflect.metadata("design:type",R.a),d=c=function(t){(0,f.Z)(i,t);var e=(0,v.Z)(i);function i(){var t,n;(0,p.Z)(this,i);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=e.call.apply(e,A()(t=[this]).call(t,s)),(0,h.Z)(n,"data",r,(0,m.Z)(n)),(0,h.Z)(n,"statistics",l,(0,m.Z)(n)),(0,h.Z)(n,"speedAdjustments",u,(0,m.Z)(n)),n}return(0,g.Z)(i,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"getDuration",value:function(){return this.speedAdjustments.getAdjustedDuration({duration:I.b})}},{key:"isEstimated",value:function(){return this.speedAdjustments.isAdjustmentEstimated()}},{key:"onComplete",value:function(){var t=this.isEstimated();this.statistics.add(new x.IC({title:t?(0,C.jsx)(T.Trans,{id:"core.gcd.estimated-gcd",defaults:"Estimated GCD"}):(0,C.jsx)(T.Trans,{id:"core.gcd.gcd",defaults:"GCD Recast"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(this.getDuration()),info:t?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(b.Z,{source:j.__all}),(0,C.jsx)(b.Z,{source:j[this.parser.report.meta.source]})]}):void 0}))}}]),i}(k.qk),c.handle="gcd",o=d,r=(0,y.Z)(o.prototype,"data",[E.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,y.Z)(o.prototype,"statistics",[E.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),u=(0,y.Z)(o.prototype,"speedAdjustments",[E.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),o)},28101:function(t,e,i){"use strict";i.d(e,{O:function(){return q}});var n,a,s,o,r,l,u,c,d,h=i(97530),p=i(41420),g=i(23257),m=i(68420),f=i(27344),v=i(5281),y=i(90306),w=i(50596),A=i(300),T=i(77766),b=i.n(T),I=i(2991),k=i.n(I),E=i(94473),Z=i.n(E),R=i(36384),x=i.n(R),C=i(78580),j=i.n(C),H=i(50925),N=i.n(H),U=i(32366),_=i.n(U),O=i(86359),M=i(9263),S=i(95859),D=i(10110),G=i(74489),K=i(76704),B=i(52102),W=i(8437),P=i(56611),J=(i(67294),i(80967)),z=i(65927),Y=i(28683),F=i(73947),L=i(85893),q=(n=Reflect.metadata("design:type",F.V),a=Reflect.metadata("design:type",B.ZP),s=Reflect.metadata("design:type",P.TY),d=c=function(t){(0,y.Z)(i,t);var e=(0,w.Z)(i);function i(){var t,n;(0,m.Z)(this,i);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=e.call.apply(e,b()(t=[this]).call(t,s)),(0,g.Z)(n,"data",r,(0,v.Z)(n)),(0,g.Z)(n,"checklist",l,(0,v.Z)(n)),(0,g.Z)(n,"timeline",u,(0,v.Z)(n)),n.positionalResults=[],n.positionals=void 0,n}return(0,f.Z)(i,[{key:"initialise",value:function(){var t;this.addEventHook((0,G.hX)().source(this.parser.actor.id).type("damage").cause(this.data.matchCauseActionId(k()(t=this.positionals).call(t,(function(t){return t.id})))),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){var e;if("action"===t.cause.type){var i=this.data.getAction(t.cause.action);if(null!=i){var n=Z()(e=this.positionals).call(e,(function(t){return t===i}));if(null!=n){var a=this.getOrCreatePositionalResult(n);this.positionalHit(n,t.targets[0].bonusPercent)?a.hits.push(t):a.misses.push(t)}}}}},{key:"getOrCreatePositionalResult",value:function(t){var e,i=Z()(e=this.positionalResults).call(e,(function(e){return e.positional===t}));return null==i&&(i={positional:t,hits:[],misses:[]},this.positionalResults.push(i)),i}},{key:"missedPositionalBonusPercents",value:function(t){var e=this.calculateBonusPercent((0,S.u2)(t),(0,S.gw)(t,[D.R4.COMBO],[]));return(0,p.Z)(new(x())([0,e]))}},{key:"positionalHit",value:function(t,e){var i;return!j()(i=this.missedPositionalBonusPercents(t)).call(i,e)}},{key:"calculateBonusPercent",value:function(t,e){return N()(100*(1-t/e))}},{key:"relativeTimestamp",value:function(t){return t-this.parser.pull.timestamp}},{key:"createTimelineButton",value:function(t){var e=this,i=this.relativeTimestamp(t);return(0,L.jsx)(J.Z,{circular:!0,compact:!0,icon:"time",size:"small",onClick:function(){return e.timeline.show(i,i)},content:this.parser.formatEpochTimestamp(t)})}},{key:"onComplete",value:function(){var t;0!==this.positionalResults.length&&this.checklist.add(new B.$9({name:(0,L.jsx)(O.Trans,{id:"core.positionals.checklist.title",defaults:"Hit your positionals"}),displayOrder:W.Z.POSITIONALS,description:(0,L.jsx)(O.Trans,{id:"core.positionals.checklist.description",defaults:"Melee DPS jobs have some skills that will do more damage when used from the rear or flank. Make sure you use those skills in the right position to do the most damage, or use <0/> when you are out of position.",components:[(0,L.jsx)(M.P9,{action:"TRUE_NORTH"})]}),requirements:k()(t=this.positionalResults).call(t,this.positionalRequirement)}))}},{key:"positionalRequirement",value:function(t){var e,i,n=t.hits.length,a=n+t.misses.length,s=n/a*100;return new B.nb({name:(0,L.jsx)(M.vm,(0,h.Z)({},t.positional)),percent:s,weight:a,overrideDisplay:b()(e=b()(i="".concat(n," / ")).call(i,a," (")).call(e,s.toFixed(2),"%)")})}},{key:"output",value:function(){var t,e,i=this;if(0!==_()(t=this.positionalResults).call(t,(function(t,e){return t+e.misses.length}),0))return(0,L.jsxs)(z.Z,{compact:!0,unstackable:!0,celled:!0,textAlign:"center",children:[(0,L.jsx)(z.Z.Header,{children:(0,L.jsxs)(z.Z.Row,{children:[(0,L.jsx)(z.Z.HeaderCell,{children:(0,L.jsx)("strong",{children:(0,L.jsx)(O.Trans,{id:"core.ui.positionals-table.header.action",defaults:"Action"})})}),(0,L.jsx)(z.Z.HeaderCell,{children:(0,L.jsx)("strong",{children:(0,L.jsx)(O.Trans,{id:"core.ui.positionals-table.header.hits",defaults:"Hits"})})}),(0,L.jsx)(z.Z.HeaderCell,{children:(0,L.jsx)("strong",{children:(0,L.jsx)(O.Trans,{id:"core.ui.positionals-table.header.misses",defaults:"Misses"})})})]})}),(0,L.jsx)(z.Z.Body,{children:k()(e=this.positionalResults).call(e,(function(t){var e,n=t.hits.length,a=t.misses.length,s=0===a;return(0,L.jsxs)(z.Z.Row,{children:[(0,L.jsx)(z.Z.Cell,{style:{whiteSpace:"nowrap"},children:(0,L.jsx)(M.vm,(0,h.Z)((0,h.Z)({},t.positional),{},{showName:!1}))}),(0,L.jsxs)(z.Z.Cell,{textAlign:"center",positive:s,negative:!s,children:[n,"/",a+n]}),(0,L.jsx)(z.Z.Cell,{textAlign:"left",children:k()(e=t.misses).call(e,(function(t){return i.createTimelineButton(t.timestamp)}))})]},t.positional.id)}))})]})}}]),i}(Y.qk),c.handle="positionals",c.title={id:"core.positionals.title",defaults:"Positionals"},c.displayOrder=W.Z.POSITIONALS,o=d,r=(0,A.Z)(o.prototype,"data",[K.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,A.Z)(o.prototype,"checklist",[K.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),u=(0,A.Z)(o.prototype,"timeline",[K.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),o)},45715:function(t,e,i){"use strict";i.d(e,{x:function(){return z}});var n,a,s,o,r,l,u,c,d,h,p,g=i(41420),m=i(97530),f=i(23257),v=i(68420),y=i(27344),w=i(5281),A=i(90306),T=i(50596),b=i(300),I=i(77766),k=i.n(I),E=i(20116),Z=i.n(E),R=i(2991),x=i.n(R),C=i(86359),j=i(40090),H=i(71370),N=i(84626),U=i(28683),_=i(74489),O=i(76704),M=i(8510),S=i(73947),D=i(90577),G=i(52250),K=(i(67294),i(30919)),B=i(40753),W=i(85893),P={0:2,1e3:1,2500:0},J={1:G.bI.MEDIUM,5:G.bI.MAJOR},z=(n=Reflect.metadata("design:type",M.Z),a=Reflect.metadata("design:type",S.V),s=Reflect.metadata("design:type",D.I),o=Reflect.metadata("design:type",G.ZP),p=h=function(t){(0,A.Z)(i,t);var e=(0,T.Z)(i);function i(){var t,n;(0,v.Z)(this,i);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return n=e.call.apply(e,k()(t=[this]).call(t,s)),(0,f.Z)(n,"castTime",l,(0,w.Z)(n)),(0,f.Z)(n,"data",u,(0,w.Z)(n)),(0,f.Z)(n,"invulnerability",c,(0,w.Z)(n)),(0,f.Z)(n,"suggestions",d,(0,w.Z)(n)),n.suggestionIcon="https://xivapi.com/i/001000/001785.png",n.moduleLink=(0,W.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return n.parser.scrollTo(i.handle)},children:(0,W.jsx)(j.Z,{message:i.title})}),n.suggestionContent=(0,W.jsx)(C.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:n.moduleLink}}),n.severity=J,n.weaves=[],n.ongoingCastEvent=void 0,n.leadingGcdEvent=void 0,n.trailingGcdEvent=void 0,n.badWeaves=[],n}return(0,y.Z)(i,[{key:"initialise",value:function(){var t=(0,_.hX)().source(this.parser.actor.id);this.addEventHook(t.type("prepare"),this.onBeginCast),this.addEventHook(t.type("action"),this.onCast),this.addEventHook((0,_.hX)().type("complete"),this.onComplete),this.addEventHook((0,_.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(t){this.ongoingCastEvent=t}},{key:"onCast",value:function(t){var e=this.data.getAction(t.action);e&&!e.autoAttack&&(this.isOgcd(e)?this.weaves.push(t):(this.ongoingCastEvent&&this.ongoingCastEvent.action===e.id?this.trailingGcdEvent=(0,m.Z)((0,m.Z)({},t),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=t,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new G.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,W.jsx)(C.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var t,e;if(null!=this.trailingGcdEvent){var i=null!==(t=null===(e=this.leadingGcdEvent)||void 0===e?void 0:e.timestamp)&&void 0!==t?t:this.parser.pull.timestamp,n=this.trailingGcdEvent.timestamp-i-this.invulnerability.getDuration({start:i,end:this.trailingGcdEvent.timestamp}),a={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:n,weaves:this.weaves};0!==a.weaves.length&&this.isBadWeave(a)&&this.badWeaves.push(a)}}},{key:"isOgcd",value:function(t){return!t.onGcd&&!t.autoAttack}},{key:"isBadWeave",value:function(t){var e,i,n=this,a=Z()(e=t.weaves).call(e,(function(t){return!n.invulnerability.isActive({timestamp:t.timestamp,types:["untargetable"]})&&t.timestamp>=n.parser.pull.timestamp})).length,s=null!==(i=null!=t.leadingGcdEvent?this.castTime.recastForEvent(t.leadingGcdEvent):void 0)&&void 0!==i?i:N.b;return t.gcdTimeDiff>s&&a>this.getMaxWeaves(t)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(t){var e,i;if(null==t.leadingGcdEvent)return 2;var n=this.castTime.forEvent(t.leadingGcdEvent);return null==n?2:(null!==(e=(0,B.CL)(P,n))&&void 0!==e?e:2)-((null!==(i=this.castTime.recastForEvent(t.leadingGcdEvent))&&void 0!==i?i:N.b)<1800?1:0)}},{key:"output",value:function(){var t,e=this;if(0===this.badWeaves.length)return!1;var i=x()(t=this.badWeaves).call(t,(function(t){var i,n,a,s,o;return{key:null!==(i=null===(n=t.leadingGcdEvent)||void 0===n?void 0:n.timestamp)&&void 0!==i?i:e.parser.pull.timestamp,title:{content:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)("strong",{children:e.parser.formatEpochTimestamp(null!==(a=null===(s=t.leadingGcdEvent)||void 0===s?void 0:s.timestamp)&&void 0!==a?a:e.parser.pull.timestamp)})," - ",(0,W.jsx)(C.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:t.weaves.length}})," (",e.parser.formatDuration(t.gcdTimeDiff)," ",(0,W.jsx)(C.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,W.jsx)(H.Z,{events:k()(o=[]).call(o,(0,g.Z)(null!=t.leadingGcdEvent?[t.leadingGcdEvent]:[]),(0,g.Z)(t.weaves))})}}}));return(0,W.jsx)(K.Z,{exclusive:!1,panels:i,styled:!0,fluid:!0})}}]),i}(U.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},r=p,l=(0,b.Z)(r.prototype,"castTime",[O.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),u=(0,b.Z)(r.prototype,"data",[O.I,a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),c=(0,b.Z)(r.prototype,"invulnerability",[O.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),d=(0,b.Z)(r.prototype,"suggestions",[O.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),r)},65929:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Re}});var n,a=i(41420),s=i(68420),o=i(90306),r=i(50596),l=i(77766),u=i.n(l),c=i(86359),d=i(61806),h=i(67294),p=i(85893),g=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){return(0,s.Z)(this,i),e.apply(this,arguments)}return i}(d.E);g.rows=u()(n=[]).call(n,(0,a.Z)(d.E.rows),[{content:"TEN",label:(0,p.jsx)(c.Trans,{id:"nin.action-timeline.mudra",defaults:"Mudra"})},"KASSATSU","TEN_CHI_JIN","TRICK_ATTACK","DREAM_WITHIN_A_DREAM","BUNSHIN","BHAVACAKRA","MUG","MEISUI","HELLFROG_MEDIUM","SHUKUCHI","SHADE_SHIFT"]);var m,f,v,y,w,A,T,b,I,k,E,Z,R,x,C,j,H,N,U,_,O,M,S,D,G,K,B,W,P,J,z,Y,F,L,q,V,X,$,Q,tt,et,it,nt,at,st,ot,rt,lt,ut,ct,dt,ht,pt,gt,mt,ft,vt,yt=i(95859),wt=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,o))).suggestionIcon=yt.ZP.SPINNING_EDGE.icon,n}return i}(i(47969).G),At=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,o))).trackedDefensives=[n.data.actions.SHADE_SHIFT],n}return i}(i(12541).O),Tt=i(23257),bt=i(27344),It=i(5281),kt=i(300),Et=i(39392),Zt=i.n(Et),Rt=i(2991),xt=i.n(Rt),Ct=i(20116),jt=i.n(Ct),Ht=i(9263),Nt=i(28683),Ut=i(74489),_t=i(76704),Ot=i(52102),Mt=i(73947),St=i(44971),Dt=i(52250),Gt=i(68156),Kt=i(45150),Bt=6e4,Wt=1e4,Pt=[["ARMOR_CRUSH",3e4],["HAKKE_MUJINSATSU",Wt]],Jt={},zt=(m=Reflect.metadata("design:type",Ot.ZP),f=Reflect.metadata("design:type",Mt.V),v=Reflect.metadata("design:type",St.h),y=Reflect.metadata("design:type",Dt.ZP),E=k=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n,a,o;(0,s.Z)(this,i);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return o=e.call.apply(e,u()(t=[this]).call(t,l)),(0,Tt.Z)(o,"checklist",A,(0,It.Z)(o)),(0,Tt.Z)(o,"data",T,(0,It.Z)(o)),(0,Tt.Z)(o,"death",b,(0,It.Z)(o)),(0,Tt.Z)(o,"suggestions",I,(0,It.Z)(o)),o.hutonExtensionMillis=new(Zt())(xt()(Pt).call(Pt,(function(t){return[o.data.actions[t[0]].id,t[1]]}))),o.highEstimate={current:55e3-(Jt[null!==(n=o.parser.pull.encounter.key)&&void 0!==n?n:"TRASH"]||0),clipped:0,downtime:0,badAcs:0},o.lowEstimate={current:49e3-(Jt[null!==(a=o.parser.pull.encounter.key)&&void 0!==a?a:"TRASH"]||0),clipped:0,downtime:0,badAcs:0},o.lastEventTime=o.parser.pull.timestamp,o}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t,e,i=this,n=(0,Ut.hX)().source(this.parser.actor.id),a=xt()(t=jt()(e=this.parser.pull.actors).call(e,(function(t){return t.owner===i.parser.actor}))).call(t,(function(t){return t.id}));this.addEventHook(n.type("action").action((0,Ut.kw)([this.data.actions.HUTON.id,this.data.actions.HURAIJIN.id])),this.onHutonCast),this.addEventHook(n.type("combo").action((0,Ut.kw)(xt()(Pt).call(Pt,(function(t){return i.data.actions[t[0]].id})))),this.onHutonCombo),this.addEventHook((0,Ut.hX)().source((0,Ut.kw)(a)).type("damage").cause((0,Ut.hX)().action(this.data.actions.PHANTOM_KAMAITACHI_BUNSHIN.id)),this.onKamaitachi),this.addEventHook({type:"death",actor:this.parser.actor.id},this.onDeath),this.addEventHook({type:"raise",actor:this.parser.actor.id},this.onRaise),this.addEventHook("complete",this.onComplete)}},{key:"handleHutonRecast",value:function(t,e){0===t.current&&(t.downtime+=e),t.current=Bt}},{key:"onHutonCast",value:function(t){var e=t.timestamp-this.lastEventTime;this.handleHutonRecast(this.highEstimate,e),this.handleHutonRecast(this.lowEstimate,e),this.lastEventTime=t.timestamp}},{key:"handleHutonExtension",value:function(t,e,i,n){var a=t.current-n;a<=0?(t.current=0,t.downtime-=a,e===this.data.actions.ARMOR_CRUSH.id&&t.badAcs++):(a+=i,t.clipped+=Math.max(a-Bt,0),t.current=Math.min(a,Bt))}},{key:"onHutonCombo",value:function(t){var e,i=t.timestamp-this.lastEventTime,n=this.data.getAction(t.action);if(null!=n){var a=null!==(e=this.hutonExtensionMillis.get(n.id))&&void 0!==e?e:0;this.handleHutonExtension(this.highEstimate,n.id,a,i),this.handleHutonExtension(this.lowEstimate,n.id,a,i),this.lastEventTime=t.timestamp}}},{key:"onKamaitachi",value:function(t){var e=t.timestamp-this.lastEventTime;this.handleHutonExtension(this.highEstimate,this.data.actions.PHANTOM_KAMAITACHI_BUNSHIN.id,Wt,e),this.handleHutonExtension(this.lowEstimate,this.data.actions.PHANTOM_KAMAITACHI_BUNSHIN.id,Wt,e),this.lastEventTime=t.timestamp}},{key:"onDeath",value:function(){this.highEstimate.current=0,this.lowEstimate.current=0}},{key:"onRaise",value:function(t){this.lastEventTime=t.timestamp}},{key:"getHutonAverages",value:function(){return this.lowEstimate.downtime-this.highEstimate.downtime>1e4?{clipped:this.highEstimate.clipped,downtime:this.highEstimate.downtime,badAcs:this.highEstimate.badAcs}:{clipped:Math.round((this.highEstimate.clipped+this.lowEstimate.clipped)/2),downtime:Math.round((this.highEstimate.downtime+this.lowEstimate.downtime)/2),badAcs:Math.round((this.highEstimate.badAcs+this.lowEstimate.badAcs)/2)}}},{key:"onComplete",value:function(){var t=this.getHutonAverages(),e=t.clipped,i=t.downtime,n=t.badAcs,a=this.parser.currentDuration-this.death.deadTime,s=(a-i)/a*100;this.checklist.add(new Ot.$9({name:(0,p.jsx)(c.Trans,{id:"nin.huton.checklist.name",defaults:"Keep Huton up"}),description:(0,p.jsxs)(h.Fragment,{children:[(0,p.jsx)(c.Trans,{id:"nin.huton.checklist.description",defaults:"<0/> provides you with a 15% attack speed increase and as such is a <1>huge</1> part of a NIN's personal DPS. Do your best not to let it drop, and recover it as quickly as possible if it does.",components:[(0,p.jsx)(Ht.vm,{action:"HUTON"}),(0,p.jsx)("em",{})]}),(0,p.jsxs)(Gt.Z,{warning:!0,icon:!0,children:[(0,p.jsx)(Kt.Z,{name:"warning sign"}),(0,p.jsx)(Gt.Z.Content,{children:(0,p.jsx)(c.Trans,{id:"nin.huton.checklist.description.warning",defaults:"As Huton is now a gauge instead of a buff, please bear in mind that this is an estimate, not an exact value. This also applies to any Huton-related suggestions below."})})]})]}),displayOrder:1,requirements:[new Ot.nb({name:(0,p.jsx)(c.Trans,{id:"nin.huton.checklist.requirement.name",defaults:"<0/> uptime",components:[(0,p.jsx)(Ht.vm,{action:"HUTON"})]}),percent:function(){return s}})],target:99})),this.suggestions.add(new Dt.eg({icon:this.data.actions.HUTON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.huton.suggestions.clipping.content",defaults:"Avoid using <0/> when <1/> has more than 30 seconds left on its duration. The excess time is wasted, so using <2/> is typically the better option.",components:[(0,p.jsx)(Ht.vm,{action:"ARMOR_CRUSH"}),(0,p.jsx)(Ht.vm,{action:"HUTON"}),(0,p.jsx)(Ht.vm,{action:"AEOLIAN_EDGE"})]}),tiers:{15e3:Dt.bI.MINOR,6e4:Dt.bI.MEDIUM},value:e,why:(0,p.jsx)(c.Trans,{id:"nin.huton.suggestions.clipping.why",defaults:"You clipped {0} of Huton with early Armor Crushes.",values:{0:this.parser.formatDuration(e)}})})),this.suggestions.add(new Dt.eg({icon:this.data.actions.ARMOR_CRUSH.icon,content:(0,p.jsx)(c.Trans,{id:"nin.huton.suggestions.futile-ac.content",defaults:"Avoid using <0/> when <1/> is down, as it provides no benefit and does less DPS than your other combo finishers.",components:[(0,p.jsx)(Ht.vm,{action:"ARMOR_CRUSH"}),(0,p.jsx)(Ht.vm,{action:"HUTON"})]}),tiers:{1:Dt.bI.MINOR,2:Dt.bI.MEDIUM},value:n,why:(0,p.jsx)(c.Trans,{id:"nin.huton.suggestions.futile-ac.why",defaults:"You used Armor Crush {badAcs, plural, one {# time} other {# times}} when Huton was down.",values:{badAcs:n}})}))}}]),i}(Nt.qk),k.handle="huton",w=E,A=(0,kt.Z)(w.prototype,"checklist",[_t.I,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),T=(0,kt.Z)(w.prototype,"data",[_t.I,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),b=(0,kt.Z)(w.prototype,"death",[_t.I,v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.death}}),I=(0,kt.Z)(w.prototype,"suggestions",[_t.I,y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),w),Yt=i(18527),Ft=i(3362),Lt=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,o))).pomIndex=null,n}return(0,bt.Z)(i,[{key:"initialise",value:function(){(0,Yt.Z)((0,Ft.Z)(i.prototype),"initialise",this).call(this),this.setPercentageAdjustment("all",.85,"both")}}]),i}(i(8510).Z),qt=i(44845),Vt=i(86902),Xt=i.n(Vt),$t=i(70273),Qt=(Z=Reflect.metadata("design:type",$t.e),R=Reflect.metadata("design:type",Mt.V),x=Reflect.metadata("design:type",Dt.ZP),_=U=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n,a;(0,s.Z)(this,i);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return a=e.call.apply(e,u()(t=[this]).call(t,r)),(0,Tt.Z)(a,"actors",j,(0,It.Z)(a)),(0,Tt.Z)(a,"data",H,(0,It.Z)(a)),(0,Tt.Z)(a,"suggestions",N,(0,It.Z)(a)),a.kassatsuSpent=!1,a.kassatsuWastes=0,a.kassatsuUses=(n={},(0,qt.Z)(n,a.data.actions.FUMA_SHURIKEN.id,0),(0,qt.Z)(n,a.data.actions.GOKA_MEKKYAKU.id,0),(0,qt.Z)(n,a.data.actions.RAITON.id,0),(0,qt.Z)(n,a.data.actions.HYOSHO_RANRYU.id,0),(0,qt.Z)(n,a.data.actions.HUTON.id,0),(0,qt.Z)(n,a.data.actions.DOTON.id,0),(0,qt.Z)(n,a.data.actions.SUITON.id,0),(0,qt.Z)(n,a.data.actions.RABBIT_MEDIUM.id,0),n),a}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t,e=(0,Ut.hX)().source(this.parser.actor.id);this.addEventHook(e.type("action").action((0,Ut.kw)(xt()(t=Xt()(this.kassatsuUses)).call(t,Number))),this.onNinjutsuCast),this.addEventHook(e.type("statusRemove").status(this.data.statuses.KASSATSU.id),this.onRemoveKassatsu),this.addEventHook("complete",this.onComplete)}},{key:"onNinjutsuCast",value:function(t){var e=t.action;this.actors.current.hasStatus(this.data.statuses.KASSATSU.id)&&(this.kassatsuUses[e]++,this.kassatsuSpent=!0)}},{key:"onRemoveKassatsu",value:function(){this.kassatsuSpent||this.kassatsuWastes++,this.kassatsuSpent=!1}},{key:"onComplete",value:function(){this.kassatsuWastes>0&&this.suggestions.add(new Dt.q$({icon:this.data.actions.KASSATSU.icon,content:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.waste.content",defaults:"Be careful not to let <0/> fall off, as it wastes a 30% potency buff and means that you're delaying your Ninjutsu casts significantly.",components:[(0,p.jsx)(Ht.vm,{action:"KASSATSU"})]}),severity:Dt.bI.MAJOR,why:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.waste.why",defaults:"You allowed Kassatsu to fall off {0, plural, one {# time} other {# times}}.",values:{0:this.kassatsuWastes}})})),this.kassatsuUses[this.data.actions.HUTON.id]>0&&this.suggestions.add(new Dt.q$({icon:this.data.actions.HUTON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.huton.content",defaults:"Avoid using <0/> under <1/>, as it does no damage and completely wastes the 30% potency buff Kassatsu provides.",components:[(0,p.jsx)(Ht.vm,{action:"HUTON"}),(0,p.jsx)(Ht.vm,{action:"KASSATSU"})]}),severity:Dt.bI.MAJOR,why:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.huton.why",defaults:"You cast Huton {0, plural, one {# time} other {# times}} under Kassatsu.",values:{0:this.kassatsuUses[this.data.actions.HUTON.id]}})}));var t=this.kassatsuUses[this.data.actions.FUMA_SHURIKEN.id]+this.kassatsuUses[this.data.actions.RAITON.id]+this.kassatsuUses[this.data.actions.DOTON.id];t>0&&this.suggestions.add(new Dt.q$({icon:this.data.actions.FUMA_SHURIKEN.icon,content:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.generalbads.content",defaults:"Avoid using <0/>, <1/>, and <2/> under <3/>. For raw damage, <4/> and <5/> should always be used in single-target and AoE situations respectively.",components:[(0,p.jsx)(Ht.vm,{action:"FUMA_SHURIKEN"}),(0,p.jsx)(Ht.vm,{action:"RAITON"}),(0,p.jsx)(Ht.vm,{action:"DOTON"}),(0,p.jsx)(Ht.vm,{action:"KASSATSU"}),(0,p.jsx)(Ht.vm,{action:"HYOSHO_RANRYU"}),(0,p.jsx)(Ht.vm,{action:"GOKA_MEKKYAKU"})]}),severity:Dt.bI.MAJOR,why:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.generalbads.why",defaults:"You cast standard damaging Ninjutsu {generalBads, plural, one {# time} other {# times}} under Kassatsu.",values:{generalBads:t}})})),this.kassatsuUses[this.data.actions.SUITON.id]>0&&this.suggestions.add(new Dt.q$({icon:this.data.actions.SUITON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.suiton.content",defaults:"Avoid using <0/> under <1/> unless using it to set up for a critically important <2/>. It's generally best to use it on <3/> while Trick Attack is up, as its cooldown should align it with every window.",components:[(0,p.jsx)(Ht.vm,{action:"SUITON"}),(0,p.jsx)(Ht.vm,{action:"KASSATSU"}),(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"}),(0,p.jsx)(Ht.vm,{action:"HYOSHO_RANRYU"})]}),severity:Dt.bI.MEDIUM,why:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.suiton.why",defaults:"You cast Suiton {0, plural, one {# time} other {# times}} under Kassatsu.",values:{0:this.kassatsuUses[this.data.actions.SUITON.id]}})})),this.kassatsuUses[this.data.actions.RABBIT_MEDIUM.id]>0&&this.suggestions.add(new Dt.q$({icon:this.data.actions.RABBIT_MEDIUM.icon,content:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.rabbit.content",defaults:"Be especially careful not to flub your mudras under <0/>, as <1/> does no damage and completely wastes the 30% potency buff Kassatsu provides.",components:[(0,p.jsx)(Ht.vm,{action:"KASSATSU"}),(0,p.jsx)(Ht.vm,{action:"RABBIT_MEDIUM"})]}),severity:Dt.bI.MAJOR,why:(0,p.jsx)(c.Trans,{id:"nin.kassatsu.suggestions.rabbit.why",defaults:"You cast Rabbit Medium {0, plural, one {# time} other {# times}} under Kassatsu.",values:{0:this.kassatsuUses[this.data.actions.RABBIT_MEDIUM.id]}})}))}}]),i}(Nt.qk),U.handle="kassatsu",C=_,j=(0,kt.Z)(C.prototype,"actors",[_t.I,Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),H=(0,kt.Z)(C.prototype,"data",[_t.I,R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),N=(0,kt.Z)(C.prototype,"suggestions",[_t.I,x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),C),te=i(32366),ee=i.n(te),ie=(O=Reflect.metadata("design:type",$t.e),M=Reflect.metadata("design:type",Mt.V),S=Reflect.metadata("design:type",Dt.ZP),P=W=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=e.call.apply(e,u()(t=[this]).call(t,o)),(0,Tt.Z)(n,"actors",G,(0,It.Z)(n)),(0,Tt.Z)(n,"data",K,(0,It.Z)(n)),(0,Tt.Z)(n,"suggestions",B,(0,It.Z)(n)),n.hyotonCount=0,n.rabbitCount=0,n.current=void 0,n.history=[],n}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t=this,e=(0,Ut.hX)().source(this.parser.actor.id);this.addEventHook(e.type("action").action((0,Ut.kw)([this.data.actions.HYOTON.id,this.data.actions.HYOTON_TCJ.id])),(function(){t.hyotonCount++})),this.addEventHook(e.type("action").action(this.data.actions.RABBIT_MEDIUM.id),(function(){t.rabbitCount++})),this.addEventHook(e.type("action").action((0,Ut.kw)([this.data.actions.DOTON.id,this.data.actions.DOTON_TCJ.id])),this.onDotonCast),this.addEventHook(e.type("damage").cause(this.data.matchCauseStatus(["DOTON"])),(function(e){var i,n;null===(i=t.current)||void 0===i||i.ticks.push(null!==(n=e.targets.length)&&void 0!==n?n:0)})),this.addEventHook(e.type("statusRemove").status(this.data.statuses.DOTON.id),this.finishDotonWindow),this.addEventHook("complete",this.onComplete)}},{key:"onDotonCast",value:function(t){this.finishDotonWindow(),this.current={tcj:this.actors.current.hasStatus(this.data.statuses.TEN_CHI_JIN.id),ticks:[],prepull:t.timestamp<this.parser.pull.timestamp}}},{key:"finishDotonWindow",value:function(){null!=this.current&&(this.history.push(this.current),this.current=void 0)}},{key:"appraiseDotonCasts",value:function(){var t={badTcjs:0,badAoes:0,badStds:0};return this.history.forEach((function(e){var i;e.tcj&&e.ticks.every((function(t){return 1===t}))?t.badTcjs++:e.ticks.every((function(t){return t>1}))?e.ticks.length<6&&t.badAoes++:!e.prepull&&ee()(i=e.ticks).call(i,(function(t,e){return t+e}),0)<10&&t.badStds++})),t}},{key:"onComplete",value:function(){this.finishDotonWindow(),this.suggestions.add(new Dt.eg({icon:this.data.actions.HYOTON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.hyoton.content",defaults:"Avoid using <0/>, as it's the weakest of the mudra combinations and should typically never be used in raid content.",components:[(0,p.jsx)(Ht.vm,{action:"HYOTON"})]}),tiers:{1:Dt.bI.MINOR,2:Dt.bI.MEDIUM},value:this.hyotonCount,why:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.hyoton.why",defaults:"You cast Hyoton {0, plural, one {# time} other {# times}}.",values:{0:this.hyotonCount}})})),this.suggestions.add(new Dt.eg({icon:this.data.actions.RABBIT_MEDIUM.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.rabbit.content",defaults:"Be careful not to flub your mudras, as using <0/> can cost you considerable DPS by reducing the number of <1/>s you can do during the fight.",components:[(0,p.jsx)(Ht.vm,{action:"RABBIT_MEDIUM"}),(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"})]}),tiers:{1:Dt.bI.MEDIUM,3:Dt.bI.MAJOR},value:this.rabbitCount,why:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.rabbit.why",defaults:"You cast Rabbit Medium {0, plural, one {# time} other {# times}}.",values:{0:this.rabbitCount}})}));var t=this.appraiseDotonCasts(),e=t.badTcjs,i=t.badAoes,n=t.badStds;this.suggestions.add(new Dt.eg({icon:this.data.actions.DOTON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.tcj-doton.content",defaults:"Avoid using <0/> under <1/> unless you're up against multiple targets. On a single target, using the <2/> combo will do equivalent or better damage and keep it aligned with <3/>.",components:[(0,p.jsx)(Ht.vm,{action:"DOTON"}),(0,p.jsx)(Ht.vm,{action:"TEN_CHI_JIN"}),(0,p.jsx)(Ht.vm,{action:"SUITON"}),(0,p.jsx)(Ht.vm,{action:"MEISUI"})]}),tiers:{1:Dt.bI.MEDIUM,2:Dt.bI.MAJOR},value:e,why:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.tcj-doton.why",defaults:"You cast a single-target Doton under Ten Chi Jin {badTcjs, plural, one {# time} other {# times}}.",values:{badTcjs:e}})})),i>0&&this.suggestions.add(new Dt.q$({icon:this.data.actions.DOTON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.aoe-doton.content",defaults:"<0/> requires at least {DOTON_TICK_TARGET} ticks to be worthwhile in an AoE setting. Use <1/> instead against adds that will die quickly.",values:{DOTON_TICK_TARGET:6},components:[(0,p.jsx)(Ht.vm,{action:"DOTON"}),(0,p.jsx)(Ht.vm,{action:"KATON"})]}),severity:Dt.bI.MINOR,why:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.aoe-doton.why",defaults:"You cast an unoptimized Doton cast {badAoes, plural, one {# time} other {# times}}.",values:{badAoes:i}})})),this.suggestions.add(new Dt.eg({icon:this.data.actions.DOTON.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.st-doton.content",defaults:"Avoid using <0/> on single targets, as it does less damage than <1/> if any ticks miss and uses more mudras, resulting in more GCD delay for no gain.",components:[(0,p.jsx)(Ht.vm,{action:"DOTON"}),(0,p.jsx)(Ht.vm,{action:"RAITON"})]}),tiers:{1:Dt.bI.MINOR,2:Dt.bI.MEDIUM,3:Dt.bI.MAJOR},value:n,why:(0,p.jsx)(c.Trans,{id:"nin.ninjutsu.suggestions.st-doton.why",defaults:"You cast a single-target Doton {badStds, plural, one {# time} other {# times}}.",values:{badStds:n}})}))}}]),i}(Nt.qk),W.handle="ninjutsu",D=P,G=(0,kt.Z)(D.prototype,"actors",[_t.I,O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),K=(0,kt.Z)(D.prototype,"data",[_t.I,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),B=(0,kt.Z)(D.prototype,"suggestions",[_t.I,S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),D),ne=i(43719),ae=i(78766),se=i(40753),oe={20:Dt.bI.MINOR,50:Dt.bI.MAJOR},re={1:Dt.bI.MEDIUM},le=(J=Reflect.metadata("design:type",Dt.ZP),L=F=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=e.call.apply(e,u()(t=[this]).call(t,o)),(0,Tt.Z)(n,"suggestions",Y,(0,It.Z)(n)),n.ninkiGauge=n.add(new ae.qT({graph:{label:(0,p.jsx)(c.Trans,{id:"nin.ninki.resource.label",defaults:"Ninki"}),color:ne.W.NINJA.colour}})),n.ninkiFilters={action:[n.data.actions.BHAVACAKRA.id,n.data.actions.HELLFROG_MEDIUM.id,n.data.actions.BUNSHIN.id,n.data.actions.MEISUI.id],combo:[n.data.actions.SPINNING_EDGE.id,n.data.actions.GUST_SLASH.id,n.data.actions.AEOLIAN_EDGE.id,n.data.actions.ARMOR_CRUSH.id,n.data.actions.DEATH_BLOSSOM.id,n.data.actions.HAKKE_MUJINSATSU.id],damage:[n.data.actions.HURAIJIN.id,n.data.actions.FORKED_RAIJU.id,n.data.actions.FLEETING_RAIJU.id,n.data.actions.THROWING_DAGGER.id,n.data.actions.MUG.id]},n.ninkiModifiers=new(Zt())([[n.data.actions.SPINNING_EDGE.id,{combo:5}],[n.data.actions.GUST_SLASH.id,{combo:5}],[n.data.actions.AEOLIAN_EDGE.id,{combo:15}],[n.data.actions.ARMOR_CRUSH.id,{combo:15}],[n.data.actions.DEATH_BLOSSOM.id,{combo:5}],[n.data.actions.HAKKE_MUJINSATSU.id,{combo:5}],[n.data.actions.HURAIJIN.id,{damage:5}],[n.data.actions.FORKED_RAIJU.id,{damage:5}],[n.data.actions.FLEETING_RAIJU.id,{damage:5}],[n.data.actions.THROWING_DAGGER.id,{damage:5}],[n.data.actions.MUG.id,{damage:40}],[n.data.actions.MEISUI.id,{action:50}],[n.data.actions.BHAVACAKRA.id,{action:-50}],[n.data.actions.HELLFROG_MEDIUM.id,{action:-50}],[n.data.actions.BUNSHIN.id,{action:-50}]]),n.erroneousFrogs=0,n}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t,e,n=this;(0,Yt.Z)((0,Ft.Z)(i.prototype),"initialise",this).call(this);var a=(0,Ut.hX)().source(this.parser.actor.id),s=xt()(t=jt()(e=this.parser.pull.actors).call(e,(function(t){return t.owner===n.parser.actor}))).call(t,(function(t){return t.id}));this.addEventHook(a.type("action").action((0,Ut.kw)(this.ninkiFilters.action)),this.onGaugeModifier),this.addEventHook(a.type("combo").action((0,Ut.kw)(this.ninkiFilters.combo)),this.onGaugeModifier),this.addEventHook(a.type("damage").cause((0,Ut.hX)().action((0,Ut.kw)(this.ninkiFilters.damage))),this.onDamage),this.addEventHook((0,Ut.hX)().source((0,Ut.kw)(s)).type("damage"),this.onBunshinHit),this.addEventHook(a.type("damage").cause((0,Ut.hX)().action(this.data.actions.HELLFROG_MEDIUM.id)),this.onHellfrog),this.addEventHook("complete",this.onComplete)}},{key:"onBunshinHit",value:function(t){"action"===t.cause.type&&t.cause.action===this.data.actions.PHANTOM_KAMAITACHI_BUNSHIN.id?this.ninkiGauge.modify(10):this.ninkiGauge.modify(5)}},{key:"onDamage",value:function(t){if((0,se.SV)(t)&&"action"===t.cause.type){var e=this.ninkiModifiers.get(t.cause.action);if(null!=e){var i,n=null!==(i=e[t.type])&&void 0!==i?i:0;this.ninkiGauge.modify(n)}}}},{key:"onGaugeModifier",value:function(t){var e=this.ninkiModifiers.get(t.action);if(null!=e){var i,n=null!==(i=e[t.type])&&void 0!==i?i:0;this.ninkiGauge.modify(n)}}},{key:"onHellfrog",value:function(t){t.targets.length<3&&this.erroneousFrogs++}},{key:"onComplete",value:function(){this.suggestions.add(new Dt.eg({icon:"https://xivapi.com/i/005000/005411.png",content:(0,p.jsx)(c.Trans,{id:"nin.ninki.suggestions.waste.content",defaults:"Avoid using <0/> and <1/> when above 40 Ninki and holding your Ninki spenders when near or at cap (with a few small exceptions) in order to maximize the number of spenders you can use over the course of a fight.",components:[(0,p.jsx)(Ht.vm,{action:"MUG"}),(0,p.jsx)(Ht.vm,{action:"MEISUI"})]}),tiers:oe,value:this.ninkiGauge.overCap,why:(0,p.jsx)(c.Trans,{id:"nin.ninki.suggestions.waste.why",defaults:"Overcapping caused you to lose {0} Ninki over the fight.",values:{0:this.ninkiGauge.overCap}})})),this.suggestions.add(new Dt.eg({icon:this.data.actions.HELLFROG_MEDIUM.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ninki.suggestions.frog.content",defaults:"Avoid using <0/> when you have fewer than three targets, as <1/> is otherwise a potency gain.",components:[(0,p.jsx)(Ht.vm,{action:"HELLFROG_MEDIUM"}),(0,p.jsx)(Ht.vm,{action:"BHAVACAKRA"})]}),tiers:re,value:this.erroneousFrogs,why:(0,p.jsx)(c.Trans,{id:"nin.ninki.suggestions.frog.why",defaults:"You used Hellfrog Medium {0, plural, one {# time} other {# times}} when other spenders were available.",values:{0:this.erroneousFrogs}})}))}}]),i}(ae.aC),F.title={id:"nin.ninki.title",defaults:"Ninki Gauge"},z=L,Y=(0,kt.Z)(z.prototype,"suggestions",[_t.I,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),z),ue=i(81643),ce=i.n(ue),de=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,o))).trackedCds=[{cooldowns:[n.data.actions.KASSATSU],firstUseOffset:1e3},{cooldowns:[n.data.actions.MUG],firstUseOffset:6e3},{cooldowns:[n.data.actions.BUNSHIN],firstUseOffset:7e3},{cooldowns:[n.data.actions.TRICK_ATTACK],firstUseOffset:1e4},{cooldowns:[n.data.actions.DREAM_WITHIN_A_DREAM],firstUseOffset:12250},{cooldowns:[n.data.actions.TEN_CHI_JIN],firstUseOffset:17250},{cooldowns:[n.data.actions.MEISUI],firstUseOffset:20750}],n.dreamTimestamps=[],n}return(0,bt.Z)(i,[{key:"countUsage",value:function(t){var e;return t.action!==this.data.actions.DREAM_WITHIN_A_DREAM.id||!(ce()(e=this.dreamTimestamps).call(e,t.timestamp)>-1)&&(this.dreamTimestamps.push(t.timestamp),!0)}}]),i}(i(48945).u),he=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=e.call.apply(e,u()(t=[this]).call(t,o))).positionals=[n.data.actions.ARMOR_CRUSH,n.data.actions.TRICK_ATTACK,n.data.actions.AEOLIAN_EDGE],n}return i}(i(28101).O),pe=(q=Reflect.metadata("design:type",$t.e),V=Reflect.metadata("design:type",Mt.V),X=Reflect.metadata("design:type",Dt.ZP),nt=it=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=e.call.apply(e,u()(t=[this]).call(t,o)),(0,Tt.Z)(n,"actors",Q,(0,It.Z)(n)),(0,Tt.Z)(n,"data",tt,(0,It.Z)(n)),(0,Tt.Z)(n,"suggestions",et,(0,It.Z)(n)),n.currentStacks=0,n.droppedStacks=0,n.breakingGcds=[n.data.actions.SPINNING_EDGE.id,n.data.actions.GUST_SLASH.id,n.data.actions.AEOLIAN_EDGE.id,n.data.actions.ARMOR_CRUSH.id,n.data.actions.DEATH_BLOSSOM.id,n.data.actions.HAKKE_MUJINSATSU.id,n.data.actions.HURAIJIN.id],n}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t=this,e=(0,Ut.hX)().source(this.parser.actor.id);this.addEventHook(e.type("statusApply").status(this.data.statuses.RAIJU_READY.id),this.onRaijuReady),this.addEventHook(e.type("statusRemove").status(this.data.statuses.RAIJU_READY.id),(function(){return t.currentStacks=0})),this.addEventHook(e.type("action").action((0,Ut.kw)(this.breakingGcds)),this.onBreakingGcd),this.addEventHook("complete",this.onComplete)}},{key:"onRaijuReady",value:function(t){var e;this.currentStacks=null!==(e=t.data)&&void 0!==e?e:1}},{key:"onBreakingGcd",value:function(){this.droppedStacks+=this.currentStacks,this.currentStacks=0}},{key:"onComplete",value:function(){this.suggestions.add(new Dt.eg({icon:this.data.actions.FLEETING_RAIJU.icon,content:(0,p.jsx)(c.Trans,{id:"nin.raiju.suggestions.dropped.content",defaults:"Avoid using any of your non-Raiju melee GCDs while you have stacks of <0/>, as it will cause the stacks to fall off.",components:[(0,p.jsx)(Ht.ci,{status:"RAIJU_READY"})]}),tiers:{1:Dt.bI.MAJOR},value:this.droppedStacks,why:(0,p.jsx)(c.Trans,{id:"nin.raiju.suggestions.dropped.why",defaults:"You dropped {0, plural, one {# stack} other {# stacks}} of Raiju Ready.",values:{0:this.droppedStacks}})}))}}]),i}(Nt.qk),it.handle="raiju",$=nt,Q=(0,kt.Z)($.prototype,"actors",[_t.I,q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),tt=(0,kt.Z)($.prototype,"data",[_t.I,V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),et=(0,kt.Z)($.prototype,"suggestions",[_t.I,X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),$),ge=i(78580),me=i.n(ge),fe=i(51691),ve=["TEN","TEN_KASSATSU","CHI","CHI_KASSATSU","JIN","JIN_KASSATSU"],ye=(at=Reflect.metadata("design:type",Mt.V),st=Reflect.metadata("design:type",fe.Z),ot=Reflect.metadata("design:type",Dt.ZP),ht=dt=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=e.call.apply(e,u()(t=[this]).call(t,o)),(0,Tt.Z)(n,"data",lt,(0,It.Z)(n)),(0,Tt.Z)(n,"downtime",ut,(0,It.Z)(n)),(0,Tt.Z)(n,"suggestions",ct,(0,It.Z)(n)),n.mudraActions=[],n.taCasts=[],n.lostTime=0,n.gcdCount=0,n.castHook=void 0,n}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t=this;this.mudraActions=xt()(ve).call(ve,(function(e){return t.data.actions[e].id}));var e=(0,Ut.hX)().source(this.parser.actor.id);this.castHook=this.addEventHook(e.type("action"),this.onCast),this.addEventHook(e.type("action").action(this.data.actions.TRICK_ATTACK.id),this.onTrickAttack),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){var e,i=this.data.getAction(t.action);t.timestamp>=this.parser.pull.timestamp&&null!=i&&i.onGcd&&!me()(e=this.mudraActions).call(e,i.id)&&this.gcdCount++}},{key:"onTrickAttack",value:function(t){if(null!=this.castHook&&(this.removeEventHook(this.castHook),this.castHook=void 0),this.taCasts.length>0){var e=this.taCasts[this.taCasts.length-1]+this.data.actions.TRICK_ATTACK.cooldown,i=this.downtime.getDowntime(e,t.timestamp);this.lostTime+=Math.max(t.timestamp-e-i,0)}this.taCasts.push(t.timestamp)}},{key:"onComplete",value:function(){if(this.taCasts.length>0){var t=this.taCasts[this.taCasts.length-1],e=Math.floor((this.lostTime+(this.parser.currentEpochTimestamp-t))/this.data.actions.TRICK_ATTACK.cooldown);if(this.suggestions.add(new Dt.eg({icon:this.data.actions.TRICK_ATTACK.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ta-usage.suggestions.missed.content",defaults:"Avoid holding <0/> for extended periods of time. It's typically ideal to use it as close to on cooldown as possible in order to keep it aligned with raid buffs, as well as maximizing the number of uses per fight.",components:[(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"})]}),value:e,tiers:{1:Dt.bI.MEDIUM,2:Dt.bI.MAJOR},why:(0,p.jsx)(c.Trans,{id:"nin.ta-usage.suggestions.missed.why",defaults:"You delayed Trick Attack for a cumulative {0}, costing you {lostCasts, plural, one {# potential use} other {# potential uses}}.",values:{0:this.parser.formatDuration(this.lostTime),lostCasts:e}})})),this.parser.patch.before("6.1")){var i=Math.abs(4-this.gcdCount);this.suggestions.add(new Dt.eg({icon:this.data.actions.TRICK_ATTACK.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ta-usage.suggestions.opener.content",defaults:"Avoid unconventional timings for your first <0/> of the fight in order to line it up raid buffs. In most openers, Trick Attack should be weaved in approximately 8-9 seconds into the fight.",components:[(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"})]}),value:i,tiers:{1:Dt.bI.MEDIUM,2:Dt.bI.MAJOR},why:(0,p.jsx)(c.Trans,{id:"nin.ta-usage.suggestions.opener.why",defaults:"Your first Trick Attack was {0, plural, one {# GCD} other {# GCDs}} into your opener.",values:{0:this.gcdCount}})}))}}this.suggestions.add(new Dt.eg({icon:this.data.actions.TRICK_ATTACK.icon,content:(0,p.jsx)(c.Trans,{id:"nin.ta-usage.suggestions.none.content",defaults:"<0/> is a very powerful personal buff and should be used on cooldown, or as close to it as possible depending on the flow of the fight.",components:[(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"})]}),value:this.taCasts.length,tiers:{0:Dt.bI.MAJOR},matcher:se.me,why:(0,p.jsx)(c.Trans,{id:"nin.ta-usage.suggestions.none.why",defaults:"You didn't use Trick Attack once the entire fight."})}))}}]),i}(Nt.qk),dt.handle="taUsage",rt=ht,lt=(0,kt.Z)(rt.prototype,"data",[_t.I,at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),ut=(0,kt.Z)(rt.prototype,"downtime",[_t.I,st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),ct=(0,kt.Z)(rt.prototype,"suggestions",[_t.I,ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),rt),we=i(94473),Ae=i.n(we),Te=i(37517),be=i(83459),Ie=["TEN","TEN_KASSATSU","CHI","CHI_KASSATSU","JIN","JIN_KASSATSU"],ke=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(t){var n;return(0,s.Z)(this,i),(n=e.call(this)).tcjId=void 0,n.header={header:(0,p.jsx)(c.Trans,{id:"nin.taWindow.chart.notes.header",defaults:"TCJ Used"}),accessor:"tcjused"},n.tcjId=t,n}return(0,bt.Z)(i,[{key:"generateNotes",value:function(t){var e,i=this;return Ae()(e=t.data).call(e,(function(t){return t.action.id===i.tcjId}))?(0,p.jsx)(c.Trans,{id:"nin.taWindow.chart.notes.yes",defaults:"Yes"}):(0,p.jsx)(c.Trans,{id:"nin.taWindow.chart.notes.no",defaults:"No"})}}]),i}(Te.qt),Ee=(pt=Reflect.metadata("design:type",be.E),vt=ft=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){var t,n;(0,s.Z)(this,i);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=e.call.apply(e,u()(t=[this]).call(t,o)),(0,Tt.Z)(n,"globalCooldown",mt,(0,It.Z)(n)),n.buffStatus=n.parser.patch.before("6.1")?n.data.statuses.TRICK_ATTACK_VULNERABILITY_UP:n.data.statuses.TRICK_ATTACK,n}return(0,bt.Z)(i,[{key:"initialise",value:function(){var t=this;(0,Yt.Z)((0,Ft.Z)(i.prototype),"initialise",this).call(this),this.ignoreActions(xt()(Ie).call(Ie,(function(e){return t.data.actions[e].id})));var e=this.data.actions.TRICK_ATTACK.icon,n=(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK",showIcon:!1});this.addEvaluator(new Te.nZ({expectedGcds:7,globalCooldown:this.globalCooldown,hasStacks:!1,suggestionIcon:e,suggestionContent:(0,p.jsx)(c.Trans,{id:"nin.taWindow.suggestions.gcds.content",defaults:"While the exact number of GCDs per window will vary depending on whether <0/> is up, every <1/> window should contain at least {BASE_GCDS_PER_WINDOW, plural, one {# GCD} other {# GCDs}}.",values:{BASE_GCDS_PER_WINDOW:7},components:[(0,p.jsx)(Ht.vm,{action:"TEN_CHI_JIN"}),(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"})]}),suggestionWindowName:n,severityTiers:{1:Dt.bI.MEDIUM,2:Dt.bI.MAJOR},adjustCount:this.adjustExpectedGcdCount.bind(this)})),this.addEvaluator(new Te.np({expectedActions:[{action:this.data.actions.HYOSHO_RANRYU,expectedPerWindow:1},{action:this.data.actions.RAITON,expectedPerWindow:2},{action:this.data.actions.DREAM_WITHIN_A_DREAM,expectedPerWindow:1}],suggestionIcon:e,suggestionContent:(0,p.jsx)(c.Trans,{id:"nin.taWindow.suggestions.trackedactions.content",defaults:"Every <0/> window should contain <1/>, 2 <2/> casts, and <3/> in order to maximize damage.",components:[(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"}),(0,p.jsx)(Ht.vm,{action:"HYOSHO_RANRYU"}),(0,p.jsx)(Ht.vm,{action:"RAITON"}),(0,p.jsx)(Ht.vm,{action:"DREAM_WITHIN_A_DREAM"})]}),suggestionWindowName:n,severityTiers:{1:Dt.bI.MEDIUM,3:Dt.bI.MAJOR},adjustCount:this.adjustExpectedRaitonCount.bind(this)})),this.addEvaluator(new Te.a_({expectedActions:[{action:this.data.actions.ARMOR_CRUSH,expectedPerWindow:0}],suggestionIcon:this.data.actions.ARMOR_CRUSH.icon,suggestionContent:(0,p.jsx)(c.Trans,{id:"nin.taWindow.suggestions.badtrackedactions.content",defaults:"Avoid using <0/> under <1/> unless <2/> is about to fall off or you can only hit the flank positional, as <3/> is otherwise a higher potency finisher.",components:[(0,p.jsx)(Ht.vm,{action:"ARMOR_CRUSH"}),(0,p.jsx)(Ht.vm,{action:"TRICK_ATTACK"}),(0,p.jsx)(Ht.vm,{action:"HUTON"}),(0,p.jsx)(Ht.vm,{action:"AEOLIAN_EDGE"})]}),suggestionWindowName:n,severityTiers:{1:Dt.bI.MINOR}})),this.addEvaluator(new ke(this.data.actions.TEN_CHI_JIN.id))}},{key:"adjustExpectedGcdCount",value:function(t){var e,i=this;return Ae()(e=t.data).call(e,(function(t){return t.action.id===i.data.actions.TEN_CHI_JIN.id}))?1:0}},{key:"adjustExpectedRaitonCount",value:function(t,e){var i=t.start-12e3;return e.action.id===this.data.actions.RAITON.id&&i<=this.parser.pull.timestamp?-1:0}}]),i}(Te.xl),ft.handle="taWindow",ft.title={id:"nin.taWindow.title",defaults:"Trick Attack Windows"},gt=vt,mt=(0,kt.Z)(gt.prototype,"globalCooldown",[_t.I,pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),gt),Ze=function(t){(0,o.Z)(i,t);var e=(0,r.Z)(i);function i(){return(0,s.Z)(this,i),e.apply(this,arguments)}return(0,bt.Z)(i,[{key:"getMaxWeaves",value:function(t){for(var e=0,n=0;n<t.weaves.length;n++)t.weaves[n].action===this.data.actions.DREAM_WITHIN_A_DREAM.id&&e++;return(0,Yt.Z)((0,Ft.Z)(i.prototype),"getMaxWeaves",this).call(this,t)+Math.max(0,e-1)}}]),i}(i(45715).x),Re=[g,wt,At,zt,Lt,Qt,ie,le,he,de,pe,ye,Ee,Ze]},9179:function(t,e,i){i(18103);var n=i(54058);t.exports=n.Math.trunc},18103:function(t,e,i){var n=i(76887),a=Math.ceil,s=Math.floor;n({target:"Math",stat:!0},{trunc:function(t){return(t>0?s:a)(t)}})},75838:function(t,e,i){var n=i(9179);t.exports=n}}]);
//# sourceMappingURL=jobs-nin.dfb22023.js.map
"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[1321],{61806:function(e,t,a){a.d(t,{E:function(){return Q}});var n,i,s,r,o,l,u,c,d,h,p,m,v=a(97530),f=a(19623),g=a(99021),y=a(23257),w=a(68420),b=a(27344),Z=a(5281),k=a(90306),E=a(50596),x=a(300),A=a(77766),C=a.n(A),R=a(39392),j=a.n(R),T=a(36384),I=a.n(T),_=a(20116),D=a.n(_),N=a(80426),G=a.n(N),L=a(94473),U=a.n(L),B=a(2991),F=a.n(B),H=a(86359),S=a(28683),M=a(76704),O=a(8510),P=a(81336),z=a(73947),V=a(56611),q=(a(67294),a(45150)),W=a(40753),Y="ActionTimeline-module_chargeGain__3-Of9",K="ActionTimeline-module_icon__8OvsF",X=a(85893);!function(e){e[e.CHARGE_GAIN=0]="CHARGE_GAIN",e[e.ACTION=1]="ACTION"}(m||(m={}));var Q=(n=Reflect.metadata("design:type",O.Z),i=Reflect.metadata("design:type",P.w),s=Reflect.metadata("design:type",z.V),r=Reflect.metadata("design:type",V.TY),p=h=function(e){(0,k.Z)(a,e);var t=(0,E.Z)(a);function a(){var e,n;(0,w.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,C()(e=[this]).call(e,s)),(0,y.Z)(n,"castTime",l,(0,Z.Z)(n)),(0,y.Z)(n,"cooldowns",u,(0,Z.Z)(n)),(0,y.Z)(n,"data",c,(0,Z.Z)(n)),(0,y.Z)(n,"timeline",d,(0,Z.Z)(n)),n.resolvedRows=[],n.groupRows=new(j()),n}return(0,b.Z)(a,[{key:"getRow",value:function(e){return this.addRow({content:[e]})}},{key:"initialise",value:function(){var e,t=(0,g.Z)(this.constructor.rows);try{for(t.s();!(e=t.n()).done;){var a=e.value,n=this.resolveConfig(a);this.resolvedRows.push(n),this.addRow(n)}}catch(e){t.e(e)}finally{t.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var e,t,a=this,n=new(I()),i=(0,g.Z)(this.resolvedRows);try{for(i.s();!(t=i.n()).done;){var s=t.value,r=this.addRow(s);this.populateRow(r,s),s.content.forEach((function(e){return a.cooldowns.groups(e).forEach((function(e){return n.add(e)}))}))}}catch(e){i.e(e)}finally{i.f()}D()(e=this.cooldowns.allGroups()).call(e,(function(e){return!n.has(e)})).forEach((function(e){var t={content:[e]},n=a.addRow(t);a.populateRow(n,t)}))}},{key:"resolveConfig",value:function(e){var t=e;return("object"!==(0,f.Z)(t)||Array.isArray(t))&&(t={content:t}),(0,v.Z)((0,v.Z)({},t),{},{content:(0,W.rY)(t.content)})}},{key:"addRow",value:function(e){var t,a,n=this,i=G()(t=e.content).call(t,(function(e){return n.cooldowns.groups(e)})),s=U()(a=F()(i).call(i,(function(e){return n.groupRows.get(e)}))).call(a,W.$K);if(null!=s)return s;var r,o=e.content[0],l=null!=e.label?e.label:"GCD"===o?(0,X.jsx)(H.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof o?n.data.actions[o].name:"number"==typeof o?null===(r=n.cooldowns.cooldownHistory(o)[0])||void 0===r?void 0:r.action.name:o.name,u=this.timeline.addRow(new V.vo({label:l,order:e.order,collapse:!0}));return i.forEach((function(e){return n.groupRows.set(e,u)})),u}},{key:"populateRow",value:function(e,t){var a=this,n=t.content;this.addCooldownItems(e,G()(n).call(n,(function(e){return a.cooldowns.cooldownHistory(e)}))),this.addChargeItems(e,G()(n).call(n,(function(e){return a.cooldowns.chargeHistory(e)})))}},{key:"addCooldownItems",value:function(e,t){var a,n=(0,g.Z)(t);try{for(n.s();!(a=n.n()).done;){var i=a.value,s=this.getCooldownDuration(i),r=i.start-this.parser.pull.timestamp,o=r+s;e.addItem(new V.ct({start:r,end:o,content:(0,X.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(e){n.e(e)}finally{n.f()}}},{key:"addChargeItems",value:function(e,t){var a,n=(0,g.Z)(t);try{for(n.s();!(a=n.n()).done;){var i=a.value,s=i.delta<0?new V.tC({depth:m.ACTION,start:i.timestamp-this.parser.pull.timestamp,action:i.action}):new $({depth:m.CHARGE_GAIN,start:i.timestamp-this.parser.pull.timestamp});e.addItem(s)}}catch(e){n.e(e)}finally{n.f()}}},{key:"getCooldownDuration",value:function(e){var t=e.end-e.start;if(e.endReason===P.g.EXPIRED){var a,n=null!==(a=this.castTime.forAction(e.action.id,e.start))&&void 0!==a?a:0;t=Math.max(t,n+100)}return t}}]),a}(S.qk),h.handle="actionTimeline",h.debug=!1,h.rows=[{content:"GCD",order:-97}],o=p,l=(0,x.Z)(o.prototype,"castTime",[M.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),u=(0,x.Z)(o.prototype,"cooldowns",[M.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),c=(0,x.Z)(o.prototype,"data",[M.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,x.Z)(o.prototype,"timeline",[M.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),o),$=function(e){(0,k.Z)(a,e);var t=(0,E.Z)(a);function a(){var e,n;(0,w.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(n=t.call.apply(t,C()(e=[this]).call(e,s))).Content=function(){return(0,X.jsx)("div",{className:Y,children:(0,X.jsx)(q.Z,{name:"angle double up",className:K})})},n}return a}(V.Pp)},50281:function(e,t,a){a.d(t,{e:function(){return H}});var n,i,s,r,o,l,u,c,d,h,p,m,v,f,g,y=a(23257),w=a(68420),b=a(27344),Z=a(5281),k=a(90306),E=a(50596),x=a(300),A=a(77766),C=a.n(A),R=a(86359),j=a(84626),T=a(28683),I=a(74489),_=a(76704),D=a(8510),N=a(52102),G=a(73947),L=a(51691),U=a(83459),B=a(48453),F=(a(67294),a(85893)),H=(n=Reflect.metadata("design:type",D.Z),i=Reflect.metadata("design:type",N.ZP),s=Reflect.metadata("design:type",G.V),r=Reflect.metadata("design:type",L.Z),o=Reflect.metadata("design:type",U.E),l=Reflect.metadata("design:type",B.a),g=f=function(e){(0,k.Z)(a,e);var t=(0,E.Z)(a);function a(){var e,n;(0,w.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,C()(e=[this]).call(e,s)),(0,y.Z)(n,"castTime",c,(0,Z.Z)(n)),(0,y.Z)(n,"checklist",d,(0,Z.Z)(n)),(0,y.Z)(n,"data",h,(0,Z.Z)(n)),(0,y.Z)(n,"downtime",p,(0,Z.Z)(n)),(0,y.Z)(n,"globalCooldown",m,(0,Z.Z)(n)),(0,y.Z)(n,"speedAdjustments",v,(0,Z.Z)(n)),n.gcdUptime=0,n.gcdsCounted=0,n.lastBeginCast=void 0,n}return(0,b.Z)(a,[{key:"initialise",value:function(){this.addEventHook((0,I.hX)().source(this.parser.actor.id).type("prepare"),this.onBeginCast),this.addEventHook((0,I.hX)().source(this.parser.actor.id).type("action"),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onBeginCast",value:function(e){this.lastBeginCast=e}},{key:"onCast",value:function(e){var t,a,n=this.data.getAction(e.action);if(null!=n&&null!=n.onGcd&&n.onGcd){var i=null!==(t=this.castTime.forEvent(e))&&void 0!==t?t:0;i>=this.globalCooldown.getDuration()&&(i+=j.C);var s=null!==(a=this.castTime.recastForEvent(e))&&void 0!==a?a:0,r=null!=this.lastBeginCast&&this.lastBeginCast.action===e.action?this.lastBeginCast.timestamp:e.timestamp;if(this.considerCast(n,r)){var o,l,u,c,d,h,p,m=e.timestamp-this.parser.pull.timestamp;i>m?(this.debug(C()(o=C()(l=C()(u=C()(c="GCD Uptime for precast ".concat(n.name," at ")).call(c,this.parser.formatEpochTimestamp(e.timestamp,1)," - Cast time: ")).call(u,i," | Recast time: ")).call(l,s," | Time of completion: ")).call(o,m)),this.gcdUptime+=Math.max(0,m)):(this.debug(C()(d=C()(h=C()(p="GCD Uptime for ".concat(n.name," at ")).call(p,this.parser.formatEpochTimestamp(e.timestamp,1)," - Cast time: ")).call(h,i," | Recast time: ")).call(d,s)),this.gcdUptime+=Math.max(i,s)),this.gcdsCounted+=1}else{var v;this.debug(C()(v="Excluding cast of ".concat(n.name," at ")).call(v,this.parser.formatEpochTimestamp(e.timestamp,1)))}this.lastBeginCast=void 0}}},{key:"considerCast",value:function(e,t){return!this.downtime.isDowntime(t)}},{key:"getUptimePercent",value:function(){var e,t,a;this.debug(C()(e="Observed ".concat(this.gcdsCounted," GCDs for a total of ")).call(e,this.gcdUptime," ms of uptime"));var n=this.parser.currentDuration-this.downtime.getDowntime(),i=this.gcdUptime/n*100;return this.debug(C()(t=C()(a="Total fight duration: ".concat(this.parser.currentDuration," - Downtime: ")).call(a,this.downtime.getDowntime()," - Uptime percentage ")).call(t,i)),i}},{key:"onComplete",value:function(){0!==this.gcdUptime&&this.checklist.add(new N.$9({name:(0,F.jsx)(R.Trans,{id:"core.always-cast.title",defaults:"Always be casting"}),description:(0,F.jsx)(R.Trans,{id:"core.always-cast.description",defaults:"Make sure you're always doing something. It's often better to make small mistakes while keeping the GCD rolling than it is to perform the correct rotation slowly."}),displayOrder:-1,requirements:[new N.nb({name:(0,F.jsx)(R.Trans,{id:"core.always-cast.gcd-uptime",defaults:"GCD Uptime"}),percent:this.getUptimePercent()})],target:98}))}}]),a}(T.qk),f.handle="abc",f.debug=!1,u=g,c=(0,x.Z)(u.prototype,"castTime",[_.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),d=(0,x.Z)(u.prototype,"checklist",[_.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),h=(0,x.Z)(u.prototype,"data",[_.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),p=(0,x.Z)(u.prototype,"downtime",[_.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),m=(0,x.Z)(u.prototype,"globalCooldown",[_.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),v=(0,x.Z)(u.prototype,"speedAdjustments",[_.I,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),u)},12541:function(e,t,a){a.d(t,{O:function(){return $}});var n,i,s,r,o,l,u,c,d,h,p,m=a(97530),v=a(23257),f=a(68420),g=a(27344),y=a(5281),w=a(90306),b=a(50596),Z=a(300),k=a(39392),E=a.n(k),x=a(77766),A=a.n(x),C=a(2991),R=a.n(C),j=a(94473),T=a.n(j),I=a(20116),_=a.n(I),D=a(32366),N=a.n(D),G=a(86359),L=a(9263),U=a(43719),B=a(28683),F=a(76704),H=a(48945),S=a(73947),M=a(67294),O=a(68156),P=a(45150),z=a(30919),V=a(65927),q=a(80967),W=a(81336),Y=a(8437),K=a(56611),X=a(85893),Q=new(E())([["TANK",["RAMPART","REPRISAL"]],["MELEE",["FEINT","BLOODBATH","SECOND_WIND"]],["PHYSICAL_RANGED",["SECOND_WIND"]],["MAGICAL_RANGED",["ADDLE"]],["HEALER",[]]]),$=(n=Reflect.metadata("design:type",W.w),i=Reflect.metadata("design:type",H.u),s=Reflect.metadata("design:type",S.V),r=Reflect.metadata("design:type",K.TY),p=h=function(e){(0,w.Z)(a,e);var t=(0,b.Z)(a);function a(){var e,n;(0,f.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,A()(e=[this]).call(e,s)),(0,v.Z)(n,"cooldowns",l,(0,y.Z)(n)),(0,v.Z)(n,"cooldownDowntime",u,(0,y.Z)(n)),(0,v.Z)(n,"data",c,(0,y.Z)(n)),(0,v.Z)(n,"timeline",d,(0,y.Z)(n)),n.trackedDefensives=[],n.headerContent=(0,X.jsx)(G.Trans,{id:"core.defensives.header.content",defaults:"Using your mitigation and healing cooldowns can help you survive mistakes, or relieve some stress on the healers and let them deal more damage.<0/>While you shouldn't use them at the expense of your rotation or buff alignment, you should try to find helpful times to use them.",components:[(0,X.jsx)("br",{})]}),n}return(0,g.Z)(a,[{key:"initialise",value:function(){var e,t,a=this;(null!==(e=null===(t=Q.get(U.W[this.parser.actor.job].role))||void 0===t?void 0:R()(t).call(t,(function(e){return a.data.actions[e]})))&&void 0!==e?e:[]).forEach((function(e){var t;T()(t=a.trackedDefensives).call(t,(function(t){return e.id===t.id}))||a.trackedDefensives.push(e)}))}},{key:"getUsageCount",value:function(e){return this.getUses(e).length}},{key:"getUses",value:function(e){var t;return _()(t=this.cooldowns.cooldownHistory(e)).call(t,(function(e){return e.endReason!==W.g.INTERRUPTED}))}},{key:"getMaxUses",value:function(e){var t,a=this,n=N()(t=this.getUses(e)).call(t,(function(t,n){return t+a.getAdditionalUsageData(e,n.start).chargesBeforeNextUse}),this.getAdditionalUsageData(e).chargesBeforeNextUse);return this.getUsageCount(e)+n}},{key:"output",value:function(){var e,t=this;if(0!==this.trackedDefensives.length)return(0,X.jsxs)(M.Fragment,{children:[(0,X.jsxs)(O.Z,{icon:!0,children:[(0,X.jsx)(P.Z,{name:"info"}),(0,X.jsxs)(O.Z.Content,{children:[this.headerContent,(0,X.jsx)("br",{}),(0,X.jsx)("br",{}),(0,X.jsx)(G.Trans,{id:"core.defensives.header.sub-content",defaults:"The below tables will show you where you can gain additional uses of these cooldowns, without interfering with your existing ones."})]})]}),(0,X.jsx)(z.Z,{exclusive:!1,styled:!0,fluid:!0,panels:R()(e=this.trackedDefensives).call(e,(function(e,a){var n;return{key:e.id,title:{content:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(L.vm,(0,m.Z)({},e),a)," - ",t.getUsageCount(e)," / ",t.getMaxUses(e)]})},content:{content:(0,X.jsx)(V.Z,{compact:!0,unstackable:!0,celled:!0,children:(0,X.jsxs)(V.Z.Body,{children:[t.tryGetAdditionalUseRow(e),R()(n=t.getUses(e)).call(n,(function(a){return t.getUsageRow(a,e)}))]})})}}}))})]})}},{key:"getUsageRow",value:function(e,t){var a=this;return(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(V.Z.Row,{children:(0,X.jsx)(V.Z.Cell,{children:(0,X.jsx)(G.Trans,{id:"core.defensives.table.usage-row.text",defaults:"Used at <0></0> {0}",values:{0:this.parser.formatEpochTimestamp(e.start)},components:[(0,X.jsx)(q.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return a.timeline.show(e.start-a.parser.pull.timestamp,e.end-a.parser.pull.timestamp)}})]})})},e.start),this.tryGetAdditionalUseRow(t,e.start)]})}},{key:"getAdditionalUsageData",value:function(e){var t,a,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.pull.timestamp;if(i===this.parser.pull.timestamp)a=this.parser.pull.timestamp,n=e.charges||1;else{var s,r=T()(s=this.cooldowns.chargeHistory(e)).call(s,(function(e){return e.timestamp>=i&&e.current>0}));a=(null==r?void 0:r.timestamp)||this.parser.pull.duration+this.parser.pull.timestamp,n=(null==r?void 0:r.current)||0}var o=e.cooldown||this.parser.pull.duration,l=T()(t=this.getUses(e)).call(t,(function(e){return e.start>i})),u=null!=l?l.start-o:this.parser.pull.timestamp+this.parser.pull.duration;return u<=a?{chargesBeforeNextUse:0,availableTimestamp:a,useByTimestamp:u}:{chargesBeforeNextUse:n+Math.floor((u-a)/o),availableTimestamp:a,useByTimestamp:u}}},{key:"tryGetAdditionalUseRow",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.pull.timestamp,n=this.getAdditionalUsageData(e,a),i=n.chargesBeforeNextUse,s=n.availableTimestamp,r=n.useByTimestamp;return 0===i?(0,X.jsx)(X.Fragment,{}):(0,X.jsx)(V.Z.Row,{children:(0,X.jsx)(V.Z.Cell,{children:(0,X.jsx)(G.Trans,{id:"core.defensives.table.extra-usage-row.text",defaults:"{chargesBeforeNextUse, plural, one {1 extra use} other {# extra uses}} available between <0></0> {0} and {1}",values:{0:this.parser.formatEpochTimestamp(s),1:this.parser.formatEpochTimestamp(r),chargesBeforeNextUse:i},components:[(0,X.jsx)(q.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return t.timeline.show(s-t.parser.pull.timestamp,r-t.parser.pull.timestamp)}})]})})})}}]),a}(B.qk),h.handle="defensives",h.title={id:"core.defensives.title",defaults:"Defensives"},h.displayOrder=Y.Z.DEFENSIVES,o=p,l=(0,Z.Z)(o.prototype,"cooldowns",[F.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),u=(0,Z.Z)(o.prototype,"cooldownDowntime",[F.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldownDowntime}}),c=(0,Z.Z)(o.prototype,"data",[F.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),d=(0,Z.Z)(o.prototype,"timeline",[F.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),o)},83459:function(e,t,a){a.d(t,{E:function(){return _}});var n,i,s,r,o,l,u,c,d,h=a(23257),p=a(68420),m=a(27344),v=a(5281),f=a(90306),g=a(50596),y=a(300),w=a(77766),b=a.n(w),Z=a(86359),k=a(59652),E=a(84626),x=(a(67294),a(28683)),A=a(76704),C=a(73947),R=a(48453),j=a(51422),T=a(85893),I={__all:{id:"core.gcd.no-statistics.v2",defaults:"This GCD recast is an *estimate*, and may be incorrect. If it is reporting a GCD recast *longer* than reality, you likely need to focus on keeping your GCD rolling."},legacyFflogs:{id:"core.gcd.estimate-help.fflogs",defaults:"Precise attribute values are only available from FF Logs for the player who logged the report in ACT."}},_=(n=Reflect.metadata("design:type",C.V),i=Reflect.metadata("design:type",j.gy),s=Reflect.metadata("design:type",R.a),d=c=function(e){(0,f.Z)(a,e);var t=(0,g.Z)(a);function a(){var e,n;(0,p.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,b()(e=[this]).call(e,s)),(0,h.Z)(n,"data",o,(0,v.Z)(n)),(0,h.Z)(n,"statistics",l,(0,v.Z)(n)),(0,h.Z)(n,"speedAdjustments",u,(0,v.Z)(n)),n}return(0,m.Z)(a,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"getDuration",value:function(){return this.speedAdjustments.getAdjustedDuration({duration:E.b})}},{key:"isEstimated",value:function(){return this.speedAdjustments.isAdjustmentEstimated()}},{key:"onComplete",value:function(){var e=this.isEstimated();this.statistics.add(new j.IC({title:e?(0,T.jsx)(Z.Trans,{id:"core.gcd.estimated-gcd",defaults:"Estimated GCD"}):(0,T.jsx)(Z.Trans,{id:"core.gcd.gcd",defaults:"GCD Recast"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(this.getDuration()),info:e?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.Z,{source:I.__all}),(0,T.jsx)(k.Z,{source:I[this.parser.report.meta.source]})]}):void 0}))}}]),a}(x.qk),c.handle="gcd",r=d,o=(0,y.Z)(r.prototype,"data",[A.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,y.Z)(r.prototype,"statistics",[A.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),u=(0,y.Z)(r.prototype,"speedAdjustments",[A.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),r)},74136:function(e,t,a){a.d(t,{z:function(){return P}});var n,i,s,r,o,l,u,c,d,h=a(8333),p=a(99021),m=a(41420),v=a(23257),f=a(68420),g=a(27344),y=a(5281),w=a(90306),b=a(50596),Z=a(300),k=a(10928),E=a.n(k),x=a(77766),A=a.n(x),C=a(39392),R=a.n(C),j=a(2991),T=a.n(j),I=a(20116),_=a.n(I),D=a(20455),N=a.n(D),G=a(89400),L=a.n(G),U=a(28683),B=a(74489),F=a(76704),H=a(61806),S=a(70273),M=a(73947),O=a(56611),P=(n=Reflect.metadata("design:type",H.E),i=Reflect.metadata("design:type",S.e),s=Reflect.metadata("design:type",M.V),d=c=function(e){(0,w.Z)(a,e);var t=(0,b.Z)(a);function a(){var e,n;(0,f.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,A()(e=[this]).call(e,s)),(0,v.Z)(n,"actionTimeline",o,(0,y.Z)(n)),(0,v.Z)(n,"actors",l,(0,y.Z)(n)),(0,v.Z)(n,"data",u,(0,y.Z)(n)),n.statusActionMap=new(R()),n.usages=new(R()),n.rows=new(R()),n.getRowKey=function(e,t){var a;return A()(a="".concat(e,":")).call(a,t)},n}return(0,g.Z)(a,[{key:"initialise",value:function(){var e,t,a,n,i,s=this,r=T()(e=_()(t=this.parser.pull.actors).call(t,(function(e){return e.owner===s.parser.actor}))).call(e,(function(e){return e.id})),o=T()(a=_()(n=this.parser.pull.actors).call(n,(function(e){var t;return!0===(null===(t=e.owner)||void 0===t?void 0:t.playerControlled)}))).call(a,(function(e){return e.id})),l=(0,B.hX)().source((0,B.kw)(A()(i=[this.parser.actor.id]).call(i,(0,m.Z)(r)))).target((0,B.jg)(o));this.addEventHook(l.type("statusApply"),this.onApply),this.addEventHook(l.type("statusRemove"),this.onRemove),this.addEventHook("complete",this.onComplete);for(var u=0,c=N()(this.data.actions);u<c.length;u++){var d=c[u];if(null!=d.statusesApplied){var h,v=(0,p.Z)(d.statusesApplied);try{for(v.s();!(h=v.n()).done;){var f=h.value,g=this.data.statuses[f].id;this.statusActionMap.set(g,d)}}catch(e){v.e(e)}finally{v.f()}}}}},{key:"onApply",value:function(e){var t=this.usages.get(e.status);null==t&&(t=new(R()),this.usages.set(e.status,t));var a=t.get(e.target);if(null==a){var n=this.createStatusTargetRow(e.status,e.target);if(null==n)return;a={usages:[],row:n},t.set(e.target,a)}var i=E()(a.usages);null!=i&&null==i.end||a.usages.push({start:e.timestamp})}},{key:"onRemove",value:function(e){var t,a,n=E()(null===(t=this.usages.get(e.status))||void 0===t||null===(a=t.get(e.target))||void 0===a?void 0:a.usages);null!=n&&(n.end=e.timestamp)}},{key:"onComplete",value:function(){var e,t=(0,p.Z)(this.usages);try{for(t.s();!(e=t.n()).done;){var a=(0,h.Z)(e.value,2),n=a[0],i=a[1],s=this.data.getStatus(n);if(null!=s){var r,o=(0,p.Z)(L()(i).call(i));try{for(o.s();!(r=o.n()).done;){var l,u=r.value,c=(0,p.Z)(u.usages);try{for(c.s();!(l=c.n()).done;){var d,m=l.value;u.row.addItem(new O.hg({status:s,start:m.start-this.parser.pull.timestamp,end:(null!==(d=m.end)&&void 0!==d?d:this.parser.pull.timestamp+this.parser.pull.duration)-this.parser.pull.timestamp}))}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){t.e(e)}finally{t.f()}}},{key:"createStatusTargetRow",value:function(e,t){var a,n=null!==(a=this.constructor.statusesStackMapping[e])&&void 0!==a?a:e,i=this.getRowKey(n,t),s=this.rows.get(i);if(null!=s)return s;var r=this.createStatusRow(n);if(null!=r){var o=this.actors.get(t),l=r.addRow(new O.e2({label:o.name}));return this.rows.set(i,l),l}}},{key:"createStatusRow",value:function(e){var t,a,n=this.getRowKey(e),i=this.rows.get(n);if(null!=i)return i;var s=this.statusActionMap.get(e);if(null!=s){var r=this.actionTimeline.getRow(s).addRow(new O.e2({label:null!==(t=null===(a=this.data.getStatus(e))||void 0===a?void 0:a.name)&&void 0!==t?t:e,hideCollapsed:!0,collapse:!0}));return this.rows.set(n,r),r}}}]),a}(U.qk),c.handle="statusTimeline",c.statusesStackMapping={},r=d,o=(0,Z.Z)(r.prototype,"actionTimeline",[F.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actionTimeline}}),l=(0,Z.Z)(r.prototype,"actors",[F.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),u=(0,Z.Z)(r.prototype,"data",[F.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),r)},32596:function(e,t,a){a.d(t,{t:function(){return _}});var n,i,s,r,o,l,u,c=a(97530),d=a(41420),h=a(99021),p=a(23257),m=a(68420),v=a(27344),f=a(5281),g=a(90306),y=a(50596),w=a(300),b=a(77766),Z=a.n(b),k=a(80426),E=a.n(k),x=a(47302),A=a.n(x),C=a(40753),R=a(28683),j=a(76704),T=a(73947),I=a(90577),_=(n=Reflect.metadata("design:type",T.V),i=Reflect.metadata("design:type",I.I),u=l=function(e){(0,g.Z)(a,e);var t=(0,y.Z)(a);function a(){var e,n;(0,m.Z)(this,a);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return n=t.call.apply(t,Z()(e=[this]).call(e,s)),(0,p.Z)(n,"data",r,(0,f.Z)(n)),(0,p.Z)(n,"invulnerability",o,(0,f.Z)(n)),n.ft=function(e){return n.parser.formatEpochTimestamp(e,1)},n}return(0,v.Z)(a,[{key:"getUptime",value:function(e,t){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.parser.actor,i="string"==typeof e?this.data.statuses[e]:e,s=(0,C.rY)(t),r=E()(s).call(s,(function(e){var t,s;return a.edgesForActor(e,null!==(t=null===(s=e.statusHistory.get(i.id))||void 0===s?void 0:s.get(n.id))&&void 0!==t?t:[])}));A()(r).call(r,(function(e,t){return e.timestamp-t.timestamp}));var o,l={uptime:0,depth:0,application:0},u=(0,h.Z)(r);try{for(u.s();!(o=u.n()).done;){var c,d,p,m=o.value;"apply"===m.side?(0===l.depth&&(l.application=m.timestamp),l.depth++):(l.depth--,0===l.depth&&(l.uptime+=m.timestamp-l.application)),this.debug(Z()(c=Z()(d=Z()(p="Status ".concat(i.name," ")).call(p,m.side," at ")).call(d,this.ft(m.timestamp),", depth=")).call(c,l.depth))}}catch(e){u.e(e)}finally{u.f()}return l.uptime}},{key:"edgesForActor",value:function(e,t){var a,n,i,s=[],r=(0,h.Z)(t);try{for(r.s();!(i=r.n()).done;){var o,l=i.value;"statusApply"!==l.type?null!=a&&(s.push.apply(s,(0,d.Z)(this.splitRangeForInvulns(e,a.timestamp,l.timestamp))),a=void 0):(null!==(o=a)&&void 0!==o||(a=l),n=l)}}catch(e){r.e(e)}finally{r.f()}if(null!=a){var u,c,p=null===(u=this.data.getStatus(a.status))||void 0===u?void 0:u.duration,m=null==p?this.parser.currentEpochTimestamp:Math.min((null!==(c=n)&&void 0!==c?c:a).timestamp+p,this.parser.currentEpochTimestamp);s.push.apply(s,(0,d.Z)(this.splitRangeForInvulns(e,a.timestamp,m)))}return s}},{key:"splitRangeForInvulns",value:function(e,t,a){var n,i={apply:t,remove:a},s=[i],r=this.invulnerability.getWindows({start:t,end:a,actorFilter:function(t){return t.kind===e.kind},types:["invulnerable"]}),o=(0,h.Z)(r);try{for(o.s();!(n=o.n()).done;){var l,u,d,p,m,v,f,g,y,w,b,k=n.value;if(k.start<i.apply&&k.end>=i.apply)this.debug(Z()(v=Z()(f=Z()(g="Start clip, [".concat(this.ft(i.apply),",")).call(g,this.ft(i.remove),"] -> [")).call(f,this.ft(k.end),",")).call(v,this.ft(i.remove),"]")),i.apply=k.end;else if(k.start<=i.remove&&k.end>i.remove)this.debug(Z()(y=Z()(w=Z()(b="End clip, [".concat(this.ft(i.apply),",")).call(b,this.ft(i.remove),"] -> [")).call(w,this.ft(i.apply),",")).call(y,this.ft(k.start),"]")),i.remove=k.start;else if(!(k.start<i.apply||k.end>i.remove)){this.debug(Z()(l=Z()(u=Z()(d=Z()(p=Z()(m="Split [".concat(this.ft(i.apply),",")).call(m,this.ft(i.remove),"] -> [")).call(p,this.ft(i.apply),",")).call(d,this.ft(k.start),"], [")).call(u,this.ft(k.end),",")).call(l,this.ft(i.remove),"]"));var x=i;i=(0,c.Z)({},i),s.push(i),x.remove=k.start,i.apply=k.end}}}catch(e){o.e(e)}finally{o.f()}return E()(s).call(s,(function(e){return[{side:"apply",timestamp:e.apply},{side:"remove",timestamp:e.remove}]}))}}]),a}(R.qk),l.handle="statuses",l.debug=!1,s=u,r=(0,w.Z)(s.prototype,"data",[j.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),o=(0,w.Z)(s.prototype,"invulnerability",[j.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),s)},45715:function(e,t,a){a.d(t,{x:function(){return V}});var n,i,s,r,o,l,u,c,d,h,p,m=a(41420),v=a(97530),f=a(23257),g=a(68420),y=a(27344),w=a(5281),b=a(90306),Z=a(50596),k=a(300),E=a(77766),x=a.n(E),A=a(20116),C=a.n(A),R=a(2991),j=a.n(R),T=a(86359),I=a(40090),_=a(71370),D=a(84626),N=a(28683),G=a(74489),L=a(76704),U=a(8510),B=a(73947),F=a(90577),H=a(52250),S=(a(67294),a(30919)),M=a(40753),O=a(85893),P={0:2,1e3:1,2500:0},z={1:H.bI.MEDIUM,5:H.bI.MAJOR},V=(n=Reflect.metadata("design:type",U.Z),i=Reflect.metadata("design:type",B.V),s=Reflect.metadata("design:type",F.I),r=Reflect.metadata("design:type",H.ZP),p=h=function(e){(0,b.Z)(a,e);var t=(0,Z.Z)(a);function a(){var e,n;(0,g.Z)(this,a);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,x()(e=[this]).call(e,s)),(0,f.Z)(n,"castTime",l,(0,w.Z)(n)),(0,f.Z)(n,"data",u,(0,w.Z)(n)),(0,f.Z)(n,"invulnerability",c,(0,w.Z)(n)),(0,f.Z)(n,"suggestions",d,(0,w.Z)(n)),n.suggestionIcon="https://xivapi.com/i/001000/001785.png",n.moduleLink=(0,O.jsx)("a",{style:{cursor:"pointer"},onClick:function(){return n.parser.scrollTo(a.handle)},children:(0,O.jsx)(I.Z,{message:a.title})}),n.suggestionContent=(0,O.jsx)(T.Trans,{id:"core.weaving.content",defaults:"Avoid weaving more actions than you have time for in a single GCD window. Doing so will delay your next GCD, reducing possible uptime. Check the {0} module below for more detailed analysis.",values:{0:n.moduleLink}}),n.severity=z,n.weaves=[],n.ongoingCastEvent=void 0,n.leadingGcdEvent=void 0,n.trailingGcdEvent=void 0,n.badWeaves=[],n}return(0,y.Z)(a,[{key:"initialise",value:function(){var e=(0,G.hX)().source(this.parser.actor.id);this.addEventHook(e.type("prepare"),this.onBeginCast),this.addEventHook(e.type("action"),this.onCast),this.addEventHook((0,G.hX)().type("complete"),this.onComplete),this.addEventHook((0,G.hX)().type("death"),this.clearWeave)}},{key:"onBeginCast",value:function(e){this.ongoingCastEvent=e}},{key:"onCast",value:function(e){var t=this.data.getAction(e.action);t&&!t.autoAttack&&(this.isOgcd(t)?this.weaves.push(e):(this.ongoingCastEvent&&this.ongoingCastEvent.action===t.id?this.trailingGcdEvent=(0,v.Z)((0,v.Z)({},e),{},{timestamp:this.ongoingCastEvent.timestamp}):this.trailingGcdEvent=e,this.ongoingCastEvent=void 0,this.saveIfBad(),this.leadingGcdEvent=this.trailingGcdEvent,this.weaves=[]))}},{key:"onComplete",value:function(){this.leadingGcdEvent&&this.saveIfBad(),this.suggestions.add(new H.eg({icon:this.suggestionIcon,content:this.suggestionContent,why:(0,O.jsx)(T.Trans,{id:"core.weaving.why",defaults:"{0, plural, =1 {# instance of incorrect weaving} other {# instances of incorrect weaving}}",values:{0:this.badWeaves.length}}),tiers:this.severity,value:this.badWeaves.length}))}},{key:"saveIfBad",value:function(){var e,t;if(null!=this.trailingGcdEvent){var a=null!==(e=null===(t=this.leadingGcdEvent)||void 0===t?void 0:t.timestamp)&&void 0!==e?e:this.parser.pull.timestamp,n=this.trailingGcdEvent.timestamp-a-this.invulnerability.getDuration({start:a,end:this.trailingGcdEvent.timestamp}),i={leadingGcdEvent:this.leadingGcdEvent,trailingGcdEvent:this.trailingGcdEvent,gcdTimeDiff:n,weaves:this.weaves};0!==i.weaves.length&&this.isBadWeave(i)&&this.badWeaves.push(i)}}},{key:"isOgcd",value:function(e){return!e.onGcd&&!e.autoAttack}},{key:"isBadWeave",value:function(e){var t,a,n=this,i=C()(t=e.weaves).call(t,(function(e){return!n.invulnerability.isActive({timestamp:e.timestamp,types:["untargetable"]})&&e.timestamp>=n.parser.pull.timestamp})).length,s=null!==(a=null!=e.leadingGcdEvent?this.castTime.recastForEvent(e.leadingGcdEvent):void 0)&&void 0!==a?a:D.b;return e.gcdTimeDiff>s&&i>this.getMaxWeaves(e)}},{key:"clearWeave",value:function(){this.weaves.length>0&&this.saveIfBad(),this.weaves=[],this.leadingGcdEvent=void 0}},{key:"getMaxWeaves",value:function(e){var t,a;if(null==e.leadingGcdEvent)return 2;var n=this.castTime.forEvent(e.leadingGcdEvent);return null==n?2:(null!==(t=(0,M.CL)(P,n))&&void 0!==t?t:2)-((null!==(a=this.castTime.recastForEvent(e.leadingGcdEvent))&&void 0!==a?a:D.b)<1800?1:0)}},{key:"output",value:function(){var e,t=this;if(0===this.badWeaves.length)return!1;var a=j()(e=this.badWeaves).call(e,(function(e){var a,n,i,s,r;return{key:null!==(a=null===(n=e.leadingGcdEvent)||void 0===n?void 0:n.timestamp)&&void 0!==a?a:t.parser.pull.timestamp,title:{content:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("strong",{children:t.parser.formatEpochTimestamp(null!==(i=null===(s=e.leadingGcdEvent)||void 0===s?void 0:s.timestamp)&&void 0!==i?i:t.parser.pull.timestamp)})," - ",(0,O.jsx)(T.Trans,{id:"core.weaving.panel-count",defaults:"{0, plural, =1 {# weave} other {# weaves}}",values:{0:e.weaves.length}})," (",t.parser.formatDuration(e.gcdTimeDiff)," ",(0,O.jsx)(T.Trans,{id:"core.weaving.between-gcds",defaults:"between GCDs"}),")"]})},content:{content:(0,O.jsx)(_.Z,{events:x()(r=[]).call(r,(0,m.Z)(null!=e.leadingGcdEvent?[e.leadingGcdEvent]:[]),(0,m.Z)(e.weaves))})}}}));return(0,O.jsx)(S.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})}}]),a}(N.qk),h.handle="weaving",h.title={id:"core.weaving.title",defaults:"Weaving Issues"},o=p,l=(0,k.Z)(o.prototype,"castTime",[L.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),u=(0,k.Z)(o.prototype,"data",[L.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),c=(0,k.Z)(o.prototype,"invulnerability",[L.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),d=(0,k.Z)(o.prototype,"suggestions",[L.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),o)},41212:function(e,t,a){a.r(t),a.d(t,{default:function(){return Et}});var n=a(68420),i=a(27344),s=a(90306),r=a(50596),o=a(77766),l=a.n(o),u=a(2991),c=a.n(u),d=a(86359),h=a(44178),p=a(6767),m=a.n(p),v=a(67294),f=a(25142),g=a(85893),y=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,i.Z)(a,[{key:"render",value:function(){var e=this.props,t=e.contributor,a=e.detail,n=t.avatar,i=t.name,s=t.jobs,r={};if(s.length){var o=s[0];r.backgroundColor=o.colour,m()(o.colour).isDark()&&(r.color="white")}return(0,g.jsxs)(f.Z,{image:!0,style:r,children:[n&&(0,g.jsx)("img",{src:n,alt:i}),i,a&&(0,g.jsx)(f.Z.Detail,{children:a})]})}}]),a}(v.PureComponent),w=a(40090),b=a(15964),Z=a(23796),k=a(28683),E=a(3623),x=a(8437),A=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){var e,i;(0,n.Z)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];(i=t.call.apply(t,l()(e=[this]).call(e,r))).Description=null,i.contributors=[],i.supportedPatches=null;var u=["Description","contributors"];u.forEach((function(e){i[e]=i.parser.meta[e]}));var c=Z.Z.JOBS[i.parser.actor.job];return i.supportedPatches=null!=c.supportedPatches?i.parser.meta.supportedPatches:void 0,i}return(0,i.Z)(a,[{key:"supportedPatch",set:function(e){console.warn("About.suportedPatch has been deprecated. Please use the About.supportedPatches object instead."),this.supportedPatches.from=e}},{key:"output",value:function(){var e;if(null==this.supportedPatches)return(0,g.jsx)(h.XX,{children:(0,g.jsxs)(h.v0,{error:!0,icon:"times circle outline",children:[(0,g.jsx)(h.v0.Header,{children:(0,g.jsx)(d.Trans,{id:"core.about.unsupported.title",defaults:"This job is currently unsupported"})}),(0,g.jsx)(d.Trans,{id:"core.about.unsupported.description",defaults:"The output shown below will not contain any job-specific analysis, and may be missing critical data required to generate an accurate result."})]})});var t=this.supportedPatches,a=t.from,n=t.to,i=void 0===n?a:n,s=(0,b.nD)(this.parser.report.edition,a,i,this.parser.pull.timestamp/1e3),r=this.Description;return(0,g.jsxs)("div",{className:"About-module_container__2mUOL",children:[(0,g.jsxs)("div",{className:"About-module_description__2PUG_",children:[(0,g.jsx)(E.Z,{children:(0,g.jsx)(w.Z,{message:this.constructor.title})}),(0,g.jsx)(r,{}),!s&&(0,g.jsxs)(h.v0,{error:!0,icon:"times circle outline",children:[(0,g.jsx)(h.v0.Header,{children:(0,g.jsx)(d.Trans,{id:"core.about.patch-unsupported.title",defaults:"Report patch unsupported"})}),(0,g.jsx)(d.Trans,{id:"core.about.patch-unsupported.description",defaults:"This report was logged during patch {0}, which is not supported by the analyser. Calculations and suggestions may be impacted by changes in the interim.",values:{0:this.parser.patch.key}})]})]}),(0,g.jsxs)("dl",{className:"About-module_meta__MTrvI",children:[(0,g.jsx)("dt",{children:(0,g.jsx)(d.Trans,{id:"core.about.supported-patches",defaults:"Supported Patches:"})}),(0,g.jsxs)("dd",{children:[a,a!==i&&"–".concat(i)]}),this.contributors.length>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("dt",{children:(0,g.jsx)(d.Trans,{id:"core.about.contributors",defaults:"Contributors:"})}),(0,g.jsx)("dd",{children:c()(e=this.contributors).call(e,(function(e){var t=e.user,a=e.role;return(0,g.jsx)("div",{className:"About-module_contributor__2E81e",children:(0,g.jsx)(y,{contributor:t,detail:a&&(0,g.jsx)(w.Z,{message:a.text})})},"string"==typeof t?t:t.name)}))})]})]})]})}}]),a}(k.qk);A.handle="about",A.displayOrder=x.Z.ABOUT,A.displayMode=k.d1.RAW,A.title={id:"core.about.title",defaults:"About"};var C=a(61806),R=a(70273),j=a(50281),T=a(32690),I=a(8510),_=a(47302),D=a.n(_),N=a(36384),G=a.n(N),L=a(30919),U=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){var e,i;(0,n.Z)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,l()(e=[this]).call(e,r))).state={activeIndexes:new(G())},i.handleClick=function(e,t){var a=t.index,n=i.state.activeIndexes,s=new(G())(n);s.has(a)?s.delete(a):s.add(a),i.setState({activeIndexes:s})},i}return(0,i.Z)(a,[{key:"render",value:function(){var e,t=this,a=this.state.activeIndexes;return(0,g.jsx)(L.Z,{fluid:!0,styled:!0,children:c()(e=this.props.changelog).call(e,(function(e,n){var i,s=e.date.toLocaleDateString(),r=a.has(n);return(0,g.jsxs)(v.Fragment,{children:[(0,g.jsxs)(L.Z.Title,{index:n,active:r,onClick:t.handleClick,className:"ChangeLog-module_change__1ic9I",children:[(0,g.jsx)("strong",{className:"ChangeLog-module_date__RHyqs",children:s}),!r&&(0,g.jsx)("span",{className:"ChangeLog-module_message__1vQwX",children:(0,g.jsx)(e.Changes,{})}),e.contributors&&e.contributors.length>0&&(0,g.jsx)("div",{className:"ChangeLog-module_contributors__3a6oS",children:c()(i=e.contributors).call(i,(function(e){return(0,g.jsx)(y,{contributor:e},e.name)}))})]}),(0,g.jsx)(L.Z.Content,{active:r,children:(0,g.jsx)(e.Changes,{})})]},n)}))})}}]),a}(v.PureComponent),B=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,i.Z)(a,[{key:"output",value:function(){var e=this.parser.meta.changelog;return 0!==e.length&&(D()(e).call(e,(function(e,t){return t.date.valueOf()-e.date.valueOf()})),(0,g.jsx)(U,{changelog:e}))}}]),a}(k.qk);B.handle="changelog",B.displayOrder=x.Z.CHANGELOG,B.displayMode=k.d1.FULL,B.title={id:"core.changelog.title",defaults:"Changelog"};var F,H,S,M,O,P,z,V=a(52102),q=a(47969),W=a(81336),Y=a(73947),K=a(44971),X=a(12541),Q=a(51691),$=a(23257),J=a(5281),ee=a(300),te=a(20116),ae=a.n(te),ne=a(40822),ie=a(74489),se=a(76704),re=(F=Reflect.metadata("design:type",T.Z),H=Reflect.metadata("design:type",K.h),z=P=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){var e,i;(0,n.Z)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i=t.call.apply(t,l()(e=[this]).call(e,r)),(0,$.Z)(i,"brokenLog",M,(0,J.Z)(i)),(0,$.Z)(i,"death",O,(0,J.Z)(i)),i.hook=void 0,i}return(0,i.Z)(a,[{key:"initialise",value:function(){var e,t,a=c()(e=ae()(t=this.parser.pull.actors).call(t,(function(e){return e.team===ne.S.FOE}))).call(e,(function(e){return e.id}));this.hook=this.addEventHook((0,ie.hX)().type("death").actor((0,ie.kw)(a)),this.onFoeDeath)}},{key:"onFoeDeath",value:function(e){this.death.getCount(e.actor)<3||(null!=this.hook&&this.removeEventHook(this.hook),this.brokenLog.trigger(this,"striking dummy",(0,g.jsx)(d.Trans,{id:"core.dummy.broken-log",defaults:"One or more actors in this pull appear to be striking dummies. The behaviour of dummy health pools breaks a number of assumptions made by xivanalysis, which can lead to subtly incorrect results."}),!1))}}]),a}(k.qk),P.title={id:"core.dummy.title",defaults:"Striking Dummy"},P.handle="dummy",P.debug=!1,S=z,M=(0,ee.Z)(S.prototype,"brokenLog",[se.I,F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.brokenLog}}),O=(0,ee.Z)(S.prototype,"death",[se.I,H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.death}}),S),oe=a(39392),le=a.n(oe),ue=a(94473),ce=a.n(ue),de=a(59340),he=a.n(de),pe=a(9263),me=a(52098),ve=a(40753),fe=new(le());function ge(e,t){if(fe.has(e))throw new Error("Trying to register formatter for already-handled event type ".concat(e));fe.set(e,t)}var ye=function(e,t){var a,n;return null!==(a=null===(n=ce()(t).call(t,(function(t){return t.id===e})))||void 0===n?void 0:n.name)&&void 0!==a?a:e};function we(e){switch(e.type){case"action":return(0,g.jsx)(pe.vm,{id:e.action});case"status":return(0,g.jsx)(pe.ci,{id:e.status});default:return he()(e)}}function be(e){switch(e){case me.Q3.NORMAL:return"";case me.Q3.MISS:return" Miss.";case me.Q3.CRITICAL:return" Critical hit!";case me.Q3.DIRECT:return" Direct hit!";case me.Q3.CRITICAL_DIRECT:return" Critical direct hit!";default:return""}}function Ze(e){switch(e){case me.vB.NORMAL:return"";case me.vB.PARRY:return" Parried.";case me.vB.BLOCK:return" Blocked.";case me.vB.DODGE:return" Dodged.";case me.vB.INVULNERABLE:return" Invulnerable.";default:return""}}ge("prepare",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.source,a.actors)," prepares ",(0,g.jsx)(pe.vm,{id:t.action})," on ",ye(t.target,a.actors)]})})),ge("interrupt",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.source,a.actors)," interrupts ",ye(t.target,a.actors),"'s  ",(0,g.jsx)(pe.vm,{id:t.action})]})})),ge("action",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.source,a.actors)," uses ",(0,g.jsx)(pe.vm,{id:t.action})," on ",ye(t.target,a.actors)]})})),ge("statusApply",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.source,a.actors)," applies ",(0,g.jsx)(pe.ci,{id:t.status})," on ",ye(t.target,a.actors),null!=t.duration&&(0,g.jsxs)(g.Fragment,{children:[" for ",(0,ve.LU)(t.duration,{hideMinutesIfZero:!0})]}),null!=t.data&&(0,g.jsxs)(g.Fragment,{children:[" with data ",(0,g.jsx)("code",{children:t.data})]})]})})),ge("statusRemove",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.source,a.actors),"'s  ",(0,g.jsx)(pe.ci,{id:t.status})," fades from ",ye(t.target,a.actors)]})})),ge("execute",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.source,a.actors),"'s  ",(0,g.jsx)(pe.vm,{id:t.action})," executes on ",ye(t.target,a.actors)," (seq: ",t.sequence,")"]})})),ge("damage",(function(e){var t,a=e.event,n=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(a.source,n.actors),"'s  ",we(a.cause)," hits",c()(t=a.targets).call(t,(function(e){return(0,g.jsxs)(g.Fragment,{children:[" ",ye(e.target,n.actors)," for ",e.amount," damage",e.overkill>0&&(0,g.jsxs)(g.Fragment,{children:[", overkilling by ",e.overkill]}),".",be(e.sourceModifier),Ze(e.targetModifier)]})})),a.sequence&&(0,g.jsxs)(g.Fragment,{children:[" (seq: ",a.sequence,")"]})]})})),ge("heal",(function(e){var t,a=e.event,n=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(a.source,n.actors),"'s  ",we(a.cause)," heals ",c()(t=a.targets).call(t,(function(e){return(0,g.jsxs)(g.Fragment,{children:[" ",ye(e.target,n.actors)," for ",e.amount," HP",e.overheal>0&&(0,g.jsxs)(g.Fragment,{children:[", overhealing by ",e.overheal]}),".",be(e.sourceModifier)]})})),a.sequence&&(0,g.jsxs)(g.Fragment,{children:[" (seq: ",a.sequence,")"]})]})})),ge("actorUpdate",(function(e){var t=e.event,a=e.pull;return(0,g.jsxs)(g.Fragment,{children:[ye(t.actor,a.actors)," is updated.",null!=t.hp&&(0,g.jsxs)(g.Fragment,{children:[" HP: ",t.hp.current,"/",t.hp.maximum,"."]}),null!=t.mp&&(0,g.jsxs)(g.Fragment,{children:[" MP: ",t.mp.current,"/",t.mp.maximum,"."]}),null!=t.position&&(0,g.jsxs)(g.Fragment,{children:[" Position: ",t.position.x,",",t.position.y,"."]}),null!=t.targetable&&(0,g.jsxs)(g.Fragment,{children:[" ",t.targetable?"Targetable":"Untargetable","."]})]})}));var ke=a(8333),Ee=a(94198),xe=a.n(Ee),Ae=a(94184),Ce=a.n(Ae),Re=a(52892),je=a(1314),Te=a(59261),Ie=a(45150),_e=a(90192),De=xe()("24px",10),Ne=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){var e,i;(0,n.Z)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(i=t.call.apply(t,l()(e=[this]).call(e,r))).events=[],i}return(0,i.Z)(a,[{key:"initialise",value:function(){var e=this;this.debug((function(){e.addEventHook((function(t){return e.events.push(t),!1}),(function(){}))}))}},{key:"output",value:function(){if(0===this.events.length)return null;var e={events:this.events,pull:this.parser.pull};return(0,g.jsx)(Ge,{data:e})}}]),a}(k.qk);function Ge(e){var t=e.data,a=(0,v.useState)(),n=(0,ke.Z)(a,2),i=n[0],s=n[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Re.Z,{bounds:!0,children:function(e){var t=e.measureRef;return(0,g.jsx)("div",{ref:t})},onResize:function(e){var t;return s(null===(t=e.bounds)||void 0===t?void 0:t.width)}}),null!=i&&(0,g.jsx)(je.t7,{width:i,height:500,itemSize:De,itemCount:t.events.length,overscanCount:10,itemData:t,children:Le})]})}function Le(e){var t=e.data,a=t.events,n=t.pull,i=e.index,s=e.style,r=a[i],o=(0,_e.L)(r.timestamp-n.timestamp,{secondPrecision:3}),l=fe.get(r.type),u=null!=l?l({event:r,pull:n}):he()(r);return(0,g.jsxs)("div",{className:Ce()("EventsView-module_row__3NDup",i%2==1&&"EventsView-module_odd__25dzx"),style:s,children:[(0,g.jsx)("div",{className:"EventsView-module_timestamp__2YlTh",children:o}),(0,g.jsx)("div",{className:"EventsView-module_type__2RtB5",children:r.type}),(0,g.jsx)("div",{className:"EventsView-module_description__3Ta3K",children:u}),(0,g.jsx)("div",{className:"EventsView-module_showData__hraD7",children:(0,g.jsx)(Te.Z,{trigger:(0,g.jsx)(Ie.Z,{name:"code"}),content:(0,g.jsx)("pre",{children:he()(r,void 0,2)}),position:"left center",on:"click"})})]})}Ne.title="Events View",Ne.handle="eventsView",Ne.displayOrder=x.Z.EVENTS_VIEW,Ne.debug=!0;var Ue,Be,Fe,He,Se,Me,Oe,Pe,ze,Ve,qe,We,Ye,Ke,Xe,Qe,$e=a(83459),Je=a(90577),et=a(97530),tt=a(56611),at=(Ue=Reflect.metadata("design:type",Y.V),Be=Reflect.metadata("design:type",tt.TY),Oe=Me=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){var e,i;(0,n.Z)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i=t.call.apply(t,l()(e=[this]).call(e,r)),(0,$.Z)(i,"data",He,(0,J.Z)(i)),(0,$.Z)(i,"timeline",Se,(0,J.Z)(i)),i.pot=void 0,i.pots=[],i}return(0,i.Z)(a,[{key:"initialise",value:function(){this.addEventHook({type:"statusApply",target:this.parser.actor.id,status:this.data.statuses.MEDICATED.id},this.onMedication),this.addEventHook({type:"statusRemove",target:this.parser.actor.id,status:this.data.statuses.MEDICATED.id},this.offMedication),this.addEventHook("complete",this.onComplete)}},{key:"onMedication",value:function(e){this.pot={start:e.timestamp}}},{key:"stopAndSave",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.currentEpochTimestamp;null!=this.pot&&this.pots.push((0,et.Z)((0,et.Z)({},this.pot),{},{end:e})),this.pot=void 0}},{key:"offMedication",value:function(e){if(null==this.pot)throw new Error("potion instance not found");this.stopAndSave(e.timestamp)}},{key:"onComplete",value:function(){var e=this,t=this.data.statuses.MEDICATED;if(null!=this.pot&&null==this.pot.end&&this.stopAndSave(),this.pots.length>0){var a=new tt.e2({label:"Medicated",order:-99});this.pots.forEach((function(n){return a.addItem(new tt.hg({status:t,start:n.start-e.parser.pull.timestamp,end:null!=n.end?n.end-e.parser.pull.timestamp:e.parser.pull.duration}))})),this.timeline.addRow(a)}}}]),a}(k.qk),Me.handle="medicated",Fe=Oe,He=(0,ee.Z)(Fe.prototype,"data",[se.I,Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Se=(0,ee.Z)(Fe.prototype,"timeline",[se.I,Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),Fe),nt=a(99021),it=a(41420),st=a(69301),rt=a.n(st),ot=a(78580),lt=a.n(ot),ut=a(66419),ct=a.n(ut),dt=a(89400),ht=a.n(dt),pt=[{key:"THE_BALANCE",group:"arcanum",name:"Arcanum"},{key:"THE_ARROW",group:"arcanum",name:"Arcanum"},{key:"THE_SPEAR",group:"arcanum",name:"Arcanum"},{key:"THE_BOLE",group:"arcanum",name:"Arcanum"},{key:"THE_EWER",group:"arcanum",name:"Arcanum"},{key:"THE_SPIRE",group:"arcanum",name:"Arcanum"},{key:"DIVINATION"},{key:"BATTLE_LITANY"},{key:"BATTLE_VOICE"},{key:"BROTHERHOOD"},{key:"CHAIN_STRATAGEM"},{key:"EMBOLDEN_SELF"},{key:"EMBOLDEN_PARTY"},{key:"LEFT_EYE",exclude:["DRAGOON"]},{key:"TECHNICAL_FINISH"},{key:"STANDARD_FINISH_PARTNER"},{key:"DEVILMENT"},{key:"OFF_GUARD"},{key:"PECULIAR_LIGHT"},{key:"CONDENSED_LIBRA_ASTRAL",group:"libra",name:"Condensed Libra"},{key:"CONDENSED_LIBRA_UMBRAL",group:"libra",name:"Condensed Libra"},{key:"CONDENSED_LIBRA_PHYSICAL",group:"libra",name:"Condensed Libra"},{key:"ARCANE_CIRCLE"},{key:"SEARING_LIGHT"},{key:"RADIANT_FINALE"}],mt=(Pe=Reflect.metadata("design:type",R.e),ze=Reflect.metadata("design:type",Y.V),Ve=Reflect.metadata("design:type",tt.TY),Qe=Xe=function(e){(0,s.Z)(a,e);var t=(0,r.Z)(a);function a(){var e,i;(0,n.Z)(this,a);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return i=t.call.apply(t,l()(e=[this]).call(e,r)),(0,$.Z)(i,"actors",We,(0,J.Z)(i)),(0,$.Z)(i,"data",Ye,(0,J.Z)(i)),(0,$.Z)(i,"timeline",Ke,(0,J.Z)(i)),i.applications=new(le()),i.timelineRows=new(le()),i.settings=new(le())(c()(pt).call(pt,(function(e){return[i.data.statuses[e.key].id,e]}))),i}return(0,i.Z)(a,[{key:"initialise",value:function(){var e,t=this;this.parser.patch.before("6.1")?this.settings.set(this.data.statuses.TRICK_ATTACK_VULNERABILITY_UP.id,{key:"TRICK_ATTACK_VULNERABILITY_UP",name:"Trick Attack"}):this.settings.set(this.data.statuses.MUG_VULNERABILITY_UP.id,{key:"MUG_VULNERABILITY_UP",name:"Mug"});var a=(0,ie.hX)().status((0,ie.kw)((0,it.Z)(rt()(e=this.settings).call(e)))).target((function(e){var a=t.actors.get(e);return a.team!==ne.S.FRIEND||a.id===t.parser.actor.id}));this.addEventHook(a.type("statusApply"),this.onApply),this.addEventHook(a.type("statusRemove"),this.onRemove),this.addEventHook("complete",this.onComplete)}},{key:"onApply",value:function(e){var t,a=e.status,n=this.settings.get(a);if(null==n||null===(t=n.exclude)||void 0===t||!lt()(t).call(t,this.parser.actor.job)){var i=this.getTargetApplications(e.target);i.has(a)||i.set(a,e.timestamp)}}},{key:"onRemove",value:function(e){this.endStatus(e.target,e.status)}},{key:"endStatus",value:function(e,t){var a,n,i=this.getTargetApplications(e),s=i.get(t);if(s){i.delete(t);var r=this.settings.get(t),o=this.data.getStatus(t);if(null!=r&&null!=o){var l,u=null!==(a=r.group)&&void 0!==a?a:t,c=this.timelineRows.get(u);null==c&&(c=new tt.e2({label:null!==(l=r.name)&&void 0!==l?l:o.name,order:s}),this.timelineRows.set(u,c));var d=s-this.parser.pull.timestamp;(null===(n=c.items[c.items.length-1])||void 0===n?void 0:n.start)!==d&&c.addItem(new tt.hg({start:d,end:this.parser.currentEpochTimestamp-this.parser.pull.timestamp,status:o}))}}}},{key:"onComplete",value:function(){var e,t,a=(0,nt.Z)(this.applications);try{for(a.s();!(t=a.n()).done;){var n,i=(0,ke.Z)(t.value,2),s=i[0],r=i[1],o=(0,nt.Z)(rt()(r).call(r));try{for(o.s();!(n=o.n()).done;){var l=n.value;this.endStatus(s,l)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){a.e(e)}finally{a.f()}this.timeline.addRow(new tt.e2({label:"Raid Buffs",order:-100,rows:ct()(ht()(e=this.timelineRows).call(e))}))}},{key:"getTargetApplications",value:function(e){var t=this.applications.get(e);return null==t&&(t=new(le()),this.applications.set(e,t)),t}}]),a}(k.qk),Xe.handle="raidBuffs",qe=Qe,We=(0,ee.Z)(qe.prototype,"actors",[se.I,Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),Ye=(0,ee.Z)(qe.prototype,"data",[se.I,ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Ke=(0,ee.Z)(qe.prototype,"timeline",[se.I,Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),qe),vt=a(36356),ft=a(48453),gt=a(51422),yt=a(32596),wt=a(74136),bt=a(52250),Zt=a(3085),kt=a(45715),Et=[A,C.E,R.e,j.e,T.Z,B,I.Z,V.ZP,q.G,W.w,Y.V,K.h,X.O,Q.Z,re,Ne,$e.E,Je.I,at,mt,vt.$,ft.a,gt.gy,yt.t,wt.z,bt.ZP,tt.TY,Zt.b,kt.x]}}]);
//# sourceMappingURL=core.966a3a23.js.map
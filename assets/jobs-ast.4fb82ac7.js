(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[54],{48989:function(t,a,e){"use strict";e.d(a,{e:function(){return W}});var s,i,n,o,r,l,c,u,d,h,p,m=e(97530),g=e(23257),f=e(68420),y=e(27344),v=e(5281),A=e(90306),w=e(50596),I=e(300),T=e(77766),R=e.n(T),E=e(2991),S=e.n(E),O=e(86359),C=e(9263),Z=e(95859),b=e(28683),x=e(52250),k=e(56611),N=(e(67294),e(65927)),D=e(80967),j=e(74489),P=e(76704),L=e(8510),M=e(73947),H=e(85893),W=(s=Reflect.metadata("design:type",L.Z),i=Reflect.metadata("design:type",M.V),n=Reflect.metadata("design:type",x.ZP),o=Reflect.metadata("design:type",k.TY),p=h=function(t){(0,A.Z)(e,t);var a=(0,w.Z)(e);function e(){var t,s;(0,f.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,R()(t=[this]).call(t,n)),(0,g.Z)(s,"castTime",l,(0,v.Z)(s)),(0,g.Z)(s,"data",c,(0,v.Z)(s)),(0,g.Z)(s,"suggestions",u,(0,v.Z)(s)),(0,g.Z)(s,"timeline",d,(0,v.Z)(s)),s.currentCast=void 0,s.droppedCasts=[],s.missedTimeMS=0,s.icon=Z.ZP.INTERJECT.icon,s.severity={2:x.bI.MEDIUM,5:x.bI.MAJOR},s.suggestionContent=(0,H.jsx)(O.Trans,{id:"core.interrupts.suggestion.content",defaults:"Avoid interrupting casts by either prepositioning yourself or utilizing slidecasting where possible. If you have to move, try to save an instant cast to keep your GCD rolling."}),s}return(0,y.Z)(e,[{key:"suggestionWhy",value:function(t,a){return(0,H.jsx)(O.Trans,{id:"core.interrupts.suggestion.why",defaults:"You missed {0} casts (approximately {1} of total casting time) due to interruption.",values:{0:t.length,1:this.parser.formatDuration(a)}})}},{key:"noInterruptsOutput",value:function(){}},{key:"initialise",value:function(){this.addEventHook((0,j.hX)().type("prepare").source(this.parser.actor.id),this.onBeginCast),this.addEventHook((0,j.hX)().type("interrupt").source(this.parser.actor.id),this.pushDropCasts),this.addEventHook("complete",this.onComplete)}},{key:"onBeginCast",value:function(t){this.currentCast=t}},{key:"pushDropCasts",value:function(t){var a,e,s;if(null!=this.currentCast){var i=null!==(a=this.castTime.forAction(this.currentCast.action,this.currentCast.timestamp))&&void 0!==a?a:0;this.missedTimeMS+=Math.min(t.timestamp-(null!==(e=null===(s=this.currentCast)||void 0===s?void 0:s.timestamp)&&void 0!==e?e:this.parser.currentEpochTimestamp),i),this.droppedCasts.push(t),this.currentCast=void 0}}},{key:"onComplete",value:function(){this.suggestions.add(new x.eg({icon:this.icon,tiers:this.severity,value:this.droppedCasts.length,content:this.suggestionContent,why:this.suggestionWhy(this.droppedCasts,this.missedTimeMS)}))}},{key:"output",value:function(){var t,a=this;return 0===this.droppedCasts.length?this.noInterruptsOutput():(0,H.jsxs)(N.Z,{compact:!0,unstackable:!0,celled:!0,collapsing:!0,children:[(0,H.jsx)(N.Z.Header,{children:(0,H.jsxs)(N.Z.Row,{children:[(0,H.jsx)(N.Z.HeaderCell,{collapsing:!0,children:(0,H.jsx)("strong",{children:(0,H.jsx)(O.Trans,{id:"core.interrupts.table.time",defaults:"Time"})})}),(0,H.jsx)(N.Z.HeaderCell,{children:(0,H.jsx)("strong",{children:(0,H.jsx)(O.Trans,{id:"core.interrupts.table.cast",defaults:"Cast"})})})]})}),(0,H.jsx)(N.Z.Body,{children:S()(t=this.droppedCasts).call(t,(function(t){var e=a.data.getAction(t.action);return(0,H.jsxs)(N.Z.Row,{children:[(0,H.jsxs)(N.Z.Cell,{textAlign:"center",children:[(0,H.jsx)("span",{style:{marginRight:5},children:a.parser.formatEpochTimestamp(t.timestamp)}),(0,H.jsx)(D.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return a.timeline.show(t.timestamp-a.parser.pull.timestamp,t.timestamp-a.parser.pull.timestamp+3e4)}})]}),(0,H.jsx)(N.Z.Cell,{children:(0,H.jsx)(C.vm,(0,m.Z)({},e))})]},t.timestamp)}))})]})}}]),e}(b.qk),h.handle="interrupts",h.title={id:"core.interrupts.title",defaults:"Interrupted Casts"},h.debug=!1,r=p,l=(0,I.Z)(r.prototype,"castTime",[P.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),c=(0,I.Z)(r.prototype,"data",[P.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,I.Z)(r.prototype,"suggestions",[P.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),d=(0,I.Z)(r.prototype,"timeline",[P.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r)},59473:function(t,a,e){"use strict";e.d(a,{e:function(){return b}});var s,i,n,o,r,l,c,u=e(23257),d=e(68420),h=e(27344),p=e(5281),m=e(90306),g=e(50596),f=e(300),y=e(77766),v=e.n(y),A=e(86359),w=e(9263),I=e(28683),T=e(74489),R=e(76704),E=e(73947),S=e(52250),O=e(67294),C=e(85893),Z={USE_PERCENT_THRESHOLD:{.8:S.bI.MAJOR,.4:S.bI.MEDIUM,.2:S.bI.MINOR}},b=(s=Reflect.metadata("design:type",E.V),i=Reflect.metadata("design:type",S.ZP),c=l=function(t){(0,m.Z)(e,t);var a=(0,g.Z)(e);function e(){var t,s;(0,d.Z)(this,e);for(var i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return s=a.call.apply(a,v()(t=[this]).call(t,n)),(0,u.Z)(s,"data",o,(0,p.Z)(s)),(0,u.Z)(s,"suggestions",r,(0,p.Z)(s)),s.lastUse=0,s.uses=0,s.totalHeld=0,s.suggestionContent=(0,C.jsx)(O.Fragment,{children:(0,C.jsx)(A.Trans,{id:"core.lucid-dreaming.suggestion.content",defaults:"Try to keep <0/> on cooldown for better MP management.",components:[(0,C.jsx)(w.P9,{action:"LUCID_DREAMING"})]})}),s}return(0,h.Z)(e,[{key:"initialise",value:function(){this.addEventHook((0,T.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.LUCID_DREAMING.id),this.onCastLucid),this.addEventHook("complete",this.onComplete)}},{key:"onCastLucid",value:function(t){this.uses++,0===this.lastUse&&(this.lastUse=this.parser.pull.timestamp);var a;(a=1===this.uses?t.timestamp-this.parser.pull.timestamp:t.timestamp-this.lastUse-this.data.actions.LUCID_DREAMING.cooldown)>0&&(this.totalHeld+=a),this.lastUse=t.timestamp}},{key:"suggestionWhy",value:function(t,a){return(0,C.jsx)(O.Fragment,{children:(0,C.jsx)(A.Trans,{id:"core.lucid-dreaming.suggestion.why",defaults:"{usesMissed, plural, one {# use} other {# uses}} of Lucid Dreaming {usesMissed, plural, one {was} other {were}} missed by holding it for at least a total of {0}.",values:{0:this.parser.formatDuration(a),usesMissed:t}})})}},{key:"onComplete",value:function(){var t=0===this.uses?this.parser.pull.duration:this.totalHeld,a=Math.floor(t/this.data.actions.LUCID_DREAMING.cooldown),e=0===a?0:t/this.parser.pull.duration;this.suggestions.add(new S.eg({icon:this.data.actions.LUCID_DREAMING.icon,content:this.suggestionContent,tiers:Z.USE_PERCENT_THRESHOLD,why:this.suggestionWhy(a,t),value:e}))}}]),e}(I.qk),l.handle="lucid",l.dependencies=["suggestions"],n=c,o=(0,f.Z)(n.prototype,"data",[R.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),r=(0,f.Z)(n.prototype,"suggestions",[R.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),n)},74136:function(t,a,e){"use strict";e.d(a,{z:function(){return F}});var s,i,n,o,r,l,c,u,d,h=e(8333),p=e(99021),m=e(41420),g=e(23257),f=e(68420),y=e(27344),v=e(5281),A=e(90306),w=e(50596),I=e(300),T=e(10928),R=e.n(T),E=e(77766),S=e.n(E),O=e(39392),C=e.n(O),Z=e(2991),b=e.n(Z),x=e(20116),k=e.n(x),N=e(20455),D=e.n(N),j=e(89400),P=e.n(j),L=e(28683),M=e(74489),H=e(76704),W=e(61806),U=e(70273),_=e(73947),G=e(56611),F=(s=Reflect.metadata("design:type",W.E),i=Reflect.metadata("design:type",U.e),n=Reflect.metadata("design:type",_.V),d=u=function(t){(0,A.Z)(e,t);var a=(0,w.Z)(e);function e(){var t,s;(0,f.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,S()(t=[this]).call(t,n)),(0,g.Z)(s,"actionTimeline",r,(0,v.Z)(s)),(0,g.Z)(s,"actors",l,(0,v.Z)(s)),(0,g.Z)(s,"data",c,(0,v.Z)(s)),s.statusActionMap=new(C()),s.usages=new(C()),s.rows=new(C()),s.getRowKey=function(t,a){var e;return S()(e="".concat(t,":")).call(e,a)},s}return(0,y.Z)(e,[{key:"initialise",value:function(){var t,a,e,s,i,n=this,o=b()(t=k()(a=this.parser.pull.actors).call(a,(function(t){return t.owner===n.parser.actor}))).call(t,(function(t){return t.id})),r=b()(e=k()(s=this.parser.pull.actors).call(s,(function(t){var a;return!0===(null===(a=t.owner)||void 0===a?void 0:a.playerControlled)}))).call(e,(function(t){return t.id})),l=(0,M.hX)().source((0,M.kw)(S()(i=[this.parser.actor.id]).call(i,(0,m.Z)(o)))).target((0,M.jg)(r));this.addEventHook(l.type("statusApply"),this.onApply),this.addEventHook(l.type("statusRemove"),this.onRemove),this.addEventHook("complete",this.onComplete);for(var c=0,u=D()(this.data.actions);c<u.length;c++){var d=u[c];if(null!=d.statusesApplied){var h,g=(0,p.Z)(d.statusesApplied);try{for(g.s();!(h=g.n()).done;){var f=h.value,y=this.data.statuses[f].id;this.statusActionMap.set(y,d)}}catch(t){g.e(t)}finally{g.f()}}}}},{key:"onApply",value:function(t){var a=this.usages.get(t.status);null==a&&(a=new(C()),this.usages.set(t.status,a));var e=a.get(t.target);if(null==e){var s=this.createStatusTargetRow(t.status,t.target);if(null==s)return;e={usages:[],row:s},a.set(t.target,e)}var i=R()(e.usages);null!=i&&null==i.end||e.usages.push({start:t.timestamp})}},{key:"onRemove",value:function(t){var a,e,s=R()(null===(a=this.usages.get(t.status))||void 0===a||null===(e=a.get(t.target))||void 0===e?void 0:e.usages);null!=s&&(s.end=t.timestamp)}},{key:"onComplete",value:function(){var t,a=(0,p.Z)(this.usages);try{for(a.s();!(t=a.n()).done;){var e=(0,h.Z)(t.value,2),s=e[0],i=e[1],n=this.data.getStatus(s);if(null!=n){var o,r=(0,p.Z)(P()(i).call(i));try{for(r.s();!(o=r.n()).done;){var l,c=o.value,u=(0,p.Z)(c.usages);try{for(u.s();!(l=u.n()).done;){var d,m=l.value;c.row.addItem(new G.hg({status:n,start:m.start-this.parser.pull.timestamp,end:(null!==(d=m.end)&&void 0!==d?d:this.parser.pull.timestamp+this.parser.pull.duration)-this.parser.pull.timestamp}))}}catch(t){u.e(t)}finally{u.f()}}}catch(t){r.e(t)}finally{r.f()}}}}catch(t){a.e(t)}finally{a.f()}}},{key:"createStatusTargetRow",value:function(t,a){var e,s=null!==(e=this.constructor.statusesStackMapping[t])&&void 0!==e?e:t,i=this.getRowKey(s,a),n=this.rows.get(i);if(null!=n)return n;var o=this.createStatusRow(s);if(null!=o){var r=this.actors.get(a),l=o.addRow(new G.e2({label:r.name}));return this.rows.set(i,l),l}}},{key:"createStatusRow",value:function(t){var a,e,s=this.getRowKey(t),i=this.rows.get(s);if(null!=i)return i;var n=this.statusActionMap.get(t);if(null!=n){var o=this.actionTimeline.getRow(n).addRow(new G.e2({label:null!==(a=null===(e=this.data.getStatus(t))||void 0===e?void 0:e.name)&&void 0!==a?a:t,hideCollapsed:!0,collapse:!0}));return this.rows.set(s,o),o}}}]),e}(L.qk),u.handle="statusTimeline",u.statusesStackMapping={},o=d,r=(0,I.Z)(o.prototype,"actionTimeline",[H.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actionTimeline}}),l=(0,I.Z)(o.prototype,"actors",[H.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),c=(0,I.Z)(o.prototype,"data",[H.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),o)},90137:function(t,a,e){"use strict";e.d(a,{J:function(){return l}});var s=e(68420),i=e(90306),n=e(50596),o=e(77766),r=e.n(o),l=function(t){(0,i.Z)(e,t);var a=(0,n.Z)(e);function e(){var t,i;(0,s.Z)(this,e);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(i=a.call.apply(a,r()(t=[this]).call(t,o))).buffStatus=i.data.statuses.MEDICATED,i}return e}(e(27596).x);l.handle="tincture",l.title={id:"core.tincture.title",defaults:"Tinctures"}},74622:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return es}});var s,i=e(48989),n=e(59473),o=e(41420),r=e(68420),l=e(90306),c=e(50596),u=e(77766),d=e.n(u),h=e(61806),p=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){return(0,r.Z)(this,e),a.apply(this,arguments)}return e}(h.E);p.rows=d()(s=[]).call(s,(0,o.Z)(h.E.rows),[["DRAW","UNDRAW"],"PLAY","ASTRODYNE",["CROWN_PLAY","MINOR_ARCANA"],"DIVINATION","LIGHTSPEED","ESSENTIAL_DIGNITY","SYNASTRY","CELESTIAL_INTERSECTION","CELESTIAL_OPPOSITION",["EARTHLY_STAR","STELLAR_DETONATION"],["MACROCOSMOS","MICROCOSMOS"],"EXALTATION",["HOROSCOPE","HOROSCOPE_ACTIVATION"],"NEUTRAL_SECT","COLLECTIVE_UNCONSCIOUS","LUCID_DREAMING"]);var m,g,f,y,v,A,w,I,T=e(97530),R=e(23257),E=e(27344),S=e(5281),O=e(300),C=e(85004),Z=e.n(C),b=e(7436),x=e.n(b),k=e(94174),N=e.n(k),D=e(10928),j=e.n(D),P=e(7287),L=e.n(P),M=e(2991),H=e.n(M),W=e(94473),U=e.n(W),_=e(78580),G=e.n(_),F=e(3649),B=e.n(F),z=e(28683),Y=e(74489),V=e(76704),J=e(73947),K=["THE_BALANCE","THE_BOLE","THE_ARROW","THE_SPEAR","THE_EWER","THE_SPIRE"],X=["LORD_OF_CROWNS","LADY_OF_CROWNS"],Q=["THE_BALANCE","THE_BOLE"],q=["THE_ARROW","THE_EWER"],$=["THE_SPEAR","THE_SPIRE"],tt=["BALANCE_DRAWN","BOLE_DRAWN","ARROW_DRAWN","SPEAR_DRAWN","EWER_DRAWN","SPIRE_DRAWN"],at=["LORD_OF_CROWNS_DRAWN","LADY_OF_CROWNS_DRAWN"],et=["THE_BALANCE","THE_BOLE","THE_ARROW","THE_SPEAR","THE_EWER","THE_SPIRE"],st=d()(m=["DRAW","REDRAW"]).call(m,(0,o.Z)(K)),it=d()(g=["DRAW","REDRAW","UNDRAW","ASTRODYNE"]).call(g,(0,o.Z)(K));!function(t){t[t.NOTHING=0]="NOTHING",t[t.SOLAR=1]="SOLAR",t[t.LUNAR=2]="LUNAR",t[t.CELESTIAL=3]="CELESTIAL"}(I||(I={}));var nt,ot=[I.NOTHING,I.NOTHING,I.NOTHING];!function(t){t[t.NOTHING=0]="NOTHING",t[t.ONE_STACK=1]="ONE_STACK",t[t.TWO_STACK=2]="TWO_STACK"}(nt||(nt={}));var rt,lt,ct,ut,dt,ht,pt,mt,gt,ft,yt,vt,At,wt,It,Tt,Rt,Et,St,Ot,Ct,Zt,bt,xt,kt,Nt,Dt,jt,Pt,Lt,Mt,Ht,Wt,Ut,_t,Gt,Ft,Bt,zt,Yt,Vt,Jt,Kt,Xt,Qt,qt,$t,ta,aa,ea,sa,ia,na,oa,ra,la,ca,ua,da,ha,pa,ma,ga,fa,ya,va,Aa,wa,Ia,Ta,Ra,Ea,Sa,Oa,Ca,Za,ba,xa,ka,Na,Da,ja,Pa,La,Ma,Ha,Wa,Ua,_a,Ga,Fa,Ba,za,Ya=(f=Reflect.metadata("design:type",J.V),w=A=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",v,(0,S.Z)(s)),s.play=[],s.arcanaStatuses=[],s.cardGrantingAbilities=[],s.cardActions=[],s.drawnArcana=[],s.celestialSealArcana=[],s.lunarSealArcana=[],s.solarSealArcana=[],s.playToStatusLookup={},s.statusToDrawnLookup={},s.statusToPlayLookup={},s.drawnToPlayLookup={},s.cardStateLog=[{lastEvent:{type:"init",timestamp:s.parser.pull.timestamp},drawState:void 0,sealState:ot,sleeveState:nt.NOTHING}],s.lastDrawnBuff=void 0,s.pullStateInitialized=!1,s.pullIndex=0,s.on_prepullArcanas=void 0,s.off_prepullArcanas=void 0,s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=this;this.play=H()(K).call(K,(function(a){return t.data.actions[a].id})),this.arcanaStatuses=H()(et).call(et,(function(a){return t.data.statuses[a].id})),this.cardGrantingAbilities=H()(st).call(st,(function(a){return t.data.actions[a].id})),this.cardActions=H()(it).call(it,(function(a){return t.data.actions[a].id})),this.drawnArcana=H()(tt).call(tt,(function(a){return t.data.statuses[a].id})),this.celestialSealArcana=H()($).call($,(function(a){return t.data.actions[a].id})),this.lunarSealArcana=H()(q).call(q,(function(a){return t.data.actions[a].id})),this.solarSealArcana=H()(Q).call(Q,(function(a){return t.data.actions[a].id})),this.playToStatusLookup=L()(this.play,this.drawnArcana),this.statusToDrawnLookup=L()(this.arcanaStatuses,this.drawnArcana),this.statusToPlayLookup=L()(this.arcanaStatuses,this.play),this.drawnToPlayLookup=L()(this.drawnArcana,this.play);var a=(0,Y.hX)().source(this.parser.actor.id);this.addEventHook(a.type("action").action((0,Y.kw)(this.cardActions)),this.onCast),this.addEventHook(a.type("statusApply").status((0,Y.kw)(this.arcanaStatuses)),this.onPrepullArcana),this.addEventHook(a.type("statusRemove").status((0,Y.kw)(this.arcanaStatuses)),this.offPrepullArcana),this.addEventHook(a.type("statusApply").status((0,Y.kw)(this.drawnArcana)),this.onDrawnStatus),this.addEventHook(a.type("statusRemove").status((0,Y.kw)(this.drawnArcana)),this.offDrawnStatus),this.addEventHook({type:"death",actor:this.parser.actor.id},this.onDeath)}},{key:"cardLogs",get:function(){return this.cardStateLog}},{key:"getCardState",value:function(){var t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.pull.timestamp,e=U()(t=this.cardStateLog).call(t,(function(t){return t.lastEvent&&a>t.lastEvent.timestamp}));return e}},{key:"getPullState",value:function(){var t;return U()(t=this.cardStateLog).call(t,(function(t){return t.lastEvent&&"init"===t.lastEvent.type}))}},{key:"onPrepullArcana",value:function(t){t.timestamp>this.parser.pull.timestamp||null!=this.on_prepullArcanas&&this.on_prepullArcanas.push(t)}},{key:"offPrepullArcana",value:function(t){var a=this;t.timestamp>=this.parser.pull.timestamp+this.data.statuses.THE_BALANCE.duration||null!=this.off_prepullArcanas&&this.off_prepullArcanas.forEach((function(e){if(e.status===t.status&&e.target===t.target){var s=(0,T.Z)({},j()(a.cardStateLog)),i=a.data.getAction(a.arcanaStatusToPlay(t.status));if(null!=i){var n={action:i.id,timestamp:t.timestamp-a.data.statuses.THE_BALANCE.duration-a.parser.pull.timestamp,type:"action",source:t.source,target:t.target};s.lastEvent=(0,T.Z)({},n),s.drawState=void 0,s.sealState=ot,a.cardStateLog.unshift(s),a.pullIndex++}}}))}},{key:"onDrawnStatus",value:function(t){var a;G()(a=this.drawnArcana).call(a,t.status)&&(this.lastDrawnBuff=t)}},{key:"offDrawnStatus",value:function(t){var a;if(G()(a=this.drawnArcana).call(a,t.status)){this.retconSearch(this.arcanaDrawnToPlay(t.status));var e=this.cardStateLog.some((function(a){return a.lastEvent&&N()(t.timestamp,a.lastEvent.timestamp-20,a.lastEvent.timestamp+20)})),s=this.cardStateLog.some((function(a){return a.lastEvent&&N()(t.timestamp,a.lastEvent.timestamp-20-2e3,a.lastEvent.timestamp+2e3+20)&&"death"===a.lastEvent.type}));if(!e&&!s){var i=(0,T.Z)({},j()(this.cardStateLog)),n={action:this.data.actions.UNDRAW.id,timestamp:t.timestamp,type:"action",source:t.source,target:t.target};i.lastEvent=n,i.drawState=void 0,this.cardStateLog.push(i)}}}},{key:"onCast",value:function(t){var a,e;if(!(t.timestamp<this.parser.pull.timestamp)){var s=t.action;!this.pullStateInitialized&&G()(a=this.play).call(a,s)&&this.initPullState(t);var i=(0,T.Z)({},j()(this.cardStateLog));if(i.lastEvent=t,G()(e=this.play).call(e,s)){var n,r,l;this.retconSearch(s),i.drawState=void 0;var c=I.NOTHING;G()(n=this.solarSealArcana).call(n,s)?c=I.SOLAR:G()(r=this.lunarSealArcana).call(r,s)?c=I.LUNAR:G()(l=this.celestialSealArcana).call(l,s)&&(c=I.CELESTIAL);var u=(0,o.Z)(i.sealState);i.sealState=this.addSeal(c,u)}s===this.data.actions.ASTRODYNE.id&&(i.sealState=ot),s===this.data.actions.UNDRAW.id&&(i.drawState=void 0),this.cardStateLog.push(i)}}},{key:"onDeath",value:function(t){var a=(0,T.Z)({},j()(this.cardStateLog));"action"===a.lastEvent.type&&a.lastEvent.action===this.data.actions.UNDRAW.id&&t.timestamp-a.lastEvent.timestamp<=2020&&this.cardStateLog.pop(),this.cardStateLog.push({lastEvent:(0,T.Z)({},t),drawState:void 0,sealState:a.sealState,sleeveState:nt.NOTHING})}},{key:"initPullState",value:function(t){var a,e,s=this,i=t.action,n=B()(a=this.cardStateLog).call(a,this.pullIndex+1);if(n.length>0&&n.forEach((function(t){var a;if("action"===t.lastEvent.type&&G()(a=s.cardGrantingAbilities).call(a,t.lastEvent.action))return s.pullStateInitialized=!0})),!this.pullStateInitialized&&G()(e=this.play).call(e,i)){var o=this.arcanaActionToStatus(i);this.cardStateLog.forEach((function(t,a){if("init"===t.lastEvent.type)return s.cardStateLog[a].drawState=o||void 0,s.pullStateInitialized=!0}))}}},{key:"retconSearch",value:function(t){var a,e,s,i,n=this,r=!0,l=j()(this.cardStateLog),c="action"===l.lastEvent.type?l.lastEvent.action:-1;(G()(a=d()(e=[this.data.actions.UNDRAW.id]).call(e,(0,o.Z)(this.play),[this.data.actions.REDRAW.id])).call(a,c)||this.data.actions.DRAW.id===c&&l.drawState&&G()(s=this.drawnArcana).call(s,l.drawState))&&(r=!1);var u=r?this.cardStateLog:B()(i=this.cardStateLog).call(i,0,this.cardStateLog.length-1),h=x()(u,(function(t){var a;return"init"===t.lastEvent.type||"action"===t.lastEvent.type&&G()(a=n.cardGrantingAbilities).call(a,t.lastEvent.action)}));if(-1===h||void 0===this.cardStateLog[h].drawState){h=h<0?this.pullIndex:h;var p=this.arcanaActionToStatus(t);Z()(this.cardStateLog,(function(t,a){(r&&a>=h||a>=h&&a!==n.cardStateLog.length-1)&&(t.drawState=p)}))}}},{key:"addSeal",value:function(t,a){return t?(a.shift(),a.push(t),a):a}},{key:"arcanaActionToStatus",value:function(t){var a;if(G()(a=this.play).call(a,t))return this.playToStatusLookup[t]}},{key:"arcanaStatusToDrawn",value:function(t){var a;return G()(a=this.arcanaStatuses).call(a,t)&&(t=this.statusToDrawnLookup[t]),t}},{key:"arcanaStatusToPlay",value:function(t){var a;return G()(a=this.arcanaStatuses).call(a,t)&&(t=this.statusToPlayLookup[t]),t}},{key:"arcanaDrawnToPlay",value:function(t){var a;return G()(a=this.drawnArcana).call(a,t)&&(t=this.drawnToPlayLookup[t]),t}}]),e}(z.qk),A.handle="arcanaTracking",A.title={id:"ast.arcana-tracking.title",defaults:"Arcana Tracking"},A.displayOrder=55,y=w,v=(0,O.Z)(y.prototype,"data",[V.I,f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),y),Va=e(44845),Ja=e(86359),Ka=e(9263),Xa=e(58615),Qa=e(43719),qa=e(70273),$a=e(56611),te=e(67294),ae=e(65927),ee=e(80967),se="ArcanaSuggestions-module_cardActionRow__9Mu-e",ie="ArcanaSuggestions-module_sealIcon__2Twz3",ne=e(85893),oe=(rt={},(0,Va.Z)(rt,I.NOTHING,""),(0,Va.Z)(rt,I.SOLAR,"data:image/png;base64,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"),(0,Va.Z)(rt,I.LUNAR,"data:image/png;base64,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"),(0,Va.Z)(rt,I.CELESTIAL,"data:image/png;base64,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"),rt),re=(lt=Reflect.metadata("design:type",J.V),ct=Reflect.metadata("design:type",Ya),ut=Reflect.metadata("design:type",$a.TY),dt=Reflect.metadata("design:type",qa.e),vt=yt=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",pt,(0,S.Z)(s)),(0,R.Z)(s,"arcanaTracking",mt,(0,S.Z)(s)),(0,R.Z)(s,"timeline",gt,(0,S.Z)(s)),(0,R.Z)(s,"actors",ft,(0,S.Z)(s)),s.cardLogs=[],s.play=[],s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=this;this.play=H()(K).call(K,(function(a){return t.data.actions[a].id})),this.addEventHook("complete",this._onComplete)}},{key:"_onComplete",value:function(){var t,a=this;this.cardLogs=H()(t=this.arcanaTracking.cardLogs).call(t,(function(t){if("action"===t.lastEvent.type){var e=t.lastEvent.target,s=a.actors.get(e);return(0,T.Z)((0,T.Z)({},t),{},{targetName:s.name,targetJob:s.job})}return(0,T.Z)((0,T.Z)({},t),{},{targetName:"",targetJob:"UNKNOWN"})}))}},{key:"output",value:function(){var t,a=this;return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)("p",{children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.explanation",defaults:"This section keeps track of every card action made during the fight, and the state of the spread after each action."})}),(0,ne.jsx)("p",{children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.footnote",defaults:"* No pre-pull actions are being represented aside from <0/>, and this is only an approximation based on the buff duration.",components:[(0,ne.jsx)(Ka.vm,{action:"PLAY"})]})}),(0,ne.jsxs)(ae.Z,{collapsing:!0,unstackable:!0,className:"ArcanaSuggestions-module_cardActionTable__3wair",children:[(0,ne.jsx)(ae.Z.Header,{children:(0,ne.jsxs)(ae.Z.Row,{children:[(0,ne.jsx)(ae.Z.HeaderCell,{width:1,children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.time",defaults:"Time"})}),(0,ne.jsx)(ae.Z.HeaderCell,{width:1,children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.latest-action",defaults:"Lastest Action"})}),(0,ne.jsx)(ae.Z.HeaderCell,{width:2,children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.target",defaults:"Target"})}),(0,ne.jsx)(ae.Z.HeaderCell,{width:2,children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.spread-state",defaults:"Spread State"})})]})}),(0,ne.jsx)(ae.Z.Body,{children:H()(t=this.cardLogs).call(t,(function(t){if("init"===t.lastEvent.type)return(0,ne.jsxs)(ae.Z.Row,{className:se,children:[(0,ne.jsxs)(ae.Z.Cell,{children:[(0,ne.jsx)(ee.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return a.timeline.show(0,3e4)}}),a.parser.formatDuration(t.lastEvent.timestamp-a.parser.pull.timestamp)]}),(0,ne.jsx)(ae.Z.Cell,{children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.messages.pull",defaults:"Pull"})}),(0,ne.jsx)(ae.Z.Cell,{}),a.RenderSpreadState(t)]},t.lastEvent.timestamp);var e=t.lastEvent.timestamp-a.parser.pull.timestamp,s=e+3e4,i=a.parser.formatDuration(e);return(0,ne.jsxs)(ae.Z.Row,{className:se,children:[(0,ne.jsxs)(ae.Z.Cell,{children:[e>=0&&(0,ne.jsx)(ee.Z,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:function(){return a.timeline.show(e,s)}}),(0,ne.jsx)("span",{style:{marginRight:10},children:i})]}),a.RenderAction(t),a.RenderSpreadState(t)]},t.lastEvent.timestamp)}))})]}),(0,ne.jsx)(ee.Z,{onClick:function(){return a.parser.scrollTo(e.handle)},children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-suggestions.scroll-to-top-button",defaults:"Jump to start of Arcana Logs"})})]})}},{key:"RenderAction",value:function(t){var a;if("action"===t.lastEvent.type&&G()(a=this.play).call(a,t.lastEvent.action)&&null!=t.targetJob){var e=Qa.W[t.targetJob];return(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(ae.Z.Cell,{children:(0,ne.jsx)(Ka.vm,(0,T.Z)({},this.data.getAction(t.lastEvent.action)))}),(0,ne.jsxs)(ae.Z.Cell,{children:[e&&(0,ne.jsx)(Xa.W,{job:e}),t.targetName]})]})}return"action"===t.lastEvent.type?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(ae.Z.Cell,{children:(0,ne.jsx)(Ka.vm,(0,T.Z)({},this.data.getAction(t.lastEvent.action)))}),(0,ne.jsx)(ae.Z.Cell,{})]}):"death"===t.lastEvent.type?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(ae.Z.Cell,{children:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-tracking.messages.death",defaults:"Death"})}),(0,ne.jsx)(ae.Z.Cell,{})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(ae.Z.Cell,{}),(0,ne.jsx)(ae.Z.Cell,{})]})}},{key:"RenderSpreadState",value:function(t){var a,e=t.drawState?this.data.getStatus(t.drawState):void 0;return(0,ne.jsxs)(ae.Z.Cell,{children:[(0,ne.jsxs)("span",{style:{marginRight:10,marginLeft:0},children:[e&&(0,ne.jsx)("img",{src:e.icon,className:"ArcanaSuggestions-module_buffIcon__3buJ7",alt:e.name}),!e&&(0,ne.jsx)("span",{className:"ArcanaSuggestions-module_buffPlaceholder__2TqDK"})]}),(0,ne.jsx)("span",{className:"ArcanaSuggestions-module_sealIconContainer__1ZN2u",children:H()(a=t.sealState).call(a,(function(t,a){return t>0?(0,ne.jsx)("img",{src:oe[t],className:ie,alt:"Seal icon"},a):(0,ne.jsx)("span",{className:ie},a)}))})]})}}]),e}(z.qk),yt.handle="arcanaSuggestions",yt.title={id:"ast.arcana-suggestions.title",defaults:"Arcana Logs"},yt.displayOrder=55,ht=vt,pt=(0,O.Z)(ht.prototype,"data",[V.I,lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),mt=(0,O.Z)(ht.prototype,"arcanaTracking",[V.I,ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.arcanaTracking}}),gt=(0,O.Z)(ht.prototype,"timeline",[V.I,ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),ft=(0,O.Z)(ht.prototype,"actors",[V.I,dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),ht),le=e(52250),ce=(At=Reflect.metadata("design:type",J.V),wt=Reflect.metadata("design:type",le.ZP),St=Et=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(s=a.call.apply(a,d()(t=[this]).call(t,n))).undraws=0,(0,R.Z)(s,"data",Tt,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",Rt,(0,S.Z)(s)),s}return(0,E.Z)(e,[{key:"initialise",value:function(){this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.UNDRAW.id),this.onUndraw),this.addEventHook("complete",this.onComplete)}},{key:"onUndraw",value:function(){this.undraws+=1}},{key:"onComplete",value:function(){this.undraws>0&&this.suggestions.add(new le.q$({icon:this.data.actions.UNDRAW.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-undraw-usage.suggestions.content",defaults:"Due to Draw starting its cooldown the moment it's used, there is no longer any reason to <0/> instead of playing it or directly overwriting it with <1/>.",components:[(0,ne.jsx)(Ka.P9,{action:"UNDRAW"}),(0,ne.jsx)(Ka.P9,{action:"DRAW"})]}),severity:le.bI.MAJOR,why:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-undraw-usage.suggestions.why",defaults:"{0, plural, one {# instance} other {# instances}} of using undraw.",values:{0:this.undraws}})}))}}]),e}(z.qk),Et.handle="arcanaundraws",It=St,Tt=(0,O.Z)(It.prototype,"data",[V.I,At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Rt=(0,O.Z)(It.prototype,"suggestions",[V.I,wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),It),ue=e(18527),de=e(3362),he=e(8510),pe=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(s=a.call.apply(a,d()(t=[this]).call(t,n))).hobIndex=null,s}return(0,E.Z)(e,[{key:"initialise",value:function(){(0,ue.Z)((0,de.Z)(e.prototype),"initialise",this).call(this);var t=(0,Y.hX)().target(this.parser.actor.id).status(this.data.statuses.HARMONY_OF_BODY.id);this.addEventHook(t.type("statusApply"),this.onApplyBody),this.addEventHook(t.type("statusRemove"),this.onRemoveBody)}},{key:"onApplyBody",value:function(){var t=this.data.statuses.HARMONY_OF_BODY;this.hobIndex=this.setPercentageAdjustment("all",t.speedModifier,"both")}},{key:"onRemoveBody",value:function(){this.reset(this.hobIndex),this.hobIndex=null}}]),e}(he.Z),me=e(52102),ge=e(49006),fe={CLIPPING:{6e3:le.bI.MINOR,9e3:le.bI.MEDIUM,12e3:le.bI.MAJOR},UPTIME:{90:me.hI.WARN,95:me.hI.SUCCESS}},ye=(Ot=Reflect.metadata("design:type",me.ZP),Ct=Reflect.metadata("design:type",le.ZP),Nt=kt=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"checklist",bt,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",xt,(0,S.Z)(s)),s.trackedStatuses=[s.data.statuses.COMBUST_III.id],s}return(0,E.Z)(e,[{key:"addChecklistRules",value:function(){var t=this;this.checklist.add(new me.dV({name:(0,ne.jsx)(Ja.Trans,{id:"ast.dots.rule.name",defaults:"Keep your DoT up"}),description:(0,ne.jsx)(Ja.Trans,{id:"ast.dots.rule.description",defaults:"Combust III makes up a good portion of your damage. Aim to keep this DoT up at all times. It also can be used to weave (<0/>) and manage cards, or maneuver around without dropping GCD uptime.",components:[(0,ne.jsx)(Ka.P9,{action:"DRAW"})]}),tiers:fe.UPTIME,requirements:[new me.nb({name:(0,ne.jsx)(Ja.Trans,{id:"ast.dots.requirement.uptime.name",defaults:"<0/> uptime",components:[(0,ne.jsx)(Ka.P9,{action:"COMBUST_III"})]}),percent:function(){return t.getUptimePercent(t.data.statuses.COMBUST_III.id)}})]}))}},{key:"addClippingSuggestions",value:function(){var t=this.getClippingAmount(this.data.statuses.COMBUST_III.id);this.suggestions.add(new le.eg({icon:this.data.actions.COMBUST_III.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.dots.suggestion.clip.content",defaults:"Avoid refreshing <0/> significantly before it expires.",components:[(0,ne.jsx)(Ka.P9,{action:"COMBUST_III"})]}),why:(0,ne.jsx)(Ja.Trans,{id:"ast.dots.suggestion.clip.why",defaults:"An average of {0} seconds of <0/> clipped per minute due to early refreshes.",values:{0:this.parser.formatDuration(t,1)},components:[(0,ne.jsx)(Ka.P9,{status:"COMBUST_III"})]}),tiers:fe.CLIPPING,value:t}))}}]),e}(ge.N),kt.handle="combust",Zt=Nt,bt=(0,O.Z)(Zt.prototype,"checklist",[V.I,Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),xt=(0,O.Z)(Zt.prototype,"suggestions",[V.I,Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Zt),ve={SCORE:{70:me.hI.FAIL,80:me.hI.WARN,90:me.hI.SUCCESS},WEIGHT:{MINOR_ARCANA:1,LORD:.8,LADY:.2}},Ae={LORD:{1:le.bI.MINOR,2:le.bI.MEDIUM,6:le.bI.MAJOR},LADY:{1:le.bI.MINOR,2:le.bI.MEDIUM,6:le.bI.MAJOR},MINOR_ARCANA:{1:le.bI.MINOR,2:le.bI.MEDIUM,6:le.bI.MAJOR}},we=(Dt=Reflect.metadata("design:type",J.V),jt=Reflect.metadata("design:type",me.ZP),Pt=Reflect.metadata("design:type",le.ZP),_t=Ut=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",Mt,(0,S.Z)(s)),(0,R.Z)(s,"checklist",Ht,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",Wt,(0,S.Z)(s)),s.lastCrownTimestamp=0,s.minorArcana=0,s.minorArcanaDrift=0,s.minorArcanaTotalDrift=0,s.lastEventType="prepare",s.lastCardType=0,s.ladyObtained=0,s.ladyCasts=0,s.lordObtained=0,s.lordCasts=0,s.crownActions=[],s.arcanaStatuses=[],s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=this;this.crownActions=H()(X).call(X,(function(a){return t.data.actions[a].id})),this.arcanaStatuses=H()(at).call(at,(function(a){return t.data.statuses[a].id}));var a=(0,Y.hX)().source(this.parser.actor.id);this.addEventHook(a.type("action").action(this.data.actions.MINOR_ARCANA.id),this.onMinorArcana),this.addEventHook(a.type("action").action((0,Y.kw)(this.crownActions)),this.onCrownAction),this.addEventHook(a.type("statusApply").status((0,Y.kw)(this.arcanaStatuses)),this.onCrownBuff),this.addEventHook("complete",this.onComplete)}},{key:"onMinorArcana",value:function(t){this.minorArcana++,0===this.lastCrownTimestamp?this.minorArcanaDrift=t.timestamp-this.parser.pull.timestamp:this.minorArcanaDrift=t.timestamp-this.lastCrownTimestamp-this.data.actions.MINOR_ARCANA.cooldown,this.minorArcanaDrift>0&&(this.minorArcanaTotalDrift+=this.minorArcanaDrift),this.lastEventType===t.type&&(this.lastCardType===this.data.statuses.LORD_OF_CROWNS_DRAWN.id&&this.lordObtained++,this.lastCardType===this.data.statuses.LADY_OF_CROWNS_DRAWN.id&&this.ladyObtained++),this.lastCrownTimestamp=t.timestamp,this.lastEventType=t.type}},{key:"onCrownAction",value:function(t){t.action===this.data.actions.LORD_OF_CROWNS.id&&(this.lordCasts++,0===this.lordObtained&&this.parser.pull.timestamp+this.data.actions.MINOR_ARCANA.cooldown<t.timestamp&&this.lordObtained++),t.action===this.data.actions.LADY_OF_CROWNS.id&&(this.ladyCasts++,0===this.ladyObtained&&this.parser.pull.timestamp+this.data.actions.MINOR_ARCANA.cooldown<t.timestamp&&this.ladyObtained++)}},{key:"onCrownBuff",value:function(t){t.status===this.data.statuses.LORD_OF_CROWNS_DRAWN.id&&(this.lordObtained++,this.lastCardType=this.data.statuses.LORD_OF_CROWNS_DRAWN.id,this.lastEventType=t.type),t.status===this.data.statuses.LADY_OF_CROWNS_DRAWN.id&&(this.ladyObtained++,this.lastCardType=this.data.statuses.LADY_OF_CROWNS_DRAWN.id,this.lastEventType=t.type)}},{key:"onComplete",value:function(){var t=this.parser.pull.duration+this.parser.pull.timestamp;0===this.lastCrownTimestamp?this.minorArcanaTotalDrift=this.parser.pull.duration:this.minorArcanaTotalDrift+=Math.max(0,t-this.lastCrownTimestamp-this.data.actions.MINOR_ARCANA.cooldown),"action"===this.lastEventType&&(this.lastCardType===this.data.statuses.LORD_OF_CROWNS_DRAWN.id&&this.lordObtained++,this.lastCardType===this.data.statuses.LADY_OF_CROWNS_DRAWN.id&&this.ladyObtained++);var a=Math.ceil(Math.max(0,this.parser.pull.duration-5e3)/this.data.actions.MINOR_ARCANA.cooldown),e=[new me.nb({name:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.checklist.requirement.name",defaults:"<0/> uses",components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"})]}),value:this.minorArcana,target:a,weight:ve.WEIGHT.MINOR_ARCANA})];0!==this.ladyObtained&&e.push(new me.nb({name:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.checklist.lady",defaults:"<0/> uses",components:[(0,ne.jsx)(Ka.P9,{action:"LADY_OF_CROWNS"})]}),value:this.ladyCasts,target:this.ladyObtained,weight:ve.WEIGHT.LADY})),0!==this.lordObtained&&e.push(new me.nb({name:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.checklist.lord",defaults:"<0/> uses",components:[(0,ne.jsx)(Ka.P9,{action:"LORD_OF_CROWNS"})]}),value:this.lordCasts,target:this.lordObtained,weight:ve.WEIGHT.LORD})),this.checklist.add(new me.dV({displayOrder:51,name:(0,ne.jsx)(Ja.Trans,{id:"ast.crown=play.checklist.name",defaults:"Use <0/> to your advantage.",components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA",showIcon:!1})]}),description:(0,ne.jsx)(ne.Fragment,{children:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.checklist.description",defaults:"Playing <0/> will allow for extra oGCD damage through <1/> or extra oGCD healing through <2/>. Try to play <3/> as much as possible to allow for possible extra damage or extra healing without wasting additional resources.",components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"}),(0,ne.jsx)(Ka.P9,{action:"LORD_OF_CROWNS"}),(0,ne.jsx)(Ka.P9,{action:"LADY_OF_CROWNS"}),(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"})]})}),tiers:ve.SCORE,requirements:e}));var s=Math.floor(this.minorArcanaTotalDrift/this.data.actions.MINOR_ARCANA.cooldown);0===this.minorArcana?this.suggestions.add(new le.q$({icon:this.data.actions.MINOR_ARCANA.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.suggestions.crown-play-no-usage.content",defaults:"No uses of <0/> at all.",components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"})]}),why:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.suggestions.crown-play-no-usage.why",defaults:"No <0/> used when {crownPlaysMissed} could have been played.",values:{crownPlaysMissed:s},components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"})]}),severity:le.bI.MAJOR})):this.suggestions.add(new le.eg({icon:this.data.actions.MINOR_ARCANA.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.suggestions.crown-play-uses.content",defaults:"Try casting <0/> as soon as its available to maximize utility of both damage and healing oGCDs.",components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"})]}),tiers:Ae.MINOR_ARCANA,value:s,why:(0,ne.jsx)(Ja.Trans,{id:"ast.crown-play.suggestions.crown-play-uses.why",defaults:"About {crownPlaysMissed, plural, one {# use} other {# uses}} of <0/> were missed by holding <1/> on full cooldown for at least {0}.",values:{0:this.parser.formatDuration(this.minorArcanaTotalDrift),crownPlaysMissed:s},components:[(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA"}),(0,ne.jsx)(Ka.P9,{action:"MINOR_ARCANA",showIcon:!1})]})}))}}]),e}(z.qk),Ut.handle="crown_play",Ut.title={id:"ast.crown-play.title",defaults:"Crown Play"},Lt=_t,Mt=(0,O.Z)(Lt.prototype,"data",[V.I,Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Ht=(0,O.Z)(Lt.prototype,"checklist",[V.I,jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),Wt=(0,O.Z)(Lt.prototype,"suggestions",[V.I,Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Lt),Ie=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(s=a.call.apply(a,d()(t=[this]).call(t,n))).trackedDefensives=[s.data.actions.EXALTATION,s.data.actions.CELESTIAL_INTERSECTION,s.data.actions.CELESTIAL_OPPOSITION],s}return e}(e(12541).O),Te=e(73905),Re=e(68156),Ee=e(45150),Se=(Gt=Reflect.metadata("design:type",$a.TY),Ft=Reflect.metadata("design:type",J.V),Bt=Reflect.metadata("design:type",le.ZP),zt=Reflect.metadata("design:type",qa.e),qt=Qt=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"timeline",Vt,(0,S.Z)(s)),(0,R.Z)(s,"data",Jt,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",Kt,(0,S.Z)(s)),(0,R.Z)(s,"actors",Xt,(0,S.Z)(s)),s.history=[],s.currentWindow=void 0,s.castHook=void 0,s.otherAst={timeOverwritten:0,countOverwritten:0,active:!1,start:0},s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=(0,Y.hX)().status(this.data.statuses.DIVINATION.id);this.addEventHook(t.source(this.parser.actor.id),this.countDivinationBuffs),this.addEventHook(t.type("statusApply").target(this.parser.actor.id),this.tryOpenWindow),this.addEventHook(t.type("statusRemove").target(this.parser.actor.id),this.tryCloseWindow),this.addEventHook("complete",this.onComplete)}},{key:"countDivinationBuffs",value:function(t){var a;null!=this.currentWindow&&!G()(a=this.currentWindow.playersBuffed).call(a,t.target)&&this.actors.get(t.target).playerControlled&&this.currentWindow.playersBuffed.push(t.target)}},{key:"tryOpenWindow",value:function(t){this.parser.actor.id!==t.source&&(this.otherAst.active=!0,this.otherAst.start=t.timestamp,null!=this.currentWindow&&this.forceCloseWindow(t.timestamp)),void 0===this.currentWindow&&this.parser.actor.id===t.source&&(this.currentWindow={start:t.timestamp,rotation:[],gcdCount:0,source:t.source,playersBuffed:[],overlap:!1},this.castHook=this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action"),this.onCast),this.data.statuses.DIVINATION.duration>this.currentWindow.start-this.otherAst.start&&(this.otherAst.countOverwritten++,this.otherAst.timeOverwritten+=this.otherAst.start+this.data.statuses.DIVINATION.duration-t.timestamp,this.currentWindow.overlap=!0),this.otherAst.active=!1,this.otherAst.start=0)}},{key:"tryCloseWindow",value:function(t){t.source===this.parser.actor.id&&this.forceCloseWindow(t.timestamp)}},{key:"forceCloseWindow",value:function(t){null!=this.currentWindow&&(this.currentWindow.end=t,this.history.push(this.currentWindow),this.currentWindow=void 0,null!=this.castHook&&(this.removeEventHook(this.castHook),this.castHook=void 0))}},{key:"onCast",value:function(t){if(null!=this.currentWindow){var a=this.data.getAction(t.action);null!=a&&(this.currentWindow.rotation.push(t),a.onGcd&&(this.currentWindow.gcdCount++,null!=this.currentWindow.end&&null==this.currentWindow.trailingGcdEvent&&(this.currentWindow.trailingGcdEvent=t)))}}},{key:"onComplete",value:function(){0!==this.otherAst.countOverwritten&&this.suggestions.add(new le.q$({icon:this.data.actions.DIVINATION.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.suggestion.usage.content",defaults:"Consider coordinating with your co-Astrologian to maximize the amount of time <0/> is up so the party can benefit from extra damage for longer.",components:[(0,ne.jsx)(Ka.P9,{action:"DIVINATION"})]}),severity:le.bI.MAJOR,why:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.suggestion.usage.why",defaults:"{0} {1, plural, one {cast} other {casts}} of <0/> were overwritten resulting in a loss of at least {2}.",values:{0:this.otherAst.countOverwritten,1:this.otherAst.countOverwritten,2:this.parser.formatDuration(this.otherAst.timeOverwritten)},components:[(0,ne.jsx)(Ka.P9,{action:"DIVINATION"})]})}))}},{key:"output",value:function(){var t,a=this;this.forceCloseWindow(this.parser.pull.duration);var e=H()(t=this.history).call(t,(function(t){var e=null!=t.end?t.end-a.parser.pull.timestamp:a.parser.pull.duration;return{start:t.start-a.parser.pull.timestamp,end:e,rotation:t.rotation,targetsData:{gcds:{actual:t.gcdCount,expected:6},playersBuffed:{actual:t.playersBuffed.length,expected:8}},notesMap:{otherAst:(0,ne.jsx)(ne.Fragment,{children:a.getNotesIcon(t.overlap)})}}})),s=e.length,i=(0,ne.jsx)("p",{children:(0,ne.jsx)("span",{className:"text-error",children:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.messages.no-casts",defaults:"There were no casts recorded for <0/>.",components:[(0,ne.jsx)(Ka.P9,{action:"DIVINATION"})]})})}),n=(0,ne.jsx)("p",{children:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.description",defaults:"<0/> provides Astrologian with a strong amount of raid DPS when stacked together with arcanum. Try to time the usage to match raid buffs and high output phases of other party members - it's more important to use it on time rather than hold it.",components:[(0,ne.jsx)(Ka.P9,{action:"DIVINATION"})]})});return 0!==this.otherAst.countOverwritten?(0,ne.jsxs)(te.Fragment,{children:[n,(0,ne.jsx)(Te.y,{targets:[{header:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-tracking.divination.playertarget",defaults:"Players Buffed"}),accessor:"playersBuffed"},{header:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.rotation-table.header.gcd-count",defaults:"GCDs"}),accessor:"gcds"}],notes:[{header:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.rotation-table.header.overwrite",defaults:"Overwrote other AST"}),accessor:"otherAst"}],data:e,onGoto:this.timeline.show})]}):(0,ne.jsxs)(te.Fragment,{children:[n,s>0?"":(0,ne.jsx)(Re.Z,{children:i}),s>0?(0,ne.jsx)(Te.y,{targets:[{header:(0,ne.jsx)(Ja.Trans,{id:"ast.arcana-tracking.divination.playertarget",defaults:"Players Buffed"}),accessor:"playersBuffed"},{header:(0,ne.jsx)(Ja.Trans,{id:"ast.divination.rotation-table.header.gcd-count",defaults:"GCDs"}),accessor:"gcds"}],data:e,onGoto:this.timeline.show}):""]})}},{key:"getNotesIcon",value:function(t){return t?(0,ne.jsx)(Ee.Z,{name:"remove",className:"text-error"}):""}}]),e}(z.qk),Qt.handle="Divination",Qt.title={id:"ast.divination.title",defaults:"Divination"},Qt.displayOrder=53,Yt=qt,Vt=(0,O.Z)(Yt.prototype,"timeline",[V.I,Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),Jt=(0,O.Z)(Yt.prototype,"data",[V.I,Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Kt=(0,O.Z)(Yt.prototype,"suggestions",[V.I,Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Xt=(0,O.Z)(Yt.prototype,"actors",[V.I,zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actors}}),Yt),Oe={DRAW_HOLDING:{1:le.bI.MINOR,2:le.bI.MEDIUM,6:le.bI.MAJOR}},Ce=($t=Reflect.metadata("design:type",J.V),ta=Reflect.metadata("design:type",me.ZP),aa=Reflect.metadata("design:type",le.ZP),ea=Reflect.metadata("design:type",Ya),ca=la=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",ia,(0,S.Z)(s)),(0,R.Z)(s,"checklist",na,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",oa,(0,S.Z)(s)),(0,R.Z)(s,"arcanaTracking",ra,(0,S.Z)(s)),s.draws=0,s.cooldownEndTime=s.parser.pull.timestamp,s.drawTotalDrift=0,s.plays=0,s.prepullPrepped=!1,s.playActions=[],s.arcanaStatuses=[],s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=this;this.playActions=H()(K).call(K,(function(a){return t.data.actions[a].id})),this.arcanaStatuses=H()(et).call(et,(function(a){return t.data.statuses[a].id}));var a=(0,Y.hX)().source(this.parser.actor.id);this.addEventHook(a.type("action").action(this.data.actions.DRAW.id),this.onDraw),this.addEventHook(a.type("action").action((0,Y.kw)(this.playActions)),this.onPlay),this.addEventHook(a.type("statusApply").status((0,Y.kw)(this.arcanaStatuses)),this.onPlayBuff),this.addEventHook("complete",this.onComplete)}},{key:"onDraw",value:function(t){t.timestamp>this.parser.pull.timestamp&&(this.drawTotalDrift+=Math.max(0,t.timestamp-this.cooldownEndTime),this.cooldownEndTime=this.data.actions.DRAW.cooldown+Math.max(this.cooldownEndTime,t.timestamp),this.draws++)}},{key:"onPlay",value:function(){this.plays++}},{key:"onPlayBuff",value:function(t){t.timestamp>this.parser.pull.timestamp||(this.prepullPrepped=!0,this.plays++)}},{key:"onComplete",value:function(){var t,a=this.parser.pull.duration+this.parser.pull.timestamp;this.drawTotalDrift+=Math.max(0,a-this.cooldownEndTime)-7500,this.drawTotalDrift=Math.min(this.parser.pull.duration,this.drawTotalDrift);var e=Math.ceil(Math.max(0,this.parser.pull.duration-7500)/this.data.actions.DRAW.cooldown)+(this.data.actions.DRAW.charges-1),s=this.arcanaTracking.getPullState();this.prepullPrepped=!!s.drawState;var i=e+(this.prepullPrepped?1:0),n=(this.prepullPrepped?1:0)+this.draws,o=Math.floor((i-2)/i*100),r=Math.floor((i-3)/i*100);this.checklist.add(new me.dV({displayOrder:40,name:(0,ne.jsx)(Ja.Trans,{id:"ast.draw.checklist.name",defaults:"Play as many cards as possible"}),description:(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(Ja.Trans,{id:"ast.draw.checklist.description",defaults:"Playing cards provides seals for <0/> and casting <1/> will help with mana management.",components:[(0,ne.jsx)(Ka.P9,{action:"ASTRODYNE"}),(0,ne.jsx)(Ka.P9,{action:"DRAW"})]}),(0,ne.jsxs)("ul",{children:[(0,ne.jsxs)("li",{children:[(0,ne.jsx)(Ja.Trans,{id:"ast.draw.checklist.description.prepull",defaults:"Prepared before pull:"}),"",this.prepullPrepped?1:0,"/1"]}),(0,ne.jsxs)("li",{children:[(0,ne.jsx)(Ja.Trans,{id:"ast.draw.checklist.description.draws",defaults:"Obtained from <0/>:",components:[(0,ne.jsx)(Ka.P9,{action:"DRAW"})]}),"",this.draws,"/",e]}),(0,ne.jsxs)("li",{children:[(0,ne.jsx)(Ja.Trans,{id:"ast.draw.checklist.description.total",defaults:"Total cards obtained:"}),"",n,"/",i]})]})]}),tiers:(t={},(0,Va.Z)(t,o,me.hI.WARN),(0,Va.Z)(t,r,me.hI.FAIL),(0,Va.Z)(t,100,me.hI.SUCCESS),t),requirements:[new me.nb({name:(0,ne.jsx)(Ja.Trans,{id:"ast.draw.checklist.requirement.name",defaults:"<0/> uses",components:[(0,ne.jsx)(Ka.P9,{action:"PLAY"})]}),value:this.plays,target:i})]}));var l=Math.floor(this.drawTotalDrift/this.data.actions.DRAW.cooldown);0===this.draws?this.suggestions.add(new le.q$({icon:this.data.actions.DRAW.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.draw.suggestions.draw-no-usage.content",defaults:"No uses of <0/> at all.",components:[(0,ne.jsx)(Ka.P9,{action:"DRAW"})]}),why:(0,ne.jsx)(Ja.Trans,{id:"ast.draw.suggestions.draw-no-usage.why",defaults:"No draws used."}),severity:le.bI.MAJOR})):this.suggestions.add(new le.eg({icon:this.data.actions.DRAW.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.draw.suggestions.draw-uses.content",defaults:"Consider casting <0/> as soon as its available to maximize both MP regen and the number of cards played.",components:[(0,ne.jsx)(Ka.P9,{action:"DRAW"})]}),tiers:Oe.DRAW_HOLDING,value:l,why:(0,ne.jsx)(Ja.Trans,{id:"ast.draw.suggestions.draw-uses.why",defaults:"About {drawsMissed, plural, one {# use} other {# uses}} of <0/> {drawsMissed, plural, one {was} other {were}} missed by holding two cards on full cooldown for at least a total of {0}.",values:{0:this.parser.formatDuration(this.drawTotalDrift),drawsMissed:l},components:[(0,ne.jsx)(Ka.P9,{action:"DRAW"})]})}))}}]),e}(z.qk),la.handle="draw",la.title={id:"ast.draw.title",defaults:"Draw"},sa=ca,ia=(0,O.Z)(sa.prototype,"data",[V.I,$t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),na=(0,O.Z)(sa.prototype,"checklist",[V.I,ta],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),oa=(0,O.Z)(sa.prototype,"suggestions",[V.I,aa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),ra=(0,O.Z)(sa.prototype,"arcanaTracking",[V.I,ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.arcanaTracking}}),sa),Ze={UNCOOKED:{1:le.bI.MEDIUM,2:le.bI.MAJOR},USES_MISSED:{1:le.bI.MEDIUM,2:le.bI.MAJOR}},be=(ua=Reflect.metadata("design:type",J.V),da=Reflect.metadata("design:type",le.ZP),fa=ga=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",pa,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",ma,(0,S.Z)(s)),s.prepull=!1,s.uses=0,s.lastUse=0,s.totalHeld=0,s.earlyBurstCount=0,s.petCasts=[s.data.actions.STELLAR_BURST.id,s.data.actions.STELLAR_EXPLOSION.id],s}return(0,E.Z)(e,[{key:"initialise",value:function(){this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.EARTHLY_STAR.id),this.onPlace),this.addEventHook((0,Y.hX)().source("pet").type("action").action((0,Y.kw)(this.petCasts)),this.onPetCast),this.addEventHook("complete",this._onComplete)}},{key:"onPlace",value:function(t){this.uses++,t.timestamp<this.parser.pull.timestamp&&(this.prepull=!0),0===this.lastUse&&(this.lastUse=this.parser.pull.timestamp);var a;a=1!==this.uses||this.prepull?t.timestamp-this.lastUse-this.data.actions.EARTHLY_STAR.cooldown:t.timestamp-this.parser.pull.timestamp,this.totalHeld+=Math.max(0,a),this.lastUse=t.timestamp}},{key:"onPetCast",value:function(t){t.action===this.data.actions.STELLAR_BURST.id&&this.earlyBurstCount++}},{key:"_onComplete",value:function(){var t=this.earlyBurstCount;t>0&&this.suggestions.add(new le.eg({icon:this.data.actions.STELLAR_DETONATION.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.earthly-star.suggestion.uncooked.content",defaults:"Plan your <0/> placements so that it's always cooked enough for the full potency when you need it.",components:[(0,ne.jsx)(Ka.P9,{action:"EARTHLY_STAR"})]}),why:(0,ne.jsx)(Ja.Trans,{id:"ast.earthly-star.suggestion.uncooked.why",defaults:"{earlyBurstCount, plural, one {# detonation} other {# detonations}} of an uncooked Earthly Star.",values:{earlyBurstCount:t}}),tiers:Ze.UNCOOKED,value:t})),this.parser.pull.duration+this.parser.pull.timestamp-this.lastUse>this.data.actions.EARTHLY_STAR.cooldown&&(this.totalHeld+=this.parser.pull.duration+this.parser.pull.timestamp-(this.lastUse+this.data.actions.EARTHLY_STAR.cooldown));var a=0===this.uses?this.parser.pull.duration:this.totalHeld,e=Math.floor(a/this.data.actions.EARTHLY_STAR.cooldown);this.suggestions.add(new le.eg({icon:this.data.actions.EARTHLY_STAR.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.earthly-star.suggestion.missed-use.content",defaults:"Use <0/> more frequently. It may save a healing GCD and results in more damage output.",components:[(0,ne.jsx)(Ka.P9,{action:"EARTHLY_STAR"})]}),tiers:Ze.USES_MISSED,value:e,why:(0,ne.jsx)(Ja.Trans,{id:"ast.earthly-star.suggestion.missed-use.why",defaults:"About {usesMissed} uses of Earthly Star were missed by holding it for at least a total of {0}.",values:{0:this.parser.formatDuration(a),usesMissed:e}})}))}}]),e}(z.qk),ga.handle="earthlystar",ga.title={id:"ast.earthly-star.title",defaults:"Earthly Star"},ha=fa,pa=(0,O.Z)(ha.prototype,"data",[V.I,ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),ma=(0,O.Z)(ha.prototype,"suggestions",[V.I,da],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),ha),xe=e(81336),ke={WASTED_AOE_HEAL_TIERS:{1:le.bI.MINOR,5:le.bI.MEDIUM}},Ne=(ya=Reflect.metadata("design:type",J.V),va=Reflect.metadata("design:type",xe.w),Aa=Reflect.metadata("design:type",le.ZP),Sa=Ea=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",Ia,(0,S.Z)(s)),(0,R.Z)(s,"cooldowns",Ta,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",Ra,(0,S.Z)(s)),s.nonHoroscopeHeals=0,s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=(0,Y.hX)().source(this.parser.actor.id);this.addEventHook(t.type("action").action(this.data.actions.HELIOS.id),this.onHeliosCast),this.addEventHook(t.type("action").action(this.data.actions.ASPECTED_HELIOS.id),this.onAspectedHeliosCast),this.addEventHook("complete",this.onComplete)}},{key:"onAspectedHeliosCast",value:function(){this.data.actions.HOROSCOPE.cooldown-this.cooldowns.remaining("HOROSCOPE")<this.data.statuses.HOROSCOPE.duration||this.data.actions.NEUTRAL_SECT.cooldown-this.cooldowns.remaining("NEUTRAL_SECT")<this.data.statuses.NEUTRAL_SECT.duration||this.cooldowns.remaining("NEUTRAL_SECT")>0&&this.cooldowns.remaining("HOROSCOPE")>0||this.nonHoroscopeHeals++}},{key:"onHeliosCast",value:function(){this.data.actions.HOROSCOPE.cooldown-this.cooldowns.remaining("HOROSCOPE")<this.data.statuses.HOROSCOPE.duration||this.cooldowns.remaining("HOROSCOPE")>0||this.nonHoroscopeHeals++}},{key:"onComplete",value:function(){this.suggestions.add(new le.eg({icon:this.data.actions.HELIOS.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.horoscope.suggestion.usage.content",defaults:"Try to plan your <0/> or <1/> usages to have either up before you need to cast <2/> or <3/>.<4/> and <5/> may help to cover more damage later without needing to cast additional AOE heals.",components:[(0,ne.jsx)(Ka.P9,{action:"HOROSCOPE"}),(0,ne.jsx)(Ka.P9,{action:"NEUTRAL_SECT"}),(0,ne.jsx)(Ka.P9,{action:"HELIOS"}),(0,ne.jsx)(Ka.P9,{action:"ASPECTED_HELIOS"}),(0,ne.jsx)(Ka.P9,{status:"HOROSCOPE_HELIOS",showIcon:!1}),(0,ne.jsx)(Ka.P9,{action:"NEUTRAL_SECT",showIcon:!1})]}),tiers:ke.WASTED_AOE_HEAL_TIERS,value:this.nonHoroscopeHeals,why:(0,ne.jsx)(Ja.Trans,{id:"ast.horoscope.suggestion.usage.why",defaults:"{0, plural, one {# AOE GCD heal was cast} other {# AOE GCD heals were cast}} without <0/> or <1/> even though one of the two abilities were available.",values:{0:this.nonHoroscopeHeals},components:[(0,ne.jsx)(Ka.P9,{action:"HOROSCOPE"}),(0,ne.jsx)(Ka.P9,{action:"NEUTRAL_SECT"})]})}))}}]),e}(z.qk),Ea.handle="horoscope",Ea.title={id:"ast.horoscope.title",defaults:"Horoscope"},wa=Sa,Ia=(0,O.Z)(wa.prototype,"data",[V.I,ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Ta=(0,O.Z)(wa.prototype,"cooldowns",[V.I,va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),Ra=(0,O.Z)(wa.prototype,"suggestions",[V.I,Aa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),wa),De=(Oa=Reflect.metadata("design:type",$a.TY),Ca=Reflect.metadata("design:type",J.V),Za=Reflect.metadata("design:type",he.Z),ja=Da=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"timeline",xa,(0,S.Z)(s)),(0,R.Z)(s,"data",ka,(0,S.Z)(s)),(0,R.Z)(s,"castTime",Na,(0,S.Z)(s)),s.history=[],s.currentWindow=void 0,s.castHook=void 0,s.castTimeIndex=null,s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=(0,Y.hX)().status(this.data.statuses.LIGHTSPEED.id);this.addEventHook(t.type("statusApply").target(this.parser.actor.id),this.tryOpenWindow),this.addEventHook(t.type("statusRemove").target(this.parser.actor.id),this.tryCloseWindow)}},{key:"tryOpenWindow",value:function(t){void 0===this.currentWindow&&(this.currentWindow={start:t.timestamp,rotation:[],gcdCount:0,mpSavings:0,deathTruncated:!1},this.castHook=this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action"),this.onCast),this.castTimeIndex=this.castTime.setTimeAdjustment("all",-2500))}},{key:"tryCloseWindow",value:function(t){null!=this.currentWindow&&(this.currentWindow.end=t.timestamp,this.history.push(this.currentWindow),this.currentWindow=void 0,null!=this.castHook&&(this.removeEventHook(this.castHook),this.castHook=void 0),this.castTime.reset(this.castTimeIndex),this.castTimeIndex=null)}},{key:"onCast",value:function(t){if(null!=this.currentWindow){var a=this.data.getAction(t.action);null!=a&&(this.currentWindow.rotation.push(t),a.onGcd&&(this.currentWindow.gcdCount++,null!=this.currentWindow.end&&null==this.currentWindow.trailingGcdEvent&&(this.currentWindow.trailingGcdEvent=t)))}}},{key:"output",value:function(){var t,a=this,e={timestamp:this.parser.pull.duration,status:this.data.statuses.LIGHTSPEED.id,type:"statusRemove",source:this.parser.actor.id,target:this.parser.actor.id};this.tryCloseWindow(e);var s=H()(t=this.history).call(t,(function(t){var e=null!=t.end?t.end-a.parser.pull.timestamp:a.parser.pull.duration,s=t.start-a.parser.pull.timestamp,i=a.data.statuses.LIGHTSPEED.duration-2e3,n=!t.deathTruncated&&e!==s&&e-s<i;return{start:s,end:e,overlap:n,notesMap:{overlapped:(0,ne.jsx)(ne.Fragment,{children:n?(0,ne.jsx)(Ee.Z,{name:"x",color:"red"}):(0,ne.jsx)(Ee.Z,{name:"check",color:"green"})}),totalSavings:(0,ne.jsx)(ne.Fragment,{children:t.mpSavings})},rotation:t.rotation,targetsData:{gcds:{actual:t.gcdCount,expected:6}}}})),i=s.length,n=Math.ceil(this.parser.pull.duration/this.data.actions.LIGHTSPEED.cooldown),o=(0,ne.jsx)("p",{children:(0,ne.jsx)("span",{className:"text-error",children:(0,ne.jsx)(Ja.Trans,{id:"ast.lightspeed.messages.no-casts",defaults:"There were no casts recorded for <0/>.",components:[(0,ne.jsx)(Ka.P9,{action:"LIGHTSPEED"})]})})}),r=(0,ne.jsx)("p",{children:(0,ne.jsx)(Ja.Trans,{id:"ast.lightspeed.messages.num-casts",defaults:"There were a total of {actualCasts} out of a possible {totalPossibleCasts} <0/> casts noted.",values:{actualCasts:i,totalPossibleCasts:n},components:[(0,ne.jsx)(Ka.P9,{action:"LIGHTSPEED"})]})}),l=(0,ne.jsx)("p",{children:(0,ne.jsx)(Ja.Trans,{id:"ast.lightspeed.messages.explanation",defaults:"The main use of <0/> should be for weaving card actions during <1/> and <2/> windows.<3/>It can also be used for keeping casts up while on the move and other specific scenarios.<4/>Each fight calls for a different strategy, but consider utilizing it as much as possible.<5/>Unless it's being used for <6/>, lightspeed can fit at least 6 GCDs.<7/>",components:[(0,ne.jsx)(Ka.P9,{action:"LIGHTSPEED"}),(0,ne.jsx)(Ka.P9,{action:"DIVINATION"}),(0,ne.jsx)(Ka.P9,{action:"ASTRODYNE"}),(0,ne.jsx)("br",{}),(0,ne.jsx)("br",{}),(0,ne.jsx)("br",{}),(0,ne.jsx)(Ka.P9,{action:"ASCEND"}),(0,ne.jsx)("br",{})]})});return(0,ne.jsxs)(te.Fragment,{children:[l,(0,ne.jsx)(Re.Z,{children:i>0?r:o}),i>0?(0,ne.jsx)(Te.y,{targets:[{header:(0,ne.jsx)(Ja.Trans,{id:"ast.lightspeed.rotation-table.header.gcd-count",defaults:"GCDs"}),accessor:"gcds"}],data:s,onGoto:this.timeline.show}):""]})}}]),e}(z.qk),Da.handle="Lightspeed",Da.title={id:"ast.lightspeed.title",defaults:"Lightspeed"},Da.displayOrder=52,ba=ja,xa=(0,O.Z)(ba.prototype,"timeline",[V.I,Oa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),ka=(0,O.Z)(ba.prototype,"data",[V.I,Ca],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),Na=(0,O.Z)(ba.prototype,"castTime",[V.I,Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),ba),je=e(90577),Pe={GRAVITY:{1:le.bI.MINOR,3:le.bI.MEDIUM,10:le.bI.MAJOR},NOTGRAVITY:{.2:le.bI.MINOR,.6:le.bI.MEDIUM,.8:le.bI.MAJOR}},Le=(Pa=Reflect.metadata("design:type",J.V),La=Reflect.metadata("design:type",le.ZP),Ma=Reflect.metadata("design:type",je.I),Ha=Reflect.metadata("design:type",xe.w),za=Ba=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",Ua,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",_a,(0,S.Z)(s)),(0,R.Z)(s,"invulnerability",Ga,(0,S.Z)(s)),(0,R.Z)(s,"cooldowns",Fa,(0,S.Z)(s)),s.macrocosmosUses=0,s.gravityIIUses=0,s}return(0,E.Z)(e,[{key:"initialise",value:function(){this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.MACROCOSMOS.id),this.onMacrocosmosCast),this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.GRAVITY_II.id),this.onGravityIICast),this.addEventHook("complete",this.onComplete)}},{key:"onMacrocosmosCast",value:function(){this.macrocosmosUses++}},{key:"onGravityIICast",value:function(){this.cooldowns.remaining("MACROCOSMOS")+2500>0||this.gravityIIUses++}},{key:"onComplete",value:function(){var t=Math.ceil((this.parser.pull.duration- -this.invulnerability.getDuration({types:["invulnerable"]}))/this.data.actions.MACROCOSMOS.cooldown),a=this.macrocosmosUses/t,e=(0,ne.jsx)(Ja.Trans,{id:"ast.macrocosmos.content.multiple-target",defaults:"<0/> has a higher potency per target than <1/> and <2/> should be utilized as much as possible in lieu of <3/>.",components:[(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS",showIcon:!1}),(0,ne.jsx)(Ka.P9,{action:"GRAVITY_II"}),(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS",showIcon:!1}),(0,ne.jsx)(Ka.P9,{action:"GRAVITY_II",showIcon:!1})]}),s=(0,ne.jsx)(Ja.Trans,{id:"ast.macrocosmos.content.general",defaults:"Consider utilizing <0/> more frequently. <1/> has the same potency as <2/>; however, <3/> can be utilized to weave in healing for incoming raid wide attacks leading to more value for your GCD. <4/>",components:[(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS"}),(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS",showIcon:!1}),(0,ne.jsx)(Ka.P9,{action:"FALL_MALEFIC"}),(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS",showIcon:!1}),(0,ne.jsx)("br",{})]}),i=(0,ne.jsx)(Ja.Trans,{id:"ast.macrocosmos.why.multiple-target",defaults:"There {0, plural, one {was} other {were}} {1} {2, plural, one {cast} other {casts}} noted for <0/> when <1/> was available.",values:{0:this.gravityIIUses,1:this.gravityIIUses,2:this.gravityIIUses},components:[(0,ne.jsx)(Ka.P9,{action:"GRAVITY_II"}),(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS"})]}),n=(0,ne.jsx)(Ja.Trans,{id:"ast.macrocosmos.why.general",defaults:"Out of a possible {macrocosmosMaxUses} {macrocosmosMaxUses, plural, one {cast} other {casts}} during available dps uptime, there {0, plural, one {was} other {were}} {1} {2, plural, one {cast} other {casts}} noted. <0/>",values:{0:this.macrocosmosUses,1:this.macrocosmosUses,2:this.macrocosmosUses,macrocosmosMaxUses:t},components:[(0,ne.jsx)("br",{})]}),o=(0,ne.jsx)("p",{children:(0,ne.jsx)("span",{className:"text-error",children:(0,ne.jsx)(Ja.Trans,{id:"ast.macrocosmos.why.nocasts",defaults:"There were no casts recorded for <0/>.",components:[(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS"})]})})}),r=0===this.gravityIIUses?[s]:[e],l=0===this.macrocosmosUses?[o]:[n];0!==this.gravityIIUses&&l.push(i),0===this.macrocosmosUses&&0===this.gravityIIUses?this.suggestions.add(new le.q$({icon:this.data.actions.MACROCOSMOS.icon,content:r,severity:le.bI.MAJOR,why:l})):0!==this.macrocosmosUses&&0===this.gravityIIUses?this.suggestions.add(new le.eg({icon:this.data.actions.MACROCOSMOS.icon,content:r,tiers:Pe.NOTGRAVITY,value:1-a,why:l})):this.suggestions.add(new le.eg({icon:this.data.actions.MACROCOSMOS.icon,content:r,tiers:Pe.GRAVITY,value:this.gravityIIUses,why:l}))}}]),e}(z.qk),Ba.handle="macrocosmos",Wa=za,Ua=(0,O.Z)(Wa.prototype,"data",[V.I,Pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),_a=(0,O.Z)(Wa.prototype,"suggestions",[V.I,La],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Ga=(0,O.Z)(Wa.prototype,"invulnerability",[V.I,Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.invulnerability}}),Fa=(0,O.Z)(Wa.prototype,"cooldowns",[V.I,Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),Wa),Me=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(s=a.call.apply(a,d()(t=[this]).call(t,n))).checklistName=(0,ne.jsx)(Ja.Trans,{id:"ast.ogcd-downtime.divination.name",defaults:"Use Divination"}),s.checklistDescription=(0,ne.jsx)(Ja.Trans,{id:"ast.ogcd-downtime.divination.description",defaults:"<0/> provides Astrologian with a strong amount of raid DPS when stacked together with arcanum. Try to time the usage to match raid buffs and high output phases of other party members - it's more important to use it on time rather than hold it.",components:[(0,ne.jsx)(Ka.P9,{action:"DIVINATION"})]}),s.checklistTarget=100,s.DPS_COOLDOWNS_TRACKED=[{cooldowns:[s.data.actions.DIVINATION],content:(0,ne.jsx)(Ja.Trans,{id:"ast.ogcds_dps.divination.content",defaults:"Consider using <0/> more frequently. <1/> provides an Astrologian with a strong amount of raid DPS.",components:[(0,ne.jsx)(Ka.P9,{action:"DIVINATION"}),(0,ne.jsx)(Ka.P9,{action:"DIVINATION"})]}),allowedAverageDowntime:2500}],s.trackedCds=s.DPS_COOLDOWNS_TRACKED,s}return e}(e(48945).u),He=e(26823),We=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(s=a.call.apply(a,d()(t=[this]).call(t,n))).checklistRuleBreakout=!0,s.displayPieChart=!0,s.displaySuggestion=!0,s.content=(0,ne.jsx)(Ja.Trans,{id:"ast.overheal.suggestion.content",defaults:"Avoid healing your party for more than is needed. Cut back on unnecessary heals and coordinate with your co-healer to plan resources efficiently. <0/>* Delayed heals include heals such as <1/>, <2/>, and <3/> when not manually activated.",components:[(0,ne.jsx)("br",{}),(0,ne.jsx)(Ka.P9,{action:"EXALTATION"}),(0,ne.jsx)(Ka.P9,{action:"HOROSCOPE"}),(0,ne.jsx)(Ka.P9,{action:"MACROCOSMOS"})]}),s.trackedHealCategories=[{name:(0,ne.jsx)(Ja.Trans,{id:"ast.overheal.hot.name",defaults:"Healing over Time"}),color:He.Av[1],trackedHealIds:[s.data.statuses.ASPECTED_HELIOS.id,s.data.statuses.WHEEL_OF_FORTUNE.id,s.data.statuses.ASPECTED_BENEFIC.id,s.data.statuses.OPPOSITION.id]},{name:(0,ne.jsx)(Ja.Trans,{id:"ast.overheal.earthlystar.name",defaults:"Earthly Star"}),color:He.Av[2],trackedHealIds:[s.data.actions.STELLAR_BURST.id,s.data.actions.STELLAR_EXPLOSION.id]},{name:(0,ne.jsx)(Ja.Trans,{id:"ast.overheal.delayedheals.name",defaults:"Delayed Heals*"}),color:He.Av[3],trackedHealIds:[s.data.statuses.HOROSCOPE_HELIOS.id,s.data.statuses.EXALTATION.id,s.data.statuses.MACROCOSMOS.id]}],s}return(0,E.Z)(e,[{key:"checklistDescription",value:function(t){return this.content}}]),e}(He.Bv);We.handle="overheal";var Ue,_e,Ge,Fe,Be,ze,Ye,Ve,Je,Ke=e(74407),Xe=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){return(0,r.Z)(this,e),a.apply(this,arguments)}return e}(e(74136).z);Xe.statusesStackMapping=(0,Va.Z)({},Ke.ZP.GIANT_DOMINANCE.id,Ke.ZP.EARTHLY_DOMINANCE.id);var Qe={WASTED_ST_HEAL_TIERS:{1:le.bI.MINOR,10:le.bI.MEDIUM}},qe=["BENEFIC","BENEFIC_II"],$e=(Ue=Reflect.metadata("design:type",J.V),_e=Reflect.metadata("design:type",le.ZP),Ge=Reflect.metadata("design:type",xe.w),Je=Ve=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=a.call.apply(a,d()(t=[this]).call(t,n)),(0,R.Z)(s,"data",Be,(0,S.Z)(s)),(0,R.Z)(s,"suggestions",ze,(0,S.Z)(s)),(0,R.Z)(s,"cooldowns",Ye,(0,S.Z)(s)),s.nonSynastryHeals=0,s.gcdStHeal=[],s}return(0,E.Z)(e,[{key:"initialise",value:function(){var t=this;qe.forEach((function(a){t.gcdStHeal.push(t.data.actions[a].id)})),this.addEventHook((0,Y.hX)().source(this.parser.actor.id).type("action").action((0,Y.kw)(this.gcdStHeal)),this.onSingleTargetHealCast),this.addEventHook("complete",this.onComplete)}},{key:"onSingleTargetHealCast",value:function(){this.cooldowns.remaining("SYNASTRY")>0||this.nonSynastryHeals++}},{key:"onComplete",value:function(){this.suggestions.add(new le.eg({icon:this.data.actions.SYNASTRY.icon,content:(0,ne.jsx)(Ja.Trans,{id:"ast.synastry.suggestion.content",defaults:"Try to use <0/> if you need to cast a single-target GCD heal. The GCD heal itself is already an efficiency loss, so it's better to make it as strong as possible if Synastry is not needed soon.",components:[(0,ne.jsx)(Ka.P9,{action:"SYNASTRY"})]}),tiers:Qe.WASTED_ST_HEAL_TIERS,value:this.nonSynastryHeals,why:(0,ne.jsx)(Ja.Trans,{id:"ast.synastry.suggestion.why",defaults:"{0, plural, one {# single-target GCD heal was cast} other {# single-target GCD heals were cast}} without synastry even though it was available.",values:{0:this.nonSynastryHeals}})}))}}]),e}(z.qk),Ve.handle="synastry",Fe=Je,Be=(0,O.Z)(Fe.prototype,"data",[V.I,Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),ze=(0,O.Z)(Fe.prototype,"suggestions",[V.I,_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Ye=(0,O.Z)(Fe.prototype,"cooldowns",[V.I,Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),Fe),ts=e(37517),as=function(t){(0,l.Z)(e,t);var a=(0,c.Z)(e);function e(){var t,s;(0,r.Z)(this,e);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(s=a.call.apply(a,d()(t=[this]).call(t,n))).prependMessages=(0,ne.jsx)(Re.Z,{children:(0,ne.jsx)(Ja.Trans,{id:"ast.tincture.prepend.content",defaults:"Tracking for <0/> will be added in a future update, but make sure you get as many uses as possible in each Tincture window.",components:[(0,ne.jsx)(Ka.P9,{action:"LORD_OF_CROWNS"})]})}),s}return(0,E.Z)(e,[{key:"initialise",value:function(){(0,ue.Z)((0,de.Z)(e.prototype),"initialise",this).call(this),this.trackOnlyActions([this.data.actions.FALL_MALEFIC.id,this.data.actions.COMBUST_III.id,this.data.actions.GRAVITY_II.id,this.data.actions.ASTRODYNE.id,this.data.actions.MACROCOSMOS.id,this.data.actions.LORD_OF_CROWNS.id,this.data.actions.EARTHLY_STAR.id,this.data.actions.DIVINATION.id]),this.addEvaluator(new ts.np({expectedActions:[{action:this.data.actions.COMBUST_III,expectedPerWindow:1},{action:this.data.actions.ASTRODYNE,expectedPerWindow:1},{action:this.data.actions.DIVINATION,expectedPerWindow:1}],suggestionIcon:this.data.actions.INFUSION_MND.icon,suggestionContent:(0,ne.jsx)(Ja.Trans,{id:"ast.tincture.suggestions.trackedActions.content",defaults:"Try to cover as much damage as possible with your Tinctures of Mind."}),suggestionWindowName:(0,ne.jsx)(Ka.P9,{action:"INFUSION_MND",showIcon:!1}),severityTiers:{1:le.bI.MINOR,2:le.bI.MEDIUM,3:le.bI.MAJOR}}))}}]),e}(e(90137).J),es=[p,re,Ya,ce,pe,ye,Ie,Se,Ce,we,be,Me,Ne,i.e,De,n.e,Le,We,Xe,$e,as]},70291:function(t){t.exports=function(t,a){for(var e=null==t?0:t.length;e--&&!1!==a(t[e],e,t););return t}},35865:function(t,a,e){var s=e(44370),i=e(99291)(s,!0);t.exports=i},44370:function(t,a,e){var s=e(27473),i=e(3674);t.exports=function(t,a){return t&&s(t,a,i)}},27473:function(t,a,e){var s=e(25063)(!0);t.exports=s},1757:function(t){t.exports=function(t,a,e){for(var s=-1,i=t.length,n=a.length,o={};++s<i;){var r=s<n?a[s]:void 0;e(o,t[s],r)}return o}},54290:function(t,a,e){var s=e(6557);t.exports=function(t){return"function"==typeof t?t:s}},85004:function(t,a,e){var s=e(70291),i=e(35865),n=e(54290),o=e(1469);t.exports=function(t,a){return(o(t)?s:i)(t,n(a))}},7287:function(t,a,e){var s=e(34865),i=e(1757);t.exports=function(t,a){return i(t||[],a||[],s)}}}]);
//# sourceMappingURL=jobs-ast.4fb82ac7.js.map
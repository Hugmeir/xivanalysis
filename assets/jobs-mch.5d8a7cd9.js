"use strict";(self.webpackChunk_xivanalysis_client=self.webpackChunk_xivanalysis_client||[]).push([[6647],{61806:function(t,e,a){a.d(e,{E:function(){return J}});var i,n,s,o,r,l,c,d,u,h,m,p,f=a(97530),g=a(19623),v=a(99021),y=a(23257),w=a(68420),E=a(27344),A=a(5281),Z=a(90306),b=a(50596),R=a(300),C=a(77766),I=a.n(C),T=a(39392),k=a.n(T),H=a(36384),D=a.n(H),x=a(20116),O=a.n(x),_=a(80426),j=a.n(_),S=a(94473),L=a.n(S),N=a(2991),U=a.n(N),G=a(86359),W=a(28683),M=a(76704),B=a(8510),P=a(81336),F=a(73947),z=a(56611),Q=(a(67294),a(45150)),X=a(40753),q="ActionTimeline-module_chargeGain__3-Of9",Y="ActionTimeline-module_icon__8OvsF",V=a(85893);!function(t){t[t.CHARGE_GAIN=0]="CHARGE_GAIN",t[t.ACTION=1]="ACTION"}(p||(p={}));var J=(i=Reflect.metadata("design:type",B.Z),n=Reflect.metadata("design:type",P.w),s=Reflect.metadata("design:type",F.V),o=Reflect.metadata("design:type",z.TY),m=h=function(t){(0,Z.Z)(a,t);var e=(0,b.Z)(a);function a(){var t,i;(0,w.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,I()(t=[this]).call(t,s)),(0,y.Z)(i,"castTime",l,(0,A.Z)(i)),(0,y.Z)(i,"cooldowns",c,(0,A.Z)(i)),(0,y.Z)(i,"data",d,(0,A.Z)(i)),(0,y.Z)(i,"timeline",u,(0,A.Z)(i)),i.resolvedRows=[],i.groupRows=new(k()),i}return(0,E.Z)(a,[{key:"getRow",value:function(t){return this.addRow({content:[t]})}},{key:"initialise",value:function(){var t,e=(0,v.Z)(this.constructor.rows);try{for(e.s();!(t=e.n()).done;){var a=t.value,i=this.resolveConfig(a);this.resolvedRows.push(i),this.addRow(i)}}catch(t){e.e(t)}finally{e.f()}this.addEventHook("complete",this.onComplete)}},{key:"onComplete",value:function(){var t,e,a=this,i=new(D()),n=(0,v.Z)(this.resolvedRows);try{for(n.s();!(e=n.n()).done;){var s=e.value,o=this.addRow(s);this.populateRow(o,s),s.content.forEach((function(t){return a.cooldowns.groups(t).forEach((function(t){return i.add(t)}))}))}}catch(t){n.e(t)}finally{n.f()}O()(t=this.cooldowns.allGroups()).call(t,(function(t){return!i.has(t)})).forEach((function(t){var e={content:[t]},i=a.addRow(e);a.populateRow(i,e)}))}},{key:"resolveConfig",value:function(t){var e=t;return("object"!==(0,g.Z)(e)||Array.isArray(e))&&(e={content:e}),(0,f.Z)((0,f.Z)({},e),{},{content:(0,X.rY)(e.content)})}},{key:"addRow",value:function(t){var e,a,i=this,n=j()(e=t.content).call(e,(function(t){return i.cooldowns.groups(t)})),s=L()(a=U()(n).call(n,(function(t){return i.groupRows.get(t)}))).call(a,X.$K);if(null!=s)return s;var o,r=t.content[0],l=null!=t.label?t.label:"GCD"===r?(0,V.jsx)(G.Trans,{id:"core.action-timeline.label.gcd",defaults:"GCD"}):"string"==typeof r?i.data.actions[r].name:"number"==typeof r?null===(o=i.cooldowns.cooldownHistory(r)[0])||void 0===o?void 0:o.action.name:r.name,c=this.timeline.addRow(new z.vo({label:l,order:t.order,collapse:!0}));return n.forEach((function(t){return i.groupRows.set(t,c)})),c}},{key:"populateRow",value:function(t,e){var a=this,i=e.content;this.addCooldownItems(t,j()(i).call(i,(function(t){return a.cooldowns.cooldownHistory(t)}))),this.addChargeItems(t,j()(i).call(i,(function(t){return a.cooldowns.chargeHistory(t)})))}},{key:"addCooldownItems",value:function(t,e){var a,i=(0,v.Z)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=this.getCooldownDuration(n),o=n.start-this.parser.pull.timestamp,r=o+s;t.addItem(new z.ct({start:o,end:r,content:(0,V.jsx)("div",{className:"ActionTimeline-module_cooldown__3u1x3"})}))}}catch(t){i.e(t)}finally{i.f()}}},{key:"addChargeItems",value:function(t,e){var a,i=(0,v.Z)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=n.delta<0?new z.tC({depth:p.ACTION,start:n.timestamp-this.parser.pull.timestamp,action:n.action}):new K({depth:p.CHARGE_GAIN,start:n.timestamp-this.parser.pull.timestamp});t.addItem(s)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getCooldownDuration",value:function(t){var e=t.end-t.start;if(t.endReason===P.g.EXPIRED){var a,i=null!==(a=this.castTime.forAction(t.action.id,t.start))&&void 0!==a?a:0;e=Math.max(e,i+100)}return e}}]),a}(W.qk),h.handle="actionTimeline",h.debug=!1,h.rows=[{content:"GCD",order:-97}],r=m,l=(0,R.Z)(r.prototype,"castTime",[M.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),c=(0,R.Z)(r.prototype,"cooldowns",[M.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.cooldowns}}),d=(0,R.Z)(r.prototype,"data",[M.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),u=(0,R.Z)(r.prototype,"timeline",[M.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),r),K=function(t){(0,Z.Z)(a,t);var e=(0,b.Z)(a);function a(){var t,i;(0,w.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(i=e.call.apply(e,I()(t=[this]).call(t,s))).Content=function(){return(0,V.jsx)("div",{className:q,children:(0,V.jsx)(Q.Z,{name:"angle double up",className:Y})})},i}return a}(z.Pp)},50281:function(t,e,a){a.d(e,{e:function(){return G}});var i,n,s,o,r,l,c,d,u,h,m,p,f,g,v,y=a(23257),w=a(68420),E=a(27344),A=a(5281),Z=a(90306),b=a(50596),R=a(300),C=a(77766),I=a.n(C),T=a(86359),k=a(84626),H=a(28683),D=a(74489),x=a(76704),O=a(8510),_=a(52102),j=a(73947),S=a(51691),L=a(83459),N=a(48453),U=(a(67294),a(85893)),G=(i=Reflect.metadata("design:type",O.Z),n=Reflect.metadata("design:type",_.ZP),s=Reflect.metadata("design:type",j.V),o=Reflect.metadata("design:type",S.Z),r=Reflect.metadata("design:type",L.E),l=Reflect.metadata("design:type",N.a),v=g=function(t){(0,Z.Z)(a,t);var e=(0,b.Z)(a);function a(){var t,i;(0,w.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,I()(t=[this]).call(t,s)),(0,y.Z)(i,"castTime",d,(0,A.Z)(i)),(0,y.Z)(i,"checklist",u,(0,A.Z)(i)),(0,y.Z)(i,"data",h,(0,A.Z)(i)),(0,y.Z)(i,"downtime",m,(0,A.Z)(i)),(0,y.Z)(i,"globalCooldown",p,(0,A.Z)(i)),(0,y.Z)(i,"speedAdjustments",f,(0,A.Z)(i)),i.gcdUptime=0,i.gcdsCounted=0,i.lastBeginCast=void 0,i}return(0,E.Z)(a,[{key:"initialise",value:function(){this.addEventHook((0,D.hX)().source(this.parser.actor.id).type("prepare"),this.onBeginCast),this.addEventHook((0,D.hX)().source(this.parser.actor.id).type("action"),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onBeginCast",value:function(t){this.lastBeginCast=t}},{key:"onCast",value:function(t){var e,a,i=this.data.getAction(t.action);if(null!=i&&null!=i.onGcd&&i.onGcd){var n=null!==(e=this.castTime.forEvent(t))&&void 0!==e?e:0;n>=this.globalCooldown.getDuration()&&(n+=k.C);var s=null!==(a=this.castTime.recastForEvent(t))&&void 0!==a?a:0,o=null!=this.lastBeginCast&&this.lastBeginCast.action===t.action?this.lastBeginCast.timestamp:t.timestamp;if(this.considerCast(i,o)){var r,l,c,d,u,h,m,p=t.timestamp-this.parser.pull.timestamp;n>p?(this.debug(I()(r=I()(l=I()(c=I()(d="GCD Uptime for precast ".concat(i.name," at ")).call(d,this.parser.formatEpochTimestamp(t.timestamp,1)," - Cast time: ")).call(c,n," | Recast time: ")).call(l,s," | Time of completion: ")).call(r,p)),this.gcdUptime+=Math.max(0,p)):(this.debug(I()(u=I()(h=I()(m="GCD Uptime for ".concat(i.name," at ")).call(m,this.parser.formatEpochTimestamp(t.timestamp,1)," - Cast time: ")).call(h,n," | Recast time: ")).call(u,s)),this.gcdUptime+=Math.max(n,s)),this.gcdsCounted+=1}else{var f;this.debug(I()(f="Excluding cast of ".concat(i.name," at ")).call(f,this.parser.formatEpochTimestamp(t.timestamp,1)))}this.lastBeginCast=void 0}}},{key:"considerCast",value:function(t,e){return!this.downtime.isDowntime(e)}},{key:"getUptimePercent",value:function(){var t,e,a;this.debug(I()(t="Observed ".concat(this.gcdsCounted," GCDs for a total of ")).call(t,this.gcdUptime," ms of uptime"));var i=this.parser.currentDuration-this.downtime.getDowntime(),n=this.gcdUptime/i*100;return this.debug(I()(e=I()(a="Total fight duration: ".concat(this.parser.currentDuration," - Downtime: ")).call(a,this.downtime.getDowntime()," - Uptime percentage ")).call(e,n)),n}},{key:"onComplete",value:function(){0!==this.gcdUptime&&this.checklist.add(new _.$9({name:(0,U.jsx)(T.Trans,{id:"core.always-cast.title",defaults:"Always be casting"}),description:(0,U.jsx)(T.Trans,{id:"core.always-cast.description",defaults:"Make sure you're always doing something. It's often better to make small mistakes while keeping the GCD rolling than it is to perform the correct rotation slowly."}),displayOrder:-1,requirements:[new _.nb({name:(0,U.jsx)(T.Trans,{id:"core.always-cast.gcd-uptime",defaults:"GCD Uptime"}),percent:this.getUptimePercent()})],target:98}))}}]),a}(H.qk),g.handle="abc",g.debug=!1,c=v,d=(0,R.Z)(c.prototype,"castTime",[x.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.castTime}}),u=(0,R.Z)(c.prototype,"checklist",[x.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.checklist}}),h=(0,R.Z)(c.prototype,"data",[x.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),m=(0,R.Z)(c.prototype,"downtime",[x.I,o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),p=(0,R.Z)(c.prototype,"globalCooldown",[x.I,r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.globalCooldown}}),f=(0,R.Z)(c.prototype,"speedAdjustments",[x.I,l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),c)},83459:function(t,e,a){a.d(e,{E:function(){return x}});var i,n,s,o,r,l,c,d,u,h=a(23257),m=a(68420),p=a(27344),f=a(5281),g=a(90306),v=a(50596),y=a(300),w=a(77766),E=a.n(w),A=a(86359),Z=a(59652),b=a(84626),R=(a(67294),a(28683)),C=a(76704),I=a(73947),T=a(48453),k=a(51422),H=a(85893),D={__all:{id:"core.gcd.no-statistics.v2",defaults:"This GCD recast is an *estimate*, and may be incorrect. If it is reporting a GCD recast *longer* than reality, you likely need to focus on keeping your GCD rolling."},legacyFflogs:{id:"core.gcd.estimate-help.fflogs",defaults:"Precise attribute values are only available from FF Logs for the player who logged the report in ACT."}},x=(i=Reflect.metadata("design:type",I.V),n=Reflect.metadata("design:type",k.gy),s=Reflect.metadata("design:type",T.a),u=d=function(t){(0,g.Z)(a,t);var e=(0,v.Z)(a);function a(){var t,i;(0,m.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,E()(t=[this]).call(t,s)),(0,h.Z)(i,"data",r,(0,f.Z)(i)),(0,h.Z)(i,"statistics",l,(0,f.Z)(i)),(0,h.Z)(i,"speedAdjustments",c,(0,f.Z)(i)),i}return(0,p.Z)(a,[{key:"initialise",value:function(){this.addEventHook("complete",this.onComplete)}},{key:"getDuration",value:function(){return this.speedAdjustments.getAdjustedDuration({duration:b.b})}},{key:"isEstimated",value:function(){return this.speedAdjustments.isAdjustmentEstimated()}},{key:"onComplete",value:function(){var t=this.isEstimated();this.statistics.add(new k.IC({title:t?(0,H.jsx)(A.Trans,{id:"core.gcd.estimated-gcd",defaults:"Estimated GCD"}):(0,H.jsx)(A.Trans,{id:"core.gcd.gcd",defaults:"GCD Recast"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(this.getDuration()),info:t?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Z.Z,{source:D.__all}),(0,H.jsx)(Z.Z,{source:D[this.parser.report.meta.source]})]}):void 0}))}}]),a}(R.qk),d.handle="gcd",o=u,r=(0,y.Z)(o.prototype,"data",[C.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,y.Z)(o.prototype,"statistics",[C.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.statistics}}),c=(0,y.Z)(o.prototype,"speedAdjustments",[C.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.speedAdjustments}}),o)},17982:function(t,e,a){a.d(e,{k:function(){return x}});var i,n,s,o,r,l,c,d,u,h=a(23257),m=a(68420),p=a(27344),f=a(5281),g=a(90306),v=a(50596),y=a(300),w=a(77766),E=a.n(w),A=a(2991),Z=a.n(A),b=a(20116),R=a.n(b),C=a(28683),I=a(74489),T=a(76704),k=a(61806),H=a(73947),D=a(56611),x=(i=Reflect.metadata("design:type",H.V),n=Reflect.metadata("design:type",D.TY),s=Reflect.metadata("design:type",k.E),u=d=function(t){(0,g.Z)(a,t);var e=(0,v.Z)(a);function a(){var t,i;(0,m.Z)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return i=e.call.apply(e,E()(t=[this]).call(t,s)),(0,h.Z)(i,"data",r,(0,f.Z)(i)),(0,h.Z)(i,"timeline",l,(0,f.Z)(i)),(0,h.Z)(i,"actionTimeline",c,(0,f.Z)(i)),i.timelineGroupName="Pet",i.timelineSummonAction=void 0,i.timelineAutosName="Autos",i.timelineCommandsName="Commands",i.canPetBeCommanded=!1,i.autoCasts=[],i.commandCasts=[],i}return(0,p.Z)(a,[{key:"isCommandedEvent",value:function(t){return!1}},{key:"initialise",value:function(){var t,e,a=this,i=Z()(t=R()(e=this.parser.pull.actors).call(e,(function(t){return null!=t.owner&&t.owner.id===a.parser.actor.id}))).call(t,(function(t){return t.id}));this.addEventHook((0,I.hX)().type("action").source((0,I.kw)(i)),this.onCast),this.addEventHook("complete",this.onComplete)}},{key:"onCast",value:function(t){this.isCommandedEvent(t)?this.commandCasts.push(t):this.autoCasts.push(t)}},{key:"onComplete",value:function(){var t;if(this.canPetBeCommanded){var e=this.timeline.addRow(new D.e2({label:this.timelineGroupName,order:-98}));t=e.addRow(new D.e2({label:this.timelineAutosName,order:1}));var a=e.addRow(new D.e2({label:this.timelineCommandsName,order:2}));this.addCastsToRow(a,this.commandCasts)}else if(null!=this.timelineSummonAction){var i=this.data.getAction(this.timelineSummonAction);if(null==i)throw new Error("Timeline summon action set to an invalid action ID");t=this.actionTimeline.getRow(i).addRow(new D.e2({label:this.timelineGroupName,order:-98}))}else t=this.timeline.addRow(new D.e2({label:this.timelineGroupName,order:-98}));this.addCastsToRow(t,this.autoCasts)}},{key:"addCastsToRow",value:function(t,e){var a=this;e.forEach((function(e){var i=a.data.getAction(e.action);if(null!=i){var n=e.timestamp-a.parser.pull.timestamp;t.addItem(new D.tC({action:i,start:n,end:n}))}}))}}]),a}(C.qk),d.handle="pettimeline",o=u,r=(0,y.Z)(o.prototype,"data",[T.I,i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),l=(0,y.Z)(o.prototype,"timeline",[T.I,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),c=(0,y.Z)(o.prototype,"actionTimeline",[T.I,s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.actionTimeline}}),o)},90137:function(t,e,a){a.d(e,{J:function(){return l}});var i=a(68420),n=a(90306),s=a(50596),o=a(77766),r=a.n(o),l=function(t){(0,n.Z)(a,t);var e=(0,s.Z)(a);function a(){var t,n;(0,i.Z)(this,a);for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(n=e.call.apply(e,r()(t=[this]).call(t,o))).buffStatus=n.data.statuses.MEDICATED,n}return a}(a(27596).x);l.handle="tincture",l.title={id:"core.tincture.title",defaults:"Tinctures"}},34702:function(t,e,a){a.r(e),a.d(e,{default:function(){return De}});var i,n=a(41420),s=a(68420),o=a(90306),r=a(50596),l=a(77766),c=a.n(l),d=a(61806),u=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){return(0,s.Z)(this,a),e.apply(this,arguments)}return a}(d.E);u.rows=c()(i=[]).call(i,(0,n.Z)(d.E.rows),["AUTOMATON_QUEEN","QUEEN_OVERDRIVE","WILDFIRE","DETONATOR","BARREL_STABILIZER","HYPERCHARGE","GAUSS_ROUND","RICOCHET","REASSEMBLE","CHAIN_SAW","AIR_ANCHOR","DRILL","FLAMETHROWER","DISMANTLE","TACTICIAN"]);var h,m,p,f,g,v,y,w,E,A,Z,b,R,C,I,T,k,H,D,x,O,_,j,S,L,N,U,G,W,M,B,P,F,z,Q,X,q,Y,V,J,K,$,tt,et,at,it,nt,st,ot=a(27344),rt=a(18527),lt=a(3362),ct=a(32366),dt=a.n(ct),ut=a(74489),ht=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).flameHistory=[],i.currentFlame=void 0,i.flamethrowerInterruptingActionHook=void 0,i}return(0,ot.Z)(a,[{key:"initialise",value:function(){(0,rt.Z)((0,lt.Z)(a.prototype),"initialise",this).call(this);var t=(0,ut.hX)().source(this.parser.actor.id),e=t.action(this.data.actions.FLAMETHROWER.id).type("action"),i=t.status(this.data.statuses.FLAMETHROWER.id).type("statusRemove");this.addEventHook(e,this.onApplyFlamethrower),this.addEventHook(i,this.onRemoveFlamethrower)}},{key:"onApplyFlamethrower",value:function(t){if(null==this.currentFlame){this.currentFlame={start:t.timestamp,end:t.timestamp+this.data.statuses.FLAMETHROWER.duration};var e=(0,ut.hX)().source(this.parser.actor.id).action((0,ut.jg)([this.data.actions.FLAMETHROWER.id])).type("action");this.flamethrowerInterruptingActionHook=this.addEventHook(e,this.onRemoveFlamethrower),this.flameHistory.push(this.currentFlame)}}},{key:"onRemoveFlamethrower",value:function(t){null!=this.currentFlame&&null!=this.flamethrowerInterruptingActionHook&&(this.currentFlame.end=t.timestamp,this.removeEventHook(this.flamethrowerInterruptingActionHook),this.currentFlame=void 0,this.flamethrowerInterruptingActionHook=void 0)}},{key:"considerCast",value:function(t,e){return t===this.data.actions.FLAMETHROWER?(this.debug("Flamethrower began channeling at ".concat(this.parser.formatEpochTimestamp(e))),!1):(0,rt.Z)((0,lt.Z)(a.prototype),"considerCast",this).call(this,t,e)}},{key:"getUptimePercent",value:function(){var t,e=this,a=this.parser.currentDuration-this.downtime.getDowntime(),i=dt()(t=this.flameHistory).call(t,(function(t,a){var i=e.downtime.getDowntime(a.start,a.end);return t+Math.max(a.end-a.start,e.globalCooldown.getDuration())-i}),0);return(this.gcdUptime+i)/a*100}}]),a}(a(50281).e),mt=a(95859),pt=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).suggestionIcon=mt.ZP.HEATED_SPLIT_SHOT.icon,i}return a}(a(47969).G),ft=a(97530),gt=a(44845),vt=a(23257),yt=a(5281),wt=a(300),Et=a(2991),At=a.n(Et),Zt=a(20455),bt=a.n(Zt),Rt=a(86359),Ct=a(9263),It=a(28683),Tt=a(76704),kt=a(73947),Ht=a(51691),Dt=a(56611),xt=a(67294),Ot=a(65927),_t=a(80967),jt=a(68156),St=a(85893),Lt=["AIR_ANCHOR","BIOBLASTER","DRILL","CHAIN_SAW"],Nt=(h=Reflect.metadata("design:type",kt.V),m=Reflect.metadata("design:type",Ht.Z),p=Reflect.metadata("design:type",Dt.TY),E=w=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i,n;(0,s.Z)(this,a);for(var o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return n=e.call.apply(e,c()(t=[this]).call(t,r)),(0,vt.Z)(n,"data",g,(0,yt.Z)(n)),(0,vt.Z)(n,"downtime",v,(0,yt.Z)(n)),(0,vt.Z)(n,"timeline",y,(0,yt.Z)(n)),n.driftIds=[],n.driftedWindows=[],n.currentWindows=(i={},(0,gt.Z)(i,n.data.actions.AIR_ANCHOR.id,{start:n.parser.pull.timestamp,casts:[]}),(0,gt.Z)(i,n.data.actions.DRILL.cooldownGroup,{start:n.parser.pull.timestamp,casts:[]}),(0,gt.Z)(i,n.data.actions.CHAIN_SAW.id,{start:n.parser.pull.timestamp,casts:[]}),i),n}return(0,ot.Z)(a,[{key:"initialise",value:function(){var t=this;this.driftIds=At()(Lt).call(Lt,(function(e){return t.data.actions[e].id}));var e=(0,ut.hX)().type("action").source(this.parser.actor.id);this.addEventHook(e.action((0,ut.kw)(this.driftIds)),this.onDriftableCast),this.addEventHook(e,this.onCast)}},{key:"onDriftableCast",value:function(t){var e,a=this.data.getAction(t.action);if(a&&a.cooldown){var i=null!==(e=a.cooldownGroup)&&void 0!==e?e:a.id,n=this.currentWindows[i],s=t.timestamp,o=Math.min(n.start+a.cooldown,s),r=o;if(this.downtime.isDowntime(o)){var l=this.downtime.getDowntimeWindows(n.start,s)[0];r=l.end,l.end-l.start>15e3&&(r+=12500)}var c=Math.max(0,s-r);c>1500&&this.driftedWindows.push((0,ft.Z)((0,ft.Z)({},n),{},{driftedActionId:t.action,drift:c,end:s})),this.currentWindows[i]={start:s,casts:[]}}}},{key:"onCast",value:function(t){for(var e=0,a=bt()(this.currentWindows);e<a.length;e++)a[e].casts.push(t)}},{key:"output",value:function(){var t,e=this;if(this.driftedWindows.length){var a=(0,St.jsxs)(Ot.Z,{collapsing:!0,unstackable:!0,compact:"very",children:[(0,St.jsx)(Ot.Z.Header,{children:(0,St.jsxs)(Ot.Z.Row,{children:[(0,St.jsx)(Ot.Z.HeaderCell,{children:(0,St.jsx)(Rt.Trans,{id:"mch.drift.timestamp-header",defaults:"Timestamp"})}),(0,St.jsx)(Ot.Z.HeaderCell,{children:(0,St.jsx)(Rt.Trans,{id:"mch.drift.drift-header",defaults:"Drift Issue"})}),(0,St.jsx)(Ot.Z.HeaderCell,{})]})}),(0,St.jsx)(Ot.Z.Body,{children:At()(t=this.driftedWindows).call(t,(function(t){return(0,St.jsxs)(Ot.Z.Row,{children:[(0,St.jsx)(Ot.Z.Cell,{children:e.parser.formatEpochTimestamp(t.end)}),(0,St.jsx)(Ot.Z.Cell,{children:(0,St.jsx)(Rt.Trans,{id:"mch.drift.drift-issue",defaults:"<0/> drifted by {0}",values:{0:e.parser.formatDuration(t.drift)},components:[(0,St.jsx)(Ct.vm,(0,ft.Z)({},e.data.getAction(t.driftedActionId)))]})}),(0,St.jsx)(Ot.Z.Cell,{children:(0,St.jsx)(_t.Z,{onClick:function(){return e.timeline.show(t.start-e.parser.pull.timestamp,t.end+2500-e.parser.pull.timestamp)},children:(0,St.jsx)(Rt.Trans,{id:"mch.drift.timelinelink-button",defaults:"Jump to Timeline"})})})]},t.start)}))})]});return(0,St.jsxs)(xt.Fragment,{children:[(0,St.jsx)(jt.Z,{children:(0,St.jsx)(Rt.Trans,{id:"mch.drift.accordion.message",defaults:"<0/>, <1/>, and <2/> are your strongest GCDs and ideally they should always be kept on cooldown, unless you need to insert a filler GCD to adjust for skill speed. Avoid casting <3/> if Chain Saw, Air Anchor, or Drill will come off cooldown within 8 seconds.",components:[(0,St.jsx)(Ct.vm,{action:"CHAIN_SAW"}),(0,St.jsx)(Ct.vm,{action:"AIR_ANCHOR"}),(0,St.jsx)(Ct.vm,{action:"DRILL"}),(0,St.jsx)(Ct.vm,{action:"HYPERCHARGE"})]})}),a]})}}}]),a}(It.qk),w.handle="drift",w.title={id:"mch.drift.title",defaults:"GCD Drift"},f=E,g=(0,wt.Z)(f.prototype,"data",[Tt.I,h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),v=(0,wt.Z)(f.prototype,"downtime",[Tt.I,m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.downtime}}),y=(0,wt.Z)(f.prototype,"timeline",[Tt.I,p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),f),Ut=a(8333),Gt=a(99021),Wt=a(39392),Mt=a.n(Wt),Bt=a(72119),Pt=a.n(Bt),Ft=a(6767),zt=a.n(Ft),Qt=a(78766),Xt=a(52250),qt=a(40753),Yt={HEAT:{10:Xt.bI.MINOR,30:Xt.bI.MEDIUM,50:Xt.bI.MAJOR},BATTERY:{10:Xt.bI.MINOR,20:Xt.bI.MEDIUM,30:Xt.bI.MAJOR}},Vt=zt()("#D35A10").fade(.25),Jt=zt()("#2C9FCB").fade(.25),Kt=(A=Reflect.metadata("design:type",Xt.ZP),C=R=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,vt.Z)(i,"suggestions",b,(0,yt.Z)(i)),i.heat=i.add(new Qt.qT({graph:{label:(0,St.jsx)(Rt.Trans,{id:"mch.gauge.resource.heat",defaults:"Heat"}),color:Vt}})),i.battery=i.add(new Qt.qT({graph:{label:(0,St.jsx)(Rt.Trans,{id:"mch.gauge.resource.battery",defaults:"Battery"}),color:Jt}})),i.heatModifiers=new(Mt())([[i.data.actions.HEATED_SPLIT_SHOT.id,{event:"damage",type:"generate",amount:5}],[i.data.actions.HEATED_SLUG_SHOT.id,{event:"combo",type:"generate",amount:5}],[i.data.actions.HEATED_CLEAN_SHOT.id,{event:"combo",type:"generate",amount:5}],[i.data.actions.SPREAD_SHOT.id,{event:"damage",type:"generate",amount:5}],[i.data.actions.SCATTERGUN.id,{event:"damage",type:"generate",amount:10}],[i.data.actions.BARREL_STABILIZER.id,{event:"action",type:"generate",amount:50}],[i.data.actions.HYPERCHARGE.id,{event:"action",type:"spend",amount:50}]]),i.batteryModifiers=new(Mt())([[i.data.actions.HEATED_CLEAN_SHOT.id,{event:"combo",type:"generate",amount:10}],[i.data.actions.AIR_ANCHOR.id,{event:"damage",type:"generate",amount:20}],[i.data.actions.CHAIN_SAW.id,{event:"damage",type:"generate",amount:20}],[i.data.actions.AUTOMATON_QUEEN.id,{event:"action",type:"queen",amount:50}]]),i._lastQueenCost=0,i}return(0,ot.Z)(a,[{key:"addGaugeHooks",value:function(t,e){var a,i=[],n=[],s=(0,Gt.Z)(Pt()(e).call(e));try{for(s.s();!(a=s.n()).done;){var o=(0,Ut.Z)(a.value,2),r=o[0];"damage"===o[1].event?i.push(r):n.push(r)}}catch(t){s.e(t)}finally{s.f()}var l=(0,ut.hX)().source(this.parser.actor.id),c=l.type((0,ut.kw)(["action","combo"])).action((0,ut.kw)(n)),d=l.type("damage").cause((0,ut.hX)().type("action").action((0,ut.kw)(i)));this.addEventHook(c,this.onAction(t,e)),this.addEventHook(d,this.onDamage(t,e))}},{key:"initialise",value:function(){(0,rt.Z)((0,lt.Z)(a.prototype),"initialise",this).call(this),this.addGaugeHooks(this.heat,this.heatModifiers),this.addGaugeHooks(this.battery,this.batteryModifiers),this.addEventHook("complete",this.onComplete)}},{key:"lastQueenCost",get:function(){return this._lastQueenCost}},{key:"onAction",value:function(t,e){var a=this;return function(i){var n=e.get(i.action);n&&n.event===i.type&&a.modifyGauge(t,n)}}},{key:"onDamage",value:function(t,e){var a=this;return function(i){if("status"!==i.cause.type&&(0,qt.SV)(i)){var n=e.get(i.cause.action);n&&a.modifyGauge(t,n)}}}},{key:"modifyGauge",value:function(t,e){"queen"===e.type?(this._lastQueenCost=t.value,t.reset()):"generate"===e.type?t.generate(e.amount):t.spend(e.amount)}},{key:"onComplete",value:function(){this.suggestions.add(new Xt.eg({icon:this.data.actions.HYPERCHARGE.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.gauge.suggestions.heat-waste.content",defaults:"Try not to let your Heat gauge overcap, as it may cost you Overheat windows over the course of the fight."}),tiers:Yt.HEAT,value:this.heat.overCap,why:(0,St.jsx)(Rt.Trans,{id:"mch.gauge.suggestions.heat-waste.why",defaults:"You lost {0} Heat to an overcapped gauge.",values:{0:this.heat.overCap}})})),this.suggestions.add(new Xt.eg({icon:this.data.actions.AUTOMATON_QUEEN.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.gauge.suggestions.battery-waste.content",defaults:"Try not to let your Battery gauge overcap, as it may cost you <0/> uses over the course of the fight.",components:[(0,St.jsx)(Ct.P9,{action:"AUTOMATON_QUEEN"})]}),tiers:Yt.BATTERY,value:this.battery.overCap,why:(0,St.jsx)(Rt.Trans,{id:"mch.gauge.suggestions.battery-waste.why",defaults:"You lost {0} Battery to an overcapped gauge.",values:{0:this.battery.overCap}})}))}}]),a}(Qt.aC),R.title={id:"mch.gauge.title",defaults:"Heat & Battery Gauge"},Z=C,b=(0,wt.Z)(Z.prototype,"suggestions",[Tt.I,A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Z),$t=a(48945),te=100,ee=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).trackedCds=[{cooldowns:[i.data.actions.WILDFIRE],firstUseOffset:1e4},{cooldowns:[i.data.actions.BARREL_STABILIZER],firstUseOffset:3e3},{cooldowns:[i.data.actions.REASSEMBLE],allowedAverageDowntime:5e3,firstUseOffset:-3e3},{cooldowns:[i.data.actions.AIR_ANCHOR],allowedAverageDowntime:te,firstUseOffset:0},{cooldowns:[i.data.actions.DRILL,i.data.actions.BIOBLASTER],allowedAverageDowntime:te,firstUseOffset:2500},{cooldowns:[i.data.actions.CHAIN_SAW],allowedAverageDowntime:te,firstUseOffset:12500},{cooldowns:[i.data.actions.GAUSS_ROUND],firstUseOffset:3e3,resetBy:{actions:[i.data.actions.HEAT_BLAST],refundAmount:15e3}},{cooldowns:[i.data.actions.RICOCHET],firstUseOffset:3e3,resetBy:{actions:[i.data.actions.HEAT_BLAST],refundAmount:15e3}}],i}return a}($t.u),ae=a(20116),ie=a.n(ae),ne=a(78580),se=a.n(ne),oe=a(71370),re=a(19914),le=a(30919),ce=["HEAT_BLAST","AUTO_CROSSBOW"],de=(I=Reflect.metadata("design:type",kt.V),T=Reflect.metadata("design:type",Dt.TY),O=x=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,vt.Z)(i,"data",H,(0,yt.Z)(i)),(0,vt.Z)(i,"timeline",D,(0,yt.Z)(i)),i.history=new re.A((function(){return[]})),i.rotationHook=void 0,i.hyperchargeGcds=At()(ce).call(ce,(function(t){return i.data.actions[t].id})),i.hyperchargeDuration=i.parser.patch.before("6.3")?8e3:1e4,i.createTimelineButton=function(t){return(0,St.jsx)(_t.Z,{circular:!0,compact:!0,icon:"time",size:"mini",onClick:function(){return i.timeline.show(t-i.parser.pull.timestamp,t-i.parser.pull.timestamp)},content:i.parser.formatEpochTimestamp(t)})},i}return(0,ot.Z)(a,[{key:"initialise",value:function(){var t=(0,ut.hX)().source(this.parser.actor.id).type("action").action(this.data.actions.HYPERCHARGE.id);this.addEventHook(t,this.onHypercharge),this.addEventHook({type:"death",actor:this.parser.actor.id},this.endCurrentWindow),this.addEventHook("complete",this.endCurrentWindow)}},{key:"endCurrentWindow",value:function(t){this.rotationHook&&(this.removeEventHook(this.rotationHook),this.rotationHook=void 0),this.history.closeCurrent(t.timestamp)}},{key:"onHypercharge",value:function(t){this.endCurrentWindow(t),this.rotationHook=this.addEventHook((0,ut.hX)().source(this.parser.actor.id).type("action"),this.onCast),this.history.openNew(t.timestamp)}},{key:"onCast",value:function(t){var e=this.history.getCurrent();null!=e&&(t.timestamp>e.start+this.hyperchargeDuration?this.endCurrentWindow(t):e.data.push(t))}},{key:"formatGcdCount",value:function(t){return 0===t?(0,St.jsx)("span",{className:"text-error",children:t}):t<=4?(0,St.jsx)("span",{className:"text-warning",children:t}):t}},{key:"output",value:function(){var t,e=this;if(0!==Pt()(this.history).length){var a=At()(t=Pt()(this.history)).call(t,(function(t){var a,i=ie()(a=t.data).call(a,(function(t){var a;return se()(a=e.hyperchargeGcds).call(a,t.action)})).length;return{title:{key:"title-"+t.start,content:(0,St.jsxs)(xt.Fragment,{children:[e.createTimelineButton(t.start)," ",e.formatGcdCount(i)," / ",5," ",(0,St.jsx)(Rt.Trans,{id:"mch.hypercharge.panel-count",defaults:"{0, plural, one {Hypercharge GCD} other {Hypercharge GCDs}}",values:{0:t.data.length}})]})},content:{key:"content-"+t.start,content:(0,St.jsx)(oe.Z,{events:t.data})}}}));return(0,St.jsxs)(xt.Fragment,{children:[(0,St.jsx)(jt.Z,{children:(0,St.jsx)(Rt.Trans,{id:"mch.hypercharge.accordion.message",defaults:"Every Hypercharge window should ideally include {HYPERCHARGE_GCD_TARGET} casts of <0/> or <1/> and enough casts of <2/> and <3/> to avoid overcapping their charges. If you clip a lot while weaving, overcapping is still preferable to dropping a Hypercharge GCD. Each Hypercharge window below indicates how many GCDs it contained and will display all the casts in the window if expanded.",values:{HYPERCHARGE_GCD_TARGET:5},components:[(0,St.jsx)(Ct.P9,{action:"HEAT_BLAST"}),(0,St.jsx)(Ct.P9,{action:"AUTO_CROSSBOW"}),(0,St.jsx)(Ct.P9,{action:"GAUSS_ROUND"}),(0,St.jsx)(Ct.P9,{action:"RICOCHET"})]})}),(0,St.jsx)(le.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})]})}}}]),a}(It.qk),x.handle="hypercharge",x.title={id:"mch.hypercharge.title",defaults:"Hypercharge Windows"},k=O,H=(0,wt.Z)(k.prototype,"data",[Tt.I,I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),D=(0,wt.Z)(k.prototype,"timeline",[Tt.I,T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),k),ue=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).trackedDefensives=[i.data.actions.DISMANTLE,i.data.actions.TACTICIAN],i}return a}(a(12541).O),he=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).suggestionIcon=mt.ZP.SPREAD_SHOT.icon,i.trackedActions=[{aoeAction:mt.ZP.BIOBLASTER,stActions:[mt.ZP.DRILL],minTargets:2},{aoeAction:mt.ZP.AUTO_CROSSBOW,stActions:[mt.ZP.HEAT_BLAST],minTargets:3},{aoeAction:mt.ZP.SCATTERGUN,stActions:[mt.ZP.HEATED_SPLIT_SHOT],minTargets:3}],i}return a}(a(54106).C),me=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).timelineGroupName="Automaton Queen",i.timelineSummonAction=mt.ZP.AUTOMATON_QUEEN.id,i}return a}(a(17982).k),pe=["CHAIN_SAW","AIR_ANCHOR","DRILL","SCATTERGUN"],fe=["BIOBLASTER","HEAT_BLAST","AUTO_CROSSBOW","HEATED_SPLIT_SHOT","HEATED_SLUG_SHOT","HEATED_CLEAN_SHOT"],ge={BAD_USES:{1:Xt.bI.MINOR,2:Xt.bI.MEDIUM,3:Xt.bI.MAJOR},DROPPED_USES:{1:Xt.bI.MEDIUM,2:Xt.bI.MAJOR}},ve=(_=Reflect.metadata("design:type",kt.V),j=Reflect.metadata("design:type",Xt.ZP),G=U=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i,o;(0,s.Z)(this,a);for(var r=arguments.length,l=new Array(r),d=0;d<r;d++)l[d]=arguments[d];return o=e.call.apply(e,c()(t=[this]).call(t,l)),(0,vt.Z)(o,"data",L,(0,yt.Z)(o)),(0,vt.Z)(o,"suggestions",N,(0,yt.Z)(o)),o.state={active:!1,lastGcdTime:0},o.history={badUses:0,droppedUses:0},o.reassembleGcdIds=At()(pe).call(pe,(function(t){return o.data.actions[t].id})),o.otherGcdIds=At()(fe).call(fe,(function(t){return o.data.actions[t].id})),o.gcdFilter=(0,ut.hX)().source(o.parser.actor.id).type("action").action((0,ut.kw)(c()(i=[]).call(i,(0,n.Z)(o.reassembleGcdIds),(0,n.Z)(o.otherGcdIds)))),o}return(0,ot.Z)(a,[{key:"initialise",value:function(){var t=(0,ut.hX)().source(this.parser.actor.id).status(this.data.statuses.REASSEMBLED.id);this.addEventHook(t.type("statusApply"),this.onReassemble),this.addEventHook(t.type("statusRemove"),this.onRemove),this.addEventHook("complete",this.onComplete)}},{key:"onReassemble",value:function(){this.state.active&&(this.history.droppedUses+=1),this.state.gcdHook=this.addEventHook(this.gcdFilter,this.onCast),this.state.active=!0}},{key:"onCast",value:function(t){var e;this.state.active&&!se()(e=this.reassembleGcdIds).call(e,t.action)&&(this.history.badUses+=1),this.state.lastGcdTime=t.timestamp}},{key:"onRemove",value:function(t){t.timestamp>this.state.lastGcdTime+100&&(this.history.droppedUses+=1),null!=this.state.gcdHook&&this.removeEventHook(this.state.gcdHook),this.state.active=!1}},{key:"onComplete",value:function(){this.suggestions.add(new Xt.eg({icon:this.data.actions.REASSEMBLE.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.reassemble.suggestions.bad-gcds.content",defaults:"On single targets <0/> should be used on <1/>, <2/>, or <3/>, as they're your strongest GCDs. On multiple targets, you can also use it on <4/>.",components:[(0,St.jsx)(Ct.P9,{action:"REASSEMBLE"}),(0,St.jsx)(Ct.P9,{action:"CHAIN_SAW"}),(0,St.jsx)(Ct.P9,{action:"DRILL"}),(0,St.jsx)(Ct.P9,{action:"AIR_ANCHOR"}),(0,St.jsx)(Ct.P9,{action:"SCATTERGUN"})]}),tiers:ge.BAD_USES,value:this.history.badUses,why:(0,St.jsx)(Rt.Trans,{id:"mch.reassemble.suggestions.bad-gcds.why",defaults:"You used Reassemble on a non-optimal GCD {0, plural, one {# time} other {# times}}.",values:{0:this.history.badUses}})})),this.suggestions.add(new Xt.eg({icon:this.data.actions.REASSEMBLE.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.reassemble.suggestions.dropped.content",defaults:"Avoid using <0/> when a boss is about to go untargetable so you don't waste the buff.",components:[(0,St.jsx)(Ct.P9,{action:"REASSEMBLE"})]}),tiers:ge.DROPPED_USES,value:this.history.droppedUses,why:(0,St.jsx)(Rt.Trans,{id:"mch.reassemble.suggestions.dropped.why",defaults:"You allowed Reassemble to fall off unused {0, plural, one {# time} other {# times}}.",values:{0:this.history.droppedUses}})}))}}]),a}(It.qk),U.handle="reassemble",S=G,L=(0,wt.Z)(S.prototype,"data",[Tt.I,_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),N=(0,wt.Z)(S.prototype,"suggestions",[Tt.I,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),S),ye=a(37517),we=a(90137),Ee=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(t){var i;return(0,s.Z)(this,a),(i=e.call(this,t)).reassembleId=void 0,i.wasReassembleUsed=void 0,i.reassembleId=t.reassembleId,i.wasReassembleUsed=t.wasReassembleUsed,i}return(0,ot.Z)(a,[{key:"countUsed",value:function(t,e){return e.action.id===this.reassembleId?this.wasReassembleUsed(t)?1:0:(0,rt.Z)((0,lt.Z)(a.prototype),"countUsed",this).call(this,t,e)}}]),a}(ye.np),Ae=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(i=e.call.apply(e,c()(t=[this]).call(t,o))).reassembledRemoves=[],i}return(0,ot.Z)(a,[{key:"initialise",value:function(){var t,e,i=this;(0,rt.Z)((0,lt.Z)(a.prototype),"initialise",this).call(this),this.addEventHook((0,ut.hX)().source(this.parser.actor.id).status(this.data.statuses.REASSEMBLED.id).type("statusRemove"),this.onRemoveReassembled);var n=At()(t=ie()(e=this.parser.pull.actors).call(e,(function(t){return t.owner===i.parser.actor}))).call(t,(function(t){return t.id}));this.addEventHook((0,ut.hX)().source((0,ut.kw)(n)).action((0,ut.kw)([this.data.actions.PILE_BUNKER.id,this.data.actions.CROWNED_COLLIDER.id])).type("action"),this.onWindowAction),this.addEvaluator(new Ee({expectedActions:[{action:this.data.actions.WILDFIRE,expectedPerWindow:1},{action:this.data.actions.REASSEMBLE,expectedPerWindow:1},{action:this.data.actions.CROWNED_COLLIDER,expectedPerWindow:1},{action:this.data.actions.DRILL,expectedPerWindow:2},{action:this.data.actions.CHAIN_SAW,expectedPerWindow:1},{action:this.data.actions.AIR_ANCHOR,expectedPerWindow:1}],suggestionIcon:this.data.actions.INFUSION_DEX.icon,suggestionContent:(0,St.jsx)(Rt.Trans,{id:"mch.tincture.suggestions.trackedActions.content",defaults:"Try to cover as much damage as possible with your Tinctures of Dexterity."}),suggestionWindowName:(0,St.jsx)(Ct.P9,{action:"INFUSION_DEX",showIcon:!1}),severityTiers:{2:Xt.bI.MINOR,4:Xt.bI.MEDIUM,6:Xt.bI.MAJOR},reassembleId:this.data.actions.REASSEMBLE.id,wasReassembleUsed:this.wasReassembleUsed.bind(this)}))}},{key:"onRemoveReassembled",value:function(t){this.reassembledRemoves.push(t.timestamp)}},{key:"wasReassembleUsed",value:function(t){var e,a,i=At()(e=ie()(a=t.data).call(a,(function(t){return t.action.onGcd}))).call(e,(function(t){return t.timestamp}));if(0===i.length)return!1;var n=i[0];return this.reassembledRemoves.some((function(e){var a;return n<=e&&e<=(null!==(a=t.end)&&void 0!==a?a:t.start)}))}}]),a}(we.J),Ze=a(73905),be={BAD_WILDFIRE:{1:Xt.bI.MINOR,2:Xt.bI.MEDIUM,3:Xt.bI.MAJOR},FIZZLED_WILDFIRE:{1:Xt.bI.MEDIUM,2:Xt.bI.MAJOR}},Re=(W=Reflect.metadata("design:type",kt.V),M=Reflect.metadata("design:type",Xt.ZP),B=Reflect.metadata("design:type",Dt.TY),q=X=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,vt.Z)(i,"data",F,(0,yt.Z)(i)),(0,vt.Z)(i,"suggestions",z,(0,yt.Z)(i)),(0,vt.Z)(i,"timeline",Q,(0,yt.Z)(i)),i.history=new re.A((function(){return{events:[],stacks:0}})),i.actionHook=void 0,i.durationHook=void 0,i.actionFilter=(0,ut.hX)().source(i.parser.actor.id).type("action"),i}return(0,ot.Z)(a,[{key:"initialise",value:function(){var t=(0,ut.hX)().source(this.parser.actor.id);this.addEventHook(t.type("statusApply").status(this.data.statuses.WILDFIRE.id),this.onApply),this.addEventHook(t.type("damage").cause(this.data.matchCauseStatusId([this.data.statuses.WILDFIRE.id])),this.onDamage),this.addEventHook("complete",this.onComplete)}},{key:"closeWindow",value:function(t){this.history.closeCurrent(t),null!=this.actionHook&&(this.removeEventHook(this.actionHook),this.actionHook=void 0),null!=this.durationHook&&(this.removeTimestampHook(this.durationHook),this.durationHook=void 0)}},{key:"onApply",value:function(t){var e=this;if(null==this.history.getCurrent()){this.history.openNew(t.timestamp),null==this.actionHook&&(this.actionHook=this.addEventHook(this.actionFilter,this.onAction));var a=t.timestamp+this.data.statuses.WILDFIRE.duration;this.durationHook=this.addTimestampHook(a,(function(){return e.closeWindow(a)}))}else this.history.doIfOpen((function(t){return t.stacks++}))}},{key:"onDamage",value:function(t){this.history.doIfOpen((function(e){return e.damage=t.targets[0].amount})),this.closeWindow(t.timestamp)}},{key:"onAction",value:function(t){this.history.doIfOpen((function(e){return e.events.push(t)}))}},{key:"onComplete",value:function(){var t,e;this.history.closeCurrent(this.parser.currentEpochTimestamp);var a=ie()(t=Pt()(this.history)).call(t,(function(t){return t.data.stacks<6})).length,i=ie()(e=Pt()(this.history)).call(e,(function(t){return null==t.data.damage||0===t.data.damage})).length;this.suggestions.add(new Xt.eg({icon:this.data.actions.WILDFIRE.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.suggestions.gcds.content",defaults:"Try to ensure you have a Hypercharge prepared for every <0/> cast to maximize damage. Each GCD in a Wildfire window is worth 150 potency, so maximizing the GCD count with <1/> is important.",components:[(0,St.jsx)(Ct.vm,{action:"WILDFIRE"}),(0,St.jsx)(Ct.vm,{action:"HEAT_BLAST"})]}),tiers:be.BAD_WILDFIRE,value:a,why:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.suggestions.gcds.why",defaults:"{badWildfires} of your Wildfire windows contained fewer than {EXPECTED_GCDS} GCDs.",values:{badWildfires:a,EXPECTED_GCDS:6}})})),this.suggestions.add(new Xt.eg({icon:this.data.actions.WILDFIRE.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.suggestions.fizzle.content",defaults:"Be careful to time your <0/> windows so that the damage resolves during uptime, or detonate them early if necessary to at least get partial potency.",components:[(0,St.jsx)(Ct.vm,{action:"WILDFIRE"})]}),tiers:be.FIZZLED_WILDFIRE,value:i,why:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.suggestions.fizzle.why",defaults:"{fizzledWildfires} of your Wildfire windows ghosted or resolved for 0 damage.",values:{fizzledWildfires:i}})}))}},{key:"output",value:function(){var t,e=this;if(0!==Pt()(this.history).length){var a={header:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.rotation-table.header.gcd-count",defaults:"GCDs"}),accessor:"gcds"},i={header:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.rotation-table.header.damage",defaults:"Damage"}),accessor:"damage"},n=At()(t=Pt()(this.history)).call(t,(function(t){var a,i,n;return{start:t.start-e.parser.pull.timestamp,end:(null!==(a=t.end)&&void 0!==a?a:t.start)-e.parser.pull.timestamp,targetsData:{gcds:{actual:t.data.stacks,expected:6}},notesMap:{damage:null!==(i=t.data.damage)&&void 0!==i?i:0},rotation:At()(n=t.data.events).call(n,(function(t){return{action:t.action}}))}}));return(0,St.jsxs)(xt.Fragment,{children:[(0,St.jsx)(jt.Z,{children:(0,St.jsx)(Rt.Trans,{id:"mch.wildfire.table.message",defaults:"Every <0/> window should ideally include {EXPECTED_GCDS} GCDs to maximize the debuff's potency. Note that a GCD only counts toward Wildfire if the damage lands on the target before Wildfire expires.",values:{EXPECTED_GCDS:6},components:[(0,St.jsx)(Ct.vm,{action:"WILDFIRE"})]})}),(0,St.jsx)(Ze.y,{targets:[a],notes:[i],data:n,onGoto:this.timeline.show})]})}}}]),a}(It.qk),X.handle="wildfire",X.title={id:"mch.wildfire.title",defaults:"Wildfire"},P=q,F=(0,wt.Z)(P.prototype,"data",[Tt.I,W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),z=(0,wt.Z)(P.prototype,"suggestions",[Tt.I,M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),Q=(0,wt.Z)(P.prototype,"timeline",[Tt.I,B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.timeline}}),P),Ce=a(10928),Ie=a.n(Ce),Te=a(32690),ke=["ARM_PUNCH","ROLLER_DASH","PILE_BUNKER","CROWNED_COLLIDER"],He=(Y=Reflect.metadata("design:type",Te.Z),V=Reflect.metadata("design:type",kt.V),J=Reflect.metadata("design:type",Kt),K=Reflect.metadata("design:type",Xt.ZP),st=nt=function(t){(0,o.Z)(a,t);var e=(0,r.Z)(a);function a(){var t,i;(0,s.Z)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=e.call.apply(e,c()(t=[this]).call(t,o)),(0,vt.Z)(i,"brokenLog",tt,(0,yt.Z)(i)),(0,vt.Z)(i,"data",et,(0,yt.Z)(i)),(0,vt.Z)(i,"gauge",at,(0,yt.Z)(i)),(0,vt.Z)(i,"suggestions",it,(0,yt.Z)(i)),i.summons=[],i}return(0,ot.Z)(a,[{key:"initialise",value:function(){var t,e,a=this,i=At()(ke).call(ke,(function(t){return a.data.actions[t].id})),n=At()(t=ie()(e=this.parser.pull.actors).call(e,(function(t){return t.owner===a.parser.actor}))).call(t,(function(t){return t.id})),s=(0,ut.hX)().source(this.parser.actor.id),o=(0,ut.hX)().source((0,ut.kw)(n)).type("damage").cause((0,ut.hX)().type("action").action((0,ut.kw)(i)));this.addEventHook(s.action(this.data.actions.AUTOMATON_QUEEN.id),this.onSummon),this.addEventHook(o,this.onDamage),this.addEventHook("complete",this.onComplete)}},{key:"activeQueen",get:function(){var t=Ie()(this.summons);if(t&&!(0,qt.$K)(t.end))return t}},{key:"handleBrokenLog",value:function(t){var e=this.data.getAction(t);this.brokenLog.trigger(this,"queenless queen attack",(0,St.jsx)(Rt.Trans,{id:"mch.queen.trigger.queenless-queen-attack",defaults:"A cast of <0/> was recorded without the Automaton Queen on the field.",components:[(0,St.jsx)(Ct.vm,(0,ft.Z)({},e))]}))}},{key:"onSummon",value:function(t){this.activeQueen&&(this.activeQueen.end=t.timestamp),this.summons.push({start:t.timestamp,battery:this.gauge.lastQueenCost,rotation:[]})}},{key:"onDamage",value:function(t){if("action"===t.cause.type){if(!this.activeQueen)return this.handleBrokenLog(t.cause.action);this.activeQueen.rotation.push({event:t,action:t.cause.action,damage:t.targets[0].amount}),t.cause.action===this.data.actions.CROWNED_COLLIDER.id&&(this.activeQueen.end=t.timestamp)}}},{key:"onComplete",value:function(){var t,e=this;this.summons.forEach((function(t){return e.debug(t)}));var a=ie()(t=this.summons).call(t,(function(t){var a;return(null===(a=Ie()(t.rotation))||void 0===a?void 0:a.action)!==e.data.actions.CROWNED_COLLIDER.id})).length;this.suggestions.add(new Xt.eg({icon:this.data.actions.AUTOMATON_QUEEN.icon,content:(0,St.jsx)(Rt.Trans,{id:"mch.queen.suggestions.missing-collider.content",defaults:"Try to time your <0/> windows so that they end while the boss is targetable, as Crowned Collider is a significant chunk of its damage. If the boss is about to jump or die, use <1/> to end the window early and get the hit in.",components:[(0,St.jsx)(Ct.vm,{action:"AUTOMATON_QUEEN"}),(0,St.jsx)(Ct.vm,{action:"QUEEN_OVERDRIVE"})]}),tiers:{1:Xt.bI.MEDIUM,3:Xt.bI.MAJOR},value:a,why:(0,St.jsx)(Rt.Trans,{id:"mch.queen.suggestions.missing-collider.why",defaults:"{missedColliders} of your Automaton Queen windows ended without a Crowned Collider.",values:{missedColliders:a}})}))}},{key:"output",value:function(){var t,e=this,a=At()(t=this.summons).call(t,(function(t){var a,i,n=dt()(a=t.rotation).call(a,(function(t,e){return t+e.damage}),0);return{title:{key:"title-"+t.start,content:(0,St.jsx)(Rt.Trans,{id:"mch.queen.panel.content",defaults:"{0}<0> - </0>{1} Battery spent, {totalDamage} total damage",values:{0:e.parser.formatEpochTimestamp(t.start),1:t.battery,totalDamage:n},components:[(0,St.jsx)("span",{})]})},content:{key:"content-"+t.start,content:(0,St.jsx)(oe.Z,{events:At()(i=t.rotation).call(i,(function(t){return t.event}))})}}}));return(0,St.jsxs)(xt.Fragment,{children:[(0,St.jsx)(jt.Z,{children:(0,St.jsx)(Rt.Trans,{id:"mch.queen.accordion.message",defaults:"The list below contains every <0/> window from the fight, indicating when it started, its Battery cost and duration, and how much total damage the Queen did to its target. Expanding an individual window below will display every cast by the Automaton Queen made during it.",components:[(0,St.jsx)(Ct.vm,{action:"AUTOMATON_QUEEN"})]})}),(0,St.jsx)(le.Z,{exclusive:!1,panels:a,styled:!0,fluid:!0})]})}}]),a}(It.qk),nt.handle="queen",nt.title={id:"mch.queen.title",defaults:"Automaton Queen Usage"},$=st,tt=(0,wt.Z)($.prototype,"brokenLog",[Tt.I,Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.brokenLog}}),et=(0,wt.Z)($.prototype,"data",[Tt.I,V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.data}}),at=(0,wt.Z)($.prototype,"gauge",[Tt.I,J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.gauge}}),it=(0,wt.Z)($.prototype,"suggestions",[Tt.I,K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.suggestions}}),$),De=[u,ht,pt,Nt,Kt,ee,de,ue,he,me,ve,Ae,Re,He]}}]);
//# sourceMappingURL=jobs-mch.5d8a7cd9.js.map